(self.webpackChunkscrollytelling_template=self.webpackChunkscrollytelling_template||[]).push([[179],{86702:(e,t,n)=>{"use strict";const r=JSON.parse('{"E":"<section id=\\"vizSection1_0\\" class=\\"viz-section full-page\\"><div class=\\"steps display-none\\"><section class=\\"display-none\\"><p>Hydro-Québec</p></section></div><div class=\\"viz\\" id=\\"viz\\"><div id=\\"vizSection1_0_0\\" class=\\"iframeContainer game-area\\"></div></div></section>"}');var a=n(40207),c=n(67294),o=n(25935);function i(e){var t=c.createElement("section",{className:"intro-section ".concat(e.classes)},c.createElement("h5",{className:"overTitle"},e.amorce),c.createElement("h1",null,(0,o.ZP)(e.optionData.title)),c.createElement("address",null,c.createElement("div",{className:"date"})));return e.background?c.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},t):t}var l,u=n(45697),s=n.n(u);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}s().string.isRequired,s().string.isRequired,s().oneOf(["eager","lazy"]);var p="intro-titre",d="pleine-page-titre",f="texte-classique",v="viz-section",g="centré",h=(m(l={titre:"Titre",auteurs:"Auteurs",date:"Date"},"date","Date"),m(l,"urls","LienAuteurs"),m(l,"lienfichiersource","LienFichierSource"),l);n(93162);var b=n(38682);function E(e){try{JSON.parse(e)}catch(e){return!1}return!0}function y(e){return Array.from(e.split(";")).join(" ")}function w(e){return{title:e[0][h.titre],authors:e[0][h.auteurs],urls:e[0][h.urls],date:e[0][h.date]}}n(9208);n(83731).accessToken="pk.eyJ1IjoibGVkZXZvaXIiLCJhIjoiY2p2bW81dHU2MWV1cTRhcXIzaXZqMGYxciJ9.WrIF8o69aR_TstDFu6Qyag",n(6899);var S=n(20745);function P(e){var t=function(e){return Math.abs(e)>1?"".concat(e,"&nbsp;jetons"):"".concat(e,"&nbsp;jeton")};return(0,c.useEffect)((function(){b.Ys(".gauges").selectAll(".gauge").nodes().forEach((function(t){var n=50;"dollars"===b.Ys(t).attr("id")&&(n=e.dollars);var r=n>0?Math.round(e.committed/50*100):0,a=n>0?Math.round(n/50*100):0;b.Ys(t).select(".gaugeColorHolder").select(".committed").style("width","".concat(r,"%")),b.Ys(t).select(".gaugeColor").style("width","".concat(a,"%"))}))})),c.createElement("div",{className:"gauges"},c.createElement("div",{id:"dollars",className:"gauge dollarGauge"},c.createElement("div",{className:"gaugeColorHolder ".concat(e.dollars<0?"red":"")},c.createElement("div",{className:"gaugeColor ".concat(e.dollars<0?"red":e.gaugeExplain?"lightblue":"blue")}),0!=e.committed?c.createElement("div",{className:"committed ".concat(e.dollars<0?"red":e.gaugeExplain?"lightblue":"blue")}):"",e.mission?c.createElement("div",{className:"value arrowGauge"},c.createElement("div",{className:"labelHolder"},c.createElement("p",null,c.createElement("b",null,"Budget total"))),c.createElement("div",{className:"arrow"},c.createElement("div",{className:"rect"}),c.createElement("div",{className:"rect-1"}),c.createElement("div",{className:"rect-2"})),c.createElement("div",{className:"labelHolder",style:{textAlign:"right"}},c.createElement("p",{style:{paddingRight:"7px"}},c.createElement("b",null,(0,o.ZP)(t(e.dollars)))))):e.gaugeExplain?c.createElement("div",{className:"value gaugeExplain"},c.createElement("div",{className:"budgetStamp"},c.createElement("p",null,c.createElement("b",null,"Budget"))),c.createElement("div",{className:"labelHolder"}),c.createElement("div",{className:"labelHolder",style:{textAlign:"right"}},c.createElement("p",{style:{paddingRight:"7px"}},c.createElement("b",null,(0,o.ZP)(t(e.dollars-25)))))):c.createElement("div",{className:"value basicGauge"},c.createElement("div",{className:"labelHolder"},c.createElement("p",null,c.createElement("b",null,"Budget"))),c.createElement("div",{className:"labelHolder",style:{textAlign:"right"}},c.createElement("p",{style:{paddingRight:"7px"}},c.createElement("b",null,(0,o.ZP)(t(e.dollars)))))))))}function N(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){N(c,r,a,o,i,"next",e)}function i(e){N(c,r,a,o,i,"throw",e)}o(void 0)}))}}function I(e){var t=(0,c.useCallback)(x(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.gameStart();case 1:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"gameBox transparent"},c.createElement("div",{className:"introBox"},e.introElem),c.createElement("div",{className:"userBox"},c.createElement("div",{className:"startbutton",onClick:t},c.createElement("p",null,"Commencer le jeu"))))}function k(e){return(0,c.useEffect)((function(){e.transition&&setTimeout((function(){b.Ys(".monitoring_value").transition().duration(1e3).style("opacity",1)}),200)}),[]),c.createElement("div",{className:"monitoring"},c.createElement("div",{className:"monitoring_content"},c.createElement("div",{className:"column"},c.createElement("div",{className:"monitoring_value ".concat(e.transition?"transition":"")},c.createElement(P,{rightarrows:e.rightarrows,gaugeExplain:e.gaugeExplain,mission:e.mission,dollars:e.dollars,committed:e.committed})))),e.terawatts||0===e.terawatts?c.createElement("div",{className:"monitoring_content"},c.createElement("div",{className:"column"},c.createElement("div",{className:"monitoring_header"},c.createElement("h5",null,c.createElement("b",null,"Électricité produite")," • ",e.terawatts," TWh")))):c.createElement("div",null))}function C(e){return e.split("_").slice(1).map((function(e){return parseInt(e)}))}n(97762);var T=function(e){return 0===parseInt(e)||parseInt(e)<0?"":"ENCAISSER "};function D(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){D(c,r,a,o,i,"next",e)}function i(e){D(c,r,a,o,i,"throw",e)}o(void 0)}))}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e){var t,n,r=(t=(0,c.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],i=r[1];(0,c.useEffect)((function(){}),[]),(0,c.useEffect)((function(){var e=b.td_(".choicebutton");e.select(".butn").classed("selected",!1),a?(b.Ys(a.obj).select(".butn").classed("selected",!0),e.select(".butn").style("opacity","0.5"),b.Ys(a.obj).select(".butn").style("opacity","1")):e.select(".butn").style("opacity","1")}),[a]);var l=(0,c.useCallback)(function(){var t=_(regeneratorRuntime.mark((function t(n,r,a){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(c=String(e.curPrompt.Trigger_next).split(";")).length>1?e.changePrompt(String(c[a]).replace(/(\r\n|\n|\r)/gm,"")):e.changePrompt(String(c[0]).replace(/(\r\n|\n|\r)/gm,"")),"Q2"===e.curPrompt.ID&&0===a&&e.updateMemoryObj("investedModernization",!0),"Q6"===e.curPrompt.ID&&0===a&&e.updateMemoryObj("acceptedChurchillFallsDeal",!0),e.updateDollars(parseInt(n)),e.updatePerformance(r),i(null);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),u=(0,c.useCallback)(_(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1),i(null);case 2:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"choices",rightarrows:"Q5"===e.curPrompt.ID?"true":"false"},c.createElement("div",{className:"row"},e.choices.map((function(t,n){var r,l=e.choices_values[n].split("_")[0],u=C(e.choices_values[n]);return c.createElement("div",{className:"choicebutton",key:n,onClick:function(e){!function(e,t,n,r){i({obj:e.target,cost:parseInt(t),performance:n,index:r})}(e,l,u,n)}},c.createElement("div",{id:n,className:"butn"},c.createElement("div",{className:"holder icon"},c.createElement("img",{src:a&&a.index===n?"./assets/img/Off.svg":"./assets/img/On.svg"})),c.createElement("div",{className:"holder label"},c.createElement("h4",null,(0,o.ZP)(t)),e.choices_values.map((function(e,t){return parseInt(e.split("_")[0])})).filter((function(e){return!Number.isNaN(e)})).every((function(e){return 0===e}))?"":c.createElement("p",null,(0,o.ZP)((r=l,Math.abs(r)>1?"".concat(T(r)).concat(Math.abs(r),"&nbsp;JETONS"):"".concat(T(r)).concat(Math.abs(r),"&nbsp;JETON"))))),c.createElement("div",{className:"arrowsChoices"},c.createElement("span",null,"⟶"))))}))),c.createElement(k,{showTWh:!1,dollars:a&&a.hasOwnProperty("cost")?parseInt(e.gauges.props.dollars)+parseInt(a.cost):e.gauges.props.dollars,committed:a&&a.hasOwnProperty("cost")&&parseInt(a.cost)<0?Math.abs(a.cost):0,performance:e.gauges.props.performance}),c.createElement("div",{className:"row"},c.createElement("div",{className:"column"},e.curIndex>0?c.createElement("div",{className:"actionbutton prev",onClick:u},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))):c.createElement("div",null)),c.createElement("div",{className:"column"},c.createElement("div",{className:"actionbutton next ".concat(a?"":"disabled"),onClick:function(){a?l(a.cost,a.performance,a.index):console.log("")}},c.createElement("div",{className:"butn"},c.createElement("p",null,"Poursuivre"))))))}function A(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){A(c,r,a,o,i,"next",e)}function i(e){A(c,r,a,o,i,"throw",e)}o(void 0)}))}}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e){var t=M((0,c.useState)([]),2),n=t[0],r=t[1];(0,c.useEffect)((function(){a()}),[]),(0,c.useEffect)((function(){}),[n]);var a=function(){r(e.choices.map((function(e){return null})))},i=function(e){var t=e.reduce((function(e,t){return t&&(e+=t.cost),e}),0),n=[0,0,0];return e.forEach((function(e,t){e&&(n=n.map((function(t,n){return parseInt(t)+parseInt(e.performance[n])})))})),[t,n]},l=(0,c.useCallback)(function(){var t=R(regeneratorRuntime.mark((function t(n){var r,c,o,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.curPrompt.Trigger_next,e.changePrompt(s(r)),c=i(n),o=M(c,2),l=o[0],u=o[1],e.updateDollars(parseInt(l)),e.updatePerformance(u),a();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),u=(0,c.useCallback)(R(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1),a();case 2:case"end":return t.stop()}}),t)})))),s=function(e){var t=String(e).split("_"),r=String(t[0]).split(";"),a=n.filter((function(e){return null!==e}));return(t.length>1&&a.length>0?a.length>1?String(t[1]):String(r[n.indexOf(a[0])]):String(t[0])).replace(/(\r\n|\n|\r)/gm,"")};return c.createElement("div",{className:"choices"},c.createElement("div",{className:"row"},e.choices.map((function(t,a){var i,l=e.choices_values[a].split("_")[0],u=C(e.choices_values[a]);return c.createElement("div",{className:"selectionbutton",key:a,onClick:function(e){!function(e,t,a,c){var o,i=function(e){if(Array.isArray(e))return z(e)}(o=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||B(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n[t]?i[t]=null:i[t]={obj:e.target,cost:parseInt(a),performance:c},r(i)}(e,a,l,u)}},c.createElement("div",{id:a,className:"butn ".concat(n[a]?"selected":"")},c.createElement("div",{className:"holder icon ".concat(n[a]?"selected":"")},c.createElement("img",{src:n[a]?"assets/img/Plus-Off.svg":"assets/img/Plus-On.svg"})),c.createElement("div",{className:"holder label"},c.createElement("h4",null,(0,o.ZP)(t)),e.choices_values.map((function(e,t){return parseInt(e.split("_")[0])})).filter((function(e){return!Number.isNaN(e)})).every((function(e){return 0===e}))?"":c.createElement("p",null,(0,o.ZP)((i=l,Math.abs(i)>1?"".concat(T(i)).concat(Math.abs(i),"&nbsp;JETONS"):"".concat(T(i)).concat(Math.abs(i),"&nbsp;JETON")))))))}))),c.createElement(k,{showTWh:!1,dollars:n&&n.length>0?parseInt(e.gauges.props.dollars)+parseInt(i(n)[0]):e.gauges.props.dollars,committed:n&&n.length>0&&parseInt(i(n)[0])<0?Math.abs(parseInt(i(n)[0])):0}),c.createElement("div",{className:"row"},c.createElement("div",{className:"column"},e.curIndex>0?c.createElement("div",{className:"actionbutton prev",onClick:u},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))):c.createElement("div",null)),c.createElement("div",{className:"column"},c.createElement("div",{className:"actionbutton next ".concat(n?"":"disabled"),onClick:function(){n?l(n):console.log("")}},c.createElement("div",{className:"butn"},c.createElement("p",null,"Poursuivre"))))))}function L(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){L(c,r,a,o,i,"next",e)}function i(e){L(c,r,a,o,i,"throw",e)}o(void 0)}))}}function V(e){var t=(0,c.useCallback)(H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1);case 1:case"end":return t.stop()}}),t)})))),n=(0,c.useCallback)(H(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,e.changePrompt(n);case 2:case"end":return t.stop()}}),t)})))),r=(0,c.useCallback)(H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.gameReset();case 1:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"printprompt"},""!==e.message?c.createElement("div",{className:"message"},c.createElement("p",null,e.message)):"","1"===e.curIndex?c.createElement(k,{mission:!0,transition:!0,showTWh:!1,dollars:e.gauges.props.dollars,committed:0,performance:e.gauges.props.performance}):"",c.createElement("div",{className:"actionbutton prev",onClick:t},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))),"STARTOVER"===e.curPrompt.Trigger_next?c.createElement("div",{className:"actionbutton next",onClick:r},c.createElement("div",{className:"butn"},c.createElement("p",null,"Recommencer"))):c.createElement("div",{className:"actionbutton next",onClick:n},c.createElement("div",{className:"butn"},c.createElement("p",null,"Poursuivre"))))}function Z(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){U(c,r,a,o,i,"next",e)}function i(e){U(c,r,a,o,i,"throw",e)}o(void 0)}))}}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q(e){var t=F((0,c.useState)(0),2),n=t[0],r=t[1],a=F((0,c.useState)(0),2),i=a[0],l=a[1],u=F((0,c.useState)([0,0]),2),s=u[0],m=u[1],p=F((0,c.useState)([]),2),d=p[0],f=p[1],v=F((0,c.useState)([]),2),g=v[0],h=v[1],b="Q1"===e.curPrompt.ID?25:50;(0,c.useEffect)((function(){var e=P(),t=e.map((function(){return 0})),n=e.map((function(e){return Math.abs(e.unitValue)}));f(t),h(n)}),[]),(0,c.useEffect)((function(){var e=d.reduce((function(e,t,n){return P()[n],e+Math.abs(t)}),0),t=d.reduce((function(e,t,n){var r=P()[n];return e+Math.round(Math.abs(t/r.unitValue)*r.unitTWhvalue)}),0),n=[0,0];d.forEach((function(e,t){var r=P()[t];n=n.map((function(t,n){return 0===n?t+Math.abs(e/r.unitValue)*r.unitEnvirovalue:1===n?t+Math.abs(e/r.unitValue)*r.unitPopuvalue:void 0}))})),r(e),l(t),m(n)}),[d]);var E=(0,c.useCallback)(q(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1);case 1:case"end":return t.stop()}}),t)})))),y=(0,c.useCallback)(q(regeneratorRuntime.mark((function t(){var r,a,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=String(e.curPrompt.Trigger_next).split("_"),a=String(r[0]).split(";"),"Q1"===e.curPrompt.ID&&d[0]>0?e.updateMemoryObj("builtDam",!0):d[0]>0&&e.updateMemoryObj("builtSecondDam",!0),d[2]>0?(e.updateMemoryObj("nuclearBuiltNumber",parseInt(e.memoryObj.nuclearBuiltNumber)+parseInt(d[2]/g[2])),e.changePrompt(String(a[2]).replace(/(\r\n|\n|\r)/gm,""))):1==a.length?e.changePrompt(String(a).replace(/(\r\n|\n|\r)/gm,"")):a.length>1&&(w(d)?e.changePrompt(I(a,r[1])):(c=d.reduce((function(e,t,n,r){return t>r[e]?n:e}),0),e.changePrompt(String(a[c]).replace(/(\r\n|\n|\r)/gm,"")))),e.updateDollars(-n),e.updatePerformance([i].concat(s));case 6:case"end":return t.stop()}}),t)})))),w=function(e){return new Set(e).size!==e.length},S=function(e,t){var n=t.split("_");return{name:e,unitValue:parseInt(n[0]),unitTWhvalue:parseInt(n[1]),unitEnvirovalue:parseInt(n[2]),unitPopuvalue:parseInt(n[3])}},P=function(){return e.choices.map((function(t,n){return S(t,e.choices_values[n])}))},N=function(e){var t=P()[e],r=[!1,!1];return 0===Math.abs(d[e])&&(r[0]=!0),n+parseInt(Math.abs(t.unitValue))>b&&(r[1]=!0),r},x=function(e,t,n,r){var a,c,o=Z(d);o[t]+n*g[t]>=0&&(n>0?(a=n*g[t],c=0,d.forEach((function(e,t){c+=e})),c+a>b||(o[t]=o[t]+n*g[t])):o[t]=o[t]+n*g[t],f(o))},I=function(e,t){var n=Math.max.apply(Math,Z(d)),r=[];return d.forEach((function(e,t){return e===n?r.push(t):null})),(r.length>1?r.includes(0)?String(e[0]):r.includes(1)?String(e[1]):String(t):String(e[r[0]])).replace(/(\r\n|\n|\r)/gm,"")};return c.createElement("div",{className:"repartition"},c.createElement("div",{className:"optionZone"},e.choices.map((function(t,n){return S(t,e.choices_values[n])})).map((function(e,t){return c.createElement("div",{className:"optionUnit",key:t},c.createElement("div",{className:"selectorZone"},c.createElement("div",{className:"division minusZone ".concat(N(t)[0]?"disabled":""),onClick:function(e){return x(0,t,-1)}},c.createElement("h3",null,"-")),c.createElement("div",{className:"division centralZone"},void 0===d[t]||0===d[t]?c.createElement("img",{src:"assets/img/".concat((r=t,["Hydro.svg","Eolien.svg","Nucleaire.svg","Solaire.svg","Modernisation.svg"][r]))}):c.createElement("h3",null,d[t])),c.createElement("div",{className:"division plusZone ".concat(N(t)[1]?"disabled":""),onClick:function(e){return x(0,t,1)}},c.createElement("h3",null,"+"))),c.createElement("div",{className:"textZone"},c.createElement("h3",null,e.name),c.createElement("div",{className:"inlinetext"},c.createElement("p",null,(0,o.ZP)((n=e.unitValue,Math.abs(n)>1?"".concat(Math.abs(n),"&nbsp;jetons"):"".concat(Math.abs(n),"&nbsp;jeton")))," • ",e.unitTWhvalue," TWh"))));var n,r}))),c.createElement(k,{gaugeExplain:"Q1"===e.curPrompt.ID,showTWh:!0,dollars:e.gauges.props.dollars-n,committed:n,terawatts:i}),e.curIndex>0?c.createElement("div",{className:"actionbutton prev",onClick:E},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))):c.createElement("div",null),c.createElement("div",{className:"actionbutton next ".concat(n>0?"":"disabled"),onClick:y},c.createElement("div",{className:"butn"},c.createElement("p",null,"Poursuivre"))))}var J=n(83290);function G(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){G(c,r,a,o,i,"next",e)}function i(e){G(c,r,a,o,i,"throw",e)}o(void 0)}))}}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e){var t=K((0,c.useState)(null),2),n=t[0],r=t[1];(0,c.useEffect)((function(){i()}),[]),(0,c.useEffect)((function(){n?b.Ys(".popUp-bg").style("display","unset"):b.Ys(".popUp-bg").style("display","none")}),[n]);var a=function(e,t){b.Ys(e).style("cursor",t?"pointer":null)},o=(0,J.Z)().attr("class","d3-tip adjusted").direction("n").html((function(e){return"\n                  <h4>".concat(e.title,"</h4>\n                  <p>").concat(e.supp_text,"</p>\n                  ")})),i=function(){Promise.all([b.LsS(e.map[0]),b.LsS(e.map[1])]).then((function(t){var n=K(t,2),r=n[0],c=n[1];b.Ys("#bg-map").node().append(r.documentElement),b.Ys("#on-icons").node().append(c.documentElement);var i=b.Ys("#on-icons").select("svg");i.call(o),b.Ys(".gameScreen").node().appendChild(b.Ys(".d3-tip").node());var u=i.select("#Icone-On").selectAll("g"),s=String(e.curPrompt.Choix_insecables).split(":"),m=String(e.message).split(";");b.Ys(".gameBox").on("click",(function(){o.hide()})),u.nodes().reverse().map((function(e,t){var n={title:s[t],supp_text:m[t]};b.Ys(e).on("click",(function(t,r,a){t.stopPropagation(),o.show(n,e),l(t.target.parentElement,!1),o.style("pointer-events","stroke")})).on("mouseover",(function(e,t,n){a(e.target.parentElement,!0),l(e.target.parentElement,!1)})).on("mouseout",(function(e,t,n){a(e.target.parentElement,!1),l(e.target.parentElement,!0),window.innerWidth<576&&o.hide()}))}))}))},l=function(e,t){!1===t?b.Ys(e).style("opacity",0):b.Ys(e).style("opacity",1)},u=(0,c.useCallback)($(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1);case 1:case"end":return t.stop()}}),t)})))),s=(0,c.useCallback)($(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,b.Ys(".gameScreen").select(".d3-tip").remove(),e.changePrompt(n);case 3:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"printprompt mapnavigator"},c.createElement("div",{className:"popUp-bg"},n?c.createElement("div",{className:"popUp-box"},c.createElement("h4",null,parse(n.title)),c.createElement("p",null,parse(n.supp_text)),c.createElement("div",{className:"actionbutton",onClick:function(){return r(null)}},c.createElement("div",{className:"butn"},c.createElement("p",null,"Fermer")))):c.createElement("div",null)),c.createElement("div",{className:"mapHolder"},c.createElement("div",{className:"superposedMap"},c.createElement("div",{id:"bg-map",className:"map noClick"}),c.createElement("div",{id:"on-icons",className:"map"}))),c.createElement("div",{className:"actionbutton prev",onClick:u},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))),c.createElement("div",{className:"actionbutton next",onClick:s},c.createElement("div",{className:"butn"},c.createElement("p",null,"Suivant"))))}function ne(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ne(c,r,a,o,i,"next",e)}function i(e){ne(c,r,a,o,i,"throw",e)}o(void 0)}))}}function ae(e){(0,c.useEffect)((function(){}),[]);var t,n,r,a,i,l,u,s,m,p,d,f,v=(0,c.useCallback)(re(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,e.changePrompt(n);case 2:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"bilanContent"},c.createElement("div",{className:"updatableText"},"B1"===e.curPrompt.ID?function(){var t=e.curPrompt.Texte.split(";"),n=e.curPrompt.Texte_Supp.split(";"),r=[],a=e.memoryObj.builtDam?9:0,c=parseInt(e.performance[0])-a,o=parseInt(e.gauges.props.dollars),i=t[0].replace("*newProd*",c+"&nbsp;TWh").replace("*augmentediminue*",c<0?"diminué":"augmenté").replace("*suffisanteinsuffisante*",c<10?"insuffisante":"suffisante");if(r.push(i),e.memoryObj.builtDam){var l=n[0].split(":")[1].replace("*damTWh*",9);r.push(l)}if(o<15){var u=n[1].split(":")[1];r.push(u)}if(parseInt(e.performance[1])<0){var s=n[2].split(":")[1];r.push(s)}if(parseInt(e.performance[2])<0){var m=n[3].split(":")[1];r.push(m)}return r}().map((function(e,t){return c.createElement("p",{key:t},(0,o.ZP)(e))})):(i=[],e.curPrompt.Texte.split(";"),l=e.finalBilanData,u=e.memoryObj.builtDam?9:0,s=e.memoryObj.builtSecondDam?9:0,m=parseInt(e.performance[0])-s-u,p=parseInt(e.gauges.props.dollars),d=parseInt(e.performance[1]),f=parseInt(e.performance[2]),t=(t=m>=25&&d>0&&e.memoryObj.acceptedChurchillFallsDeal?l[0].print:m>=25&&d>0&&!e.memoryObj.acceptedChurchillFallsDeal?l[1].print:m<25&&d>0?l[2].print:m>=25&&d<=0&&e.memoryObj.acceptedChurchillFallsDeal?l[3].print:m>=25&&d<=0&&!e.memoryObj.acceptedChurchillFallsDeal?l[4].print:l[5].print).replace("*augmentediminue*",m<0?"diminué":"augmenté").replace("*newProd*",m+"&nbsp;TWh"),i.push(t),(e.memoryObj.builtDam||e.memoryObj.builtSecondDam)&&(e.memoryObj.builtDam&&e.memoryObj.builtSecondDam?n=l[9].print:e.memoryObj.builtDam?n=l[7].print:e.memoryObj.builtSecondDam&&(n=l[8].print),i.push(n)),r=p>=5?l[11].print:l[12].print,i.push(r),a=f>=4?l[14].print:f>=-2&&f<4?l[15].print:l[16].print,i.push(a),i).map((function(e,t){return c.createElement("p",{key:t},(0,o.ZP)(e))}))),c.createElement("div",{className:"actionbutton next",onClick:v},c.createElement("div",{className:"butn"},c.createElement("p",null,"Poursuivre"))))}function ce(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ce(c,r,a,o,i,"next",e)}function i(e){ce(c,r,a,o,i,"throw",e)}o(void 0)}))}}function ie(e){var t=(0,c.useCallback)(oe(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.gameReset();case 1:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"promptBox"},c.createElement("div",{className:"header"},c.createElement("div",{className:"surtitre"},c.createElement("h4",null,"Fin du jeu")),c.createElement("div",{className:"question"},c.createElement("p",null,"Le CA d'Hydro-Québec vote à l'unanimité pour vous démettre de vos fonctions.","".concat(e.raison),c.createElement("br",null),c.createElement("br",null),"Tentez votre chance de nouveau."))),c.createElement("div",{className:"actionSection"},c.createElement("div",{className:"actionbutton next",onClick:t},c.createElement("div",{className:"butn"},c.createElement("p",null,"Recommencer")))))}function le(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){le(c,r,a,o,i,"next",e)}function i(e){le(c,r,a,o,i,"throw",e)}o(void 0)}))}}function se(e){var t=(0,c.useCallback)(ue(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1);case 1:case"end":return t.stop()}}),t)})))),n=(0,c.useCallback)(function(){var t=ue(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.curPrompt.Trigger_next,e.changePrompt(a),e.updateDollars(parseInt(n)),e.updatePerformance(r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),r=function(e){var t=String(e).split("_");return{cost:t[0],performance:t.splice(1)}};return c.createElement("div",{className:"printprompt"},c.createElement("div",{className:"message"},c.createElement("p",null,(0,o.ZP)(e.choices[e.whichEventHappens]))),c.createElement("div",{className:"actionbutton prev",onClick:t},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))),c.createElement("div",{className:"actionbutton next",onClick:function(){return n(r(e.choices_values[e.whichEventHappens]).cost,r(e.choices_values[e.whichEventHappens]).performance)}},c.createElement("div",{className:"butn"},c.createElement("p",null,"Poursuivre"))))}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){fe(c,r,a,o,i,"next",e)}function i(e){fe(c,r,a,o,i,"throw",e)}o(void 0)}))}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function he(e){var t,n,r=(t=(0,c.useState)({investedModernization:!1,builtDam:!1,builtSecondDam:!1,acceptedChurchillFallsDeal:!1,nuclearBuiltNumber:0}),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],i=r[1];(0,c.useEffect)((function(){a.nuclearBuiltNumber>1&&e.gameEnd()}),[a]);var l,u=(0,c.useCallback)(ve(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i({investedModernization:!1,builtDam:!1,builtSecondDam:!1,acceptedChurchillFallsDeal:!1,nuclearBuiltNumber:0}),e.gameReset();case 2:case"end":return t.stop()}}),t)})))),s=(0,c.useCallback)(function(){var t=ve(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.changePrompt(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),m=(0,c.useCallback)(function(){var t=ve(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Number.isInteger(n)&&e.updateDollars(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),p=(0,c.useCallback)(function(){var t=ve(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.updatePerformance(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),d=(0,c.useCallback)(function(){var e=ve(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=pe({},a))[t]=n,i(r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),f=function(t){switch(t){case"Repartition":return c.createElement(Q,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix_insecables).split(":"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:s,curIndex:e.curIndex,updateDollars:m,updatePerformance:p,memoryObj:a,updateMemoryObj:d,gauges:e.gauges});case"Carte":return c.createElement(te,{curPrompt:e.curPrompt,message:String(e.curPrompt.Texte_Supp),changePrompt:s,curIndex:e.curIndex,map:"Q1-1"===e.curIndex?["assets/img/Carte-Hydro.svg","assets/img/Carte-Hydro-icone-on.svg"]:["assets/img/Carte-Eolien.svg","assets/img/Carte-Eolien-icone-on.svg"]});case"texteBoutonSimple":return c.createElement(V,{curPrompt:e.curPrompt,message:String(e.curPrompt.Texte_Supp),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:s,curIndex:e.curIndex,gauges:e.gauges,gameReset:u});case"ChoixReponse":return c.createElement(j,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix_insecables).split(":"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:s,curIndex:e.curIndex,updateDollars:m,updatePerformance:p,updateMemoryObj:d,gauges:e.gauges});case"Catastrophe":return c.createElement(se,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix_insecables).split(":"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),whichEventHappens:a.investedModernization?1:0,changePrompt:s,curIndex:e.curIndex,updateDollars:m,updatePerformance:p});case"MultiSelection":return c.createElement(Y,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix_insecables).split(":"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:s,curIndex:e.curIndex,updateDollars:m,updatePerformance:p,gauges:e.gauges});case"Bilan":return c.createElement(ae,{curPrompt:e.curPrompt,curIndex:e.curIndex,changePrompt:s,updateDollars:m,updatePerformance:p,performance:e.performance,memoryObj:a,gauges:e.gauges,finalBilanData:e.finalBilanData});default:return c.createElement(j,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix_insecables).split(":"),changePrompt:s,curIndex:e.curIndex})}};return!0===e.endGame?c.createElement("div",{className:"gameBox"},c.createElement(ie,{raison:(l=[],a.nuclearBuiltNumber>1?l.push(" En choisissant de réinvestir dans l'énergie nucléaire, votre crédibilité pour paver la voie vers la carboneutralité de la province a été grandement affectée."):e.gauges.props.dollars<0?l.push(" Vous avez vidé les coffres de la société d'État."):e.performance[1]<-9?l.push(" Votre vision va à l'encontre de l'objectif de carboneutralité du Québec."):e.performance[2]<-9&&l.push(" La population conteste votre vision pour le futur énergétique du Québec."),l),gameReset:u})):c.createElement("div",{className:"gameBox"},"Bilan"===e.curPrompt.Type?c.createElement("div",{className:"promptBox bilan"},c.createElement("div",{className:"header"},c.createElement("div",{className:"massiveTitle"},c.createElement("h2",null,(0,o.ZP)(e.curPrompt.Sujet)))),c.createElement("div",{className:"separator"}),f(e.curPrompt.Type)):c.createElement("div",{className:"promptBox"},c.createElement("div",{className:"header"},c.createElement("div",{className:"surtitre"},c.createElement("h4",null,(0,o.ZP)(e.curPrompt.Sujet))),c.createElement("div",{className:"question"},c.createElement("p",null,(0,o.ZP)(e.curPrompt.Texte)))),f(e.curPrompt.Type)))}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e){var t=be((0,c.useState)("IDLE"),2),n=t[0],r=t[1],a=be((0,c.useState)(0),2),o=a[0],i=a[1],l=be((0,c.useState)(50),2),u=l[0],s=l[1],m=be((0,c.useState)([0,0,0]),2),p=m[0],d=m[1],f=be((0,c.useState)("normal"),2),v=f[0],g=f[1];(0,c.useEffect)((function(){}),[n]),(0,c.useEffect)((function(){b(o),"END"===o&&h()}),[o]);var h=function(){i("END"),r("END")},b=function(e){},E=function(t){return e.gameData.findIndex((function(e){return String(t)===String(e.ID)}))};(0,c.useEffect)((function(){var t=e.gameData[E(o)];t&&t.hasOwnProperty("Background")&&("redpink"===t.Background?g("redpink"):"normal"!==v&&g("normal"))}));var y=function(){var t="END"===n||"END"===o||"redpink"===v?"gameOver":"",r=e.gameData[E(o)];return{gameScreenClass:t,backgroundImage:r?"pylone"===r.Background?"Illus_Section-01_Pylone_V01-14.svg":"ampoule"===r.Background?"Illus_Section-02_Ampoule_V02.svg":"centrale"===r.Background?"Illus_Section-00_Centrale_V01.svg":null:null}};return"IDLE"===n?c.createElement("div",{className:"gameScreen"},c.createElement("div",{className:"background-image"},c.createElement("img",{src:"assets/img/Illus_Section-00_Centrale_V01.svg"})),c.createElement(I,{introElem:e.introElem,mapObj:e.mapObj,gameStart:function(){r("STARTED"),i(0)}})):c.createElement("div",{className:"gameScreen ".concat(y().gameScreenClass)},"gameOver"!==y().gameScreenClass&&null!==y().backgroundImage?c.createElement("div",{className:"background-image"},c.createElement("img",{src:"assets/img/".concat(y().backgroundImage),className:"no-mobile"})):"",c.createElement("div",{className:"temporaryInfo"},c.createElement("p",null,"Performance (temporaire)"),c.createElement("p",null,"Dollars: ","".concat(u," $")),c.createElement("p",null,"Elec: ","".concat(p[0]," TWh")),c.createElement("p",null,"Enviro: ","".concat(p[1]," pts")),c.createElement("p",null,"Popu: ","".concat(p[2]," pts"))),c.createElement(he,{curIndex:o,curPrompt:"END"===o?"":e.gameData[E(o)],changePrompt:i,updateDollars:function(e){s((function(t){return t+e})),u+e<0&&h()},updatePerformance:function(e){var t=Array.apply(null,Array(e.length)).map((function(){}));p.forEach((function(n,r){t[r]=parseInt(n)+parseInt(e[r])})),d(t),(t[1]<=-9||t[2]<=-9)&&h()},gauges:c.createElement(P,{dollars:u}),performance:p,endGame:"END"===o||"END"===n,finalBilanData:e.finalBilanData,gameReset:function(){s(50),d([0,0,0]),r("IDLE"),i(0)},gameEnd:h}))}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Se=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t;var c=this.container.append("div").classed("rootElem",!0);this.engineRoot=S.createRoot(c.node()),this.optionData=n,this.amorce=r.TEXTE,this.gameData=a,this.initEngine()}var t,n;return t=e,(n=[{key:"initEngine",value:function(){var e=c.createElement(i,{key:"gameIntro",sectionType:p,optionData:this.optionData,amorce:this.amorce,background:null,classes:""});this.engineRoot.render(c.createElement(ye,{introElem:e,gameStatus:this.gameStatus,gameData:this.gameData[0],finalBilanData:this.gameData[1]}))}}])&&we(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Pe(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Pe(c,r,a,o,i,"next",e)}function i(e){Pe(c,r,a,o,i,"throw",e)}o(void 0)}))}}function xe(e,t){return Ie.apply(this,arguments)}function Ie(){return(Ie=Ne(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([b.gyn("./data/structure-questions.csv"),b.gyn("./data/structure-bilan2.csv")]).then((function(e){var r=b.Ys(".game-area");return new Se(r,w(n),t[0],e),ke(t,n),[[function(){}]]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t){(function(e,t){var n={},r=[],a=w(t);return e.map((function(e,t){if(e.Section===p){var c=e.StepClasses,o=e.TEXTE,i=e.StyleFond;n[e.SectionID]={key:t,sectionType:p,optionData:a,amorce:o,background:i,classes:y(c),gameid:e.GameID}}else if(e.Section===f){var l=e.TEXTE,u=e.StepClasses,s=e.StyleFond;n[e.SectionID]={key:t,sectionType:f,texts:l,visual:e.VISUEL,filename:e.NomFichierSource,background:s,classes:y(u),visuelclasses:y(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===d){var m=e.TEXTE;E(e.TEXTE)&&(m=JSON.parse(e.TEXTE)),n[e.SectionID]={key:t,sectionType:d,texts:E(e.TEXTE)?m:{mainTitle:{class:"",text:m},subTitle:null},visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,classes:y(e.StepClasses),visuelclasses:y(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===v){var g={attributs:e.Attributs,scrollType:e.Step,text:e.TEXTE,visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,visuelclasses:y(e.VisuelClasses),stepclasses:y(e.StepClasses),gameid:e.GameID};if(n.hasOwnProperty(e.SectionID)){var h=n[e.SectionID];h.push(g),n[e.SectionID]=h}else n[e.SectionID]=[g],r.push(e.SectionID)}})),r.map((function(e){var t=n[e],r=t[0].attributs===g?" full-page":"",a=t[0].background;n[e]={key:e,sectionType:v,listID:e,steps:t,classed:"viz-section".concat(r),mediaInfo:0,background:a}})),Object.values(n)})(e,t).map((function(e){"viz-section"===e.sectionType&&e.steps.map((function(t,n){""!==t.visual&&(0===n?b.Ys("#".concat(e.key,"_").concat(n)).style("opacity",1):b.Ys("#".concat(e.key,"_").concat(n)).style("opacity",0))}))}))}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var De=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.index=n,this.callback=r,this._isActivate=!1}var t,n;return t=e,(n=[{key:"activate",value:function(e){this._isActivate||(this._isActivate=!0,this.el.classList.add("active"),this.callback(e))}},{key:"deactivate",value:function(){this._isActivate&&(this._isActivate=!1,this.el.classList.remove("active"))}}])&&Te(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_e=n(52732),Oe=n.n(_e),je=n(89438);function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Re(e,t){var n=[];[".viz",".full-page-section > img",".full-page-section > video"].forEach((function(e){n=n.concat(Array.from(document.querySelectorAll(e)))})),(0,je.Z)(n,{stickyBitStickyOffset:40}),new(Oe())({elements_selector:".lazy",threshold:500}),Promise.all([xe(e,t)]).then((function(e){var t,n;(function(e){var t=0,n=0,r=window.innerHeight,a=!1,c=0,o=[],i=[],l=[],u=document.querySelector(".article-reminder"),s=document.querySelector("header > .progress"),m=document.querySelector(".intro-section h1"),p=document.querySelectorAll(".viz-section");if(p.length!==e.length)throw new Error("The number of viz sections (".concat(p.length,") mismatch with the length of the first ")+"dimension of the callbacks array (".concat(e.length,"). Please, be sure that the two elements ")+"have the same size.");p.forEach((function(t,n){var r,a=function(e){if(Array.isArray(e))return Ce(e)}(r=t.querySelectorAll("section"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(a.length!==e[n].length)throw new Error("The number of steps (".concat(a.length,") in the viz section #").concat(n+1," mismatch with the ")+"number of callbacks specified (".concat(e[n].length,') at the index "').concat(n,'". Please, be sure that the two ')+"elements have the same size.");o=o.concat(a.map((function(t,r){return new De(t,"".concat(n,"-").concat(r),e[n][r])}))),i=i.concat(i,t.querySelector(".viz > *"))}));var d=function(){var e=window.pageYOffset||document.documentElement.scrollTop;o.forEach((function(e){var a=e.el.getBoundingClientRect();r-a.top-n>0&&a.top+a.height-t>0?l.push(e):e.deactivate()}));var a=m.getBoundingClientRect().bottom<=0,i=u.classList.contains("visible");a&&!i?u.classList.add("visible"):!a&&i&&u.classList.remove("visible"),l.forEach((function(t,n){e>=c?n===l.length-1?t.activate("down"):t.deactivate():0===n?t.activate("up"):t.deactivate()})),f(),l=[],c=e},f=function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;s.style.width=e+"%"},v={initialize:function(){if(a)throw new Error("The scroller is already initialized.");return a=!0,window.addEventListener("scroll",d),window.addEventListener("resize",(function(){r=window.innerHeight,f()})),(window.pageYOffset||document.documentElement.scrollTop)>0&&d(),f(),v},offsetTop:function(e){if(void 0===e)return t;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return t=e,v},offsetBottom:function(e){if(void 0===e)return n;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return n=e,v}};return v})((t=e,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]).offsetTop(40).offsetBottom(0).initialize()}))}document.querySelector("#root").innerHTML=r.E,b.gyn(a.google_config.localContentURL).then((function(e){b.gyn(a.google_config.localParamsURL).then((function(t){Re(e,t),document.querySelector("#footerContainer").innerHTML=b.Ys("#footerContent").node().innerHTML}))}))},40207:e=>{e.exports={google_config:{contentURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=0&single=true&output=csv",paramsURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=409950237&single=true&output=csv",localContentURL:"./data/structure/contentData.csv",localParamsURL:"./data/structure/paramsData.csv"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[216],(()=>(t(28594),t(35666),t(86702)))),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi4wZWZmNWVhNmExMWIyZWE5MWMxYy5qcyIsIm1hcHBpbmdzIjoiNmVBR08sU0FBU0EsRUFBYUMsR0FHekIsSUFBSUMsRUFDQSwyQkFBU0MsVUFBUyx3QkFBbUJGLEVBQU1HLFVBQ3ZDLHNCQUFJRCxVQUFVLGFBQ1hGLEVBQU1JLFFBRVQsMkJBQUtDLEVBQUFBLEVBQUFBLElBQU1MLEVBQU1NLFdBQVdDLFFBQzVCLCtCQUNJLHVCQUFLTCxVQUFVLFdBZTNCLE9BWG1CRixFQUFNUSxXQUVqQix1QkFBS0MsTUFBTyxDQUFDQyxnQkFBaUIsR0FBRixPQUFLVixFQUFNUSxhQUFlTixVQUFXLG9CQUM1REQsR0FLTEEsRSxrSkNnQkhVLElBQUFBLE9BQUFBLFdBQ0ZBLElBQUFBLE9BQUFBLFdBQ0lBLElBQUFBLE1BQWdCLENBQUMsUUFBUyxTQzNDOUIsSUFlTUMsRUFFTyxjQUZQQSxFQUdZLG9CQUhaQSxFQUlXLGtCQUpYQSxFQUtPLGNBTFBBLEVBVUcsU0FpQkhDLEdBQXlCLEtBQ2xDQyxNQUFPLFFBQ1BDLFFBQVMsVUFDVEMsS0FBTSxRQUg0QixPQUk1QixRQUo0QixXQUs1QixlQUw0Qix3QkFNZixxQkFOZSxHLHdCQ2lKdEMsU0FBU0MsRUFBT0MsR0FDWixJQUNJQyxLQUFLZCxNQUFNYSxHQUNiLE1BQU9FLEdBQ0wsT0FBTyxFQUVYLE9BQU8sRUFHWCxTQUFTQyxFQUFhSCxHQUNsQixPQUFPSSxNQUFNQyxLQUFLTCxFQUFJTSxNQUFNLE1BQU1DLEtBQUssS0FHcEMsU0FBU0MsRUFBV0MsR0FFekIsTUFBTyxDQUNMcEIsTUFBT29CLEVBQVcsR0FBR2QsRUFBMEJDLE9BQy9DYyxRQUFTRCxFQUFXLEdBQUdkLEVBQTBCRSxTQUNqRGMsS0FBTUYsRUFBVyxHQUFHZCxFQUEwQmdCLE1BQzlDYixLQUFNVyxFQUFXLEdBQUdkLEVBQTBCRyxPLGlCQ3RMbERjLFlBbEJJLDZGLFFDSkosSSxXQ0VPLFNBQVNDLEVBQU8vQixHQUVyQixJQWVNZ0MsRUFBa0IsU0FBQ0MsR0FDdkIsT0FBR0MsS0FBS0MsSUFBSUYsR0FBYSxFQUNoQixHQUFQLE9BQVVBLEVBQVYsZ0JBRUssR0FBUCxPQUFVQSxFQUFWLGdCQU9GLE9BSkFHLEVBQUFBLEVBQUFBLFlBQVcsV0FwQldDLEVBQUFBLEdBQVUsV0FBV0MsVUFBVSxVQUN2Q0MsUUFBUUMsU0FBUSxTQUFDQyxHQUMzQixJQUFJQyxFQUpjLEdBS2dCLFlBQS9CTCxFQUFBQSxHQUFVSSxHQUFNRSxLQUFLLFFBQ3RCRCxFQUFXMUMsRUFBTTRDLFNBRW5CLElBQU1DLEVBQWlCSCxFQUFXLEVBQUlSLEtBQUtZLE1BQU05QyxFQUFNK0MsVUFSckMsR0FRNkQsS0FBTyxFQUNoRkMsRUFBYU4sRUFBVyxFQUFJUixLQUFLWSxNQUFNSixFQVQzQixHQVNrRCxLQUFPLEVBQzNFTCxFQUFBQSxHQUFVSSxHQUFNUSxPQUFPLHFCQUFxQkEsT0FBTyxjQUFjeEMsTUFBTSxRQUF2RSxVQUFtRm9DLEVBQW5GLE1BQ0FSLEVBQUFBLEdBQVVJLEdBQU1RLE9BQU8sZUFBZXhDLE1BQU0sUUFBNUMsVUFBd0R1QyxFQUF4RCxZQWdCRix1QkFBSzlDLFVBQVUsVUFDYix1QkFBS2dELEdBQUcsVUFBVWhELFVBQVUscUJBQzFCLHVCQUFLQSxVQUFTLDJCQUFzQkYsRUFBTTRDLFFBQVUsRUFBSSxNQUFNLEtBQzVELHVCQUFLMUMsVUFBUyxxQkFBZ0JGLEVBQU00QyxRQUFVLEVBQUksTUFBTzVDLEVBQU1tRCxhQUFlLFlBQWMsVUFHeEUsR0FBbkJuRCxFQUFNK0MsVUFDUCx1QkFBSzdDLFVBQVMsb0JBQWVGLEVBQU00QyxRQUFVLEVBQUksTUFBTTVDLEVBQU1tRCxhQUFlLFlBQWMsVUFHekYsR0FHQ25ELEVBQU1vRCxRQUNOLHVCQUFLbEQsVUFBVSxvQkFDYix1QkFBS0EsVUFBVSxlQUNiLHlCQUFHLDJDQUdMLHVCQUFLQSxVQUFVLFNBQ1gsdUJBQUtBLFVBQVUsU0FDZix1QkFBS0EsVUFBVSxXQUNmLHVCQUFLQSxVQUFVLFlBR25CLHVCQUFLQSxVQUFVLGNBQWNPLE1BQU8sQ0FBQyxVQUFhLFVBQ2hELHFCQUFHQSxNQUFPLENBQUMsYUFBZ0IsUUFBUSwwQkFBSUosRUFBQUEsRUFBQUEsSUFBTTJCLEVBQWdCaEMsRUFBTTRDLGNBSXZFNUMsRUFBTW1ELGFBQ04sdUJBQUtqRCxVQUFVLHNCQUNiLHVCQUFLQSxVQUFVLGVBQ2YseUJBQUcscUNBRUgsdUJBQUtBLFVBQVUsZ0JBR2YsdUJBQUtBLFVBQVUsY0FBY08sTUFBTyxDQUFDLFVBQWEsVUFDaEQscUJBQUdBLE1BQU8sQ0FBQyxhQUFnQixRQUFRLDBCQUFJSixFQUFBQSxFQUFBQSxJQUFNMkIsRUFBZ0JoQyxFQUFNNEMsUUFBUSxTQUs3RSx1QkFBSzFDLFVBQVUsb0JBQ2IsdUJBQUtBLFVBQVUsZUFDZix5QkFBRyxxQ0FFTCx1QkFBS0EsVUFBVSxjQUFjTyxNQUFPLENBQUMsVUFBYSxVQUNoRCxxQkFBR0EsTUFBTyxDQUFDLGFBQWdCLFFBQVEsMEJBQUlKLEVBQUFBLEVBQUFBLElBQU0yQixFQUFnQmhDLEVBQU00QyxpQiw0VENoRjVFLFNBQVNTLEVBQVNyRCxHQUV2QixJQUFNc0QsR0FBWUMsRUFBQUEsRUFBQUEsYUFBVywyQkFBRSw2RkFFN0J2RCxFQUFNd0QsWUFGdUIsNENBTS9CLE9BQ0UsdUJBQUt0RCxVQUFVLHVCQUNiLHVCQUFLQSxVQUFVLFlBQ1pGLEVBQU15RCxXQUVULHVCQUFLdkQsVUFBVSxXQUNiLHVCQUFLQSxVQUFVLGNBQWN3RCxRQUFTSixHQUNwQyxnRENiSCxTQUFTSyxFQUFXM0QsR0FhekIsT0FYQW9DLEVBQUFBLEVBQUFBLFlBQVUsV0FDTHBDLEVBQU00RCxZQUNQQyxZQUFXLFdBQ1R4QixFQUFBQSxHQUFVLHFCQUFxQnVCLGFBQ0FFLFNBQVMsS0FDVHJELE1BQU0sVUFBVyxLQUNoRCxPQUdKLElBR0EsdUJBQUtQLFVBQVUsY0FDYix1QkFBS0EsVUFBVSxzQkFDYix1QkFBS0EsVUFBVSxVQUNiLHVCQUFLQSxVQUFTLDJCQUFzQkYsRUFBTTRELFdBQWEsYUFBYyxLQUNuRSxnQkFBQzdCLEVBQUQsQ0FBUWdDLFlBQWEvRCxFQUFNK0QsWUFBYVosYUFBY25ELEVBQU1tRCxhQUFjQyxRQUFTcEQsRUFBTW9ELFFBQVNSLFFBQVM1QyxFQUFNNEMsUUFBU0csVUFBVy9DLEVBQU0rQyxlQUsvSS9DLEVBQU1nRSxXQUFpQyxJQUFwQmhFLEVBQU1nRSxVQUN6Qix1QkFBSzlELFVBQVUsc0JBQ2IsdUJBQUtBLFVBQVUsVUFDYix1QkFBS0EsVUFBVSxxQkFDYiwwQkFBSSxpREFBSixNQUFtREYsRUFBTWdFLFVBQXpELFdBS04sNkJDbkNELFNBQVNDLEVBQXFCQyxHQUNuQyxPQUFPQSxFQUFlMUMsTUFBTSxLQUFLMkMsTUFBTSxHQUFHQyxLQUFJLFNBQUFDLEdBQUksT0FBSUMsU0FBU0QsTSxTQWUxRCxJQUFNRSxFQUFhLFNBQUNDLEdBQ3pCLE9BQTJCLElBQXBCRixTQUFTRSxJQUdkRixTQUFTRSxHQUFTLEVBRmxCLEdBS0UsYyxzYUNsQkMsU0FBU0MsRUFBT3pFLEdBRXJCLEksSUFBQSxHLEdBQWtDMEUsRUFBQUEsRUFBQUEsVUFBUyxNLEVBQTNDLEUsOHpCQUFPQyxFQUFQLEtBQWtCQyxFQUFsQixNQUVBeEMsRUFBQUEsRUFBQUEsWUFBVSxjQUVQLEtBRUhBLEVBQUFBLEVBQUFBLFlBQVUsV0FDUixJQUFNeUMsRUFBbUJ4QyxFQUFBQSxJQUFhLGlCQUN0Q3dDLEVBQWlCNUIsT0FBTyxTQUFTNkIsUUFBUSxZQUFZLEdBQ2xESCxHQUNEdEMsRUFBQUEsR0FBVXNDLEVBQVVJLEtBQUs5QixPQUFPLFNBQVM2QixRQUFRLFlBQVksR0FDN0RELEVBQWlCNUIsT0FBTyxTQUFTeEMsTUFBTSxVQUFXLE9BQ2xENEIsRUFBQUEsR0FBVXNDLEVBQVVJLEtBQUs5QixPQUFPLFNBQVN4QyxNQUFNLFVBQVcsTUFHMURvRSxFQUFpQjVCLE9BQU8sU0FBU3hDLE1BQU0sVUFBVyxPQUdwRCxDQUFDa0UsSUFFSCxJQUFNSyxHQUFhekIsRUFBQUEsRUFBQUEsYUFBVyw0Q0FBRSxXQUFPMEIsRUFBTUMsRUFBYUMsR0FBMUIsdUZBQzFCQyxFQUFjQyxPQUFPckYsRUFBTXNGLFVBQU4sY0FBaUM5RCxNQUFNLE1BQ2pEK0QsT0FBUyxFQUN0QnZGLEVBQU13RixhQUFhSCxPQUFPRCxFQUFZRCxJQUFRTSxRQUFRLGlCQUFrQixLQUd4RXpGLEVBQU13RixhQUFhSCxPQUFPRCxFQUFZLElBQUlLLFFBQVEsaUJBQWtCLEtBR3pDLE9BQTFCekYsRUFBTXNGLFVBQU4sSUFBNEMsSUFBVkgsR0FDbkNuRixFQUFNMEYsZ0JBQWdCLHlCQUF5QixHQUdwQixPQUExQjFGLEVBQU1zRixVQUFOLElBQTRDLElBQVZILEdBRW5DbkYsRUFBTTBGLGdCQUFnQiw4QkFBOEIsR0FHdEQxRixFQUFNMkYsY0FBY3JCLFNBQVNXLElBQzdCakYsRUFBTTRGLGtCQUFrQlYsR0FDeEJOLEVBQWEsTUFwQmlCLDJDQUFGLDJEQXVCeEJpQixHQUFpQnRDLEVBQUFBLEVBQUFBLGFBQVcsMkJBQUUsNkZBQy9CdkQsRUFBTThGLFNBQVcsR0FDbEI5RixFQUFNd0YsYUFBYXhGLEVBQU04RixTQUFXLEdBRXRDbEIsRUFBYSxNQUpxQiw0Q0E4QnBDLE9BQ0UsdUJBQUsxRSxVQUFVLFVBQVU2RCxZQUF1QyxPQUExQi9ELEVBQU1zRixVQUFOLEdBQWdDLE9BQU8sU0FDM0UsdUJBQUtwRixVQUFVLE9BRVhGLEVBQU0rRixRQUFRM0IsS0FBSSxTQUFDNEIsRUFBUWIsR0FDekIsSUFuQmVjLEVBbUJYaEIsRUFBT2pGLEVBQU1rRSxlQUFlaUIsR0FBTzNELE1BQU0sS0FBSyxHQUM5QzBELEVBQWNqQixFQUFxQmpFLEVBQU1rRSxlQUFlaUIsSUFDNUQsT0FDRSx1QkFBS2pGLFVBQVUsZUFBZWdHLElBQUtmLEVBQU96QixRQUFTLFNBQUN0QyxJQS9CekMsU0FBQytFLEVBQU9sQixFQUFNQyxFQUFhQyxHQUNoRFAsRUFBYSxDQUNYRyxJQUFLb0IsRUFBTUMsT0FDWG5CLEtBQU1YLFNBQVNXLEdBQ2ZDLFlBQWFBLEVBQ2JDLE1BQU9BLElBMEI0RGtCLENBQWVqRixFQUFHNkQsRUFBTUMsRUFBYUMsS0FDOUYsdUJBQUtqQyxHQUFJaUMsRUFBT2pGLFVBQVUsUUFDdEIsdUJBQUtBLFVBQVUsZUFDYix1QkFBS29HLElBQUszQixHQUNFQSxFQUFVUSxRQUFVQSxFQUNsQix1QkFJSix5QkFFWix1QkFBS2pGLFVBQVUsZ0JBQ2IsMkJBQUtHLEVBQUFBLEVBQUFBLElBQU0yRixJQTFCZmhHLEVBQU1rRSxlQUFlRSxLQUFJLFNBQUNDLEVBQU1rQyxHQUM1QyxPQUFPakMsU0FBU0QsRUFBSzdDLE1BQU0sS0FBSyxPQUMvQmdGLFFBQU8sU0FBQUMsR0FBRyxPQUFLQyxPQUFPQyxNQUFNRixNQUNsQkcsT0FBTSxTQUFBQyxHQUFJLE9BQWEsSUFBVEEsS0EwQlAsR0FFQSwwQkFBSXhHLEVBQUFBLEVBQUFBLEtBdkNENEYsRUF1Q3VCaEIsRUF0QzNDL0MsS0FBS0MsSUFBSThELEdBQVksRUFDZixHQUFQLE9BQVUxQixFQUFXMEIsSUFBckIsT0FBbUMvRCxLQUFLQyxJQUFJOEQsR0FBNUMsZ0JBRUssR0FBUCxPQUFVMUIsRUFBVzBCLElBQXJCLE9BQW1DL0QsS0FBS0MsSUFBSThELEdBQTVDLG1CQXNDaUIsdUJBQUsvRixVQUFVLGlCQUFnQix3Q0FROUMsZ0JBQUN5RCxFQUFELENBQVltRCxTQUFTLEVBQU9sRSxRQUFVK0IsR0FBYUEsRUFBVW9DLGVBQWUsUUFDbER6QyxTQUFTdEUsRUFBTWdILE9BQU9oSCxNQUFNNEMsU0FBVzBCLFNBQVNLLEVBQVVNLE1BRTFEakYsRUFBTWdILE9BQU9oSCxNQUFNNEMsUUFDbkJHLFVBQVk0QixHQUFhQSxFQUFVb0MsZUFBZSxTQUFZekMsU0FBU0ssRUFBVU0sTUFBUSxFQUFNL0MsS0FBS0MsSUFBSXdDLEVBQVVNLE1BQVEsRUFDMUhDLFlBQWFsRixFQUFNZ0gsT0FBT2hILE1BQU1rRixjQUMxRCx1QkFBS2hGLFVBQVUsT0FDYix1QkFBS0EsVUFBVSxVQUNaRixFQUFNOEYsU0FBVyxFQUNoQix1QkFBSzVGLFVBQVUsb0JBQW9Cd0QsUUFBU21DLEdBQzFDLHVCQUFLM0YsVUFBVSxRQUNiLHVDQUlKLDZCQUdKLHVCQUFLQSxVQUFVLFVBQ2IsdUJBQUtBLFVBQVMsNEJBQXVCeUUsRUFBWSxHQUFLLFlBQWNqQixRQUFTLFdBQU9pQixFQUFZSyxFQUFXTCxFQUFVTSxLQUFNTixFQUFVTyxZQUFhUCxFQUFVUSxPQUFTOEIsUUFBUUMsSUFBSSxNQUMvSyx1QkFBS2hILFVBQVUsUUFDYiw0Qyw2dkNDcElQLFNBQVNpSCxFQUFlbkgsR0FFN0IsU0FBa0MwRSxFQUFBQSxFQUFBQSxVQUFTLElBQTNDLEdBQU9DLEVBQVAsS0FBa0JDLEVBQWxCLE1BRUF4QyxFQUFBQSxFQUFBQSxZQUFVLFdBQ1JnRixNQUNDLEtBRUhoRixFQUFBQSxFQUFBQSxZQUFVLGNBRVAsQ0FBQ3VDLElBRUosSUFBTXlDLEVBQWlCLFdBQ3JCeEMsRUFBYTVFLEVBQU0rRixRQUFRM0IsS0FBSSxTQUFBQyxHQUFJLE9BQUksVUFHbkNnRCxFQUEwQixTQUFDMUMsR0FDL0IsSUFBTTJDLEVBQVUzQyxFQUFVNEMsUUFBTyxTQUFDQyxFQUFLQyxHQUlyQyxPQUhHQSxJQUNERCxHQUFPQyxFQUFJeEMsTUFFTnVDLElBQ04sR0FDQ0UsRUFBaUIsQ0FBQyxFQUFFLEVBQUUsR0FRMUIsT0FQQS9DLEVBQVVuQyxTQUFRLFNBQUNpRixFQUFLRSxHQUNuQkYsSUFDREMsRUFBaUJBLEVBQWV0RCxLQUFJLFNBQUNDLEVBQU1rQyxHQUN6QyxPQUFPakMsU0FBU0QsR0FBUUMsU0FBU21ELEVBQUl2QyxZQUFZcUIsV0FJaEQsQ0FBQ2UsRUFBU0ksSUFHYjFDLEdBQWF6QixFQUFBQSxFQUFBQSxhQUFXLDRDQUFFLFdBQU9vQixHQUFQLDhGQUMxQlMsRUFBY3BGLEVBQU1zRixVQUFOLGFBQ2xCdEYsRUFBTXdGLGFBQWFvQyxFQUFtQnhDLElBRlIsRUFHSWlDLEVBQXdCMUMsR0FINUIsU0FHdkIyQyxFQUh1QixLQUdkSSxFQUhjLEtBSzlCMUgsRUFBTTJGLGNBQWNyQixTQUFTZ0QsSUFDN0J0SCxFQUFNNEYsa0JBQWtCOEIsR0FDeEJOLElBUDhCLDJDQUFGLHVEQVV4QnZCLEdBQWlCdEMsRUFBQUEsRUFBQUEsYUFBVywyQkFBRSw2RkFDL0J2RCxFQUFNOEYsU0FBVyxHQUNsQjlGLEVBQU13RixhQUFheEYsRUFBTThGLFNBQVcsR0FFdENzQixJQUprQyw0Q0F3QjlCUSxFQUFxQixTQUFDQyxHQUMxQixJQUNNQyxFQUFzQnpDLE9BQU93QyxHQUFzQnJHLE1BQU0sS0FDekR1RyxFQUF3QjFDLE9BQU95QyxFQUFvQixJQUFJdEcsTUFBTSxLQUM3RHdHLEVBQW9CckQsRUFBVTZCLFFBQU8sU0FBQ25DLEdBQUQsT0FBbUIsT0FBVEEsS0FlckQsT0FkR3lELEVBQW9CdkMsT0FBUyxHQUFLeUMsRUFBa0J6QyxPQUFTLEVBRTNEeUMsRUFBa0J6QyxPQUFTLEVBRWJGLE9BQU95QyxFQUFvQixJQUczQnpDLE9BQU8wQyxFQUFzQnBELEVBQVVzRCxRQUFRRCxFQUFrQixNQUluRTNDLE9BQU95QyxFQUFvQixLQUd4QnJDLFFBQVEsaUJBQWtCLEtBaUJoRCxPQUNFLHVCQUFLdkYsVUFBVSxXQUNiLHVCQUFLQSxVQUFVLE9BRVhGLEVBQU0rRixRQUFRM0IsS0FBSSxTQUFDNEIsRUFBUWIsR0FDekIsSUFuQmVjLEVBbUJYaEIsRUFBT2pGLEVBQU1rRSxlQUFlaUIsR0FBTzNELE1BQU0sS0FBSyxHQUM5QzBELEVBQWNqQixFQUFxQmpFLEVBQU1rRSxlQUFlaUIsSUFDNUQsT0FDRSx1QkFBS2pGLFVBQVUsa0JBQWtCZ0csSUFBS2YsRUFBT3pCLFFBQVMsU0FBQ3RDLElBN0Q1QyxTQUFDK0UsRUFBT2hCLEVBQU9GLEVBQU1DLEdBQzFDLEksRUFBSWdELEUsK0NBQWV2RCxJLHFTQUNoQkEsRUFBVVEsR0FFWCtDLEVBQVMvQyxHQUFTLEtBSWxCK0MsRUFBUy9DLEdBQVMsQ0FDaEJKLElBQUtvQixFQUFNQyxPQUNYbkIsS0FBTVgsU0FBU1csR0FDZkMsWUFBYUEsR0FHakJOLEVBQWFzRCxHQStDMkQ3QixDQUFlakYsRUFBRytELEVBQU9GLEVBQU1DLEtBQzNGLHVCQUFLaEMsR0FBSWlDLEVBQU9qRixVQUFTLGVBQVV5RSxFQUFVUSxHQUFTLFdBQWEsS0FDakUsdUJBQUtqRixVQUFTLHNCQUFpQnlFLEVBQVVRLEdBQVMsV0FBYSxLQUU3RCx1QkFDRW1CLElBQUszQixFQUFVUSxHQUFTLDBCQUE0Qiw0QkFJeEQsdUJBQUtqRixVQUFVLGdCQUNYLDJCQUFLRyxFQUFBQSxFQUFBQSxJQUFNMkYsSUF4QmZoRyxFQUFNa0UsZUFBZUUsS0FBSSxTQUFDQyxFQUFNa0MsR0FDNUMsT0FBT2pDLFNBQVNELEVBQUs3QyxNQUFNLEtBQUssT0FDL0JnRixRQUFPLFNBQUFDLEdBQUcsT0FBS0MsT0FBT0MsTUFBTUYsTUFDbEJHLE9BQU0sU0FBQUMsR0FBSSxPQUFhLElBQVRBLEtBd0JQLEdBRUEsMEJBQUl4RyxFQUFBQSxFQUFBQSxLQXJDRDRGLEVBcUN1QmhCLEVBcEMzQy9DLEtBQUtDLElBQUk4RCxHQUFZLEVBQ2YsR0FBUCxPQUFVMUIsRUFBVzBCLElBQXJCLE9BQW1DL0QsS0FBS0MsSUFBSThELEdBQTVDLGdCQUVLLEdBQVAsT0FBVTFCLEVBQVcwQixJQUFyQixPQUFtQy9ELEtBQUtDLElBQUk4RCxHQUE1Qyx5QkEyQ0UsZ0JBQUN0QyxFQUFELENBQVltRCxTQUFTLEVBQU9sRSxRQUFVK0IsR0FBYUEsRUFBVVksT0FBUyxFQUM5Q2pCLFNBQVN0RSxFQUFNZ0gsT0FBT2hILE1BQU00QyxTQUFXMEIsU0FBUytDLEVBQXdCMUMsR0FBVyxJQUNuRjNFLEVBQU1nSCxPQUFPaEgsTUFBTTRDLFFBQ25CRyxVQUFZNEIsR0FBYUEsRUFBVVksT0FBUyxHQUFLakIsU0FBUytDLEVBQXdCMUMsR0FBVyxJQUFNLEVBQUt6QyxLQUFLQyxJQUFJbUMsU0FBUytDLEVBQXdCMUMsR0FBVyxLQUFPLElBRTVMLHVCQUFLekUsVUFBVSxPQUNiLHVCQUFLQSxVQUFVLFVBQ1pGLEVBQU04RixTQUFXLEVBQ2hCLHVCQUFLNUYsVUFBVSxvQkFBb0J3RCxRQUFTbUMsR0FDMUMsdUJBQUszRixVQUFVLFFBQ2IsdUNBSUosNkJBR0osdUJBQUtBLFVBQVUsVUFDYix1QkFBS0EsVUFBUyw0QkFBdUJ5RSxFQUFZLEdBQUssWUFBY2pCLFFBQVMsV0FBT2lCLEVBQVlLLEVBQVdMLEdBQWFzQyxRQUFRQyxJQUFJLE1BQ2xJLHVCQUFLaEgsVUFBVSxRQUNiLDRDLDRUQ2hLUCxTQUFTaUksRUFBWW5JLEdBRTFCLElBQU02RixHQUFpQnRDLEVBQUFBLEVBQUFBLGFBQVcsMkJBQUUsNkZBQy9CdkQsRUFBTThGLFNBQVcsR0FDbEI5RixFQUFNd0YsYUFBYXhGLEVBQU04RixTQUFXLEdBRkosNENBTTlCZCxHQUFhekIsRUFBQUEsRUFBQUEsYUFBVywyQkFBRSxtR0FDMUI2QixFQUFjcEYsRUFBTXNGLFVBQU4sYUFDbEJ0RixFQUFNd0YsYUFBYUosR0FGVyw0Q0FLMUJnRCxHQUFZN0UsRUFBQUEsRUFBQUEsYUFBVywyQkFBRSw2RkFDN0J2RCxFQUFNb0ksWUFEdUIsNENBSS9CLE9BQ0UsdUJBQUtsSSxVQUFVLGVBRU8sS0FBbEJGLEVBQU1xSSxRQUNKLHVCQUFLbkksVUFBVSxXQUNiLHlCQUNHRixFQUFNcUksVUFJWCxHQUdpQixNQUFuQnJJLEVBQU04RixTQUNOLGdCQUFDbkMsRUFBRCxDQUFZUCxTQUFTLEVBQU1RLFlBQVksRUFBTWtELFNBQVMsRUFBT2xFLFFBQVM1QyxFQUFNZ0gsT0FBT2hILE1BQU00QyxRQUNqRUcsVUFBVyxFQUNYbUMsWUFBYWxGLEVBQU1nSCxPQUFPaEgsTUFBTWtGLGNBRXhELEdBRUYsdUJBQUtoRixVQUFVLG9CQUFvQndELFFBQVNtQyxHQUMxQyx1QkFBSzNGLFVBQVUsUUFDYix1Q0FJa0MsY0FBcENGLEVBQU1zRixVQUFOLGFBQ0UsdUJBQUtwRixVQUFVLG9CQUFvQndELFFBQVMwRSxHQUMxQyx1QkFBS2xJLFVBQVUsUUFDYiwwQ0FJSix1QkFBS0EsVUFBVSxvQkFBb0J3RCxRQUFTc0IsR0FDMUMsdUJBQUs5RSxVQUFVLFFBQ2IsMEMsd21EQ2pEUCxTQUFTb0ksRUFBWXRJLEdBRTFCLFNBQTRCMEUsRUFBQUEsRUFBQUEsVUFBUyxHQUFyQyxHQUFPNkQsRUFBUCxLQUFlQyxFQUFmLEtBQ0EsS0FBa0M5RCxFQUFBQSxFQUFBQSxVQUFTLEdBQTNDLEdBQU9WLEVBQVAsS0FBa0J5RSxFQUFsQixLQUNBLEtBQWtEL0QsRUFBQUEsRUFBQUEsVUFBUyxDQUFDLEVBQUUsSUFBOUQsR0FBT2dFLEVBQVAsS0FBMEJDLEVBQTFCLEtBQ0EsS0FBMEJqRSxFQUFBQSxFQUFBQSxVQUFTLElBQW5DLEdBQU9rRSxFQUFQLEtBQWNDLEVBQWQsS0FDQSxLQUEwQ25FLEVBQUFBLEVBQUFBLFVBQVMsSUFBbkQsR0FBT29FLEVBQVAsS0FBc0JDLEVBQXRCLEtBQ01DLEVBQXNDLE9BQTFCaEosRUFBTXNGLFVBQU4sR0FBaUMsR0FBSyxJQUl4RGxELEVBQUFBLEVBQUFBLFlBQVcsV0FFVCxJQUFNNkcsRUFBVUMsSUFDVkMsRUFBV0YsRUFBUTdFLEtBQUksa0JBQU0sS0FDN0IwRSxFQUFnQkcsRUFBUTdFLEtBQUksU0FBQUMsR0FBSSxPQUFJbkMsS0FBS0MsSUFBSWtDLEVBQUsrRSxjQUN4RFAsRUFBU00sR0FDVEosRUFBaUJELEtBQ2hCLEtBRUgxRyxFQUFBQSxFQUFBQSxZQUFXLFdBQ1QsSUFBSWlILEVBQVlULEVBQU1yQixRQUNwQixTQUFDQyxFQUFLOEIsRUFBUW5FLEdBRVosT0FEc0IrRCxJQUFrQi9ELEdBQ2pDcUMsRUFBTXRGLEtBQUtDLElBQUltSCxLQUN0QixHQUNBQyxFQUFRWCxFQUFNckIsUUFDaEIsU0FBQ0MsRUFBSzhCLEVBQVFuRSxHQUNaLElBQUlxRSxFQUFrQk4sSUFBa0IvRCxHQUN4QyxPQUFPcUMsRUFBTXRGLEtBQUtZLE1BQU1aLEtBQUtDLElBQUltSCxFQUFPRSxFQUFlLFdBQWVBLEVBQWUsZ0JBQ3JGLEdBRUFDLEVBQXVCLENBQUMsRUFBRSxHQUM5QmIsRUFBTXBHLFNBQVEsU0FBQzhHLEVBQVEzQixHQUNyQixJQUFJNkIsRUFBa0JOLElBQWtCdkIsR0FDeEM4QixFQUF1QkEsRUFBcUJyRixLQUFJLFNBQUNDLEVBQU1rQyxHQUNyRCxPQUFXLElBQVJBLEVBQ01sQyxFQUFPbkMsS0FBS0MsSUFBSW1ILEVBQU9FLEVBQWUsV0FBZUEsRUFBZSxnQkFFN0QsSUFBUmpELEVBQ0NsQyxFQUFPbkMsS0FBS0MsSUFBSW1ILEVBQU9FLEVBQWUsV0FBZUEsRUFBZSxtQkFEeEUsUUFLVGhCLEVBQVVhLEdBQ1ZaLEVBQWFjLEdBQ2JaLEVBQXFCYyxLQUNwQixDQUFDYixJQUVKLElBQU0vQyxHQUFpQnRDLEVBQUFBLEVBQUFBLGFBQVcsMkJBQUUsNkZBQy9CdkQsRUFBTThGLFNBQVcsR0FDbEI5RixFQUFNd0YsYUFBYXhGLEVBQU04RixTQUFXLEdBRkosNENBTTlCZCxHQUFhekIsRUFBQUEsRUFBQUEsYUFBVywyQkFBRSx1R0FDMUJ1RSxFQUFzQnpDLE9BQU9yRixFQUFNc0YsVUFBTixjQUFpQzlELE1BQU0sS0FDcEU0RCxFQUFjQyxPQUFPeUMsRUFBb0IsSUFBSXRHLE1BQU0sS0FFMUIsT0FBMUJ4QixFQUFNc0YsVUFBTixJQUFrQ3NELEVBbER0QixHQWtEd0MsRUFDckQ1SSxFQUFNMEYsZ0JBQWdCLFlBQVksR0FFNUJrRCxFQXJETyxHQXFEVyxHQUN4QjVJLEVBQU0wRixnQkFBZ0Isa0JBQWtCLEdBR3ZDa0QsRUExRGdCLEdBMERNLEdBRXZCNUksRUFBTTBGLGdCQUFnQixxQkFBc0JwQixTQUFTdEUsRUFBTTBKLFVBQVVDLG9CQUFzQnJGLFNBQVNzRSxFQTVEbkYsR0E0RHVHRSxFQTVEdkcsS0E2RGpCOUksRUFBTXdGLGFBQWFILE9BQU9ELEVBN0RULElBNkRvQ0ssUUFBUSxpQkFBa0IsTUFFbkQsR0FBdEJMLEVBQVlHLE9BQ2xCdkYsRUFBTXdGLGFBQWFILE9BQU9ELEdBQWFLLFFBQVEsaUJBQWtCLEtBRTNETCxFQUFZRyxPQUFTLElBRXhCcUUsRUFBVWhCLEdBRVg1SSxFQUFNd0YsYUFBYXFFLEVBQWlCekUsRUFBYTBDLEVBQW9CLE1BSWpFZ0MsRUFBa0JsQixFQUFNckIsUUFBTyxTQUFDd0MsRUFBTUMsRUFBR0MsRUFBR0MsR0FBYixPQUFxQkYsRUFBSUUsRUFBSUgsR0FBUUUsRUFBSUYsSUFBTSxHQUNsRi9KLEVBQU13RixhQUFhSCxPQUFPRCxFQUFZMEUsSUFBa0JyRSxRQUFRLGlCQUFrQixPQUd0RnpGLEVBQU0yRixlQUFlNEMsR0FDckJ2SSxFQUFNNEYsa0JBQWtCLENBQUM1QixHQUFXbUcsT0FBT3pCLElBaENiLDRDQW1DMUJrQixFQUFZLFNBQUFRLEdBQUMsT0FBSSxJQUFJQyxJQUFJRCxHQUFHRSxPQUFTRixFQUFFN0UsUUFFdkNnRixFQUFpQixTQUFDdkUsRUFBUTlCLEdBQzlCLElBQU1zRyxFQUFrQnRHLEVBQWUxQyxNQUFNLEtBQzdDLE1BQU8sQ0FDTGlKLEtBQU16RSxFQUNOb0QsVUFBVzlFLFNBQVNrRyxFQUFnQixJQUNwQ0UsYUFBY3BHLFNBQVNrRyxFQUFnQixJQUN2Q0csZ0JBQWlCckcsU0FBU2tHLEVBQWdCLElBQzFDSSxjQUFldEcsU0FBU2tHLEVBQWdCLE1BSXRDdEIsRUFBa0IsV0FDdEIsT0FBT2xKLEVBQU0rRixRQUFRM0IsS0FBSSxTQUFDNEIsRUFBUWIsR0FDaEMsT0FBT29GLEVBQWV2RSxFQUFRaEcsRUFBTWtFLGVBQWVpQixRQWdCakQwRixFQUFrQixTQUFDdEUsR0FDdkIsSUFBTXVFLEVBQWU1QixJQUFrQjNDLEdBRW5Dd0UsRUFBYSxFQUFDLEdBQU0sR0FXeEIsT0FWb0IsSUFGQzdJLEtBQUtDLElBQUl5RyxFQUFNckMsTUFJbEN3RSxFQUFXLElBQUssR0FJZnhDLEVBQU9qRSxTQUFTcEMsS0FBS0MsSUFBSTJJLEVBQWExQixZQUFjSixJQUNyRCtCLEVBQVcsSUFBSyxHQUdYQSxHQVdIQyxFQUFnQixTQUFDNUosRUFBRytELEVBQU84RixFQUFNNUcsR0FDckMsSUF0Q21CNkcsRUFDZkMsRUFxQ0FqRCxFQUFXLEVBQUlVLEdBQ2ZWLEVBQVMvQyxHQUFPOEYsRUFBS25DLEVBQWMzRCxJQUFXLElBQzdDOEYsRUFBTyxHQXhDT0MsRUEwQ0NELEVBQUtuQyxFQUFjM0QsR0F6Q25DZ0csRUFBUSxFQUNadkMsRUFBTXBHLFNBQVEsU0FBQ2dDLEVBQU9XLEdBQ3BCZ0csR0FBUzNHLEtBRVIyRyxFQUFNRCxFQUFjbEMsSUFzQ2pCZCxFQUFTL0MsR0FBUytDLEVBQVMvQyxHQUFTOEYsRUFBS25DLEVBQWMzRCxLQUl6RCtDLEVBQVMvQyxHQUFTK0MsRUFBUy9DLEdBQVM4RixFQUFLbkMsRUFBYzNELEdBRXpEMEQsRUFBU1gsS0FRUDJCLEVBQW1CLFNBQUN6RSxFQUFhZ0csR0FFckMsSUFBTUMsRUFBTW5KLEtBQUttSixJQUFMLE1BQUFuSixLQUFJLEVBQVEwRyxJQUNsQjBDLEVBQU0sR0EwQlosT0F6QkExQyxFQUFNcEcsU0FBUSxTQUFDcUUsRUFBTTFCLEdBQVAsT0FBaUIwQixJQUFTd0UsRUFBTUMsRUFBSUMsS0FBS3BHLEdBQVEsU0FFNURtRyxFQUFJL0YsT0FBUyxFQU1YK0YsRUFBSUUsU0FBUyxHQUVDbkcsT0FBT0QsRUFBWSxJQUU1QmtHLEVBQUlFLFNBQVMsR0FFSm5HLE9BQU9ELEVBQVksSUFJbkJDLE9BQU8rRixHQUlUL0YsT0FBT0QsRUFBWWtHLEVBQUksTUFHcEI3RixRQUFRLGlCQUFrQixLQXFDaEQsT0FDRSx1QkFBS3ZGLFVBQVUsZUFDYix1QkFBS0EsVUFBVSxjQUVBRixFQUFNK0YsUUFBUTNCLEtBQUksU0FBQ2hELEVBQUcrRCxHQUFKLE9BQWNvRixFQUFlbkosRUFBR3BCLEVBQU1rRSxlQUFlaUIsT0FwQ3pFZixLQUFLLFNBQUNDLEVBQUtjLEdBQ3hCLE9BQ0UsdUJBQUtqRixVQUFVLGFBQWFnRyxJQUFLZixHQUMvQix1QkFBS2pGLFVBQVUsZ0JBQ2IsdUJBQUtBLFVBQVMsNkJBQXdCMkssRUFBZ0IxRixHQUFPLEdBQUssV0FBVyxJQUFNekIsUUFBUyxTQUFDdEMsR0FBRCxPQUFPNEosRUFBYzVKLEVBQUcrRCxHQUFRLEtBQzFILGdDQUVGLHVCQUFLakYsVUFBVSw2QkFFT3VMLElBQWpCN0MsRUFBTXpELElBQXlDLElBQWpCeUQsRUFBTXpELEdBQ3JDLHVCQUNFbUIsSUFBRyxzQkpwTmdCQyxFSW9OcUJwQixFSmxOdkMsQ0FDZixZQUNBLGFBQ0EsZ0JBQ0EsY0FDQSxxQkFFY29CLE9JOE1GLDBCQUFLcUMsRUFBTXpELEtBR2YsdUJBQUtqRixVQUFTLDRCQUF1QjJLLEVBQWdCMUYsR0FBTyxHQUFLLFdBQVcsSUFBTXpCLFFBQVMsU0FBQ3RDLEdBQUQsT0FBTzRKLEVBQWM1SixFQUFHK0QsRUFBTyxLQUN4SCxpQ0FHSix1QkFBS2pGLFVBQVUsWUFDYiwwQkFBS21FLEVBQUtvRyxNQUNWLHVCQUFLdkssVUFBVSxjQUNiLDBCQUFJRyxFQUFBQSxFQUFBQSxLQXJGUzRGLEVBcUZhNUIsRUFBSytFLFVBcEZ0Q2xILEtBQUtDLElBQUk4RCxHQUFZLEVBQ2YsR0FBUCxPQUFVL0QsS0FBS0MsSUFBSThELEdBQW5CLGdCQUVLLEdBQVAsT0FBVS9ELEtBQUtDLElBQUk4RCxHQUFuQixpQkFpRlUsTUFBK0Q1QixFQUFLcUcsYUFBcEUsV0FyRlksSUFBQ3pFLEVKNUlVTSxNSWdQL0IsZ0JBQUM1QyxFQUFELENBQVlSLGFBQXdDLE9BQTFCbkQsRUFBTXNGLFVBQU4sR0FBNEN3QixTQUFTLEVBQU1sRSxRQUFTNUMsRUFBTWdILE9BQU9oSCxNQUFNNEMsUUFBUTJGLEVBQVF4RixVQUFXd0YsRUFBUXZFLFVBQVdBLElBQzlKaEUsRUFBTThGLFNBQVcsRUFDaEIsdUJBQUs1RixVQUFVLG9CQUFvQndELFFBQVNtQyxHQUMxQyx1QkFBSzNGLFVBQVUsUUFDYix1Q0FJSiw0QkFFRix1QkFBS0EsVUFBUyw0QkF0RlRxSSxFQUFTLEVBc0ZzQyxHQUFLLFlBQWM3RSxRQUFTc0IsR0FDOUUsdUJBQUs5RSxVQUFVLFFBQ2IsMEMsNHdDQzdQSCxTQUFTd0wsR0FBYTFMLEdBRTNCLFNBQWtDMEUsRUFBQUEsRUFBQUEsVUFBUyxNQUEzQyxHQUFPQyxFQUFQLEtBQWtCQyxFQUFsQixNQUVBeEMsRUFBQUEsRUFBQUEsWUFBVSxXQUNSdUosTUFDQSxLQUVGdkosRUFBQUEsRUFBQUEsWUFBVSxXQUNMdUMsRUFDRHRDLEVBQUFBLEdBQVUsYUFBYTVCLE1BQU0sVUFBVyxTQUl4QzRCLEVBQUFBLEdBQVUsYUFBYTVCLE1BQU0sVUFBVyxVQUl6QyxDQUFDa0UsSUFFSixJQUFNaUgsRUFBaUIsU0FBQ3ZILEVBQU13SCxHQUM1QnhKLEVBQUFBLEdBQVVnQyxHQUFNNUQsTUFBTSxTQUFVb0wsRUFBUSxVQUFVLE9BRzlDQyxHQUFNQyxFQUFBQSxFQUFBQSxLQUNHcEosS0FBSyxRQUFTLG1CQUNkcUosVUFBVSxLQUNWQyxNQUFLLFNBQUNDLEdBQ0wsTUFBTywyQkFBUCxPQUNNQSxFQUFFM0wsTUFEUix1Q0FFSzJMLEVBQUVDLFVBRlAsK0JBTVZSLEVBQWUsV0FDbkJTLFFBQVFDLElBQUksQ0FDVmhLLEVBQUFBLElBQU9yQyxFQUFNb0UsSUFBSSxJQUNqQi9CLEVBQUFBLElBQU9yQyxFQUFNb0UsSUFBSSxNQUNoQmtJLE1BQUssWUFBd0IsYUFBdEJDLEVBQXNCLEtBQWZDLEVBQWUsS0FDOUJuSyxFQUFBQSxHQUFVLFdBQVdJLE9BQ2xCZ0ssT0FBT0YsRUFBTUcsaUJBQ2hCckssRUFBQUEsR0FBVSxhQUFhSSxPQUNwQmdLLE9BQU9ELEVBQVVFLGlCQUNwQixJQUFNQyxFQUFhdEssRUFBQUEsR0FBVSxhQUFhWSxPQUFPLE9BQ2pEMEosRUFBV0MsS0FBS2QsR0FDaEJ6SixFQUFBQSxHQUFVLGVBQWVJLE9BQU9vSyxZQUM5QnhLLEVBQUFBLEdBQVUsV0FBV0ksUUFFdkIsSUFBTXFLLEVBQVdILEVBQVcxSixPQUFPLGFBQWFYLFVBQVUsS0FDcER5SyxFQUFTMUgsT0FBT3JGLEVBQU1zRixVQUFOLGtCQUFxQzlELE1BQU0sS0FDM0R3TCxFQUFhM0gsT0FBT3JGLEVBQU1xSSxTQUFTN0csTUFBTSxLQUMvQ2EsRUFBQUEsR0FBVSxZQUFZNEssR0FBRyxTQUFTLFdBQU9uQixFQUFJb0IsVUFDN0NKLEVBQVN2SyxRQUFRNEssVUFBVS9JLEtBQUksU0FBQzNCLEVBQUtrRixHQUNuQyxJQUFNeUYsRUFBYSxDQUNmN00sTUFBT3dNLEVBQU9wRixHQUNkd0UsVUFBV2EsRUFBV3JGLElBRTFCdEYsRUFBQUEsR0FBVUksR0FDVHdLLEdBQUcsU0FBUyxTQUFDZixFQUFFakMsRUFBRTFILEdBQ2hCMkosRUFBRW1CLGtCQUNGdkIsRUFBSXdCLEtBQUtGLEVBQVkzSyxHQUNyQjhLLEVBQVdyQixFQUFFOUYsT0FBT29ILGVBQWUsR0FFbkMxQixFQUFJckwsTUFBTSxpQkFBa0IsYUFFN0J3TSxHQUFHLGFBQWEsU0FBQ2YsRUFBRWpDLEVBQUUxSCxHQUNwQnFKLEVBQWVNLEVBQUU5RixPQUFPb0gsZUFBZSxHQUN2Q0QsRUFBV3JCLEVBQUU5RixPQUFPb0gsZUFBZSxNQUVwQ1AsR0FBRyxZQUFZLFNBQUNmLEVBQUVqQyxFQUFFMUgsR0FDbkJxSixFQUFlTSxFQUFFOUYsT0FBT29ILGVBQWUsR0FDdkNELEVBQVdyQixFQUFFOUYsT0FBT29ILGVBQWUsR0FDaENDLE9BQU9DLFdBQWEsS0FDckI1QixFQUFJb0IsaUJBUVJLLEVBQWEsU0FBQ0ksRUFBU0MsSUFDYixJQUFYQSxFQUNEdkwsRUFBQUEsR0FBVXNMLEdBQVNsTixNQUFNLFVBQVcsR0FHcEM0QixFQUFBQSxHQUFVc0wsR0FBU2xOLE1BQU0sVUFBVyxJQUlsQ29GLEdBQWlCdEMsRUFBQUEsRUFBQUEsYUFBVywyQkFBRSw2RkFDL0J2RCxFQUFNOEYsU0FBVyxHQUNsQjlGLEVBQU13RixhQUFheEYsRUFBTThGLFNBQVcsR0FGSiw0Q0FNOUJkLEdBQWF6QixFQUFBQSxFQUFBQSxhQUFXLDJCQUFFLG1HQUMxQjZCLEVBQWNwRixFQUFNc0YsVUFBTixhQUVsQmpELEVBQUFBLEdBQVUsZUFBZVksT0FBTyxXQUFXNEssU0FDM0M3TixFQUFNd0YsYUFBYUosR0FKVyw0Q0FRaEMsT0FDQSx1QkFBS2xGLFVBQVUsNEJBQ2IsdUJBQUtBLFVBQVUsWUFDWHlFLEVBQ0YsdUJBQUt6RSxVQUFVLGFBQ2IsMEJBQUtHLE1BQU1zRSxFQUFVcEUsUUFDckIseUJBQUlGLE1BQU1zRSxFQUFVd0gsWUFDcEIsdUJBQUtqTSxVQUFVLGVBQWV3RCxRQUFTLGtCQUFNa0IsRUFBYSxRQUN4RCx1QkFBSzFFLFVBQVUsUUFDYixzQ0FLTiw2QkFHRix1QkFBS0EsVUFBVSxhQUNiLHVCQUFLQSxVQUFVLGlCQUNiLHVCQUFLZ0QsR0FBRyxTQUFTaEQsVUFBVSxnQkFDM0IsdUJBQUtnRCxHQUFHLFdBQVdoRCxVQUFVLFVBR2pDLHVCQUFLQSxVQUFVLG9CQUFvQndELFFBQVNtQyxHQUMxQyx1QkFBSzNGLFVBQVUsUUFDYix1Q0FHSix1QkFBS0EsVUFBVSxvQkFBb0J3RCxRQUFTc0IsR0FDMUMsdUJBQUs5RSxVQUFVLFFBQ2IsdUMsZ1VDdklELFNBQVM0TixHQUFNOU4sSUFPcEJvQyxFQUFBQSxFQUFBQSxZQUFVLGNBRVAsSUFFSCxJQXNETTJMLEVBc0NFQyxFQWdCRkMsRUFTQUMsRUExRUFDLEVBRUFDLEVBRUVDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBcERGMUosR0FBYXpCLEVBQUFBLEVBQUFBLGFBQVcsNEJBQUUsbUdBQzFCNkIsRUFBY3BGLEVBQU1zRixVQUFOLGFBRWxCdEYsRUFBTXdGLGFBQWFKLEdBSFcsNENBb0loQyxPQUNFLHVCQUFLbEYsVUFBVSxnQkFDYix1QkFBS0EsVUFBVSxpQkFFZSxPQUExQkYsRUFBTXNGLFVBQU4sR0FqSWMsV0FDcEIsSUFBSXFKLEVBQW1CM08sRUFBTXNGLFVBQU4sTUFBeUI5RCxNQUFNLEtBQ2xENE0sRUFBZ0JwTyxFQUFNc0YsVUFBTixXQUE4QjlELE1BQU0sS0FDcEQyTSxFQUFtQixHQUVqQlMsRUFBWTVPLEVBQU0wSixVQUFVbUYsU0FyQnJCLEVBcUJ5QyxFQUNoRE4sRUFBMEJqSyxTQUFTdEUsRUFBTWtGLFlBQVksSUFBTTBKLEVBQzNESixFQUFhbEssU0FBU3RFLEVBQU1nSCxPQUFPaEgsTUFBTTRDLFNBRTNDa00sRUFBY0gsRUFBaUIsR0FBR2xKLFFBQVEsWUFBYThJLEVBQTBCLGFBQzlDOUksUUFBUSxvQkFBcUI4SSxFQUEwQixFQUFJLFVBQVUsWUFDckU5SSxRQUFRLDJCQUE0QjhJLEVBQTBCLEdBQUssZUFBZSxjQUd6SCxHQURBSixFQUFpQjVDLEtBQUt1RCxHQUNuQjlPLEVBQU0wSixVQUFVbUYsU0FBUyxDQUMxQixJQUFJYixFQUFjSSxFQUFjLEdBQUc1TSxNQUFNLEtBQUssR0FBR2lFLFFBQVEsV0EvQjlDLEdBZ0NYMEksRUFBaUI1QyxLQUFLeUMsR0FFeEIsR0FBR1EsRUFBYSxHQUFHLENBQ2pCLElBQUlPLEVBQWNYLEVBQWMsR0FBRzVNLE1BQU0sS0FBSyxHQUM5QzJNLEVBQWlCNUMsS0FBS3dELEdBRXhCLEdBQUd6SyxTQUFTdEUsRUFBTWtGLFlBQVksSUFBTSxFQUFFLENBQ3BDLElBQUk4SixFQUFhWixFQUFjLEdBQUc1TSxNQUFNLEtBQUssR0FDN0MyTSxFQUFpQjVDLEtBQUt5RCxHQUV4QixHQUFHMUssU0FBU3RFLEVBQU1rRixZQUFZLElBQU0sRUFBRSxDQUNwQyxJQUFJK0osRUFBYWIsRUFBYyxHQUFHNU0sTUFBTSxLQUFLLEdBQzdDMk0sRUFBaUI1QyxLQUFLMEQsR0FHeEIsT0FBT2QsRUFtR0NlLEdBQWdCOUssS0FBSSxTQUFDQyxFQUFNc0QsR0FDekIsT0FDQSxxQkFBR3pCLElBQUt5QixJQUNMdEgsRUFBQUEsRUFBQUEsSUFBTWdFLFFBakdmOEosRUFBbUIsR0FDQW5PLEVBQU1zRixVQUFOLE1BQXlCOUQsTUFBTSxLQUNsRDRNLEVBQWdCcE8sRUFBTW1QLGVBRXBCZCxFQUFpQnJPLEVBQU0wSixVQUFVbUYsU0F4RDFCLEVBd0Q4QyxFQUNyRFAsRUFBa0J0TyxFQUFNMEosVUFBVTBGLGVBekQzQixFQXlEcUQsRUFDNURiLEVBQTBCakssU0FBU3RFLEVBQU1rRixZQUFZLElBQU1vSixFQUFrQkQsRUFDN0VHLEVBQWFsSyxTQUFTdEUsRUFBTWdILE9BQU9oSCxNQUFNNEMsU0FDekM2TCxFQUFtQm5LLFNBQVN0RSxFQUFNa0YsWUFBWSxJQUM5Q3dKLEVBQWtCcEssU0FBU3RFLEVBQU1rRixZQUFZLElBbUNuRDZJLEdBNUJFQSxFQUpDUSxHQUEyQixJQUMxQkUsRUFBbUIsR0FDbkJ6TyxFQUFNMEosVUFBVTJGLDJCQUVMakIsRUFBYyxHQUFHa0IsTUFFeEJmLEdBQTJCLElBQzNCRSxFQUFtQixJQUNsQnpPLEVBQU0wSixVQUFVMkYsMkJBRVZqQixFQUFjLEdBQUdrQixNQUV4QmYsRUFBMEIsSUFBTUUsRUFBbUIsRUFFNUNMLEVBQWMsR0FBR2tCLE1BRXhCZixHQUEyQixJQUMzQkUsR0FBb0IsR0FDcEJ6TyxFQUFNMEosVUFBVTJGLDJCQUVUakIsRUFBYyxHQUFHa0IsTUFFeEJmLEdBQTJCLElBQzNCRSxHQUFvQixJQUNuQnpPLEVBQU0wSixVQUFVMkYsMkJBRVZqQixFQUFjLEdBQUdrQixNQUlqQmxCLEVBQWMsR0FBR2tCLE9BRVI3SixRQUFRLG9CQUFxQjhJLEVBQTBCLEVBQUksVUFBVSxZQUNsRjlJLFFBQVEsWUFBYThJLEVBQXlCLGFBQ3pESixFQUFpQjVDLEtBQUt3QyxJQUVuQi9OLEVBQU0wSixVQUFVbUYsVUFBWTdPLEVBQU0wSixVQUFVMEYsa0JBRTFDcFAsRUFBTTBKLFVBQVVtRixVQUFZN08sRUFBTTBKLFVBQVUwRixlQUM3Q3BCLEVBQWNJLEVBQWMsR0FBR2tCLE1BRXpCdFAsRUFBTTBKLFVBQVVtRixTQUV0QmIsRUFBY0ksRUFBYyxHQUFHa0IsTUFFekJ0UCxFQUFNMEosVUFBVTBGLGlCQUV0QnBCLEVBQWNJLEVBQWMsR0FBR2tCLE9BR2pDbkIsRUFBaUI1QyxLQUFLeUMsSUFLdEJDLEVBRENPLEdBQWMsRUFDSkosRUFBYyxJQUFJa0IsTUFHbEJsQixFQUFjLElBQUlrQixNQUUvQm5CLEVBQWlCNUMsS0FBSzBDLEdBSXBCQyxFQURDUSxHQUFtQixFQUNUTixFQUFjLElBQUlrQixNQUV2QlosSUFBb0IsR0FBS0EsRUFBa0IsRUFDdENOLEVBQWMsSUFBSWtCLE1BR2xCbEIsRUFBYyxJQUFJa0IsTUFFL0JuQixFQUFpQjVDLEtBQUsyQyxHQUVmQyxHQWdCaUIvSixLQUFJLFNBQUNDLEVBQU1zRCxHQUN6QixPQUNBLHFCQUFHekIsSUFBS3lCLElBQ0x0SCxFQUFBQSxFQUFBQSxJQUFNZ0UsUUFPakIsdUJBQUtuRSxVQUFVLG9CQUFvQndELFFBQVNzQixHQUMxQyx1QkFBSzlFLFVBQVUsUUFDYiwwQyxnVUN6S0gsU0FBU3FQLEdBQVF2UCxHQUd0QixJQUFNb0ksR0FBWTdFLEVBQUFBLEVBQUFBLGFBQVcsNEJBQUUsNkZBQzdCdkQsRUFBTW9JLFlBRHVCLDRDQUkvQixPQUNFLHVCQUFLbEksVUFBVSxhQUNiLHVCQUFLQSxVQUFVLFVBQ2IsdUJBQUtBLFVBQVUsWUFDYix5Q0FFRix1QkFBS0EsVUFBVSxZQUNiLGtIQUNNRixFQUFNd1AsUUFDViwyQkFBUywyQkFGWCxxQ0FPSix1QkFBS3RQLFVBQVUsaUJBQ2IsdUJBQUtBLFVBQVUsb0JBQW9Cd0QsUUFBUzBFLEdBQzFDLHVCQUFLbEksVUFBVSxRQUNiLDRDLGdVQ3JCTCxTQUFTdVAsR0FBWXpQLEdBRTFCLElBQU02RixHQUFpQnRDLEVBQUFBLEVBQUFBLGFBQVcsNEJBQUUsNkZBQy9CdkQsRUFBTThGLFNBQVcsR0FDbEI5RixFQUFNd0YsYUFBYXhGLEVBQU04RixTQUFXLEdBRkosNENBTTlCZCxHQUFhekIsRUFBQUEsRUFBQUEsYUFBVyw2Q0FBRSxXQUFPMEIsRUFBTUMsR0FBYixzRkFDMUJFLEVBQWNwRixFQUFNc0YsVUFBTixhQUVsQnRGLEVBQU13RixhQUFhSixHQUVuQnBGLEVBQU0yRixjQUFjckIsU0FBU1csSUFDN0JqRixFQUFNNEYsa0JBQWtCVixHQU5NLDJDQUFGLHlEQVN4QndLLEVBQW9CLFNBQUNDLEdBQ3pCLElBQU1DLEVBQXVCdkssT0FBT3NLLEdBQWNuTyxNQUFNLEtBQ3hELE1BQU8sQ0FDTHlELEtBQU0ySyxFQUFxQixHQUMzQjFLLFlBQWEwSyxFQUFxQkMsT0FBTyxLQUk3QyxPQUNFLHVCQUFLM1AsVUFBVSxlQUNiLHVCQUFLQSxVQUFVLFdBQ2IsMEJBQ0dHLEVBQUFBLEVBQUFBLElBQU1MLEVBQU0rRixRQUFRL0YsRUFBTThQLHNCQUcvQix1QkFBSzVQLFVBQVUsb0JBQW9Cd0QsUUFBU21DLEdBQzFDLHVCQUFLM0YsVUFBVSxRQUNiLHVDQUdKLHVCQUFLQSxVQUFVLG9CQUFvQndELFFBQVMsa0JBQU1zQixFQUNKMEssRUFBa0IxUCxFQUFNa0UsZUFBZWxFLEVBQU04UCxvQkFBb0I3SyxLQUNqRXlLLEVBQWtCMVAsRUFBTWtFLGVBQWVsRSxFQUFNOFAsb0JBQW9CNUssZUFFN0csdUJBQUtoRixVQUFVLFFBQ2IsMEMsd21DQ3BDSCxTQUFTNlAsR0FBVS9QLEdBR3hCLEksSUFBQSxHLEdBQW1DMEUsRUFBQUEsRUFBQUEsVUFBUyxDQUMxQ3NMLHVCQUF1QixFQUN2Qm5CLFVBQVUsRUFDVk8sZ0JBQWUsRUFDZkMsNEJBQTRCLEVBQzVCMUYsbUJBQW9CLEksRUFMdEIsRSxnMEJBQVFELEVBQVIsS0FBbUJ1RyxFQUFuQixNQVFBN04sRUFBQUEsRUFBQUEsWUFBVSxXQUNMc0gsRUFBVUMsbUJBQXFCLEdBQ2hDM0osRUFBTWtRLFlBRVAsQ0FBQ3hHLElBR0osSUFpQ015RyxFQWpDQS9ILEdBQVk3RSxFQUFBQSxFQUFBQSxhQUFXLDRCQUFFLDZGQUM3QjBNLEVBQWEsQ0FDWEQsdUJBQXVCLEVBQ3ZCbkIsVUFBVSxFQUNWTyxnQkFBZ0IsRUFDaEJDLDRCQUE0QixFQUM1QjFGLG1CQUFvQixJQUV0QjNKLEVBQU1vSSxZQVJ1Qiw0Q0FXekI1QyxHQUFlakMsRUFBQUEsRUFBQUEsYUFBVyw2Q0FBRSxXQUFPNk0sR0FBUCxnRkFFaENwUSxFQUFNd0YsYUFBYTRLLEdBRmEsMkNBQUYsdURBSzFCekssR0FBZ0JwQyxFQUFBQSxFQUFBQSxhQUFXLDZDQUFFLFdBQU84TSxHQUFQLGdGQUM5QjNKLE9BQU80SixVQUFVRCxJQUNsQnJRLEVBQU0yRixjQUFjMEssR0FGVywyQ0FBRix1REFNM0J6SyxHQUFvQnJDLEVBQUFBLEVBQUFBLGFBQVcsNkNBQUUsV0FBT2dOLEdBQVAsZ0ZBQ3JDdlEsRUFBTTRGLGtCQUFrQjJLLEdBRGEsMkNBQUYsdURBSS9CN0ssR0FBa0JuQyxFQUFBQSxFQUFBQSxhQUFXLDZDQUFFLFdBQU9pTixFQUFPSixHQUFkLHVGQUMvQkssRUFEK0IsTUFDWi9HLElBQ1Y4RyxHQUFTSixFQUN0QkgsRUFBYVEsR0FIc0IsMkNBQUYseURBMEI3QkMsRUFBZSxTQUFDQyxHQUNwQixPQUFPQSxHQUNMLElBQUssY0FDSCxPQUFPLGdCQUFDckksRUFBRCxDQUFhaEQsVUFBV3RGLEVBQU1zRixVQUNqQlMsUUFBU1YsT0FBT3JGLEVBQU1zRixVQUFOLGtCQUFxQzlELE1BQU0sS0FDM0QwQyxlQUFnQm1CLE9BQU9yRixFQUFNc0YsVUFBTixvQkFBdUM5RCxNQUFNLEtBQ3BFZ0UsYUFBY0EsRUFDZE0sU0FBVTlGLEVBQU04RixTQUNoQkgsY0FBZUEsRUFDZkMsa0JBQW1CQSxFQUNuQjhELFVBQVdBLEVBQ1hoRSxnQkFBaUJBLEVBQ2pCc0IsT0FBUWhILEVBQU1nSCxTQUNwQyxJQUFLLFFBQ0gsT0FBTyxnQkFBQzBFLEdBQUQsQ0FBY3BHLFVBQVd0RixFQUFNc0YsVUFDbEIrQyxRQUFTaEQsT0FBT3JGLEVBQU1zRixVQUFOLFlBQ2hCRSxhQUFjQSxFQUNkTSxTQUFVOUYsRUFBTThGLFNBQ2hCMUIsSUFDcUIsU0FBbkJwRSxFQUFNOEYsU0FDSixDQUFDLDZCQUE2Qix1Q0FFOUIsQ0FBQyw4QkFBOEIsMENBRXpELElBQUssb0JBQ0gsT0FBTyxnQkFBQ3FDLEVBQUQsQ0FBYTdDLFVBQVd0RixFQUFNc0YsVUFDakIrQyxRQUFTaEQsT0FBT3JGLEVBQU1zRixVQUFOLFlBQ2hCcEIsZUFBZ0JtQixPQUFPckYsRUFBTXNGLFVBQU4sb0JBQXVDOUQsTUFBTSxLQUNwRWdFLGFBQWNBLEVBQ2RNLFNBQVU5RixFQUFNOEYsU0FDaEJrQixPQUFRaEgsRUFBTWdILE9BQ2RvQixVQUFXQSxJQUNqQyxJQUFLLGVBQ0gsT0FBTyxnQkFBQzNELEVBQUQsQ0FBUWEsVUFBV3RGLEVBQU1zRixVQUNsQlMsUUFBU1YsT0FBT3JGLEVBQU1zRixVQUFOLGtCQUFxQzlELE1BQU0sS0FDM0QwQyxlQUFnQm1CLE9BQU9yRixFQUFNc0YsVUFBTixvQkFBdUM5RCxNQUFNLEtBQ3BFZ0UsYUFBY0EsRUFDZE0sU0FBVTlGLEVBQU04RixTQUNoQkgsY0FBZUEsRUFDZkMsa0JBQW1CQSxFQUNuQkYsZ0JBQWlCQSxFQUNqQnNCLE9BQVFoSCxFQUFNZ0gsU0FDOUIsSUFBSyxjQUNILE9BQU8sZ0JBQUN5SSxHQUFELENBQWFuSyxVQUFXdEYsRUFBTXNGLFVBQ3ZCUyxRQUFTVixPQUFPckYsRUFBTXNGLFVBQU4sa0JBQXFDOUQsTUFBTSxLQUMzRDBDLGVBQWdCbUIsT0FBT3JGLEVBQU1zRixVQUFOLG9CQUF1QzlELE1BQU0sS0FDcEVzTyxrQkFBbUJwRyxFQUFVc0csc0JBQXdCLEVBQUksRUFDekR4SyxhQUFjQSxFQUNkTSxTQUFVOUYsRUFBTThGLFNBQ2hCSCxjQUFlQSxFQUNmQyxrQkFBbUJBLElBQ25DLElBQUssaUJBQ0gsT0FBTyxnQkFBQ3VCLEVBQUQsQ0FBZ0I3QixVQUFXdEYsRUFBTXNGLFVBQ2xCUyxRQUFTVixPQUFPckYsRUFBTXNGLFVBQU4sa0JBQXFDOUQsTUFBTSxLQUMzRDBDLGVBQWdCbUIsT0FBT3JGLEVBQU1zRixVQUFOLG9CQUF1QzlELE1BQU0sS0FDcEVnRSxhQUFjQSxFQUNkTSxTQUFVOUYsRUFBTThGLFNBQ2hCSCxjQUFlQSxFQUNmQyxrQkFBbUJBLEVBQ25Cb0IsT0FBUWhILEVBQU1nSCxTQUN0QyxJQUFLLFFBQ0gsT0FBTyxnQkFBQzhHLEdBQUQsQ0FBT3hJLFVBQVd0RixFQUFNc0YsVUFDakJRLFNBQVU5RixFQUFNOEYsU0FDaEJOLGFBQWNBLEVBQ2RHLGNBQWVBLEVBQ2ZDLGtCQUFtQkEsRUFDbkJWLFlBQWFsRixFQUFNa0YsWUFDbkJ3RSxVQUFXQSxFQUNYMUMsT0FBUWhILEVBQU1nSCxPQUNkbUksZUFBZ0JuUCxFQUFNbVAsaUJBR3RDLFFBQ0UsT0FBTyxnQkFBQzFLLEVBQUQsQ0FBUWEsVUFBV3RGLEVBQU1zRixVQUFXUyxRQUFTVixPQUFPckYsRUFBTXNGLFVBQU4sa0JBQXFDOUQsTUFBTSxLQUFNZ0UsYUFBY0EsRUFBY00sU0FBVTlGLEVBQU04RixhQUk5SixPQUNzQixJQUFsQjlGLEVBQU00USxRQUNKLHVCQUFLMVEsVUFBVSxXQUNiLGdCQUFDcVAsR0FBRCxDQUNFQyxRQXBHSlcsRUFBVSxHQUNYekcsRUFBVUMsbUJBQXFCLEVBQ2hDd0csRUFBUTVFLEtBQUssa0tBR1Z2TCxFQUFNZ0gsT0FBT2hILE1BQU00QyxRQUFVLEVBQzlCdU4sRUFBUTVFLEtBQUsscURBRVB2TCxFQUFNa0YsWUFBWSxJQUFNLEVBQzlCaUwsRUFBUTVFLEtBQUssNkVBRVB2TCxFQUFNa0YsWUFBWSxJQUFNLEdBQzlCaUwsRUFBUTVFLEtBQUssNkVBSVY0RSxHQXFGQy9ILFVBQVdBLEtBSWYsdUJBQUtsSSxVQUFVLFdBRWdCLFVBQTVCRixFQUFNc0YsVUFBTixLQUNDLHVCQUFLcEYsVUFBVSxtQkFDYix1QkFBS0EsVUFBVSxVQUNiLHVCQUFLQSxVQUFVLGdCQUNiLDJCQUFLRyxFQUFBQSxFQUFBQSxJQUFNTCxFQUFNc0YsVUFBTixVQUdmLHVCQUFLcEYsVUFBVSxjQUNkd1EsRUFBYTFRLEVBQU1zRixVQUFOLE9BR2hCLHVCQUFLcEYsVUFBVSxhQUNiLHVCQUFLQSxVQUFVLFVBQ2IsdUJBQUtBLFVBQVUsWUFDYiwyQkFBS0csRUFBQUEsRUFBQUEsSUFBTUwsRUFBTXNGLFVBQU4sU0FFYix1QkFBS3BGLFVBQVUsWUFDYiwwQkFBSUcsRUFBQUEsRUFBQUEsSUFBTUwsRUFBTXNGLFVBQU4sVUFHYm9MLEVBQWExUSxFQUFNc0YsVUFBTixRLGs4QkN4THJCLFNBQVN1TCxHQUFVN1EsR0FFeEIsVUFBZ0MwRSxFQUFBQSxFQUFBQSxVQUFTLFFBQXpDLEdBQU9vTSxFQUFQLEtBQW1CQyxFQUFuQixLQUNBLE1BQWtDck0sRUFBQUEsRUFBQUEsVUFBUyxHQUEzQyxHQUFPc00sRUFBUCxLQUFrQkMsRUFBbEIsS0FDQSxNQUE4QnZNLEVBQUFBLEVBQUFBLFVBQVMsSUFBdkMsR0FBTzlCLEVBQVAsS0FBZ0JzTyxFQUFoQixLQUNBLE1BQXNDeE0sRUFBQUEsRUFBQUEsVUFBUyxDQUFDLEVBQUUsRUFBRSxJQUFwRCxHQUFPUSxFQUFQLEtBQW9CaU0sRUFBcEIsS0FDQSxNQUFvQnpNLEVBQUFBLEVBQUFBLFVBQVMsVUFBN0IsR0FBTzBNLEVBQVAsS0FBV0MsRUFBWCxNQUVBalAsRUFBQUEsRUFBQUEsWUFBVSxjQUVQLENBQUMwTyxLQUVKMU8sRUFBQUEsRUFBQUEsWUFBVSxXQUNSa1AsRUFBY04sR0FDRyxRQUFkQSxHQUNEZCxNQUVELENBQUNjLElBRUosSUFLTWQsRUFBVSxXQUNkZSxFQUFhLE9BQ2JGLEVBQVUsUUFVTk8sRUFBZ0IsU0FBQ04sS0F3QmpCTyxFQUFnQixTQUFDQyxHQUtyQixPQUhnQnhSLEVBQU15UixTQUFTQyxXQUFVLFNBQUNyTixHQUN4QyxPQUFPZ0IsT0FBT21NLEtBQVluTSxPQUFPaEIsRUFBSSxTQWdCekNqQyxFQUFBQSxFQUFBQSxZQUFVLFdBQ1IsSUFBTWtELEVBQVl0RixFQUFNeVIsU0FBU0YsRUFBY1AsSUFDNUMxTCxHQUFhQSxFQUFVeUIsZUFBZSxnQkFadEIsWUFhVHpCLEVBQVMsV0FaakIrTCxFQUFNLFdBR0ksV0FBUEQsR0FDREMsRUFBTSxjQVlaLElBQU1NLEVBQW9CLFdBQ3hCLElBQU1DLEVBQWtDLFFBQWZkLEdBQ2EsUUFBZEUsR0FDTyxZQUFQSSxFQUNBLFdBQWEsR0FHL0I5TCxFQUFZdEYsRUFBTXlSLFNBQVNGLEVBQWNQLElBWS9DLE1BQU8sQ0FDTFksZ0JBQWlCQSxFQUNqQkMsZ0JBYnNCdk0sRUFDK0IsV0FBNUJBLEVBQVMsV0FDUixxQ0FDNEIsWUFBNUJBLEVBQVMsV0FDUCxtQ0FDNEIsYUFBNUJBLEVBQVMsV0FDUCxvQ0FDQSxLQUVOLE9Bc0Q1QixNQTdDa0MsU0FBZndMLEVBRWYsdUJBQUs1USxVQUFVLGNBQ2IsdUJBQUtBLFVBQVUsb0JBQ2IsdUJBQ0VvRyxJQUFJLGtEQUdSLGdCQUFDakQsRUFBRCxDQUFVSSxVQUFXekQsRUFBTXlELFVBQVdxTyxPQUFROVIsRUFBTThSLE9BQVF0TyxVQXJHaEQsV0FDaEJ1TixFQUFVLFdBQ1ZFLEVBQWEsT0F1R2IsdUJBQUsvUSxVQUFTLHFCQUFnQnlSLElBQW9CQyxrQkFFTCxhQUF4Q0QsSUFBb0JDLGlCQUEwRSxPQUF4Q0QsSUFBb0JFLGdCQUN6RSx1QkFBSzNSLFVBQVUsb0JBQ2IsdUJBQ0VvRyxJQUFHLHFCQUFnQnFMLElBQW9CRSxpQkFDdkMzUixVQUFVLGVBSWQsR0FFSix1QkFBS0EsVUFBVSxpQkFDYixxREFDQSwrQ0FBZ0IwQyxFQUFoQixPQUNBLDRDQUFhc0MsRUFBWSxHQUF6QixTQUNBLDhDQUFlQSxFQUFZLEdBQTNCLFNBQ0EsNENBQWFBLEVBQVksR0FBekIsVUFFRixnQkFBQzZLLEdBQUQsQ0FBV2pLLFNBQVVrTCxFQUNuQjFMLFVBQTBCLFFBQWQwTCxFQUF1QixHQUFLaFIsRUFBTXlSLFNBQVNGLEVBQWNQLElBQ3JFeEwsYUFBY3lMLEVBQ2R0TCxjQTFHZ0IsU0FBQ3NGLEdBQ3JCaUcsR0FBVyxTQUFBdE8sR0FBTyxPQUFJQSxFQUFVcUksS0FDN0JySSxFQUFVcUksRUFBTyxHQUNsQmlGLEtBd0dFdEssa0JBcEdvQixTQUFDcUYsR0FDekIsSUFBSThHLEVBQWlCelEsTUFBTTBRLE1BQU0sS0FBTTFRLE1BQU0ySixFQUFLMUYsU0FBU25CLEtBQUksZUFDL0RjLEVBQVkxQyxTQUFRLFNBQUM2QixFQUFNc0QsR0FDekJvSyxFQUFlcEssR0FBU3JELFNBQVNELEdBQVFDLFNBQVMyRyxFQUFLdEQsT0FJekR3SixFQUFlWSxJQUNaQSxFQUFlLEtBQU8sR0FBS0EsRUFBZSxLQUFPLElBQ2xEN0IsS0E0RkVsSixPQUFRLGdCQUFDakYsRUFBRCxDQUFRYSxRQUFTQSxJQUN6QnNDLFlBQWFBLEVBQ2IwTCxRQUF1QixRQUFkSSxHQUFzQyxRQUFmRixFQUNoQzNCLGVBQWdCblAsRUFBTW1QLGVBQ3RCL0csVUEzSFksV0FDaEI4SSxFQUFXLElBQ1hDLEVBQWUsQ0FBQyxFQUFFLEVBQUUsSUFDcEJKLEVBQVUsUUFDVkUsRUFBYSxJQXdIVGYsUUFBU0EsSyx1S0N0SlYsSUFBTStCLEdBQWIsV0FFRSxXQUFZQyxFQUFXNVIsRUFBWTZSLEVBQVVWLEksNEZBQVMsU0FDcERXLEtBQUtGLFVBQVlBLEVBQ2pCLElBQU1HLEVBQVdELEtBQUtGLFVBQVV6RixPQUFPLE9BQ3BDM0gsUUFBUSxZQUFZLEdBQ3ZCc04sS0FBS0UsV0FBYUMsRUFBQUEsV0FBb0JGLEVBQVM1UCxRQUMvQzJQLEtBQUs5UixXQUFhQSxFQUNsQjhSLEtBQUtoUyxPQUFTK1IsRUFBUSxNQUN0QkMsS0FBS1gsU0FBV0EsRUFDaEJXLEtBQUtJLGEsUUFWVCxPLEVBQUEsRyxFQUFBLHlCQWFFLFdBQ0UsSUFBTS9PLEVBQWEsZ0JBQUMsRUFBRCxDQUNqQnlDLElBQUssWUFDTHVNLFlBQWE3UixFQUNiTixXQUFZOFIsS0FBSzlSLFdBQ2pCRixPQUFRZ1MsS0FBS2hTLE9BQ2JJLFdBQVksS0FDWkwsUUFBUyxLQUdYaVMsS0FBS0UsV0FBV0ksT0FBTyxnQkFBQzdCLEdBQUQsQ0FBV3BOLFVBQVdBLEVBQ1hxTixXQUFZc0IsS0FBS3RCLFdBQ2pCVyxTQUFVVyxLQUFLWCxTQUFTLEdBQ3hCdEMsZUFBZ0JpRCxLQUFLWCxTQUFTLFcscUVBMUJwRSxLLGdVQ3FCTyxTQUFla0IsR0FBdEIscUMsb0RBQU8sV0FBMEJDLEVBQWEzSixHQUF2Qyx5R0FFRW1ELFFBQVFDLElBQUksQ0FDSGhLLEVBQUFBLElBQU8sa0NBQ1BBLEVBQUFBLElBQU8saUNBRXBCaUssTUFBTSxTQUFBbUYsR0FFTCxJQUFNb0IsRUFBZXhRLEVBQUFBLEdBQVUsY0F5QjdCLE9BdkJhLElBQUk0UCxHQUFPWSxFQUFjblIsRUFBV3VILEdBQVUySixFQUFZLEdBQUluQixHQUc3RXFCLEdBQVNGLEVBQVkzSixHQWFHLENBQ3BCLENBQ0UsbUJBNUJMLDRDLHNCQXVDUCxTQUFTNkosR0FBU0YsRUFBYTNKLElsQi9EeEIsU0FBc0IySixFQUFhalIsR0FFdEMsSUFBSW9SLEVBQWdCLEdBQ2hCQyxFQUFnQixHQUVoQi9KLEVBQVV2SCxFQUFXQyxHQWlHekIsT0E5RkFpUixFQUFZeE8sS0FBSSxTQUFDNk8sRUFBUTlOLEdBRXJCLEdBQUc4TixFQUFPLFVBQXFDclMsRUFBaUQsQ0FDNUYsSUFBSVQsRUFBVThTLEVBQU8sWUFDakJDLEVBQVlELEVBQU8sTUFDbkJFLEVBQW9CRixFQUFPLFVBQy9CRixFQUFjRSxFQUFPLFdBQXNDLENBQ3ZEL00sSUFBS2YsRUFDTHNOLFlBQWE3UixFQUNiTixXQUFZMkksRUFDWjdJLE9BQVE4UyxFQUNSMVMsV0FBWTJTLEVBQ1poVCxRQUFTa0IsRUFBYWxCLEdBQ3RCaVQsT0FBUUgsRUFBTyxhQUdsQixHQUFHQSxFQUFPLFVBQXFDclMsRUFBcUQsQ0FDckcsSUFBSXlTLEVBQVFKLEVBQU8sTUFDZjlTLEVBQVU4UyxFQUFPLFlBQ2pCRSxFQUFvQkYsRUFBTyxVQUMvQkYsRUFBY0UsRUFBTyxXQUFzQyxDQUN2RC9NLElBQUtmLEVBQ0xzTixZQUFhN1IsRUFDYnlTLE1BQU9BLEVBQ1BDLE9BQVFMLEVBQU8sT0FDZk0sU0FBVU4sRUFBTyxpQkFDakJ6UyxXQUFZMlMsRUFDWmhULFFBQVNrQixFQUFhbEIsR0FDdEJxVCxjQUFlblMsRUFBYTRSLEVBQU8sZUFDbkNHLE9BQVFILEVBQU8sYUFHbEIsR0FBR0EsRUFBTyxVQUFxQ3JTLEVBQXNELENBQ3RHLElBQUk2UyxFQUFXUixFQUFPLE1BQ2xCaFMsRUFBT2dTLEVBQU8sU0FFZFEsRUFEY3RTLEtBQUtkLE1BQU00UyxFQUFPLFFBR3BDRixFQUFjRSxFQUFPLFdBQXNDLENBQ3ZEL00sSUFBS2YsRUFDTHNOLFlBQWE3UixFQUNieVMsTUFBT3BTLEVBQU9nUyxFQUFPLE9BQWtDUSxFQUN0RCxDQUNHQyxVQUFVLENBQUNDLE1BQU8sR0FBSUMsS0FBTUgsR0FDNUJJLFNBQVUsTUFFZFAsT0FBUUwsRUFBTyxPQUNmTSxTQUFVTixFQUFPLGlCQUNqQnpTLFdBQVl5UyxFQUFPLFVBQ25COVMsUUFBU2tCLEVBQWE0UixFQUFPLGFBQzdCTyxjQUFlblMsRUFBYTRSLEVBQU8sZUFDbkNHLE9BQVFILEVBQU8sYUFHbEIsR0FBR0EsRUFBTyxVQUFxQ3JTLEVBQWlELENBRWpHLElBQUlrVCxFQUFVLENBQ1ZDLFVBQVdkLEVBQU8sVUFDbEJlLFdBQVlmLEVBQU8sS0FDbkJXLEtBQU1YLEVBQU8sTUFDYkssT0FBUUwsRUFBTyxPQUNmTSxTQUFVTixFQUFPLGlCQUNqQnpTLFdBQVl5UyxFQUFPLFVBQ25CTyxjQUFlblMsRUFBYTRSLEVBQU8sZUFDbkNnQixZQUFhNVMsRUFBYTRSLEVBQU8sYUFDakNHLE9BQVFILEVBQU8sUUFFbkIsR0FBR0YsRUFBY2hNLGVBQWVrTSxFQUFPLFdBQW9DLENBRXZFLElBQUlpQixFQUFnQm5CLEVBQWNFLEVBQU8sV0FDekNpQixFQUFjM0ksS0FBS3VJLEdBQ25CZixFQUFjRSxFQUFPLFdBQXNDaUIsT0FHM0RuQixFQUFjRSxFQUFPLFdBQXNDLENBQUNhLEdBQzVEZCxFQUFjekgsS0FBSzBILEVBQU8sZUFJdENELEVBQWM1TyxLQUFJLFNBQUM4QixHQUNmLElBQUlpTyxFQUFhcEIsRUFBYzdNLEdBQzNCa08sRUFBY0QsRUFBVyxHQUFHSixZQUFjblQsRUFBb0QsYUFBZSxHQUM3R3VTLEVBQW9CZ0IsRUFBVyxHQUFHM1QsV0FDdEN1UyxFQUFjN00sR0FBTyxDQUNqQkEsSUFBS0EsRUFDTHVNLFlBQWE3UixFQUNieVQsT0FBUW5PLEVBQ1JvTyxNQUFPSCxFQUNQclAsUUFBUyxjQUFGLE9BQWdCc1AsR0FDdkJHLFVBQVcsRUFDWC9ULFdBQVkyUyxNQUlicUIsT0FBT0MsT0FBTzFCLElrQnJDRDJCLENBQWE5QixFQUFhM0osR0FDbEM3RSxLQUFJLFNBQUF1USxHQUVjLGdCQUEzQkEsRUFBV2xDLGFBQ1prQyxFQUFXTCxNQUFNbFEsS0FBSSxTQUFDd1EsRUFBS3pQLEdBQ0osS0FBaEJ5UCxFQUFLdEIsU0FDTyxJQUFWbk8sRUFDRDlDLEVBQUFBLEdBQUEsV0FBY3NTLEVBQVd6TyxJQUF6QixZQUFnQ2YsSUFBUzFFLE1BQU0sVUFBVyxHQUcxRDRCLEVBQUFBLEdBQUEsV0FBY3NTLEVBQVd6TyxJQUF6QixZQUFnQ2YsSUFBUzFFLE1BQU0sVUFBVyxVLHNSQy9EbEVvVSxHQUFBQSxXQVFKLFdBQVlDLEVBQUkzUCxFQUFPNFAsSSw0RkFBVSxTQUMvQjNDLEtBQUswQyxHQUFLQSxFQUNWMUMsS0FBS2pOLE1BQVFBLEVBQ2JpTixLQUFLMkMsU0FBV0EsRUFDaEIzQyxLQUFLNEMsYUFBYyxFLDZDQVFyQixTQUFTQyxHQUNIN0MsS0FBSzRDLGNBR1Q1QyxLQUFLNEMsYUFBYyxFQUNuQjVDLEtBQUswQyxHQUFHSSxVQUFVQyxJQUFJLFVBQ3RCL0MsS0FBSzJDLFNBQVNFLE0sd0JBTWhCLFdBQ083QyxLQUFLNEMsY0FHVjVDLEtBQUs0QyxhQUFjLEVBQ25CNUMsS0FBSzBDLEdBQUdJLFVBQVVySCxPQUFPLGdCLHVFQXJDdkJnSCxHLDhJQ1ZDLFNBQVNPLEdBQWF4QyxFQUFhalIsR0FFdEMsSUFBSTBULEVBQVcsR0FDZixDQUFDLE9BQVEsMkJBQTRCLDhCQUE4QjdTLFNBQVEsU0FBQThTLEdBQ3pFRCxFQUFXQSxFQUFTbEwsT0FBTzdJLE1BQU1DLEtBQUtnVSxTQUFTQyxpQkFBaUJGLFNBRWxFRyxFQUFBQSxHQUFBQSxHQUFXSixFQUFVLENBQUVLLHNCQVROLEtBV04sSUFBSUMsS0FBSixDQUFhLENBQ3RCQyxrQkFBbUIsUUFDbkJDLFVBQVcsTUFHYnpKLFFBQVFDLElBQUksQ0FBQ3lKLEdBQUdsRCxFQUFhalIsS0FBYzJLLE1BQUssWSxTRHlEN0MsU0FBa0J5SixHQUN2QixJQUFJQyxFQUFhLEVBQ2JDLEVBQWdCLEVBRWhCQyxFQUFjekksT0FBT3lJLFlBQ3JCQyxHQUFnQixFQUNoQkMsRUFBYSxFQUNiOUIsRUFBUSxHQUNSK0IsRUFBTSxHQUNOQyxFQUFlLEdBRWJDLEVBQWtCaEIsU0FBU2lCLGNBQWMscUJBQ3pDQyxFQUFpQmxCLFNBQVNpQixjQUFjLHNCQUN4Q2pXLEVBQVFnVixTQUFTaUIsY0FBYyxxQkFFL0JFLEVBQWNuQixTQUFTQyxpQkFBaUIsZ0JBQzlDLEdBQUlrQixFQUFZblIsU0FBV3dRLEVBQVV4USxPQUNuQyxNQUFNLElBQUlvUixNQUFNLHNDQUErQkQsRUFBWW5SLE9BQTNDLHdGQUN1QndRLEVBQVV4USxPQURqQyxvRUFJbEJtUixFQUFZbFUsU0FBUSxTQUFDb1UsRUFBWTNNLEdBQy9CLEksRUFBTTRNLEUsZ0RBQWVELEVBQVdwQixpQkFBaUIsYSxra0JBQ2pELEdBQUlxQixFQUFTdFIsU0FBV3dRLEVBQVU5TCxHQUFHMUUsT0FDbkMsTUFBTSxJQUFJb1IsTUFBTSwrQkFBd0JFLEVBQVN0UixPQUFqQyxpQ0FBZ0UwRSxFQUFJLEVBQXBFLGdFQUNvQjhMLEVBQVU5TCxHQUFHMUUsT0FEakMsMkJBQzBEMEUsRUFEMUQsb0VBSWxCcUssRUFBUUEsRUFBTW5LLE9BQU8wTSxFQUFTelMsS0FBSSxTQUFDaEQsRUFBRzBWLEdBQUosT0FBVSxJQUFJakMsR0FBYXpULEVBQWpCLFVBQXVCNkksRUFBdkIsWUFBNEI2TSxHQUFLZixFQUFVOUwsR0FBRzZNLFFBQzFGVCxFQUFNQSxFQUFJbE0sT0FBT2tNLEVBQUtPLEVBQVdKLGNBQWMsZ0JBT2pELElBQU1PLEVBQVUsV0FDZCxJQUFNQyxFQUFnQnZKLE9BQU93SixhQUFlMUIsU0FBUzdJLGdCQUFnQndLLFVBQ3JFNUMsRUFBTTlSLFNBQVEsU0FBQW9TLEdBRVosSUFBTXVDLEVBQWV2QyxFQUFLRSxHQUFHc0Msd0JBQ3pCbEIsRUFBY2lCLEVBQWFFLElBQU1wQixFQUFnQixHQUNoRGtCLEVBQWFFLElBQU1GLEVBQWFHLE9BQVN0QixFQUFhLEVBQ3pETSxFQUFhL0ssS0FBS3FKLEdBRWxCQSxFQUFLMkMsZ0JBS1QsSUFBTUMsRUFBNkJqWCxFQUFNNlcsd0JBQXdCSyxRQUFVLEVBQ3JFQyxFQUE2Qm5CLEVBQWdCckIsVUFBVXlDLFNBQVMsV0FDbEVILElBQStCRSxFQUNqQ25CLEVBQWdCckIsVUFBVUMsSUFBSSxZQUNwQnFDLEdBQThCRSxHQUN4Q25CLEVBQWdCckIsVUFBVXJILE9BQU8sV0FJbkN5SSxFQUFhOVQsU0FBUSxTQUFDb1YsRUFBUzNOLEdBQ3pCK00sR0FBaUJaLEVBQ2ZuTSxJQUFNcU0sRUFBYS9RLE9BQVMsRUFDOUJxUyxFQUFRQyxTQTFFVixRQTRFRUQsRUFBUUwsYUFHQSxJQUFOdE4sRUFDRjJOLEVBQVFDLFNBakZaLE1BbUZJRCxFQUFRTCxnQkFJZE8sSUFHQXhCLEVBQWUsR0FDZkYsRUFBYVksR0FPVGMsRUFBd0IsV0FDNUIsSUFFTUMsR0FGWXhDLFNBQVN5QyxLQUFLZCxXQUFhM0IsU0FBUzdJLGdCQUFnQndLLFlBQ3ZEM0IsU0FBUzdJLGdCQUFnQnVMLGFBQWUxQyxTQUFTN0ksZ0JBQWdCd0wsY0FDeEMsSUFDeEN6QixFQUFlaFcsTUFBTTBYLE1BQVFKLEVBQVcsS0FHcENLLEVBQWtCLENBTXRCekYsV0FBWSxXQUNWLEdBQUl3RCxFQUNGLE1BQU0sSUFBSVEsTUFBTSx3Q0FZbEIsT0FWQVIsR0FBZ0IsRUFDaEIxSSxPQUFPNEssaUJBQWlCLFNBQVV0QixHQUNsQ3RKLE9BQU80SyxpQkFBaUIsVUFBVSxXQUNoQ25DLEVBQWN6SSxPQUFPeUksWUFDckI0QixRQUVHckssT0FBT3dKLGFBQWUxQixTQUFTN0ksZ0JBQWdCd0ssV0FBYSxHQUMvREgsSUFFRmUsSUFDT00sR0FTVEUsVUFBVyxTQUFBQSxHQUNULFFBQWtCN00sSUFBZDZNLEVBQ0YsT0FBT3RDLEVBRVQsSUFBS3RQLE9BQU80SixVQUFVZ0ksR0FDcEIsTUFBTSxJQUFJM0IsTUFBTSx5Q0FHbEIsT0FEQVgsRUFBYXNDLEVBQ05GLEdBU1RHLGFBQWMsU0FBQUEsR0FDWixRQUFxQjlNLElBQWpCOE0sRUFDRixPQUFPdEMsRUFFVCxJQUFLdlAsT0FBTzRKLFVBQVVpSSxHQUNwQixNQUFNLElBQUk1QixNQUFNLHlDQUdsQixPQURBVixFQUFnQnNDLEVBQ1RILElBR1gsT0FBT0EsR0M3TUhJLEUsRUFEa0UsRSxFQUFBLEUsZzBCQUFBLElBRS9ERixVQWxCWSxJQW1CWkMsYUFBYSxHQUNiNUYsZ0JDZFA0QyxTQUFTaUIsY0FBYyxTQUFTaUMsVUFBYUMsRUFBQUEsRUFnRTNDclcsRUFBQUEsSUFBT3NXLEVBQWMsY0FBZEEsaUJBQStCck0sTUFBTSxTQUFBc0csR0FDMUN2USxFQUFBQSxJQUFPc1csRUFBYyxjQUFkQSxnQkFBOEJyTSxNQUFNLFNBQUEzSyxHQUN6Q3lULEdBQWF4QyxFQUFhalIsR0F3QmhDNFQsU0FBU2lCLGNBQWMsb0JBQW9CaUMsVUFBWXBXLEVBQUFBLEdBQUEsa0JBQTRCSSxPQUFPZ1csaUIsVUM3RjVGRyxFQUFPQyxRQUFVLENBQUNGLGNBUEksQ0FDbEIsV0FBYyxtS0FDZCxVQUFhLDJLQUNiLGdCQUFtQixtQ0FDbkIsZUFBa0Isc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvY29tcG9uZW50cy9JbnRyb1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2NvbXBvbmVudHMvRFdDaGFydC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uLi9sZWRldm9pci1kYXRhdml6L3NyYy9tYXBzL2ludGVyYWN0aXZlLW1hcC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uLi9sZWRldm9pci1kYXRhdml6L3NyYy9ncmFwaHMvc3RhY2tlZEFyZWFDaGFydC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL2dhdWdlcy9HYXVnZXMuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9pbnRyb0JveC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL2dhdWdlcy9Nb25pdG9yaW5nLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC91dGlscy5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL3Byb21wdGZpbGwvQ2hvaWNlLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9NdWx0aVNlbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL3Byb21wdGZpbGwvUHJpbnRQcm9tcHQuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL1JlcGFydGl0aW9uLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9NYXBOYXZpZ2F0b3IuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL0JpbGFuLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9FbmRHYW1lLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9DYXRhc3Ryb3BoZS5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL1Byb21wdEJveC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL21haW5mcmFtZS5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9lbmdpbmUuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3Zpei5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvc2Nyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dlbmVyYXRvci9pbml0U2Nyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2FwcC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9kYXRhL2dvb2dsZV9jb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gSW50cm9TZWN0aW9uKHByb3BzKXtcblxuXG4gICAgbGV0IGludHJvU2VjdGlvbk9iaiA9IChcbiAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPXtgaW50cm8tc2VjdGlvbiAke3Byb3BzLmNsYXNzZXN9YH0+XG4gICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwib3ZlclRpdGxlXCI+XG4gICAgICAgICAgICAgIHtwcm9wcy5hbW9yY2V9XG4gICAgICAgICAgICA8L2g1PlxuICAgICAgICAgICAgPGgxPntwYXJzZShwcm9wcy5vcHRpb25EYXRhLnRpdGxlKX08L2gxPlxuICAgICAgICAgICAgPGFkZHJlc3M+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkYXRlXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2FkZHJlc3M+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICApO1xuICAgIGxldCBjb250YWluZWRPYmogPSBwcm9wcy5iYWNrZ3JvdW5kID9cbiAgICAgICAgKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogYCR7cHJvcHMuYmFja2dyb3VuZH1gfX0gY2xhc3NOYW1lPXtcInNlY3Rpb25Db250YWluZXJcIn0+XG4gICAgICAgICAgICAgICAge2ludHJvU2VjdGlvbk9ian1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgICAgIDpcbiAgICAgICAgKFxuICAgICAgICAgICAgaW50cm9TZWN0aW9uT2JqXG4gICAgICAgIClcblxuICAgIHJldHVybiAoXG4gICAgICAgIGNvbnRhaW5lZE9ialxuICAgIClcbn1cbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERXQ2hhcnQoeyB0aXRsZSwgc3JjLCAuLi5wcm9wcyB9KSB7XHJcbiAgY29uc3QgaWZyYW1lUmVmID0gdXNlUmVmKClcclxuICBjb25zdCBbaGVpZ2h0LCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSg1MDApXHJcblxyXG4gIGNvbnN0IG9uTWVzc2FnZSA9IHVzZUNhbGxiYWNrKFxyXG4gICAgKHsgZGF0YSA9IHt9LCBzb3VyY2UgfSkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgc291cmNlICE9PSBpZnJhbWVSZWYuY3VycmVudC5jb250ZW50V2luZG93IHx8XHJcbiAgICAgICAgdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgIWRhdGFbJ2RhdGF3cmFwcGVyLWhlaWdodCddXHJcbiAgICAgIClcclxuICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgIC8vc2V0U3RhdGUoT2JqZWN0LnZhbHVlcyhkYXRhWydkYXRhd3JhcHBlci1oZWlnaHQnXSlbMF0pXHJcbiAgICB9LFxyXG4gICAgW3NldFN0YXRlLCBpZnJhbWVSZWZdXHJcbiAgKVxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpXHJcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpXHJcbiAgfSwgW2hlaWdodCwgc2V0U3RhdGUsIG9uTWVzc2FnZV0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8aWZyYW1lXHJcbiAgICAgIHJlZj17aWZyYW1lUmVmfVxyXG4gICAgICBzY3JvbGxpbmc9XCJub1wiXHJcbiAgICAgIGZyYW1lQm9yZGVyPVwiMFwiXHJcbiAgICAgIHdpZHRoPVwiMTAwJVwiXHJcbiAgICAgIHsuLi5wcm9wc31cclxuICAgICAgdGl0bGU9e3RpdGxlfVxyXG4gICAgICBzcmM9e3NyY31cclxuICAgICAgaGVpZ2h0PXtoZWlnaHR9XHJcbiAgICAvPlxyXG4gIClcclxufVxyXG5cclxuRFdDaGFydC5wcm9wVHlwZXMgPSB7XHJcbiAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICBzcmM6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICBsb2FkaW5nOiBQcm9wVHlwZXMub25lT2YoWydlYWdlcicsICdsYXp5J10pLFxyXG59IiwiZXhwb3J0IGNvbnN0IGNvbnRlbnRIZWFkZXJDb25zdGFudHMgPSB7XG4gICAgc2VjdGlvbjogXCJTZWN0aW9uXCIsXG4gICAgc2VjdGlvbklEOiBcIlNlY3Rpb25JRFwiLFxuICAgIGF0dHJpYnV0czogXCJBdHRyaWJ1dHNcIixcbiAgICBzb3Vzc2VjdGlvbjogXCJTdGVwXCIsXG4gICAgdGV4dGU6IFwiVEVYVEVcIixcbiAgICB2aXN1ZWw6IFwiVklTVUVMXCIsXG4gICAgbm9tZmljaGllcnNvdXJjZTogXCJOb21GaWNoaWVyU291cmNlXCIsXG4gICAgc3R5bGVmb25kOiBcIlN0eWxlRm9uZFwiLFxuICAgIHN0ZXBjbGFzc2VzOiBcIlN0ZXBDbGFzc2VzXCIsXG4gICAgdmlzdWVsY2xhc3NlczogXCJWaXN1ZWxDbGFzc2VzXCIsXG4gICAgbm90ZXM6IFwiTm90ZXNcIixcbiAgICBnYW1laWQ6IFwiR2FtZUlEXCJcbn07XG5cbmV4cG9ydCBjb25zdCBvcHRpb25zRHJvcGRvd25Db25zdGFudHMgPSB7XG4gICAgc2VjdGlvbnR5cGVzOiB7XG4gICAgICAgIGludHJvdGl0cmU6IFwiaW50cm8tdGl0cmVcIixcbiAgICAgICAgcGxlaW5lcGFnZXRpdHJlOiBcInBsZWluZS1wYWdlLXRpdHJlXCIsXG4gICAgICAgIHRleHRlY2xhc3NpcXVlOiBcInRleHRlLWNsYXNzaXF1ZVwiLFxuICAgICAgICB2aXpzZWN0aW9uOiBcInZpei1zZWN0aW9uXCJcbiAgICB9LFxuICAgIHNlY3Rpb25hdHRyaWJ1dGVzOntcbiAgICAgICAgcGxlaW5lcGFnZTogXCJwbGVpbmUtcGFnZVwiLFxuICAgICAgICBmb25kbm9pcjogXCJmb25kLW5vaXJcIixcbiAgICAgICAgY2VudHJlOiBcImNlbnRyw6lcIixcbiAgICAgICAgY290ZWNvdGU6IFwiY8O0dMOpLWPDtHTDqVwiXG4gICAgfSxcbiAgICB2aXN1ZWx0eXBlczp7XG4gICAgICAgIHBob3RvOiBcIlBob3RvXCIsXG4gICAgICAgIHZpZGVvOiBcIlZpZGVvXCIsXG4gICAgICAgIGF1ZGlvOiBcIkF1ZGlvXCIsXG4gICAgICAgIHZpc3VhbGlzYXRpb246IFwiVmlzdWFsaXNhdGlvblwiLFxuICAgICAgICBpZnJhbWU6IFwiaWZyYW1lXCJcbiAgICB9LFxuICAgIHNvdXNzZWN0aW9udHlwZXM6e1xuICAgICAgICBzY3JvbGxub3JtYWw6IFwic2Nyb2xsLW5vcm1hbFwiLFxuICAgICAgICBzY3JvbGxpbnZpc2libGU6IFwic2Nyb2xsLWludmlzaWJsZVwiLFxuICAgICAgICBzY3JvbGxsb25nOiBcInNjcm9sbC1sb25nXCJcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cyA9IHtcbiAgICB0aXRyZTogXCJUaXRyZVwiLFxuICAgIGF1dGV1cnM6IFwiQXV0ZXVyc1wiLFxuICAgIGRhdGU6IFwiRGF0ZVwiLFxuICAgIGRhdGU6IFwiRGF0ZVwiLFxuICAgIHVybHM6IFwiTGllbkF1dGV1cnNcIixcbiAgICBsaWVuZmljaGllcnNvdXJjZTogXCJMaWVuRmljaGllclNvdXJjZVwiXG59O1xuIiwiXG5pbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCB7IGNvbnRlbnRIZWFkZXJDb25zdGFudHMsIG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cywgcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cyB9IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RydWN0dXJlKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKXtcblxuICAgIGxldCBzdHJ1Y3R1cmVEYXRhID0ge307IC8vIFdob2xlIHNjcm9sbHkgc3RydWN0dXJlXG4gICAgbGV0IHZpelNlY3Rpb25JRHMgPSBbXTsgLy8gTGlzdCBvZiBzZWN0aW9uSURzXG5cbiAgICBsZXQgb3B0aW9ucyA9IGdldE9wdGlvbnMocGFyYW1zRGF0YSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnY29udGVudCBEYXRhJywgY29udGVudERhdGEpO1xuICAgIGNvbnRlbnREYXRhLm1hcCgocm93RGF0YSxpbmRleCkgPT4ge1xuXG4gICAgICAgIGlmKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uXSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5pbnRyb3RpdHJlKXtcbiAgICAgICAgICAgIGxldCBjbGFzc2VzID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0ZXBjbGFzc2VzXTtcbiAgICAgICAgICAgIGxldCBjdXJBbW9yY2UgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdO1xuICAgICAgICAgICAgbGV0IHNlY3Rpb25CYWNrZ3JvdW5kID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0eWxlZm9uZF07XG4gICAgICAgICAgICBzdHJ1Y3R1cmVEYXRhW3Jvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdXSA9IHtcbiAgICAgICAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgICAgICAgIHNlY3Rpb25UeXBlOiBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLmludHJvdGl0cmUsXG4gICAgICAgICAgICAgICAgb3B0aW9uRGF0YTogb3B0aW9ucyxcbiAgICAgICAgICAgICAgICBhbW9yY2U6IGN1ckFtb3JjZSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBzZWN0aW9uQmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiBwYXJzZUNsYXNzZXMoY2xhc3NlcyksXG4gICAgICAgICAgICAgICAgZ2FtZWlkOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuZ2FtZWlkXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uXSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy50ZXh0ZWNsYXNzaXF1ZSl7XG4gICAgICAgICAgICBsZXQgdGV4dHMgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdO1xuICAgICAgICAgICAgbGV0IGNsYXNzZXMgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3RlcGNsYXNzZXNdO1xuICAgICAgICAgICAgbGV0IHNlY3Rpb25CYWNrZ3JvdW5kID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0eWxlZm9uZF07XG4gICAgICAgICAgICBzdHJ1Y3R1cmVEYXRhW3Jvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdXSA9IHtcbiAgICAgICAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgICAgICAgIHNlY3Rpb25UeXBlOiBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnRleHRlY2xhc3NpcXVlLFxuICAgICAgICAgICAgICAgIHRleHRzOiB0ZXh0cyxcbiAgICAgICAgICAgICAgICB2aXN1YWw6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxdLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMubm9tZmljaGllcnNvdXJjZV0sXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogc2VjdGlvbkJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgY2xhc3NlczogcGFyc2VDbGFzc2VzKGNsYXNzZXMpLFxuICAgICAgICAgICAgICAgIHZpc3VlbGNsYXNzZXM6IHBhcnNlQ2xhc3Nlcyhyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIGdhbWVpZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmdhbWVpZF1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbl0gPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMucGxlaW5lcGFnZXRpdHJlKXtcbiAgICAgICAgICAgIGxldCB0aXRsZU9iaiA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV07XG4gICAgICAgICAgICBpZiAoaXNKc29uKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV0pKXtcbiAgICAgICAgICAgICAgICBsZXQgdGV4dE9iaiA9IEpTT04ucGFyc2Uocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXSk7XG4gICAgICAgICAgICAgICAgdGl0bGVPYmogPSB0ZXh0T2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RydWN0dXJlRGF0YVtyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXV0gPSB7XG4gICAgICAgICAgICAgICAga2V5OiBpbmRleCxcbiAgICAgICAgICAgICAgICBzZWN0aW9uVHlwZTogb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5wbGVpbmVwYWdldGl0cmUsXG4gICAgICAgICAgICAgICAgdGV4dHM6IGlzSnNvbihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdKSA/IHRpdGxlT2JqXG4gICAgICAgICAgICAgICAgOntcbiAgICAgICAgICAgICAgICAgICAgbWFpblRpdGxlOntjbGFzczogXCJcIiwgdGV4dDogdGl0bGVPYmp9LFxuICAgICAgICAgICAgICAgICAgICBzdWJUaXRsZTogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmlzdWFsOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsXSxcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLm5vbWZpY2hpZXJzb3VyY2VdLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdHlsZWZvbmRdLFxuICAgICAgICAgICAgICAgIGNsYXNzZXM6IHBhcnNlQ2xhc3Nlcyhyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3RlcGNsYXNzZXNdKSxcbiAgICAgICAgICAgICAgICB2aXN1ZWxjbGFzc2VzOiBwYXJzZUNsYXNzZXMocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbGNsYXNzZXNdKSxcbiAgICAgICAgICAgICAgICBnYW1laWQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5nYW1laWRdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25dID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnZpenNlY3Rpb24pe1xuXG4gICAgICAgICAgICBsZXQgY3VyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dHM6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5hdHRyaWJ1dHNdLFxuICAgICAgICAgICAgICAgIHNjcm9sbFR5cGU6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zb3Vzc2VjdGlvbl0sXG4gICAgICAgICAgICAgICAgdGV4dDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXSxcbiAgICAgICAgICAgICAgICB2aXN1YWw6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxdLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMubm9tZmljaGllcnNvdXJjZV0sXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0eWxlZm9uZF0sXG4gICAgICAgICAgICAgICAgdmlzdWVsY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxjbGFzc2VzXSksXG4gICAgICAgICAgICAgICAgc3RlcGNsYXNzZXM6IHBhcnNlQ2xhc3Nlcyhyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3RlcGNsYXNzZXNdKSxcbiAgICAgICAgICAgICAgICBnYW1laWQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5nYW1laWRdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYoc3RydWN0dXJlRGF0YS5oYXNPd25Qcm9wZXJ0eShyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXSkpe1xuICAgICAgICAgICAgICAgIC8vIEFkZCBzdGVwIHRvIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgbGV0IGN1clZpelNlY3Rpb24gPSBzdHJ1Y3R1cmVEYXRhW3Jvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdXTtcbiAgICAgICAgICAgICAgICBjdXJWaXpTZWN0aW9uLnB1c2goY3VyRGF0YSk7XG4gICAgICAgICAgICAgICAgc3RydWN0dXJlRGF0YVtyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXV0gPSBjdXJWaXpTZWN0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVEYXRhW3Jvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdXSA9IFtjdXJEYXRhXTtcbiAgICAgICAgICAgICAgICB2aXpTZWN0aW9uSURzLnB1c2gocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgdml6U2VjdGlvbklEcy5tYXAoKGtleSkgPT4ge1xuICAgICAgICBsZXQgY3VyU2VjdGlvbiA9IHN0cnVjdHVyZURhdGFba2V5XTtcbiAgICAgICAgbGV0IHNlY3Rpb25BdHRyID0gY3VyU2VjdGlvblswXS5hdHRyaWJ1dHMgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9uYXR0cmlidXRlcy5jZW50cmUgPyBcIiBmdWxsLXBhZ2VcIiA6IFwiXCI7XG4gICAgICAgIGxldCBzZWN0aW9uQmFja2dyb3VuZCA9IGN1clNlY3Rpb25bMF0uYmFja2dyb3VuZDtcbiAgICAgICAgc3RydWN0dXJlRGF0YVtrZXldID0ge1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBzZWN0aW9uVHlwZTogb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy52aXpzZWN0aW9uLFxuICAgICAgICAgICAgbGlzdElEOiBrZXksXG4gICAgICAgICAgICBzdGVwczogY3VyU2VjdGlvbixcbiAgICAgICAgICAgIGNsYXNzZWQ6IGB2aXotc2VjdGlvbiR7c2VjdGlvbkF0dHJ9YCxcbiAgICAgICAgICAgIG1lZGlhSW5mbzogMCxcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHNlY3Rpb25CYWNrZ3JvdW5kXG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhzdHJ1Y3R1cmVEYXRhKTtcbn1cblxuLyoqXG4gKiBUYWtlIGFydGljbGUgc3RydWN0dXJlIGFzIENTViBhbmQgdHJhbnNmb3JtIGl0IGFzIGNhbGxiYWNrQXJyYXlcbiAqIEBwYXJhbSAge09iamVjdH0gY29udGVudERhdGEgYXJ0aWNsZSBzdHJ1Y3R1cmVcbiAqIEBwYXJhbSAge09iamVjdH0gb3B0aW9ucyBhcnRpY2xlIG9wdGlvbnNcbiAqIEByZXR1cm4ge0FycmF5fSBTY3JvbGxlciBjYWxsYmFjayBhcnJheVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVDYWxsYmFja3MoY29udGVudERhdGEsIHBhcmFtc0RhdGEpe1xuXG4gICAgbGV0IGZ1bGxTdHJ1Y3R1cmUgPSBnZXRTdHJ1Y3R1cmUoY29udGVudERhdGEsIHBhcmFtc0RhdGEpO1xuICAgIGxldCBjYWxsYmFja3NBcnJheSA9IFtdO1xuICAgIGZ1bGxTdHJ1Y3R1cmUubWFwKGNhbGxiYWNrID0+IHtcbiAgICAgICAgaWYoY2FsbGJhY2suc2VjdGlvblR5cGUgPT09IFwidml6LXNlY3Rpb25cIil7XG4gICAgICAgICAgICBsZXQgY3VyU3RlcHMgPSBbXTtcbiAgICAgICAgICAgIGNhbGxiYWNrLnN0ZXBzLm1hcCgoc3RlcCxpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBjdXJDb21tYW5kID0gKEVOVl9DT05GSUcuZG93bmxvYWRTdHJ1YyAmJiBFTlZfQ09ORklHLmF1dG9yZW5kZXIpID8gKCgpPT57fSkgOiBcIlwiO1xuICAgICAgICAgICAgICAgIGlmKHN0ZXAudmlzdWFsICE9PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ck51bWJlckFycmF5ID0gQXJyYXkoY2FsbGJhY2suc3RlcHMubGVuZ3RoKS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gaSkuZmlsdGVyKGQgPT4gZCAhPT0gaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3BhY2l0eVNlbGVjdG9yID0gY3VyTnVtYmVyQXJyYXkubWFwKGluZCA9PiBgIyR7Y2FsbGJhY2sua2V5fV8ke2luZH1gKS5qb2luKCcsJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmKEVOVl9DT05GSUcuZG93bmxvYWRTdHJ1YyAmJiBFTlZfQ09ORklHLmF1dG9yZW5kZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ29tbWFuZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoYCMke2NhbGxiYWNrLmtleX1fJHtpbmRleH1gKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAxKS5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9wYWNpdHlTZWxlY3RvciAhPT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbChgJHtvcGFjaXR5U2VsZWN0b3J9YCkudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMCkuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ29tbWFuZCA9IGBkMy5zZWxlY3QoJyMke2NhbGxiYWNrLmtleX1fJHtpbmRleH0nKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAxKS5zdHlsZSgnZGlzcGxheScsIG51bGwpOyR7b3BhY2l0eVNlbGVjdG9yICE9PSBcIlwiID8gYGQzLnNlbGVjdEFsbCgnJHtvcGFjaXR5U2VsZWN0b3J9JykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMCkuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO2AgOiBcIlwifWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZihTdHJpbmcoc3RlcC5maWxlbmFtZSkuc3RhcnRzV2l0aChcIlRBR0lEXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clRhZ0lEID0gU3RyaW5nKHN0ZXAuZmlsZW5hbWUpLnNwbGl0KCc9JylbMV07XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJUYWdJRF9pbmRleCA9IHBhcnNlSW50KGN1clRhZ0lELnNwbGl0KFwiX1wiKVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJOdW1iZXJBcnJheSA9IEFycmF5KGNhbGxiYWNrLnN0ZXBzLmxlbmd0aCkuZmlsbChudWxsKS5tYXAoKF8sIGkpID0+IGkpLmZpbHRlcihkID0+IGQgIT09IGN1clRhZ0lEX2luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wYWNpdHlTZWxlY3RvciA9IGN1ck51bWJlckFycmF5Lm1hcChpbmQgPT4gYCMke2NhbGxiYWNrLmtleX1fJHtpbmR9YCkuam9pbignLCcpO1xuICAgICAgICAgICAgICAgICAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvbW1hbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChgIyR7Y3VyVGFnSUR9YCkudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3BhY2l0eVNlbGVjdG9yICE9PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbChgJHtvcGFjaXR5U2VsZWN0b3J9YCkudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMCkuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ29tbWFuZCA9IGBkMy5zZWxlY3QoJyMke2N1clRhZ0lEfScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7JHtvcGFjaXR5U2VsZWN0b3IgIT09IFwiXCIgPyBgZDMuc2VsZWN0QWxsKCcke29wYWNpdHlTZWxlY3Rvcn0nKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7YCA6IFwiXCJ9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKEVOVl9DT05GSUcuZG93bmxvYWRTdHJ1YyAmJiBFTlZfQ09ORklHLmF1dG9yZW5kZXIpe1xuICAgICAgICAgICAgICAgICAgICAgIGN1clN0ZXBzLnB1c2goY3VyQ29tbWFuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGN1clN0ZXBzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICBgKCkgPT4geyR7Y3VyQ29tbWFuZH19YFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYWxsYmFja3NBcnJheS5wdXNoKGN1clN0ZXBzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ0dPVCBDQUxMQkFDS1MgQVJSQVk6ICcsIGNhbGxiYWNrc0FycmF5KTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrc0FycmF5O1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgICBjb25zb2xlLmxvZygnU2F2aW5nIGNhbGxiYWNrcyB0byBmaWxlLi4uJyk7XG4gICAgICAgIGNvbnN0IHRleHQgPSBgaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xcbmV4cG9ydCBjb25zdCBjYWxsYmFja3MgPSAke0pTT04uc3RyaW5naWZ5KGNhbGxiYWNrc0FycmF5LCBudWxsLCAyKX1gO1xuICAgICAgICBsZXQgYmxvYiA9IG5ldyBCbG9iKFt0ZXh0LnJlcGxhY2VBbGwoJ1wiJywgJycpXSwge3R5cGU6IFwidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04XCJ9KTtcbiAgICAgICAgc2F2ZUFzKGJsb2IsIFwiY2FsbGJhY2tzLmpzXCIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbn1cblxuZnVuY3Rpb24gaXNKc29uKHN0cikge1xuICAgIHRyeSB7XG4gICAgICAgIEpTT04ucGFyc2Uoc3RyKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ2xhc3NlcyhzdHIpe1xuICAgIHJldHVybiBBcnJheS5mcm9tKHN0ci5zcGxpdCgnOycpKS5qb2luKCcgJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcHRpb25zKHBhcmFtc0RhdGEpe1xuXG4gIHJldHVybiB7XG4gICAgdGl0bGU6IHBhcmFtc0RhdGFbMF1bcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cy50aXRyZV0sXG4gICAgYXV0aG9yczogcGFyYW1zRGF0YVswXVtwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzLmF1dGV1cnNdLFxuICAgIHVybHM6IHBhcmFtc0RhdGFbMF1bcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cy51cmxzXSxcbiAgICBkYXRlOiBwYXJhbXNEYXRhWzBdW3BhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMuZGF0ZV1cbiAgfTtcbn1cbiIsImltcG9ydCB7IGNvbnN0YW50IH0gZnJvbSBcImxvZGFzaFwiO1xyXG5pbXBvcnQgbWFwYm94Z2wgZnJvbSBcIm1hcGJveC1nbFwiO1xyXG5pbXBvcnQgKiBhcyBzY3JlZW4gZnJvbSBcIi4vc2NyZWVuLmpzXCI7XHJcblxyXG5jb25zdCBjb25zdGFudHMgPSB7XHJcbiAgdG9rZW46XHJcbiAgICBcInBrLmV5SjFJam9pYkdWa1pYWnZhWElpTENKaElqb2lZMnAyYlc4MWRIVTJNV1YxY1RSaGNYSXphWFpxTUdZeGNpSjkuV3JJRjhvNjlhUl9Uc3RERnU2UXlhZ1wiLFxyXG4gIG1hcEJvdW5kczoge1xyXG4gICAgbWF4OiBbLTE2NSwgMzAuNzI4MzMwLCAtMjUuMjM2MzYsIDgyLjIyOTQzNF0sXHJcbiAgfSxcclxuICBjb2xvcnM6IFtcclxuICAgIFwiI0Y0Q0JDNlwiLFxyXG4gICAgXCIjRjRBMzlBXCIsXHJcbiAgICBcIiNFRTZBNUVcIixcclxuICAgIFwiI0NFMzcyN1wiLFxyXG4gICAgXCIjQTIyODIzXCIsXHJcbiAgICBcIiM3NTFBMUFcIixcclxuICAgIFwiIzQxMDAwMFwiLFxyXG4gIF0sXHJcbiAgY2x1c3Rlck1heFpvb206IDExLFxyXG4gIGNsdXN0ZXJSYWRpdXM6IDMwLFxyXG4gIGNsdXN0ZXJNaW5Qb2ludHM6IDVcclxufTtcclxuXHJcbm1hcGJveGdsLmFjY2Vzc1Rva2VuID0gY29uc3RhbnRzLnRva2VuO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1hcCB7XHJcbiAgY29uc3RydWN0b3IoZGl2LCBjbGFzc05hbWUsIGRhdGFTb3VyY2VBcnJheSwgc3R5bGVVcmwsIGluaXRDb29yZHMsIGRpc2FibGVDb250cm9scz10cnVlLCB3aXRoSGFuZGxlcnM9ZmFsc2UsIG1heEJvdW5kcyA9IG51bGwpIHtcclxuXHJcbiAgICB0aGlzLmRhdGFTb3VyY2VPYmplY3RzID0gZGF0YVNvdXJjZUFycmF5O1xyXG4gICAgdGhpcy5jb25zdGFudHMgPSBjb25zdGFudHM7XHJcbiAgICB0aGlzLm1hcCA9IG5ldyBtYXBib3hnbC5NYXAoe1xyXG4gICAgICBjb250YWluZXI6IGNsYXNzTmFtZSxcclxuICAgICAgc3R5bGU6IHN0eWxlVXJsLFxyXG4gICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IHRydWUsXHJcbiAgICAgIGNlbnRlcjogaW5pdENvb3Jkcy5jZW50ZXIsXHJcbiAgICAgIHpvb206IGluaXRDb29yZHMuem9vbVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLm1heEJvdW5kcyA9IGluaXRDb29yZHM7XHJcbiAgICB0aGlzLmJvdW5kc0xpc3QgPSB0aGlzLmRhdGFTb3VyY2VPYmplY3RzLm1hcChkYXRhU291cmNlID0+IGRhdGFTb3VyY2VbJ2Nvb3JkcyddKTtcclxuICAgIHRoaXMuZXh0cmFCb3VuZHMgPSB0aGlzLmRhdGFTb3VyY2VPYmplY3RzLm1hcChkYXRhU291cmNlID0+IGRhdGFTb3VyY2VbJ2V4dHJhQ29vcmRzJ10pO1xyXG4gICAgaWYoZGlzYWJsZUNvbnRyb2xzKXtcclxuICAgICAgdGhpcy5tYXAuc2Nyb2xsWm9vbS5kaXNhYmxlKCk7XHJcbiAgICAgIHRoaXMubWFwLmRyYWdQYW4uZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLm1hcC5kcmFnUm90YXRlLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5tYXAuYm94Wm9vbS5kaXNhYmxlKCk7XHJcbiAgICAgIHRoaXMubWFwLmRvdWJsZUNsaWNrWm9vbS5kaXNhYmxlKCk7XHJcbiAgICB9XHJcbiAgICBpZih3aXRoSGFuZGxlcnMpe1xyXG4gICAgICB0aGlzLnNldHVwSGFuZGxlcnMoKTtcclxuICAgIH1cclxuICAgIHRoaXMuZGF0YUxpc3QgPSB0aGlzLmRhdGFTb3VyY2VPYmplY3RzLm1hcChkYXRhU291cmNlID0+IGRhdGFTb3VyY2VbJ2RhdGEnXSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVCb3VuZHMoXHJcbiAgICBib3VuZHMgPSB0aGlzLm1heEJvdW5kcyxcclxuICAgIHBhZGRpbmcgPSBzY3JlZW4uaXNYUygpID8gNSA6IHNjcmVlbi5pc1NtKCkgPyAxNSA6IDIwLFxyXG4gICAgZHVyYXRpb24gPSAxMDBcclxuICApIHtcclxuICAgIHRoaXMubWFwID0gdGhpcy5tYXAuZml0Qm91bmRzKGJvdW5kcywge1xyXG4gICAgICBkdXJhdGlvbjogZHVyYXRpb24sXHJcbiAgICAgIHBhZGRpbmc6IHBhZGRpbmcsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUNvb3Jkc0FuZFpvb20oZGF0YVBhaXIpe1xyXG4gICAgdGhpcy5tYXAuZmx5VG8oe1xyXG4gICAgICBjZW50ZXI6IGRhdGFQYWlyLmNlbnRlcixcclxuICAgICAgem9vbTogZGF0YVBhaXIuem9vbSxcclxuICAgICAgc3BlZWQ6IDAuNyxcclxuICAgICAgY3VydmU6IDEsXHJcbiAgICAgIGVhc2luZyh0KXtcclxuICAgICAgICByZXR1cm4gdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgdmlld0JvdW5kT2JqKG9iamluZGV4KXtcclxuICAgIHRoaXMudXBkYXRlQ29vcmRzQW5kWm9vbSh0aGlzLmJvdW5kc0xpc3Rbb2JqaW5kZXhdKTtcclxuICB9XHJcblxyXG4gIHZpZXdFeHRyYUJvdW5kT2JqKG9iamluZGV4LCBrZXlOYW1lLCBkdXJhdGlvbil7XHJcbiAgICBsZXQgZXh0cmFCb3VuZHMgPSB0aGlzLmV4dHJhQm91bmRzW29iamluZGV4XTtcclxuICAgIHRoaXMudXBkYXRlQ29vcmRzQW5kWm9vbShleHRyYUJvdW5kc1trZXlOYW1lXSk7XHJcbiAgfVxyXG5cclxuICB2aWV3SW5pdEJvdW5kcyhkdXJhdGlvbil7XHJcbiAgICB0aGlzLnVwZGF0ZUNvb3Jkc0FuZFpvb20odGhpcy5tYXhCb3VuZHMpO1xyXG4gIH1cclxuICBzaG93U291cmNlWEl0ZW1ZKHNvdXJjZUluZGV4LCBpdGVtSW5kZXgpIHtcclxuICAgIHRoaXMudXBkYXRlQ29vcmRzQW5kWm9vbSh0aGlzLmRhdGFMaXN0W3NvdXJjZUluZGV4XVtpdGVtSW5kZXhdKVxyXG4gIH1cclxuXHJcbiAgaW5pdE1hcFNvdXJjZXNBbmRMYXllcnMoKSB7XHJcbiAgICBpZiAodGhpcy5pbml0aWFsaXNlZCkgcmV0dXJuO1xyXG4gICAgdGhpcy5pbml0aWFsaXNlZCA9IHRydWU7XHJcbiAgICBcclxuICAgIHRoaXMuZGF0YVNvdXJjZU9iamVjdHMubWFwKGRhdGFTb3VyY2UgPT4ge1xyXG4gICAgICB0aGlzLm1hcC5hZGRTb3VyY2UoZGF0YVNvdXJjZVsnc291cmNlTmFtZSddLCB7XHJcbiAgICAgICAgdHlwZTogZGF0YVNvdXJjZVsnc291cmNlVHlwZSddLFxyXG4gICAgICAgIGRhdGE6IGRhdGFTb3VyY2VbJ3NvdXJjZURhdGEnXVxyXG4gICAgICB9KTtcclxuICAgICAgaWYoZGF0YVNvdXJjZVsnbGF5ZXJUeXBlJ10gPT09ICdmaWxsJyl7XHJcbiAgICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIoe1xyXG4gICAgICAgICAgaWQ6IGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSxcclxuICAgICAgICAgIHR5cGU6IGRhdGFTb3VyY2VbJ2xheWVyVHlwZSddLFxyXG4gICAgICAgICAgc291cmNlOiBkYXRhU291cmNlWydzb3VyY2VOYW1lJ10sXHJcbiAgICAgICAgICBwYWludDoge1xyXG4gICAgICAgICAgICAnZmlsbC1jb2xvcic6IGRhdGFTb3VyY2VbJ2NvbG9yJ10sXHJcbiAgICAgICAgICAgICdmaWxsLW9wYWNpdHknOiBkYXRhU291cmNlWydvcGFjaXR5J11cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihkYXRhU291cmNlWydsYXllclR5cGUnXSA9PT0gJ2NpcmNsZScpe1xyXG4gICAgICAgIHRoaXMubWFwLmFkZExheWVyKHtcclxuICAgICAgICAgIGlkOiBkYXRhU291cmNlWydzb3VyY2VOYW1lJ10sXHJcbiAgICAgICAgICB0eXBlOiBkYXRhU291cmNlWydsYXllclR5cGUnXSxcclxuICAgICAgICAgIHNvdXJjZTogZGF0YVNvdXJjZVsnc291cmNlTmFtZSddLFxyXG4gICAgICAgICAgcGFpbnQ6IHtcclxuICAgICAgICAgICAgJ2NpcmNsZS1jb2xvcic6IFsnbWF0Y2gnLCBbXCJnZXRcIiwgXCJzdGF0dXRcIl0sICdSZWNoZXJjaGVzIGVmZmVjdHXDqWVzIG91IGVuIGNvdXJzJywgJyNmZjU2MWMnLCAnUGhhc2UgcHLDqWxpbWluYWlyZScsICcjZmZjNzM0JywgJyNiN2I3YjcnXSxcclxuICAgICAgICAgICAgJ2NpcmNsZS1yYWRpdXMnOiA1XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgY2hhbmdlTGF5ZXJQYWludChpZCwgcHJvcGVydHksIHZhbHVlKXtcclxuICAgIHRoaXMubWFwLnNldFBhaW50UHJvcGVydHkoaWQsIHByb3BlcnR5LCB2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzZXR1cEhhbmRsZXJzKCl7XHJcbiAgICBcclxuICAgIHRoaXMubWFwLm9uKFwibW91c2VvdmVyXCIsIFwicGVuc2lvbm5hdHNTb3VyY2VcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5tYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XHJcbiAgICAgIHRoaXMuZHJhd1BvcHVwKGUpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLm1hcC5vbihcIm1vdXNlb3V0XCIsIFwicGVuc2lvbm5hdHNTb3VyY2VcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5tYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLm1hcC5vbihcImNsaWNrXCIsIFwicGVuc2lvbm5hdHNTb3VyY2VcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLm1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcclxuICAgICAgdGhpcy5kcmF3UG9wdXAoZSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICB9XHJcblxyXG4gIGRyYXdQb3B1cChlKXtcclxuICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gZS5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcy5zbGljZSgpO1xyXG4gICAgY29uc3QgcHJvcGVydGllcyA9IGUuZmVhdHVyZXNbMF0ucHJvcGVydGllcztcclxuICAgIGxldCBbb3BlbmRheXN0ciwgb3Blbm1vbnRoc3RyLCBvcGVueWVhcnN0cl0gPSBwcm9wZXJ0aWVzWydvdXZlcnR1cmUnXS5zcGxpdCgnLycpO1xyXG4gICAgbGV0IFtmZXJtZGF5c3RyLCBmZXJtbW9udGhzdHIsIGZlcm15ZWFyc3RyXSA9IHByb3BlcnRpZXNbJ2Zlcm1ldHVyZSddLnNwbGl0KCcvJyk7XHJcbiAgICBsZXQgW2RhdGVfb3V2ZXJ0dXJlLGRhdGVfZmVybWV0dXJlXSA9IFtcclxuICAgICAgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJmci1DQVwiLCB7ZGF0ZVN0eWxlOlwibG9uZ1wifSkuZm9ybWF0KG5ldyBEYXRlKERhdGUuVVRDKG9wZW55ZWFyc3RyLCBvcGVubW9udGhzdHIsIG9wZW5kYXlzdHIpKSksXHJcbiAgICAgIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZnItQ0FcIiwge2RhdGVTdHlsZTpcImxvbmdcIn0pLmZvcm1hdChuZXcgRGF0ZShEYXRlLlVUQyhmZXJteWVhcnN0ciwgZmVybW1vbnRoc3RyLCBmZXJtZGF5c3RyKSkpXHJcbiAgICBdO1xyXG4gICAgbGV0IGh0bWxfcG9wdXBfY29udGVudCA9IGBcclxuICAgICAgPGgzPiR7cHJvcGVydGllc1snbmFtZSddfTwvaDM+XHJcbiAgICAgIDxoND4ke3Byb3BlcnRpZXNbJ3ZpbGxlJ119LCAke3Byb3BlcnRpZXNbJ3Byb3ZpbmNlJ119PC9oND5cclxuICAgICAgPHA+JHtkYXRlX291dmVydHVyZX0gLSAke2RhdGVfZmVybWV0dXJlfTwvcD5cclxuICAgICAgPHA+JHtwcm9wZXJ0aWVzWydzdGF0dXQnXX08L3A+XHJcbiAgICBgO1xyXG4gICAgd2hpbGUgKE1hdGguYWJzKGUubG5nTGF0LmxuZyAtIGNvb3JkaW5hdGVzWzBdKSA+IDE4MCkge1xyXG4gICAgICBjb29yZGluYXRlc1swXSArPSBlLmxuZ0xhdC5sbmcgPiBjb29yZGluYXRlc1swXSA/IDM2MCA6IC0zNjA7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wb3B1cCA9IG5ldyBtYXBib3hnbC5Qb3B1cCgpXHJcbiAgICAgIC5zZXRMbmdMYXQoY29vcmRpbmF0ZXMpXHJcbiAgICAgIC5zZXRIVE1MKGh0bWxfcG9wdXBfY29udGVudClcclxuICAgICAgLmFkZFRvKHRoaXMubWFwKTtcclxuICB9XHJcblxyXG4gIGNsb3NlUG9wdXAoKSB7XHJcbiAgICBpZiAodGhpcy5wb3B1cCkge1xyXG4gICAgICB0aGlzLnBvcHVwLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlRGF0YShkYXRhU291cmNlTmFtZSwgZGF0YSkge1xyXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpc2VkKSB0aGlzLmluaXRNYXBTb3VyY2VzQW5kTGF5ZXJzKCk7XHJcbiAgICB0aGlzLm1hcC5nZXRTb3VyY2UoZGF0YVNvdXJjZU5hbWUpLnNldERhdGEoZGF0YSk7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XHJcblxyXG5jb25zdCBwb3NpdGl2ZU9yZGVyRGljdCA9IHtcclxuICAgIFwibGFuZF9zaW5rXCI6MCxcclxuICAgIFwiZm9zc2lsX2VtaXNzaW9uc1wiOjEsXHJcbiAgICBcImxhbmRfdXNlX2NoYW5nZVwiOjJ9O1xyXG5cclxuY29uc3QgbmVnYXRpdmVPcmRlckRpY3QgPSB7XCJvY2Vhbl9zaW5rXCI6MCxcclxuICAgIFwiYXRtb3Nfc2lua1wiOjEsXHJcbiAgICBcImxhbmRfc2lua1wiOjJ9O1xyXG5cclxuY29uc3QgY29sb3JEaWN0ID0ge1xyXG5cclxuICAgIGZvc3NpbF9lbWlzc2lvbnM6IFwiI2I3YzNjM1wiLFxyXG4gICAgbGFuZF91c2VfY2hhbmdlOiBcIiNFRkU2NkZcIixcclxuICAgIGxhbmRfc2luazogXCIjYTVkYWE4XCIsXHJcbiAgICBvY2Vhbl9zaW5rOiBcIiM3NWEzYjFcIixcclxuICAgIGF0bW9zX3Npbms6IFwiIzg5Y2ZmMFwiLFxyXG4gICAgY2VtZW50X3Npbms6IFwiI2EyYTE5OFwiXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBzdGFja2VkQXJlYUNoYXJ0e1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN2Z29iaiwgcmF3ZGF0YSl7XHJcblxyXG4gICAgICAgIHRoaXMuc3ZnT2JqID0gc3Znb2JqO1xyXG4gICAgICAgIHRoaXMuc3ZnV2lkdGggPSB0aGlzLnN2Z09iai5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgICAgICAgdGhpcy5zdmdIZWlnaHQgPSB0aGlzLnN2Z09iai5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuY2hhcnRXaWR0aCA9IHRoaXMuc3ZnV2lkdGggKiAwLjk7XHJcbiAgICAgICAgdGhpcy5jaGFydEhlaWdodCA9IHRoaXMuc3ZnSGVpZ2h0ICogMC45O1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuY2xlYW5EYXRhKHJhd2RhdGEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjc3ZEYXRhOicsIHRoaXMuZGF0YSk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHRoaXMubWFpbkdyb3VwID0gdGhpcy5zdmdPYmouYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy5jaGFydFdpZHRoKVxyXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy5jaGFydEhlaWdodClcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHsodGhpcy5zdmdXaWR0aC10aGlzLmNoYXJ0V2lkdGgpLzJ9LCR7KHRoaXMuc3ZnSGVpZ2h0LXRoaXMuY2hhcnRIZWlnaHQpLzJ9KWApO1xyXG4gICAgICAgIHRoaXMuaW5pdENoYXJ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYW5EYXRhKGRhdGEpe1xyXG4gICAgICAgIHJldHVybiBkYXRhLm1hcCh5ZWFyRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB5ZWFyOiB5ZWFyRGF0YVtcIkFubsOpZVwiXSxcclxuICAgICAgICAgICAgICAgIGZvc3NpbF9lbWlzc2lvbnM6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiw4ltaXNzaW9ucyBpc3N1ZXMgZGVzIMOpbmVyZ2llcyBmb3NzaWxlc1wiXSkucmVwbGFjZSgnLCcsXCIuXCIpKSxcclxuICAgICAgICAgICAgICAgIGxhbmRfdXNlX2NoYW5nZTogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCJDaGFuZ2VtZW50IGQnYWZmZWN0YXRpb24gZGVzIHRlcnJlc1wiXSkucmVwbGFjZSgnLCcsXCIuXCIpKSxcclxuICAgICAgICAgICAgICAgIGxhbmRfc2luazogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCJQdWl0cyB0ZXJyZXN0cmVcIl0pLnJlcGxhY2UoJywnLFwiLlwiKSksXHJcbiAgICAgICAgICAgICAgICBvY2Vhbl9zaW5rOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIk9jw6lhblwiXSkucmVwbGFjZSgnLCcsXCIuXCIpKSxcclxuICAgICAgICAgICAgICAgIGF0bW9zX3Npbms6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiQXRtb3NwaMOocmVcIl0pLnJlcGxhY2UoJywnLFwiLlwiKSksXHJcbiAgICAgICAgICAgICAgICBjZW1lbnRfc2luazogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCJQdWl0cyBkZSBjaW1lbnRcIl0pLnJlcGxhY2UoJywnLFwiLlwiKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRDaGFydCgpe1xyXG5cclxuICAgICAgICBsZXQgbGVnZW5kRGF0YSA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiw4ltaXNzaW9ucyBpc3N1ZXMgZGVzIMOpbmVyZ2llcyBmb3NzaWxlc1wiLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiZm9zc2lsX2VtaXNzaW9uc1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIkNoYW5nZW1lbnQgZCdhZmZlY3RhdGlvbiBkZXMgdGVycmVzXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJsYW5kX3VzZV9jaGFuZ2VcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJQdWl0cyB0ZXJyZXN0cmVcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcImxhbmRfc2lua1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIk9jw6lhblwiLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwib2NlYW5fc2lua1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIkF0bW9zcGjDqHJlXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJhdG1vc19zaW5rXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGNvbnN0IHhBeGlzID0gdGhpcy5kcmF3WEF4aXModGhpcy5tYWluR3JvdXAsIHRoaXMuY2hhcnRXaWR0aCwgdGhpcy5kYXRhKTtcclxuICAgICAgICBjb25zdCB5QXhpcyA9IHRoaXMuZHJhd1lBeGlzKHRoaXMubWFpbkdyb3VwLCB0aGlzLmNoYXJ0SGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmRyYXdBcmVhcyh0aGlzLm1haW5Hcm91cCwgeEF4aXMsIHlBeGlzKTtcclxuICAgICAgICAvL3RoaXMuZHJhd1JlY3RhbmdsZXModGhpcy5tYWluR3JvdXAsIHhBeGlzLCB5QXhpcyk7XHJcbiAgICAgICAgdGhpcy5kcmF3VGl0bGUodGhpcy5tYWluR3JvdXApO1xyXG4gICAgICAgIHRoaXMuZHJhd0JvdHRvbUJveCh0aGlzLm1haW5Hcm91cCwgdGhpcy5jaGFydFdpZHRoKVxyXG4gICAgICAgIHRoaXMuZHJhd0RldGFpbHModGhpcy5tYWluR3JvdXAsIGxlZ2VuZERhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtkMy5TZWxlY3Rpb259IGNvbnRhaW5lciBkMyBzZWxlY3Rpb25cclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aCB3aWR0aCBvZiB0aGUgY2hhcnRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIGRhdGEgT2JqIGNvbnRhaW5pbmcgc2VyaWVzIGFuZCBkb21haW5zXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYXhpc1RpdGxlIHggYXhpcyB0aXRsZVxyXG4gICAgICovXHJcbiAgICAgZHJhd1hBeGlzKGNvbnRhaW5lciwgd2lkdGgsIGRhdGEsIGF4aXNUaXRsZSl7XHJcblxyXG4gICAgICAgIGNvbnN0IHhBeGlzR3JvdXAgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3hBeGlzR3JvdXAnKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkezB9LCR7dGhpcy5jaGFydEhlaWdodCowLjkwfSlgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBkMy5zY2FsZUJhbmQoKVxyXG4gICAgICAgICAgICAuZG9tYWluKGRhdGEubWFwKGVsZW0gPT4gZWxlbS55ZWFyKSlcclxuICAgICAgICAgICAgLnJhbmdlKFt0aGlzLmNoYXJ0V2lkdGgqMC4wNSwgd2lkdGhdKTtcclxuXHJcbiAgICAgICAgY29uc3QgYXhpcyA9IGQzLmF4aXNCb3R0b20oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGUoc2NhbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aWNrU2l6ZU91dGVyKDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aWNrVmFsdWVzKHNjYWxlLmRvbWFpbigpLmZpbHRlcigoZCxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGkrMTApJTIwID09PSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoKGQsaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc3BsaXQoJy0nKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgeEF4aXNHcm91cC5jYWxsKGF4aXMpXHJcbiAgICAgICAgICAgIC5jYWxsKGcgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGlja0dyb3VwcyA9IGcuc2VsZWN0QWxsKFwiLnRpY2tcIik7XHJcbiAgICAgICAgICAgICAgICB0aWNrR3JvdXBzLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDQwMClcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgJ2dyYXBoaWsnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzE0cHQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIChkLGkpID0+IGkgPT09IHRpY2tHcm91cHMubm9kZXMoKS5sZW5ndGgtMSA/IFwiZW5kXCIgOiBcIm1pZGRsZVwiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHNjYWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtkMy5TZWxlY3Rpb259IGNvbnRhaW5lciBkMyBzZWxlY3Rpb25cclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aCB3aWR0aCBvZiB0aGUgY2hhcnRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIGRhdGEgT2JqIGNvbnRhaW5pbmcgc2VyaWVzIGFuZCBkb21haW5zXHJcbiAgICAgKi9cclxuICAgICBkcmF3WUF4aXMoY29udGFpbmVyLCBoZWlnaHQpe1xyXG5cclxuICAgICAgICBjb25zdCB5QXhpc0dyb3VwID0gY29udGFpbmVyLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICd5QXhpc0dyb3VwJylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt0aGlzLmNoYXJ0V2lkdGgqMC4wNX0sJHswfSlgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAgIC5kb21haW4oWzEyLC0xMl0pXHJcbiAgICAgICAgICAgIC5yYW5nZShbMCxoZWlnaHQqMC45MF0pO1xyXG5cclxuICAgICAgICBjb25zdCBheGlzID0gZDMuYXhpc0xlZnQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGUoc2NhbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aWNrU2l6ZU91dGVyKDApO1xyXG4gICAgICAgIHlBeGlzR3JvdXAuY2FsbChheGlzKVxyXG4gICAgICAgICAgICAuY2FsbChnID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpY2tHcm91cHMgPSBnLnNlbGVjdEFsbChcIi50aWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgdGlja0dyb3Vwcy5zZWxlY3QoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA0MDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LWZhbWlseScsICdncmFwaGlrJylcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxMnB0Jyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3JvdGF0ZSgtOTApJylcclxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDApXHJcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCAtc2NhbGUoMCkpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCItM2VtXCIpXHJcbiAgICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTJwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnNjAwJylcclxuICAgICAgICAgICAgLnRleHQoXCJGbHV4IGRlIENPMiAoR3RDIC8gYW5uw6llKVwiKTtcclxuICAgICAgICByZXR1cm4gc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0FyZWFzKGNvbnRhaW5lciwgeFNjYWxlLCB5U2NhbGUpe1xyXG5cclxuICAgICAgICBsZXQgcG9zaXRpdmVfcGF0aHNfYXJyYXkgPSB7fTtcclxuICAgICAgICBsZXQgbmVnYXRpdmVfcGF0aHNfYXJyYXkgPSB7fTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9zRGF0YSA9IHRoaXMuZGF0YS5tYXAoeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcG9zRWxlbXMgPSBbXTtcclxuICAgICAgICAgICAgbGV0IGN1clRvdGFsID0gMDtcclxuICAgICAgICAgICAgbGV0IGN1clllYXIgPSB5ZWFyRGF0YS55ZWFyO1xyXG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyh5ZWFyRGF0YSkuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICBpZihjdXJFbGVtPjAgJiYgZW50cnlbMF0gIT09IFwieWVhclwiKXtcclxuICAgICAgICAgICAgICAgICAgICBwb3NFbGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZW50cnlbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBjdXJUb3RhbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1clRvdGFsICs9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihlbnRyeVswXSA9PT0gXCJjZW1lbnRfc2lua1wiKXsgLy8gQWRkIGNlbWVudCBzaW5rIHRvIHJlbW92ZSBpdCBhZnRlcndhcmRzIChpbiBmb3NzaWwgZnVlbCkgIFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc0VsZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVudHJ5WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuIHBvc0VsZW1zLnNvcnQoKGEsYikgPT4gcG9zaXRpdmVPcmRlckRpY3RbYS50eXBlXSAtIHBvc2l0aXZlT3JkZXJEaWN0W2IudHlwZV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBuZWdEYXRhID0gdGhpcy5kYXRhLm1hcCh5ZWFyRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZWdFbGVtcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgY3VyVG90YWwgPSAwO1xyXG4gICAgICAgICAgICBsZXQgY3VyWWVhciA9IHllYXJEYXRhLnllYXI7XHJcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHllYXJEYXRhKS5zb3J0KChhLGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZWdhdGl2ZU9yZGVyRGljdFthWzBdXSAtIG5lZ2F0aXZlT3JkZXJEaWN0W2JbMF1dO1xyXG4gICAgICAgICAgICB9KS5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgIGlmKGN1ckVsZW08MCAmJiBlbnRyeVswXSAhPT0gXCJ5ZWFyXCIgJiYgZW50cnlbMF0gIT09IFwiY2VtZW50X3NpbmtcIiApe1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZ0VsZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVudHJ5WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IGN1clRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyVG90YWwgKz0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHJldHVybiBuZWdFbGVtczsvLy5zb3J0KChhLGIpID0+IG5lZ2F0aXZlT3JkZXJEaWN0W2EudHlwZV0gLSBuZWdhdGl2ZU9yZGVyRGljdFtiLnR5cGVdKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ2dvdCBuZWdEYXRhOiAnLCBuZWdEYXRhKTtcclxuXHJcbiAgICAgICAgbGV0IGFyZWFHZW4gPSBkMy5hcmVhKClcclxuICAgICAgICAgICAgLngoZCA9PiB4U2NhbGUoZC5jdXJZZWFyKSlcclxuICAgICAgICAgICAgLnkwKGQgPT4geVNjYWxlKGQuY3VyVG90KSlcclxuICAgICAgICAgICAgLnkxKGQgPT4geVNjYWxlKGQuY3VyVG90K2QudmFsdWUpKTtcclxuICAgICAgICBPYmplY3QuZW50cmllcyhwb3NpdGl2ZU9yZGVyRGljdCkuZm9yRWFjaChvcmRlck9iaiA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgY3VyS2V5ID0gb3JkZXJPYmpbMF07XHJcbiAgICAgICAgICAgIGxldCBjdXJPcmRlclZhbHVlID0gb3JkZXJPYmpbMV07XHJcbiAgICAgICAgICAgIGxldCBjdXJQYXRoQXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgcG9zRGF0YS5mb3JFYWNoKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0geWVhckRhdGFbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyWWVhciA9IGN1ckVsZW1bJ2N1clllYXInXTtcclxuICAgICAgICAgICAgICAgIGxldCBrZXlPYmogPSB5ZWFyRGF0YS5maWx0ZXIoZWxlbSA9PiBjdXJLZXkgPT09IGVsZW0udHlwZSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2VtZW50T2JqID0geWVhckRhdGEuZmlsdGVyKGVsZW0gPT4gJ2NlbWVudF9zaW5rJyA9PT0gZWxlbS50eXBlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoa2V5T2JqLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQWRkIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY3VyS2V5ID09PSBcImZvc3NpbF9lbWlzc2lvbnNcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clBhdGhBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGN1cktleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IGtleU9ialswXS5jdXJUb3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToga2V5T2JqWzBdLnZhbHVlIC0gTWF0aC5hYnMoY2VtZW50T2JqWzBdLnZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clBhdGhBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGN1cktleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IGtleU9ialswXS5jdXJUb3QtIE1hdGguYWJzKGNlbWVudE9ialswXS52YWx1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToga2V5T2JqWzBdLnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgemVyb1xyXG4gICAgICAgICAgICAgICAgICAgIGN1clBhdGhBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY3VyS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwb3NpdGl2ZV9wYXRoc19hcnJheVtjdXJLZXldID0gY3VyUGF0aEFycmF5O1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNvbnN0IHBvc2l0aXZlUGF0aHMgPSB0aGlzLm1haW5Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAncG9zaXRpdmVQYXRocycpO1xyXG5cclxuICAgICAgICBPYmplY3QuZW50cmllcyhwb3NpdGl2ZV9wYXRoc19hcnJheSkuZm9yRWFjaChjYXRlZ29yeU9iaiA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjdXJLZXkgPSBjYXRlZ29yeU9ialswXTtcclxuICAgICAgICAgICAgbGV0IGN1ckFycmF5ID0gY2F0ZWdvcnlPYmpbMV07XHJcblxyXG4gICAgICAgICAgICBwb3NpdGl2ZVBhdGhzLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCBjdXJLZXkpXHJcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgIC5kYXR1bShjdXJBcnJheSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgY29sb3JEaWN0W2N1cktleV0pXHJcbiAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAwKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBkID0+IGFyZWFHZW4oZCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBPYmplY3QuZW50cmllcyhuZWdhdGl2ZU9yZGVyRGljdCkuc29ydCgoYSxiKSA9PiBiWzFdIC0gYVsxXSkuZm9yRWFjaChvcmRlck9iaiA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgY3VyS2V5ID0gb3JkZXJPYmpbMF07XHJcbiAgICAgICAgICAgIGxldCBjdXJPcmRlclZhbHVlID0gb3JkZXJPYmpbMV07XHJcbiAgICAgICAgICAgIGxldCBjdXJQYXRoQXJyYXkgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIG5lZ0RhdGEuZm9yRWFjaCh5ZWFyRGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IHllYXJEYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1clllYXIgPSBjdXJFbGVtWydjdXJZZWFyJ107XHJcbiAgICAgICAgICAgICAgICBsZXQga2V5T2JqID0geWVhckRhdGEuZmlsdGVyKGVsZW0gPT4gY3VyS2V5ID09PSBlbGVtLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYoa2V5T2JqLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQWRkIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goa2V5T2JqWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgemVyb1xyXG4gICAgICAgICAgICAgICAgICAgIGN1clBhdGhBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY3VyS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZWdhdGl2ZV9wYXRoc19hcnJheVtjdXJLZXldID0gY3VyUGF0aEFycmF5O1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNvbnN0IG5lZ2F0aXZlUGF0aHMgPSB0aGlzLm1haW5Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAnbmVnYXRpdmVwYXRocycpO1xyXG5cclxuICAgICAgICBPYmplY3QuZW50cmllcyhuZWdhdGl2ZV9wYXRoc19hcnJheSkuZm9yRWFjaChjYXRlZ29yeU9iaiA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjdXJLZXkgPSBjYXRlZ29yeU9ialswXTtcclxuICAgICAgICAgICAgbGV0IGN1ckFycmF5ID0gY2F0ZWdvcnlPYmpbMV07XHJcblxyXG4gICAgICAgICAgICBuZWdhdGl2ZVBhdGhzLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCBjdXJLZXkpXHJcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgIC5kYXR1bShjdXJBcnJheSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgY29sb3JEaWN0W2N1cktleV0pXHJcbiAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAwKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBkID0+IGFyZWFHZW4oZCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBEcmF3IGxpbmVcclxuICAgICAgICBjb25zdCBsaW5lR2VuID0gZDMubGluZSgpLngoZCA9PiB4U2NhbGUoZC55ZWFyKSkueShkID0+IHlTY2FsZShkLnZhbHVlKSk7XHJcblxyXG4gICAgICAgIGxldCBuZWdZZWFyVG90YWwgPSBbXTtcclxuICAgICAgICBsZXQgcG9zWWVhclRvdGFsID0gW107XHJcbiAgICAgICAgcG9zRGF0YS5mb3JFYWNoKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgbGV0IGluaXRWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgIGxldCBjdXJWYWx1ZSA9IHllYXJEYXRhLnJlZHVjZSgocHJldlZhbCxjdXJWYWwpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWR1Y2luZy4uLicsIHByZXZWYWwgLCBjdXJWYWwpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXZWYWwgKyBjdXJWYWwudmFsdWU7XHJcbiAgICAgICAgICAgIH0sIGluaXRWYWx1ZSk7XHJcbiAgICAgICAgICAgIG5lZ1llYXJUb3RhbC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHllYXI6IHllYXJEYXRhWzBdLmN1clllYXIsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogLWN1clZhbHVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwb3NZZWFyVG90YWwucHVzaChcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyOiB5ZWFyRGF0YVswXS5jdXJZZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjdXJWYWx1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3llYXIgdG90YWw6JywgKTtcclxuXHJcbiAgICAgICAgdmFyIHBvc2xpbmUgPSBkMy5zZWxlY3QoJ3N2ZycpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAuZGF0dW0ocG9zWWVhclRvdGFsKVxyXG4gICAgICAgICAgICAuYXR0cignZCcsIGxpbmVHZW4pXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICdub25lJylcclxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3RoaXMuY2hhcnRXaWR0aCowLjA1ICsgeFNjYWxlLmJhbmR3aWR0aCgpfSwke01hdGguYWJzKHlTY2FsZSgyKjAuNzQpLXlTY2FsZSgwKSl9KWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBuZWdsaW5lID0gZDMuc2VsZWN0KCdzdmcnKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgLmRhdHVtKG5lZ1llYXJUb3RhbClcclxuICAgICAgICAgICAgLmF0dHIoJ2QnLCBsaW5lR2VuKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnbm9uZScpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLnN0eWxlKFwic3Ryb2tlLWRhc2hhcnJheVwiLCAoXCIzLCAzXCIpKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3RoaXMuY2hhcnRXaWR0aCowLjA1ICsgeFNjYWxlLmJhbmR3aWR0aCgpfSwke01hdGguYWJzKHlTY2FsZSgyKjAuNzQpLXlTY2FsZSgwKSl9KWApO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBkcmF3VGl0bGUoY29udGFpbmVyKXtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCAodGhpcy5zdmdXaWR0aCAtIHRoaXMuY2hhcnRXaWR0aCkgLyAyICsgdGhpcy5jaGFydFdpZHRoKjAuMDUpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgKHRoaXMuc3ZnSGVpZ2h0IC0gdGhpcy5jaGFydEhlaWdodCkvMiAtIDUwKVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzE3cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgJ2dyYXBoaWsnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgJzYwMCcpXHJcbiAgICAgICAgICAgIC50ZXh0KFwiTGUgdGl0cmUgZHUgZ3JhcGhpcXVlXCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsKHRoaXMuc3ZnV2lkdGggLSB0aGlzLmNoYXJ0V2lkdGgpIC8gMiArIHRoaXMuY2hhcnRXaWR0aCowLjA1KVxyXG4gICAgICAgICAgICAuYXR0cigneScsICh0aGlzLnN2Z0hlaWdodCAtIHRoaXMuY2hhcnRIZWlnaHQpLzIgLSAyNSlcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxM3B0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LWZhbWlseScsICdncmFwaGlrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsICc0MDAnKVxyXG4gICAgICAgICAgICAudGV4dChcIkxlIHNvdXMtdGl0cmUgZHUgZ3JhcGhpcXVlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdCb3R0b21Cb3goY29udGFpbmVyLCB3aWR0aCl7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnc3Rva2Utd2lkdGgnLCAxKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAwLjMpXHJcbiAgICAgICAgICAgIC5hdHRyKFwieDFcIiwgdGhpcy5jaGFydFdpZHRoKjAuMDUpXHJcbiAgICAgICAgICAgIC5hdHRyKFwieTFcIiwgdGhpcy5jaGFydEhlaWdodC0zMClcclxuICAgICAgICAgICAgLmF0dHIoXCJ4MlwiLCB0aGlzLmNoYXJ0V2lkdGgpXHJcbiAgICAgICAgICAgIC5hdHRyKFwieTJcIiwgdGhpcy5jaGFydEhlaWdodC0zMCk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIHRoaXMuY2hhcnRXaWR0aCowLjA1KVxyXG4gICAgICAgICAgICAuYXR0cigneScsIHRoaXMuY2hhcnRIZWlnaHQtMTcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA2MDApXHJcbiAgICAgICAgICAgIC50ZXh0KCdHcmFwaGlxdWUgOicpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3RzcGFuJylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCB0aGlzLmNoYXJ0V2lkdGgqMC4wNSsgNjUpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgdGhpcy5jaGFydEhlaWdodC0xNylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDQwMClcclxuICAgICAgICAgICAgLnRleHQoJ0xlIERldm9pciAtICcpO1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIHRoaXMuY2hhcnRXaWR0aCowLjA1ICsgMTIyKVxyXG4gICAgICAgICAgICAuYXR0cigneScsIHRoaXMuY2hhcnRIZWlnaHQtMTcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA2MDApXHJcbiAgICAgICAgICAgIC50ZXh0KCdTb3VyY2UgOicpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3RzcGFuJylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCB0aGlzLmNoYXJ0V2lkdGgqMC4wNSArIDE2OSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmNoYXJ0SGVpZ2h0LTE3KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgICAgICAudGV4dCgnIC4uLiAnKTtcclxuXHJcbiAgICAgICAgLy8gY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgLy8gICAgIC5hdHRyKCd4JywgdGhpcy5zdmdXaWR0aCowLjEpXHJcbiAgICAgICAgLy8gICAgIC5hdHRyKCd5JywgdGhpcy5zdmdIZWlnaHQqMC45NTEpXHJcbiAgICAgICAgLy8gICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgLy8gICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA2MDApXHJcbiAgICAgICAgLy8gICAgIC50ZXh0KCdOb3RlIDonKVxyXG4gICAgICAgIC8vICAgICAuYXBwZW5kKCd0c3BhbicpXHJcbiAgICAgICAgLy8gICAgIC5hdHRyKCd4JywgdGhpcy5zdmdXaWR0aCowLjErMzUpXHJcbiAgICAgICAgLy8gICAgIC5hdHRyKCd5JywgdGhpcy5zdmdIZWlnaHQqMC45NTEpXHJcbiAgICAgICAgLy8gICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgLy8gICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA0MDApXHJcbiAgICAgICAgLy8gICAgIC50ZXh0KCdEb25uw6llcyBjb2xsZWN0w6llcyBkZXB1aXMgaHR0cHM6Ly9kb25uZWVzLm1vbnRyZWFsLmNhL3ZpbGxlLWRlLW1vbnRyZWFsL2NvbXB0YWdlLXZlaGljdWxlcy1waWV0b25zJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0RldGFpbHMoY29udGFpbmVyLCBsZWdlbmREYXRhKXtcclxuXHJcbiAgICAgICAgY29uc3QgbGVnZW5kQ29udGFpbmVyID0gY29udGFpbmVyLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdsZWdlbmRDb250YWluZXInKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkeyh0aGlzLnN2Z1dpZHRoIC0gdGhpcy5jaGFydFdpZHRoKSAvIDIgKyAodGhpcy5jaGFydFdpZHRoKjAuMDUgKyAxMCl9LCR7dGhpcy5zdmdIZWlnaHQqMC4wN30pYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJvd3MgPSBsZWdlbmRDb250YWluZXIuc2VsZWN0QWxsKCdnJylcclxuICAgICAgICAgICAgLmRhdGEobGVnZW5kRGF0YSlcclxuICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdsZWdlbmRSb3cnKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQsaSkgPT4gYHRyYW5zbGF0ZSgwLCR7aSoyMH0pYCk7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHJvd3MuYXBwZW5kKCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAuYXR0cignY3gnLCAwKVxyXG4gICAgICAgICAgICAuYXR0cignY3knLCAwKVxyXG4gICAgICAgICAgICAuYXR0cigncicsIDgpXHJcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgZCA9PiBjb2xvckRpY3RbZC5jb2xvcl0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICByb3dzLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgMTgpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgNClcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDUwMClcclxuICAgICAgICAgICAgLnRleHQoIGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQubGFiZWw7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBkcmF3UmVjdGFuZ2xlcyhjb250YWluZXIsIHhTY2FsZSwgeVNjYWxlKXsgLy8gbm90IHVzZWRcclxuXHJcbiAgICAgICAgY29uc3QgcG9zaXRpdmVBcmVhR3JvdXAgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAuYXR0cignaWQnLCAncG9zQXJlYWdyb3VwJylcclxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgwLCR7MH0pYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5lZ2F0aXZlQXJlYUdyb3VwID0gY29udGFpbmVyLmFwcGVuZCgnZycpXHJcbiAgICAgICAgLmF0dHIoJ2lkJywgJ25lZ0FyZWFncm91cCcpXHJcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoMCwkezB9KWApO1xyXG5cclxuICAgICAgICBjb25zdCBwb3NZZWFyR3JvdXBzID0gcG9zaXRpdmVBcmVhR3JvdXAuc2VsZWN0QWxsKCdnJylcclxuICAgICAgICAgICAgLmRhdGEodGhpcy5kYXRhKVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgZCA9PiBgeWVhcl8ke2QueWVhcn1gKTtcclxuICAgICAgICBjb25zdCBwb3NSZWN0cyA9IHBvc1llYXJHcm91cHMuc2VsZWN0QWxsKCdyZWN0JylcclxuICAgICAgICAgICAgLmRhdGEoZCA9PiB7IFxyXG4gICAgICAgICAgICAgICAgbGV0IHBvc0VsZW1zID0gW107XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyVG90YWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1clllYXIgPSBkLnllYXI7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhkKS5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY3VyRWxlbT4wICYmIGVudHJ5WzBdICE9PSBcInllYXJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc0VsZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZW50cnlbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW50cnlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IGN1clRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90YWwgKz0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBwb3NFbGVtcy5zb3J0KChhLGIpID0+IHBvc2l0aXZlT3JkZXJEaWN0W2EudHlwZV0gLSBwb3NpdGl2ZU9yZGVyRGljdFtiLnR5cGVdKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQgPT4gYCR7ZC50eXBlfV8ke2QudmFsdWV9YClcclxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgeFNjYWxlLmJhbmR3aWR0aCgpKVxyXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgKGQsaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguYWJzKHlTY2FsZSgwKSAtIHlTY2FsZShkLnZhbHVlKSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgZCA9PiB4U2NhbGUoZC5jdXJZZWFyKSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCBkID0+ICh5U2NhbGUoMCkgLSAoTWF0aC5hYnMoeVNjYWxlKDApIC0geVNjYWxlKGQudmFsdWUpKSkgLSAoTWF0aC5hYnMoeVNjYWxlKDApIC0geVNjYWxlKGQuY3VyVG90KSkpKSlcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGNvbG9yRGljdFtkLnR5cGVdKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVnYXRpdmVZZWFyR3JvdXBzID0gbmVnYXRpdmVBcmVhR3JvdXAuc2VsZWN0QWxsKCdnJylcclxuICAgICAgICAgICAgLmRhdGEodGhpcy5kYXRhKVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgZCA9PiBgeWVhcl8ke2QueWVhcn1gKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVnUmVjdHMgPSBuZWdhdGl2ZVllYXJHcm91cHMuc2VsZWN0QWxsKCdyZWN0JylcclxuICAgICAgICAgICAgLmRhdGEoZCA9PiB7IFxyXG4gICAgICAgICAgICAgICAgbGV0IG5lZ0VsZW1zID0gW107XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyVG90YWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1clllYXIgPSBkLnllYXI7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhkKS5maWx0ZXIoZWxlbSA9PiBlbGVtWzFdPDApLnNvcnQoKGEsYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFWYWwgPSBuZWdhdGl2ZU9yZGVyRGljdFthWzBdXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBiVmFsID0gbmVnYXRpdmVPcmRlckRpY3RbYlswXV07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFWYWwgLSBiVmFsO1xyXG4gICAgICAgICAgICAgICAgfSkuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGVudHJ5WzBdICE9PSBcInllYXJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZ0VsZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZW50cnlbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW50cnlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IGN1clRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90YWwgKz0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZWdFbGVtcztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQgPT4gYCR7ZC50eXBlfV8ke2QudmFsdWV9YClcclxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgeFNjYWxlLmJhbmR3aWR0aCgpKVxyXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgKGQsaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguYWJzKHlTY2FsZSgwKSAtIHlTY2FsZShNYXRoLmFicyhkLnZhbHVlKSkpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIGQgPT4geFNjYWxlKGQuY3VyWWVhcikpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgZCA9PiAoeVNjYWxlKGQuY3VyVG90KSkpXHJcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgZCA9PiBjb2xvckRpY3RbZC50eXBlXSk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcclxuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdhdWdlcyhwcm9wcyl7XHJcbiAgIC8vY29uc29sZS5sb2cocHJvcHMpXHJcbiAgY29uc3QgbWF4V2lkdGhWYWx1ZSA9IDUwO1xyXG4gIGNvbnN0IGNhbGN1bGF0ZUdhdWdlV2lkdGggPSAoKSA9PiB7XHJcbiAgICBjb25zdCBnYXVnZXNFbGVtcyA9IGQzLnNlbGVjdCgnLmdhdWdlcycpLnNlbGVjdEFsbCgnLmdhdWdlJyk7XHJcbiAgICBnYXVnZXNFbGVtcy5ub2RlcygpLmZvckVhY2goKG5vZGUpID0+IHtcclxuICAgICAgbGV0IGN1cldpZHRoID0gbWF4V2lkdGhWYWx1ZTtcclxuICAgICAgaWYoZDMuc2VsZWN0KG5vZGUpLmF0dHIoJ2lkJykgPT09IFwiZG9sbGFyc1wiKXtcclxuICAgICAgICBjdXJXaWR0aCA9IHByb3BzLmRvbGxhcnM7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgY29tbWl0dGVkVmFsdWUgPSBjdXJXaWR0aCA+IDAgPyBNYXRoLnJvdW5kKHByb3BzLmNvbW1pdHRlZC9tYXhXaWR0aFZhbHVlKjEwMCkgOiAwO1xyXG4gICAgICBjb25zdCBnYXVnZVZhbHVlID0gY3VyV2lkdGggPiAwID8gTWF0aC5yb3VuZChjdXJXaWR0aC9tYXhXaWR0aFZhbHVlKjEwMCkgOiAwO1xyXG4gICAgICBkMy5zZWxlY3Qobm9kZSkuc2VsZWN0KCcuZ2F1Z2VDb2xvckhvbGRlcicpLnNlbGVjdCgnLmNvbW1pdHRlZCcpLnN0eWxlKCd3aWR0aCcsIGAke2NvbW1pdHRlZFZhbHVlfSVgKTtcclxuICAgICAgZDMuc2VsZWN0KG5vZGUpLnNlbGVjdCgnLmdhdWdlQ29sb3InKS5zdHlsZSgnd2lkdGgnLCBgJHtnYXVnZVZhbHVlfSVgKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlbmRlckpldG9uVGV4dCA9IChqZXRvbnNWYWx1ZSkgPT4ge1xyXG4gICAgaWYoTWF0aC5hYnMoamV0b25zVmFsdWUpPjEpe1xyXG4gICAgICByZXR1cm4gYCR7amV0b25zVmFsdWV9Jm5ic3A7amV0b25zYDtcclxuICAgIH1cclxuICAgIHJldHVybiBgJHtqZXRvbnNWYWx1ZX0mbmJzcDtqZXRvbmA7XHJcbiAgfVxyXG5cclxuICB1c2VFZmZlY3QoICgpID0+IHtcclxuICAgIGNhbGN1bGF0ZUdhdWdlV2lkdGgoKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2F1Z2VzXCI+XHJcbiAgICAgIDxkaXYgaWQ9XCJkb2xsYXJzXCIgY2xhc3NOYW1lPVwiZ2F1Z2UgZG9sbGFyR2F1Z2VcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGdhdWdlQ29sb3JIb2xkZXIgJHtwcm9wcy5kb2xsYXJzIDwgMCA/IFwicmVkXCI6XCJcIn1gfT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZ2F1Z2VDb2xvciAke3Byb3BzLmRvbGxhcnMgPCAwID8gXCJyZWRcIjogcHJvcHMuZ2F1Z2VFeHBsYWluID8gXCJsaWdodGJsdWVcIiA6IFwiYmx1ZVwifWB9PlxyXG5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAge3Byb3BzLmNvbW1pdHRlZCAhPSAwID9cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgY29tbWl0dGVkICR7cHJvcHMuZG9sbGFycyA8IDAgPyBcInJlZFwiOnByb3BzLmdhdWdlRXhwbGFpbiA/IFwibGlnaHRibHVlXCIgOiBcImJsdWVcIn1gfT5cclxuICAgICAgICAgICAgICB7LyogPHA+e3Byb3BzLmNvbW1pdHRlZH08L3A+ICovfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA6XCJcIlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBwcm9wcy5taXNzaW9uID9cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2YWx1ZSBhcnJvd0dhdWdlXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsYWJlbEhvbGRlclwiPlxyXG4gICAgICAgICAgICAgICAgPHA+PGI+QnVkZ2V0Jm5ic3A7dG90YWw8L2I+PC9wPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFycm93XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVjdFwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlY3QtMVwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlY3QtMlwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxhYmVsSG9sZGVyXCIgc3R5bGU9e3tcInRleHRBbGlnblwiOiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPXt7XCJwYWRkaW5nUmlnaHRcIjogXCI3cHhcIn19PjxiPntwYXJzZShyZW5kZXJKZXRvblRleHQocHJvcHMuZG9sbGFycykpfTwvYj48L3A+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA6XHJcbiAgICAgICAgICAgIHByb3BzLmdhdWdlRXhwbGFpbiA/IFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZhbHVlIGdhdWdlRXhwbGFpblwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnVkZ2V0U3RhbXBcIj5cclxuICAgICAgICAgICAgICA8cD48Yj5CdWRnZXQ8L2I+PC9wPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGFiZWxIb2xkZXJcIj5cclxuICAgICAgICAgICAgICAgIHsvKiA8cD48Yj5CdWRnZXQ8L2I+PC9wPiAqL31cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxhYmVsSG9sZGVyXCIgc3R5bGU9e3tcInRleHRBbGlnblwiOiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPXt7XCJwYWRkaW5nUmlnaHRcIjogXCI3cHhcIn19PjxiPntwYXJzZShyZW5kZXJKZXRvblRleHQocHJvcHMuZG9sbGFycy0yNSkpfTwvYj48L3A+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2YWx1ZSBiYXNpY0dhdWdlXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxhYmVsSG9sZGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8cD48Yj5CdWRnZXQ8L2I+PC9wPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGFiZWxIb2xkZXJcIiBzdHlsZT17e1widGV4dEFsaWduXCI6IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9e3tcInBhZGRpbmdSaWdodFwiOiBcIjdweFwifX0+PGI+e3BhcnNlKHJlbmRlckpldG9uVGV4dChwcm9wcy5kb2xsYXJzKSl9PC9iPjwvcD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG5cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFja30gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnRyb0JveChwcm9wcyl7XG5cbiAgY29uc3Qgc3RhcnRHYW1lID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICAvL2NvbnNvbGUubG9nKCdzdGFydGluZyBnYW1lJyk7XG4gICAgcHJvcHMuZ2FtZVN0YXJ0KCk7XG4gIH0pO1xuXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWVCb3ggdHJhbnNwYXJlbnRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW50cm9Cb3hcIj5cbiAgICAgICAge3Byb3BzLmludHJvRWxlbX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyQm94XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RhcnRidXR0b25cIiBvbkNsaWNrPXtzdGFydEdhbWV9PlxuICAgICAgICAgIDxwPkNvbW1lbmNlciBsZSBqZXU8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgKVxuXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VFZmZlY3R9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyBHYXVnZXMgfSBmcm9tIFwiLi9HYXVnZXNcIjtcclxuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gTW9uaXRvcmluZyhwcm9wcyl7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZihwcm9wcy50cmFuc2l0aW9uKXtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgZDMuc2VsZWN0KFwiLm1vbml0b3JpbmdfdmFsdWVcIikudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDEwMDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgIH0sMjAwKTtcclxuICAgIH1cclxuXHJcbiAgfSxbXSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vbml0b3JpbmdcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX2NvbnRlbnRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Btb25pdG9yaW5nX3ZhbHVlICR7cHJvcHMudHJhbnNpdGlvbiA/IFwidHJhbnNpdGlvblwiOiBcIlwifWB9PlxyXG4gICAgICAgICAgICA8R2F1Z2VzIHJpZ2h0YXJyb3dzPXtwcm9wcy5yaWdodGFycm93c30gZ2F1Z2VFeHBsYWluPXtwcm9wcy5nYXVnZUV4cGxhaW59IG1pc3Npb249e3Byb3BzLm1pc3Npb259IGRvbGxhcnM9e3Byb3BzLmRvbGxhcnN9IGNvbW1pdHRlZD17cHJvcHMuY29tbWl0dGVkfS8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7IHByb3BzLnRlcmF3YXR0cyB8fCBwcm9wcy50ZXJhd2F0dHMgPT09IDAgP1xyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ19jb250ZW50XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vbml0b3JpbmdfaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgPGg1PjxiPsOJbGVjdHJpY2l0w6kgcHJvZHVpdGU8L2I+Jm5ic3A7JiM4MjI2OyZuYnNwO3twcm9wcy50ZXJhd2F0dHN9Jm5ic3A7VFdoPC9oNT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA6XHJcbiAgICAgICAgPGRpdj48L2Rpdj5cclxuICAgICAgfVxyXG4gICAgPC9kaXY+XHJcblxyXG4gIClcclxufVxyXG4iLCJcclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVBlcmZvcm1hbmNlKGNob2ljZXNfdmFsdWVzKXtcclxuICByZXR1cm4gY2hvaWNlc192YWx1ZXMuc3BsaXQoJ18nKS5zbGljZSgxKS5tYXAoZWxlbSA9PiBwYXJzZUludChlbGVtKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JyZWN0SWNvblNvdXJjZShpZHgpe1xyXG5cclxuICBjb25zdCBpY29uTGlzdCA9IFtcclxuICAgIFwiSHlkcm8uc3ZnXCIsXHJcbiAgICBcIkVvbGllbi5zdmdcIixcclxuICAgIFwiTnVjbGVhaXJlLnN2Z1wiLFxyXG4gICAgXCJTb2xhaXJlLnN2Z1wiLFxyXG4gICAgXCJNb2Rlcm5pc2F0aW9uLnN2Z1wiXHJcbiAgXTtcclxuICByZXR1cm4gaWNvbkxpc3RbaWR4XTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHJlbmRlclNpZ24gPSAodmFsdWUpID0+IHtcclxuICByZXR1cm4gcGFyc2VJbnQodmFsdWUpID09PSAwID9cclxuICAgIFwiXCJcclxuICAgIDpcclxuICAgIHBhcnNlSW50KHZhbHVlKSA8IDAgP1xyXG4gICAgICBcIlwiXHJcbiAgICAgIDpcclxuICAgICAgXCJFTkNBSVNTRVIgXCI7XHJcbn07XHJcbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IE1vbml0b3JpbmcgfSBmcm9tIFwiLi4vZ2F1Z2VzL01vbml0b3JpbmdcIjtcbmltcG9ydCB7IGNhbGN1bGF0ZVBlcmZvcm1hbmNlLCByZW5kZXJTaWduIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gQ2hvaWNlKHByb3BzKXtcblxuICBjb25zdCBbc2VsZWN0aW9uLCBzZXRTZWxlY3Rpb25dID0gdXNlU3RhdGUobnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcblxuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb25idXR0b25zID0gZDMuc2VsZWN0QWxsKCcuY2hvaWNlYnV0dG9uJyk7XG4gICAgc2VsZWN0aW9uYnV0dG9ucy5zZWxlY3QoJy5idXRuJykuY2xhc3NlZCgnc2VsZWN0ZWQnLCBmYWxzZSk7XG4gICAgaWYoc2VsZWN0aW9uKXtcbiAgICAgIGQzLnNlbGVjdChzZWxlY3Rpb24ub2JqKS5zZWxlY3QoJy5idXRuJykuY2xhc3NlZCgnc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgIHNlbGVjdGlvbmJ1dHRvbnMuc2VsZWN0KCcuYnV0bicpLnN0eWxlKCdvcGFjaXR5JywgXCIwLjVcIik7XG4gICAgICBkMy5zZWxlY3Qoc2VsZWN0aW9uLm9iaikuc2VsZWN0KCcuYnV0bicpLnN0eWxlKCdvcGFjaXR5JywgXCIxXCIpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgc2VsZWN0aW9uYnV0dG9ucy5zZWxlY3QoJy5idXRuJykuc3R5bGUoJ29wYWNpdHknLCBcIjFcIik7XG4gICAgfVxuXG4gIH0sW3NlbGVjdGlvbl0pXG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoY29zdCwgcGVyZm9ybWFuY2UsIGluZGV4KSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gU3RyaW5nKHByb3BzLmN1clByb21wdFsnVHJpZ2dlcl9uZXh0J10pLnNwbGl0KFwiO1wiKTtcbiAgICBpZih0cmlnZ2VyTmV4dC5sZW5ndGggPiAxKXtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChTdHJpbmcodHJpZ2dlck5leHRbaW5kZXhdKS5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKSk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQoU3RyaW5nKHRyaWdnZXJOZXh0WzBdKS5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKSk7XG4gICAgfVxuXG4gICAgaWYocHJvcHMuY3VyUHJvbXB0W1wiSURcIl0gPT09IFwiUTJcIiAmJiBpbmRleCA9PT0gMCl7XG4gICAgICBwcm9wcy51cGRhdGVNZW1vcnlPYmooXCJpbnZlc3RlZE1vZGVybml6YXRpb25cIiwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgaWYocHJvcHMuY3VyUHJvbXB0W1wiSURcIl0gPT09IFwiUTZcIiAmJiBpbmRleCA9PT0gMCl7XG4gICAgICAvL0FjY2VwdGVkIENodXJjaGlsbCBGYWxscyBkZWFsLCByZWdpc3RlciBhY3Rpb25cbiAgICAgIHByb3BzLnVwZGF0ZU1lbW9yeU9iaihcImFjY2VwdGVkQ2h1cmNoaWxsRmFsbHNEZWFsXCIsIHRydWUpO1xuICAgIH1cblxuICAgIHByb3BzLnVwZGF0ZURvbGxhcnMocGFyc2VJbnQoY29zdCkpO1xuICAgIHByb3BzLnVwZGF0ZVBlcmZvcm1hbmNlKHBlcmZvcm1hbmNlKTtcbiAgICBzZXRTZWxlY3Rpb24obnVsbCk7XG4gIH0pO1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgfVxuICAgIHNldFNlbGVjdGlvbihudWxsKTtcbiAgfSk7XG5cbiAgY29uc3QgdXBkYXRlU2VsZWN0ZWQgPSAoZXZlbnQsIGNvc3QsIHBlcmZvcm1hbmNlLCBpbmRleCkgPT4ge1xuICAgIHNldFNlbGVjdGlvbih7XG4gICAgICBvYmo6IGV2ZW50LnRhcmdldCxcbiAgICAgIGNvc3Q6IHBhcnNlSW50KGNvc3QpLFxuICAgICAgcGVyZm9ybWFuY2U6IHBlcmZvcm1hbmNlLFxuICAgICAgaW5kZXg6IGluZGV4XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCByZW5kZXJKZXRvblRleHQgPSAoamV0b25WYWx1ZSkgPT4ge1xuICAgIGlmKE1hdGguYWJzKGpldG9uVmFsdWUpPjEpe1xuICAgICAgcmV0dXJuIGAke3JlbmRlclNpZ24oamV0b25WYWx1ZSl9JHtNYXRoLmFicyhqZXRvblZhbHVlKX0mbmJzcDtKRVRPTlNgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7cmVuZGVyU2lnbihqZXRvblZhbHVlKX0ke01hdGguYWJzKGpldG9uVmFsdWUpfSZuYnNwO0pFVE9OYDtcbiAgfVxuXG4gIGNvbnN0IGNoZWNrSWZGdWxsWmVybyA9ICgpID0+IHtcbiAgICBjb25zdCBjb3N0cyA9IHByb3BzLmNob2ljZXNfdmFsdWVzLm1hcCgoZWxlbSwgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoZWxlbS5zcGxpdChcIl9cIilbMF0pO1xuICAgIH0pLmZpbHRlcih2YWwgPT4gIU51bWJlci5pc05hTih2YWwpKTtcbiAgICByZXR1cm4gY29zdHMuZXZlcnkoaXRlbSA9PiBpdGVtID09PSAwKTtcbiAgfTtcblxuICByZXR1cm4oXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjaG9pY2VzXCIgcmlnaHRhcnJvd3M9e3Byb3BzLmN1clByb21wdFtcIklEXCJdID09PSBcIlE1XCIgP1widHJ1ZVwiOlwiZmFsc2VcIn0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICB7XG4gICAgICAgICAgcHJvcHMuY2hvaWNlcy5tYXAoKGNob2ljZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBjb3N0ID0gcHJvcHMuY2hvaWNlc192YWx1ZXNbaW5kZXhdLnNwbGl0KCdfJylbMF07XG4gICAgICAgICAgICBsZXQgcGVyZm9ybWFuY2UgPSBjYWxjdWxhdGVQZXJmb3JtYW5jZShwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0pO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaG9pY2VidXR0b25cIiBrZXk9e2luZGV4fSBvbkNsaWNrPXsoZSkgPT4ge3VwZGF0ZVNlbGVjdGVkKGUsIGNvc3QsIHBlcmZvcm1hbmNlLCBpbmRleCl9fT5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPXtpbmRleH0gY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvbGRlciBpY29uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9e3NlbGVjdGlvbiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLmluZGV4ID09PSBpbmRleCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi4vYXNzZXRzL2ltZy9PZmYuc3ZnXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLi9hc3NldHMvaW1nL09uLnN2Z1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIuL2Fzc2V0cy9pbWcvT24uc3ZnXCJ9PjwvaW1nPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob2xkZXIgbGFiZWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDQ+e3BhcnNlKGNob2ljZSl9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0lmRnVsbFplcm8oKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD57cGFyc2UocmVuZGVySmV0b25UZXh0KGNvc3QpKX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXJyb3dzQ2hvaWNlc1wiPjxzcGFuPiYjMTAyMzA7PC9zcGFuPjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgICAgPE1vbml0b3Jpbmcgc2hvd1RXaD17ZmFsc2V9IGRvbGxhcnM9eyhzZWxlY3Rpb24gJiYgc2VsZWN0aW9uLmhhc093blByb3BlcnR5KFwiY29zdFwiKSkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycykgKyBwYXJzZUludChzZWxlY3Rpb24uY29zdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0dGVkPXsoc2VsZWN0aW9uICYmIHNlbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShcImNvc3RcIikgJiYgKHBhcnNlSW50KHNlbGVjdGlvbi5jb3N0KSA8IDApKSA/IE1hdGguYWJzKHNlbGVjdGlvbi5jb3N0KSA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlPXtwcm9wcy5nYXVnZXMucHJvcHMucGVyZm9ybWFuY2V9Lz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAge3Byb3BzLmN1ckluZGV4ID4gMCA/XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBwcmV2XCIgb25DbGljaz17cHJldmlvdXNQcm9tcHR9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2x1bW5cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGFjdGlvbmJ1dHRvbiBuZXh0ICR7c2VsZWN0aW9uID8gJycgOiAnZGlzYWJsZWQnfWB9IG9uQ2xpY2s9eygpID0+IHtzZWxlY3Rpb24gPyBuZXh0UHJvbXB0KHNlbGVjdGlvbi5jb3N0LCBzZWxlY3Rpb24ucGVyZm9ybWFuY2UsIHNlbGVjdGlvbi5pbmRleCkgOiBjb25zb2xlLmxvZygnJyl9fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgICA8cD5Qb3Vyc3VpdnJlPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcblxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgTW9uaXRvcmluZyB9IGZyb20gXCIuLi9nYXVnZXMvTW9uaXRvcmluZ1wiO1xuaW1wb3J0IHsgY2FsY3VsYXRlUGVyZm9ybWFuY2UsIHJlbmRlclNpZ24gfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBNdWx0aVNlbGVjdGlvbihwcm9wcyl7XG5cbiAgY29uc3QgW3NlbGVjdGlvbiwgc2V0U2VsZWN0aW9uXSA9IHVzZVN0YXRlKFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlc2V0U2VsZWN0aW9uKCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuXG4gIH0sIFtzZWxlY3Rpb25dKTtcblxuICBjb25zdCByZXNldFNlbGVjdGlvbiA9ICgpID0+IHtcbiAgICBzZXRTZWxlY3Rpb24ocHJvcHMuY2hvaWNlcy5tYXAoZWxlbSA9PiBudWxsKSk7XG4gIH1cblxuICBjb25zdCBjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbiA9IChzZWxlY3Rpb24pID0+IHtcbiAgICBjb25zdCBhY2NDb3N0ID0gc2VsZWN0aW9uLnJlZHVjZSgoYWNjLCBjdXIpID0+IHtcbiAgICAgIGlmKGN1cil7XG4gICAgICAgIGFjYyArPSBjdXIuY29zdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgMCk7XG4gICAgbGV0IGFjY1BlcmZvcm1hbmNlID0gWzAsMCwwXTtcbiAgICBzZWxlY3Rpb24uZm9yRWFjaCgoY3VyLCBjb3VudCkgPT4ge1xuICAgICAgaWYoY3VyKXtcbiAgICAgICAgYWNjUGVyZm9ybWFuY2UgPSBhY2NQZXJmb3JtYW5jZS5tYXAoKGVsZW0sIGlkeCkgPT4ge1xuICAgICAgICAgIHJldHVybiBwYXJzZUludChlbGVtKSArIHBhcnNlSW50KGN1ci5wZXJmb3JtYW5jZVtpZHhdKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFthY2NDb3N0LCBhY2NQZXJmb3JtYW5jZV07XG4gIH07XG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoc2VsZWN0aW9uKSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXTtcbiAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocHJvY2Vzc1RyaWdnZXJOZXh0KHRyaWdnZXJOZXh0KSk7XG4gICAgY29uc3QgW2FjY0Nvc3QsIGFjY1BlcmZvcm1hbmNlXSA9IGNhbGN1bGF0ZVRvdGFsU2VsZWN0aW9uKHNlbGVjdGlvbik7XG5cbiAgICBwcm9wcy51cGRhdGVEb2xsYXJzKHBhcnNlSW50KGFjY0Nvc3QpKTtcbiAgICBwcm9wcy51cGRhdGVQZXJmb3JtYW5jZShhY2NQZXJmb3JtYW5jZSk7XG4gICAgcmVzZXRTZWxlY3Rpb24oKTtcbiAgfSk7XG5cbiAgY29uc3QgcHJldmlvdXNQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICB9XG4gICAgcmVzZXRTZWxlY3Rpb24oKTtcbiAgfSk7XG5cbiAgY29uc3QgdXBkYXRlU2VsZWN0ZWQgPSAoZXZlbnQsIGluZGV4LCBjb3N0LCBwZXJmb3JtYW5jZSkgPT4ge1xuICAgIGxldCBuZXdBcnJheSA9IFsuLi5zZWxlY3Rpb25dO1xuICAgIGlmKHNlbGVjdGlvbltpbmRleF0pe1xuICAgICAgLy8gVW5zZWxlY3RcbiAgICAgIG5ld0FycmF5W2luZGV4XSA9IG51bGw7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAvLyBTZWxlY3RcbiAgICAgIG5ld0FycmF5W2luZGV4XSA9IHtcbiAgICAgICAgb2JqOiBldmVudC50YXJnZXQsXG4gICAgICAgIGNvc3Q6IHBhcnNlSW50KGNvc3QpLFxuICAgICAgICBwZXJmb3JtYW5jZTogcGVyZm9ybWFuY2VcbiAgICAgIH07XG4gICAgfVxuICAgIHNldFNlbGVjdGlvbihuZXdBcnJheSk7XG4gIH1cblxuICBjb25zdCBwcm9jZXNzVHJpZ2dlck5leHQgPSAodHJpZ2dlck5leHR0b0NvbXB1dGUpID0+IHtcbiAgICBsZXQgY2hvc2VuU3RyaW5nO1xuICAgIGNvbnN0IHNwbGl0dGVkVHJpZ2dlck5leHQgPSBTdHJpbmcodHJpZ2dlck5leHR0b0NvbXB1dGUpLnNwbGl0KFwiX1wiKTtcbiAgICBjb25zdCBpbmRpdmlkdWFsVHJpZ2dlck5leHQgPSBTdHJpbmcoc3BsaXR0ZWRUcmlnZ2VyTmV4dFswXSkuc3BsaXQoXCI7XCIpO1xuICAgIGNvbnN0IGZpbHRlcmVkU2VsZWN0aW9uID0gc2VsZWN0aW9uLmZpbHRlcigoZWxlbSkgPT4gZWxlbSAhPT0gbnVsbCk7XG4gICAgaWYoc3BsaXR0ZWRUcmlnZ2VyTmV4dC5sZW5ndGggPiAxICYmIGZpbHRlcmVkU2VsZWN0aW9uLmxlbmd0aCA+IDApe1xuICAgICAgLy8gSW5kaXZpZHVhbCBhbmQgZGVmYXVsdCB2YWx1ZXMgYXJlIGF2YWlsYWJsZVxuICAgICAgaWYoZmlsdGVyZWRTZWxlY3Rpb24ubGVuZ3RoID4gMSl7XG4gICAgICAgIC8vIHJldHVybiBkZWZhdWx0IGNob2ljZVxuICAgICAgICBjaG9zZW5TdHJpbmcgPSBTdHJpbmcoc3BsaXR0ZWRUcmlnZ2VyTmV4dFsxXSk7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBjaG9zZW5TdHJpbmcgPSBTdHJpbmcoaW5kaXZpZHVhbFRyaWdnZXJOZXh0W3NlbGVjdGlvbi5pbmRleE9mKGZpbHRlcmVkU2VsZWN0aW9uWzBdKV0pO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgY2hvc2VuU3RyaW5nID0gU3RyaW5nKHNwbGl0dGVkVHJpZ2dlck5leHRbMF0pO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygnY2hlY2tpbmcgY2hvc2VuU3RyaW5nOicsIGNob3NlblN0cmluZyk7XG4gICAgcmV0dXJuIGNob3NlblN0cmluZy5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKTtcbiAgfVxuXG4gIGNvbnN0IHJlbmRlckpldG9uVGV4dCA9IChqZXRvblZhbHVlKSA9PiB7XG4gICAgaWYoTWF0aC5hYnMoamV0b25WYWx1ZSk+MSl7XG4gICAgICByZXR1cm4gYCR7cmVuZGVyU2lnbihqZXRvblZhbHVlKX0ke01hdGguYWJzKGpldG9uVmFsdWUpfSZuYnNwO0pFVE9OU2A7XG4gICAgfVxuICAgIHJldHVybiBgJHtyZW5kZXJTaWduKGpldG9uVmFsdWUpfSR7TWF0aC5hYnMoamV0b25WYWx1ZSl9Jm5ic3A7SkVUT05gO1xuICB9XG5cbiAgY29uc3QgY2hlY2tJZkZ1bGxaZXJvID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvc3RzID0gcHJvcHMuY2hvaWNlc192YWx1ZXMubWFwKChlbGVtLCBpZHgpID0+IHtcbiAgICAgIHJldHVybiBwYXJzZUludChlbGVtLnNwbGl0KFwiX1wiKVswXSk7XG4gICAgfSkuZmlsdGVyKHZhbCA9PiAhTnVtYmVyLmlzTmFOKHZhbCkpO1xuICAgIHJldHVybiBjb3N0cy5ldmVyeShpdGVtID0+IGl0ZW0gPT09IDApO1xuICB9O1xuXG4gIHJldHVybihcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImNob2ljZXNcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgIHtcbiAgICAgICAgICBwcm9wcy5jaG9pY2VzLm1hcCgoY2hvaWNlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgbGV0IGNvc3QgPSBwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0uc3BsaXQoJ18nKVswXTtcbiAgICAgICAgICAgIGxldCBwZXJmb3JtYW5jZSA9IGNhbGN1bGF0ZVBlcmZvcm1hbmNlKHByb3BzLmNob2ljZXNfdmFsdWVzW2luZGV4XSk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdGlvbmJ1dHRvblwiIGtleT17aW5kZXh9IG9uQ2xpY2s9eyhlKSA9PiB7dXBkYXRlU2VsZWN0ZWQoZSwgaW5kZXgsIGNvc3QsIHBlcmZvcm1hbmNlKX19PlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9e2luZGV4fSBjbGFzc05hbWU9e2BidXRuICR7c2VsZWN0aW9uW2luZGV4XSA/ICdzZWxlY3RlZCcgOiAnJ31gfT5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgaG9sZGVyIGljb24gJHtzZWxlY3Rpb25baW5kZXhdID8gJ3NlbGVjdGVkJyA6ICcnfWB9PlxuXG4gICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e3NlbGVjdGlvbltpbmRleF0gPyBcImFzc2V0cy9pbWcvUGx1cy1PZmYuc3ZnXCIgOiBcImFzc2V0cy9pbWcvUGx1cy1Pbi5zdmdcIn1cbiAgICAgICAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvbGRlciBsYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoND57cGFyc2UoY2hvaWNlKX08L2g0PlxuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrSWZGdWxsWmVybygpID9cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPntwYXJzZShyZW5kZXJKZXRvblRleHQoY29zdCkpfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb25pdG9yaW5nIHNob3dUV2g9e2ZhbHNlfSBkb2xsYXJzPXsoc2VsZWN0aW9uICYmIHNlbGVjdGlvbi5sZW5ndGggPiAwKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycykgKyBwYXJzZUludChjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbihzZWxlY3Rpb24pWzBdKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZD17KHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24ubGVuZ3RoID4gMCAmJiBwYXJzZUludChjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbihzZWxlY3Rpb24pWzBdKSA8IDApID8gTWF0aC5hYnMocGFyc2VJbnQoY2FsY3VsYXRlVG90YWxTZWxlY3Rpb24oc2VsZWN0aW9uKVswXSkpIDogMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxuICAgICAgICAgIHtwcm9wcy5jdXJJbmRleCA+IDAgP1xuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gcHJldlwiIG9uQ2xpY2s9e3ByZXZpb3VzUHJvbXB0fT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgICAgPHA+UHJldmlvdXM8L3A+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA6XG4gICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BhY3Rpb25idXR0b24gbmV4dCAke3NlbGVjdGlvbiA/ICcnIDogJ2Rpc2FibGVkJ31gfSBvbkNsaWNrPXsoKSA9PiB7c2VsZWN0aW9uID8gbmV4dFByb21wdChzZWxlY3Rpb24pIDogY29uc29sZS5sb2coJycpfX0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgPHA+UG91cnN1aXZyZTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBNb25pdG9yaW5nIH0gZnJvbSBcIi4uL2dhdWdlcy9Nb25pdG9yaW5nXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBQcmludFByb21wdChwcm9wcyl7XG5cbiAgY29uc3QgcHJldmlvdXNQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IG5leHRQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGxldCB0cmlnZ2VyTmV4dCA9IHByb3BzLmN1clByb21wdFsnVHJpZ2dlcl9uZXh0J107XG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KHRyaWdnZXJOZXh0KTtcbiAgfSk7XG5cbiAgY29uc3QgZ2FtZVJlc2V0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBwcm9wcy5nYW1lUmVzZXQoKTtcbiAgfSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInByaW50cHJvbXB0XCI+XG4gICAgICB7XG4gICAgICAgIHByb3BzLm1lc3NhZ2UgIT09IFwiXCIgP1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWVzc2FnZVwiPlxuICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgIHtwcm9wcy5tZXNzYWdlfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA6XG4gICAgICAgICAgXCJcIlxuICAgICAgfVxuICAgICAge1xuICAgICAgICBwcm9wcy5jdXJJbmRleCA9PT0gXCIxXCIgP1xuICAgICAgICA8TW9uaXRvcmluZyBtaXNzaW9uPXt0cnVlfSB0cmFuc2l0aW9uPXt0cnVlfSBzaG93VFdoPXtmYWxzZX0gZG9sbGFycz17cHJvcHMuZ2F1Z2VzLnByb3BzLmRvbGxhcnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZD17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybWFuY2U9e3Byb3BzLmdhdWdlcy5wcm9wcy5wZXJmb3JtYW5jZX0vPlxuICAgICAgICA6XG4gICAgICAgIFwiXCJcbiAgICAgIH1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIHByZXZcIiBvbkNsaWNrPXtwcmV2aW91c1Byb21wdH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgIDxwPlByZXZpb3VzPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAge1xuICAgICAgICBwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddID09PSBcIlNUQVJUT1ZFUlwiID9cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBuZXh0XCIgb25DbGljaz17Z2FtZVJlc2V0fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgICA8cD5SZWNvbW1lbmNlcjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDpcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBuZXh0XCIgb25DbGljaz17bmV4dFByb21wdH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgPHA+UG91cnN1aXZyZTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgfVxuICAgIDwvZGl2PlxuKVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgR2F1Z2VzIH0gZnJvbSBcIi4uL2dhdWdlcy9HYXVnZXNcIjtcbmltcG9ydCB7IE1vbml0b3JpbmcgfSBmcm9tIFwiLi4vZ2F1Z2VzL01vbml0b3JpbmdcIjtcbmltcG9ydCB7IGdldENvcnJlY3RJY29uU291cmNlIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIFJlcGFydGl0aW9uKHByb3BzKXtcblxuICBjb25zdCBbamV0b25zLCBzZXRKZXRvbnNdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFt0ZXJhd2F0dHMsIHNldFRlcmF3YXR0c10gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW290aGVyUGVyZm9NZXRyaWNzLCBzZXRPdGhlclBlcmZvTWV0cmljc10gPSB1c2VTdGF0ZShbMCwwXSk7XG4gIGNvbnN0IFt1bml0cywgc2V0VW5pdHNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbdG9rZW5zUGVyVW5pdCwgc2V0VG9rZW5zUGVyVW5pdF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IG1heFRva2VucyA9IHByb3BzLmN1clByb21wdFtcIklEXCJdID09PSBcIlExXCIgPyAyNSA6IDUwO1xuICBjb25zdCBudWNsZWFySW5kZXggPSAyO1xuICBjb25zdCBkYW1JbmRleCA9IDA7XG5cbiAgdXNlRWZmZWN0KCAoKSA9PiB7XG5cbiAgICBjb25zdCBvcHRpb25zID0gZ2V0T3B0aW9uUGFyYW1zKCk7XG4gICAgY29uc3QgbmV3VW5pdHMgPSBvcHRpb25zLm1hcCgoKSA9PiAwKTtcbiAgICBjb25zdCB0b2tlbnNQZXJVbml0ID0gb3B0aW9ucy5tYXAoZWxlbSA9PiBNYXRoLmFicyhlbGVtLnVuaXRWYWx1ZSkpO1xuICAgIHNldFVuaXRzKG5ld1VuaXRzKTtcbiAgICBzZXRUb2tlbnNQZXJVbml0KHRva2Vuc1BlclVuaXQpO1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCAoKSA9PiB7XG4gICAgbGV0IG5ld0pldG9ucyA9IHVuaXRzLnJlZHVjZShcbiAgICAgIChhY2MsIGN1clZhbCwgaW5kZXgpID0+IHtcbiAgICAgICAgbGV0IGN1ck9wdGlvblBhcmFtcyA9IGdldE9wdGlvblBhcmFtcygpW2luZGV4XTtcbiAgICAgICAgcmV0dXJuIGFjYyArIE1hdGguYWJzKGN1clZhbCk7XG4gICAgICB9LDApO1xuICAgIGxldCBuZXdNVyA9IHVuaXRzLnJlZHVjZShcbiAgICAgIChhY2MsIGN1clZhbCwgaW5kZXgpID0+IHtcbiAgICAgICAgbGV0IGN1ck9wdGlvblBhcmFtcyA9IGdldE9wdGlvblBhcmFtcygpW2luZGV4XTtcbiAgICAgICAgcmV0dXJuIGFjYyArIE1hdGgucm91bmQoTWF0aC5hYnMoY3VyVmFsL2N1ck9wdGlvblBhcmFtc1tcInVuaXRWYWx1ZVwiXSkqY3VyT3B0aW9uUGFyYW1zW1widW5pdFRXaHZhbHVlXCJdKTtcbiAgICAgIH0sMCk7XG4gICAgLy9jYWxjdWxhdGUgb3RoZXIgcGVyZm9ybWFuY2UgbWV0cmljcyBhZ2dyZWdhdGlvblxuICAgIGxldCBuZXdPdGhlclBlcmZvTWV0cmljcyA9IFswLDBdO1xuICAgIHVuaXRzLmZvckVhY2goKGN1clZhbCwgY291bnQpID0+IHtcbiAgICAgIGxldCBjdXJPcHRpb25QYXJhbXMgPSBnZXRPcHRpb25QYXJhbXMoKVtjb3VudF07XG4gICAgICBuZXdPdGhlclBlcmZvTWV0cmljcyA9IG5ld090aGVyUGVyZm9NZXRyaWNzLm1hcCgoZWxlbSwgaWR4KSA9PiB7XG4gICAgICAgIGlmKGlkeCA9PT0gMCl7XG4gICAgICAgICAgcmV0dXJuIGVsZW0gKyBNYXRoLmFicyhjdXJWYWwvY3VyT3B0aW9uUGFyYW1zW1widW5pdFZhbHVlXCJdKSpjdXJPcHRpb25QYXJhbXNbXCJ1bml0RW52aXJvdmFsdWVcIl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihpZHggPT09IDEpe1xuICAgICAgICAgIHJldHVybiBlbGVtICsgTWF0aC5hYnMoY3VyVmFsL2N1ck9wdGlvblBhcmFtc1tcInVuaXRWYWx1ZVwiXSkqY3VyT3B0aW9uUGFyYW1zW1widW5pdFBvcHV2YWx1ZVwiXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgc2V0SmV0b25zKG5ld0pldG9ucyk7XG4gICAgc2V0VGVyYXdhdHRzKG5ld01XKTtcbiAgICBzZXRPdGhlclBlcmZvTWV0cmljcyhuZXdPdGhlclBlcmZvTWV0cmljcyk7XG4gIH0sIFt1bml0c10pO1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBuZXh0UHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBsZXQgc3BsaXR0ZWRUcmlnZ2VyTmV4dCA9IFN0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddKS5zcGxpdChcIl9cIik7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gU3RyaW5nKHNwbGl0dGVkVHJpZ2dlck5leHRbMF0pLnNwbGl0KFwiO1wiKTtcblxuICAgIGlmKHByb3BzLmN1clByb21wdFtcIklEXCJdID09PSBcIlExXCIgJiYgdW5pdHNbZGFtSW5kZXhdID4gMCl7XG4gICAgICBwcm9wcy51cGRhdGVNZW1vcnlPYmooXCJidWlsdERhbVwiLCB0cnVlKTtcbiAgICB9XG4gICAgZWxzZSBpZih1bml0c1tkYW1JbmRleF0gPiAwKXtcbiAgICAgIHByb3BzLnVwZGF0ZU1lbW9yeU9iaihcImJ1aWx0U2Vjb25kRGFtXCIsIHRydWUpO1xuICAgIH1cblxuICAgIGlmKHVuaXRzW251Y2xlYXJJbmRleF0gPiAwKXtcbiAgICAgIC8vTWFrZSBwbGF5ZXIgZGllLCBudWNsZWFyIHdhcyBzZWxlY3RlZFxuICAgICAgcHJvcHMudXBkYXRlTWVtb3J5T2JqKFwibnVjbGVhckJ1aWx0TnVtYmVyXCIsIHBhcnNlSW50KHByb3BzLm1lbW9yeU9iai5udWNsZWFyQnVpbHROdW1iZXIpICsgcGFyc2VJbnQodW5pdHNbbnVjbGVhckluZGV4XS90b2tlbnNQZXJVbml0W251Y2xlYXJJbmRleF0pKTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChTdHJpbmcodHJpZ2dlck5leHRbbnVjbGVhckluZGV4XSkucmVwbGFjZSgvKFxcclxcbnxcXG58XFxyKS9nbSwgXCJcIikpO1xuICAgIH1cbiAgICBlbHNlIGlmKHRyaWdnZXJOZXh0Lmxlbmd0aCA9PSAxKXtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChTdHJpbmcodHJpZ2dlck5leHQpLnJlcGxhY2UoLyhcXHJcXG58XFxufFxccikvZ20sIFwiXCIpKTtcbiAgICB9XG4gICAgZWxzZSBpZih0cmlnZ2VyTmV4dC5sZW5ndGggPiAxKXtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGVja2luZyBub24gdW5pcXVlOicsIG5vblVuaXF1ZSh1bml0cykpO1xuICAgICAgaWYobm9uVW5pcXVlKHVuaXRzKSl7XG4gICAgICAgIC8vIFNvbWUgdmFsdWVzIGFyZSBlcXVhbC4gSGllcmFyY2hpemVcbiAgICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KGhpZXJhcmNoaXplVW5pdHModHJpZ2dlck5leHQsIHNwbGl0dGVkVHJpZ2dlck5leHRbMV0pKTtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIC8vIEFsbCB2YWx1ZXMgYXJlIGRpZmZlcmVudCwgaGVuY2UgdHJpZ2dlciBjb25jb3JkaW5nIG5leHQgcHJvbXB0XG4gICAgICAgIGxldCBpbmRleE9mTWF4VmFsdWUgPSB1bml0cy5yZWR1Y2UoKGlNYXgsIHgsIGksIGFycikgPT4geCA+IGFycltpTWF4XSA/IGkgOiBpTWF4LCAwKTtcbiAgICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KFN0cmluZyh0cmlnZ2VyTmV4dFtpbmRleE9mTWF4VmFsdWVdKS5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHByb3BzLnVwZGF0ZURvbGxhcnMoLWpldG9ucyk7XG4gICAgcHJvcHMudXBkYXRlUGVyZm9ybWFuY2UoW3RlcmF3YXR0c10uY29uY2F0KG90aGVyUGVyZm9NZXRyaWNzKSk7XG4gIH0pO1xuXG4gIGNvbnN0IG5vblVuaXF1ZSA9IGEgPT4gbmV3IFNldChhKS5zaXplICE9PSBhLmxlbmd0aDtcblxuICBjb25zdCBwcm9jZXNzQ2hvaWNlcyA9IChjaG9pY2UsIGNob2ljZXNfdmFsdWVzKSA9PiB7XG4gICAgY29uc3Qgc3BsaXR0ZWRDaG9pY2VzID0gY2hvaWNlc192YWx1ZXMuc3BsaXQoJ18nKTtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogY2hvaWNlLFxuICAgICAgdW5pdFZhbHVlOiBwYXJzZUludChzcGxpdHRlZENob2ljZXNbMF0pLFxuICAgICAgdW5pdFRXaHZhbHVlOiBwYXJzZUludChzcGxpdHRlZENob2ljZXNbMV0pLFxuICAgICAgdW5pdEVudmlyb3ZhbHVlOiBwYXJzZUludChzcGxpdHRlZENob2ljZXNbMl0pLFxuICAgICAgdW5pdFBvcHV2YWx1ZTogcGFyc2VJbnQoc3BsaXR0ZWRDaG9pY2VzWzNdKSxcbiAgICB9XG4gIH1cblxuICBjb25zdCBnZXRPcHRpb25QYXJhbXMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHByb3BzLmNob2ljZXMubWFwKChjaG9pY2UsIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gcHJvY2Vzc0Nob2ljZXMoY2hvaWNlLCBwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0pO1xuICAgIH0pXG4gIH1cblxuICBjb25zdCBjaGVja0lmRnVsbCA9IChuZXdBZGRpdGlvbikgPT4ge1xuICAgIGxldCB0b3RhbCA9IDA7XG4gICAgdW5pdHMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICB0b3RhbCArPSB2YWx1ZTtcbiAgICB9KTtcbiAgICBpZih0b3RhbCtuZXdBZGRpdGlvbiA+IG1heFRva2Vucyl7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBjaGVja0hpZGVCdXR0b24gPSAoaWR4KSA9PiB7XG4gICAgY29uc3Qgb3B0aW9uUGFyYW1zID0gZ2V0T3B0aW9uUGFyYW1zKClbaWR4XTtcbiAgICBjb25zdCBjdXJVbml0VmFsdWUgPSBNYXRoLmFicyh1bml0c1tpZHhdKTtcbiAgICBsZXQgaGlkZUJ1dHRvbiA9IFtmYWxzZSxmYWxzZV07XG4gICAgaWYoY3VyVW5pdFZhbHVlID09PSAwKXtcbiAgICAgIC8vIENoZWNrIGZvciBsb3dlciBib3VuZGFyeVxuICAgICAgaGlkZUJ1dHRvblswXSA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGhpZ2hlciBib3VuZGFyeVxuICAgIGlmKGpldG9ucytwYXJzZUludChNYXRoLmFicyhvcHRpb25QYXJhbXMudW5pdFZhbHVlKSkgPiBtYXhUb2tlbnMpe1xuICAgICAgaGlkZUJ1dHRvblsxXSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhpZGVCdXR0b247XG5cbiAgfVxuXG4gIGNvbnN0IHJlbmRlckpldG9uVGV4dCA9IChqZXRvblZhbHVlKSA9PiB7XG4gICAgaWYoTWF0aC5hYnMoamV0b25WYWx1ZSk+MSl7XG4gICAgICByZXR1cm4gYCR7TWF0aC5hYnMoamV0b25WYWx1ZSl9Jm5ic3A7amV0b25zYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke01hdGguYWJzKGpldG9uVmFsdWUpfSZuYnNwO2pldG9uYDtcbiAgfVxuXG4gIGNvbnN0IG1vZGlmeU9uQ2xpY2sgPSAoZSwgaW5kZXgsIGRpZmYsIGVsZW0pID0+IHtcbiAgICBsZXQgbmV3QXJyYXkgPSBbLi4udW5pdHNdO1xuICAgIGlmKChuZXdBcnJheVtpbmRleF0rZGlmZip0b2tlbnNQZXJVbml0W2luZGV4XSkgPj0gMCl7XG4gICAgICBpZihkaWZmID4gMClcbiAgICAgIHtcbiAgICAgICAgaWYoIWNoZWNrSWZGdWxsKGRpZmYqdG9rZW5zUGVyVW5pdFtpbmRleF0pKXtcbiAgICAgICAgICBuZXdBcnJheVtpbmRleF0gPSBuZXdBcnJheVtpbmRleF0gKyBkaWZmKnRva2Vuc1BlclVuaXRbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBuZXdBcnJheVtpbmRleF0gPSBuZXdBcnJheVtpbmRleF0gKyBkaWZmKnRva2Vuc1BlclVuaXRbaW5kZXhdO1xuICAgICAgfVxuICAgICAgc2V0VW5pdHMobmV3QXJyYXkpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNoZWNrSWZaZXJvID0gKCkgPT4ge1xuICAgIHJldHVybiBqZXRvbnMgPiAwO1xuICB9XG5cbiAgY29uc3QgaGllcmFyY2hpemVVbml0cyA9ICh0cmlnZ2VyTmV4dCwgZGVmYXVsdE5leHQpID0+IHtcblxuICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KC4uLnVuaXRzKTtcbiAgICBjb25zdCByZXMgPSBbXTtcbiAgICB1bml0cy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gaXRlbSA9PT0gbWF4ID8gcmVzLnB1c2goaW5kZXgpOiBudWxsKTtcbiAgICBsZXQgY2hvc2VuU3RyaW5nO1xuICAgIGlmKHJlcy5sZW5ndGggPiAxKXtcbiAgICAgIC8vTWF4IGlzIG11bHRpcGxlLCBoaWVyYXJjaGl6ZVxuICAgICAgLy8gQmFycmFnZXMgaW5kZXggaXMgMFxuICAgICAgLy8gRW9saWVuIGluZGV4IGlzIDFcbiAgICAgIC8vIElmIGVxdWFsaXR5IHdpdGggb25seSBvdGhlcnMsIHNraXAgcXVlc3Rpb24uXG5cbiAgICAgIGlmKHJlcy5pbmNsdWRlcygwKSl7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdlcXVhbCBtYXggdW5pdHMgY29udGFpbnMgYmFycmFnZXMnKTtcbiAgICAgICAgY2hvc2VuU3RyaW5nID0gU3RyaW5nKHRyaWdnZXJOZXh0WzBdKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYocmVzLmluY2x1ZGVzKDEpKXtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2VxdWFsIG1heCB1bml0cyBjb250YWlucyBlb2xpZW5zJyk7XG4gICAgICAgIGNob3NlblN0cmluZyA9IFN0cmluZyh0cmlnZ2VyTmV4dFsxXSk7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnZXF1YWxpdHkgYmV0d2VlbiBub24gaW1wb3J0YW50IGNob2ljZXMnKTtcbiAgICAgICAgY2hvc2VuU3RyaW5nID0gU3RyaW5nKGRlZmF1bHROZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGNob3NlblN0cmluZyA9IFN0cmluZyh0cmlnZ2VyTmV4dFtyZXNbMF1dKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hvc2VuU3RyaW5nLnJlcGxhY2UoLyhcXHJcXG58XFxufFxccikvZ20sIFwiXCIpO1xuXG4gIH1cblxuICBjb25zdCByZW5kZXJSb3dzID0gKGNob2ljZXMpID0+IHtcbiAgICByZXR1cm4gY2hvaWNlcy5tYXAoIChlbGVtLGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wdGlvblVuaXRcIiBrZXk9e2luZGV4fT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdG9yWm9uZVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BkaXZpc2lvbiBtaW51c1pvbmUgJHtjaGVja0hpZGVCdXR0b24oaW5kZXgpWzBdID8gJ2Rpc2FibGVkJzonJ31gfSBvbkNsaWNrPXsoZSkgPT4gbW9kaWZ5T25DbGljayhlLCBpbmRleCwgLTEsIGVsZW0pfT5cbiAgICAgICAgICAgICAgPGgzPi08L2gzPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdmlzaW9uIGNlbnRyYWxab25lXCI+XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAodW5pdHNbaW5kZXhdID09PSB1bmRlZmluZWQgfHwgdW5pdHNbaW5kZXhdID09PSAwKSA/XG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgc3JjPXtgYXNzZXRzL2ltZy8ke2dldENvcnJlY3RJY29uU291cmNlKGluZGV4KX1gfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgIDxoMz57dW5pdHNbaW5kZXhdfTwvaDM+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BkaXZpc2lvbiBwbHVzWm9uZSAke2NoZWNrSGlkZUJ1dHRvbihpbmRleClbMV0gPyAnZGlzYWJsZWQnOicnfWB9IG9uQ2xpY2s9eyhlKSA9PiBtb2RpZnlPbkNsaWNrKGUsIGluZGV4LCAxLCBlbGVtKX0+XG4gICAgICAgICAgICAgIDxoMz4rPC9oMz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dFpvbmVcIj5cbiAgICAgICAgICAgIDxoMz57ZWxlbS5uYW1lfTwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubGluZXRleHRcIj5cbiAgICAgICAgICAgICAgPHA+e3BhcnNlKHJlbmRlckpldG9uVGV4dChlbGVtLnVuaXRWYWx1ZSkpfSZuYnNwOyYjODIyNjsmbmJzcDt7ZWxlbS51bml0VFdodmFsdWV9IFRXaDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicmVwYXJ0aXRpb25cIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3B0aW9uWm9uZVwiPlxuICAgICAgICB7XG4gICAgICAgICAgcmVuZGVyUm93cyhwcm9wcy5jaG9pY2VzLm1hcCgoZSwgaW5kZXgpID0+IHByb2Nlc3NDaG9pY2VzKGUsIHByb3BzLmNob2ljZXNfdmFsdWVzW2luZGV4XSkpKVxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb25pdG9yaW5nIGdhdWdlRXhwbGFpbj17cHJvcHMuY3VyUHJvbXB0W1wiSURcIl0gPT09IFwiUTFcIiA/dHJ1ZTpmYWxzZX0gc2hvd1RXaD17dHJ1ZX0gZG9sbGFycz17cHJvcHMuZ2F1Z2VzLnByb3BzLmRvbGxhcnMtamV0b25zfSBjb21taXR0ZWQ9e2pldG9uc30gdGVyYXdhdHRzPXt0ZXJhd2F0dHN9Lz5cbiAgICAgIHtwcm9wcy5jdXJJbmRleCA+IDAgP1xuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBwcmV2XCIgb25DbGljaz17cHJldmlvdXNQcm9tcHR9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgPHA+UHJldmlvdXM8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA6XG4gICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICB9XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YGFjdGlvbmJ1dHRvbiBuZXh0ICR7Y2hlY2tJZlplcm8oKT8gJycgOiAnZGlzYWJsZWQnfWB9IG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5Qb3Vyc3VpdnJlPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG5cbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBkM1RpcCBmcm9tICdkMy10aXAnO1xuXG5leHBvcnQgZnVuY3Rpb24gTWFwTmF2aWdhdG9yKHByb3BzKXtcblxuICBjb25zdCBbc2VsZWN0aW9uLCBzZXRTZWxlY3Rpb25dID0gdXNlU3RhdGUobnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXR1cE9uQ2xpY2soKTtcbiAgfSxbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZihzZWxlY3Rpb24pe1xuICAgICAgZDMuc2VsZWN0KCcucG9wVXAtYmcnKS5zdHlsZSgnZGlzcGxheScsICd1bnNldCcpO1xuXG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBkMy5zZWxlY3QoJy5wb3BVcC1iZycpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcblxuXG4gICAgfVxuICB9LCBbc2VsZWN0aW9uXSk7XG5cbiAgY29uc3QgdHJpZ2dlclBvaW50ZXIgPSAoZWxlbSwgc3RhdGUpID0+IHtcbiAgICBkMy5zZWxlY3QoZWxlbSkuc3R5bGUoXCJjdXJzb3JcIiwgc3RhdGUgPyBcInBvaW50ZXJcIjpudWxsKTtcbiAgfVxuXG4gIGNvbnN0IHRpcCA9IGQzVGlwKClcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZDMtdGlwIGFkanVzdGVkJylcbiAgICAgICAgICAgICAgICAuZGlyZWN0aW9uKCduJylcbiAgICAgICAgICAgICAgICAuaHRtbCgoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgICAgIDxoND4ke2QudGl0bGV9PC9oND5cbiAgICAgICAgICAgICAgICAgIDxwPiR7ZC5zdXBwX3RleHR9PC9wPlxuICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICBjb25zdCBzZXR1cE9uQ2xpY2sgPSAoKSA9PiB7XG4gICAgUHJvbWlzZS5hbGwoW1xuICAgICAgZDMueG1sKHByb3BzLm1hcFswXSksXG4gICAgICBkMy54bWwocHJvcHMubWFwWzFdKVxuICAgIF0pLnRoZW4oKFtiZ01hcCwgaWNvbk9OTWFwXSkgPT4ge1xuICAgICAgZDMuc2VsZWN0KCcjYmctbWFwJykubm9kZSgpXG4gICAgICAgIC5hcHBlbmQoYmdNYXAuZG9jdW1lbnRFbGVtZW50KTtcbiAgICAgIGQzLnNlbGVjdCgnI29uLWljb25zJykubm9kZSgpXG4gICAgICAgIC5hcHBlbmQoaWNvbk9OTWFwLmRvY3VtZW50RWxlbWVudCk7XG4gICAgICBjb25zdCBPbkljb25zU1ZHID0gZDMuc2VsZWN0KCcjb24taWNvbnMnKS5zZWxlY3QoJ3N2ZycpO1xuICAgICAgT25JY29uc1NWRy5jYWxsKHRpcCk7XG4gICAgICBkMy5zZWxlY3QoJy5nYW1lU2NyZWVuJykubm9kZSgpLmFwcGVuZENoaWxkKFxuICAgICAgICBkMy5zZWxlY3QoJy5kMy10aXAnKS5ub2RlKClcbiAgICAgICk7XG4gICAgICBjb25zdCBnQnV0dG9ucyA9IE9uSWNvbnNTVkcuc2VsZWN0KCcjSWNvbmUtT24nKS5zZWxlY3RBbGwoJ2cnKTtcbiAgICAgIGNvbnN0IHRpdGxlcyA9IFN0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4X2luc2VjYWJsZXMnXSkuc3BsaXQoJzonKTtcbiAgICAgIGNvbnN0IHN1cHBfdGV4dHMgPSBTdHJpbmcocHJvcHMubWVzc2FnZSkuc3BsaXQoJzsnKTtcbiAgICAgIGQzLnNlbGVjdChcIi5nYW1lQm94XCIpLm9uKCdjbGljaycsICgpID0+IHt0aXAuaGlkZSgpfSk7XG4gICAgICBnQnV0dG9ucy5ub2RlcygpLnJldmVyc2UoKS5tYXAoKG5vZGUsY291bnQpID0+IHtcbiAgICAgICAgY29uc3QgY3VyVGlwRGF0YSA9IHtcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZXNbY291bnRdLFxuICAgICAgICAgICAgc3VwcF90ZXh0OiBzdXBwX3RleHRzW2NvdW50XVxuICAgICAgICAgIH1cbiAgICAgICAgZDMuc2VsZWN0KG5vZGUpXG4gICAgICAgIC5vbignY2xpY2snLCAoZCxpLG5vZGVzKSA9PiB7XG4gICAgICAgICAgZC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICB0aXAuc2hvdyhjdXJUaXBEYXRhLCBub2RlKTtcbiAgICAgICAgICB0b2dnbGVJY29uKGQudGFyZ2V0LnBhcmVudEVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAvL05FVyAhISFcbiAgICAgICAgICB0aXAuc3R5bGUoXCJwb2ludGVyLWV2ZW50c1wiLCBcInN0cm9rZVwiKVxuICAgICAgICB9KVxuICAgICAgICAub24oJ21vdXNlb3ZlcicsIChkLGksbm9kZXMpID0+IHtcbiAgICAgICAgICB0cmlnZ2VyUG9pbnRlcihkLnRhcmdldC5wYXJlbnRFbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICB0b2dnbGVJY29uKGQudGFyZ2V0LnBhcmVudEVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdtb3VzZW91dCcsIChkLGksbm9kZXMpID0+IHtcbiAgICAgICAgICB0cmlnZ2VyUG9pbnRlcihkLnRhcmdldC5wYXJlbnRFbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgdG9nZ2xlSWNvbihkLnRhcmdldC5wYXJlbnRFbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICBpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDU3Nil7XG4gICAgICAgICAgICB0aXAuaGlkZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pO1xuXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlSWNvbiA9IChpY29uT2JqLCBzdGF0dXMpID0+IHtcbiAgICBpZihzdGF0dXMgPT09IGZhbHNlKXtcbiAgICAgIGQzLnNlbGVjdChpY29uT2JqKS5zdHlsZSgnb3BhY2l0eScsIDApO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgZDMuc2VsZWN0KGljb25PYmopLnN0eWxlKCdvcGFjaXR5JywgMSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBuZXh0UHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBsZXQgdHJpZ2dlck5leHQgPSBwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddO1xuXG4gICAgZDMuc2VsZWN0KFwiLmdhbWVTY3JlZW5cIikuc2VsZWN0KFwiLmQzLXRpcFwiKS5yZW1vdmUoKTtcbiAgICBwcm9wcy5jaGFuZ2VQcm9tcHQodHJpZ2dlck5leHQpO1xuXG4gIH0pO1xuXG4gIHJldHVybiAoXG4gIDxkaXYgY2xhc3NOYW1lPVwicHJpbnRwcm9tcHQgbWFwbmF2aWdhdG9yXCI+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJwb3BVcC1iZ1wiPlxuICAgICAgeyBzZWxlY3Rpb24gP1xuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwb3BVcC1ib3hcIj5cbiAgICAgICAgPGg0PntwYXJzZShzZWxlY3Rpb24udGl0bGUpfTwvaDQ+XG4gICAgICAgIDxwPntwYXJzZShzZWxlY3Rpb24uc3VwcF90ZXh0KX08L3A+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uXCIgb25DbGljaz17KCkgPT4gc2V0U2VsZWN0aW9uKG51bGwpfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgIDxwPkZlcm1lcjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDpcbiAgICAgIDxkaXY+PC9kaXY+XG4gICAgICB9XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJtYXBIb2xkZXJcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3VwZXJwb3NlZE1hcFwiPlxuICAgICAgICA8ZGl2IGlkPVwiYmctbWFwXCIgY2xhc3NOYW1lPVwibWFwIG5vQ2xpY2tcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBpZD1cIm9uLWljb25zXCIgY2xhc3NOYW1lPVwibWFwXCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBwcmV2XCIgb25DbGljaz17cHJldmlvdXNQcm9tcHR9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgIDxwPlByZXZpb3VzPC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gbmV4dFwiIG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgIDxwPlN1aXZhbnQ8L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIEJpbGFuKHByb3BzKXtcblxuICBjb25zdCBkYW1UV2ggPSA5O1xuICBjb25zdCBuZWVkc0luY3JlYXNlVFdoID0gMTA7XG5cbiAgLy8gVGhpcyBjb21wb25lbnQgaXMgcXVpdGUgaGFyZGNvZGVkIGFzIGl0J3MgdmVyeSBzcGVjaWZpYyB0byB0aGlzIEh5ZHJvLVF1ZWJlYyBnYW1lLlxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJ2dvdCBiaWxhbiA6ICcsIHByb3BzLmN1clByb21wdCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBuZXh0UHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBsZXQgdHJpZ2dlck5leHQgPSBwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddO1xuXG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KHRyaWdnZXJOZXh0KTtcblxuICB9KTtcblxuICBjb25zdCBwcm9jZXNzQmlsYW4xID0gKCkgPT4ge1xuICAgIGxldCB0ZXh0Q29udGVudEFycmF5ID0gcHJvcHMuY3VyUHJvbXB0W1wiVGV4dGVcIl0uc3BsaXQoJzsnKTtcbiAgICBsZXQgdGV4dFN1cHBBcnJheSA9IHByb3BzLmN1clByb21wdFtcIlRleHRlX1N1cHBcIl0uc3BsaXQoJzsnKTtcbiAgICBsZXQgcHJvY2Vzc2VkQ29udGVudCA9IFtdO1xuICAgIC8vIGdlbmVyaWMgdGV4dFxuICAgIGNvbnN0IGRhbUVuZXJneSA9IHByb3BzLm1lbW9yeU9iai5idWlsdERhbSA/IGRhbVRXaCA6IDA7XG4gICAgY29uc3QgYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUgPSBwYXJzZUludChwcm9wcy5wZXJmb3JtYW5jZVswXSkgLSBkYW1FbmVyZ3k7XG4gICAgY29uc3QgY3VyRG9sbGFycyA9IHBhcnNlSW50KHByb3BzLmdhdWdlcy5wcm9wcy5kb2xsYXJzKTtcblxuICAgIGxldCBnZW5lcmljVGV4dCA9IHRleHRDb250ZW50QXJyYXlbMF0ucmVwbGFjZSgnKm5ld1Byb2QqJywgYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUgKyBcIiZuYnNwO1RXaFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJyphdWdtZW50ZWRpbWludWUqJywgYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUgPCAwID8gXCJkaW1pbnXDqVwiOlwiYXVnbWVudMOpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgnKnN1ZmZpc2FudGVpbnN1ZmZpc2FudGUqJywgYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUgPCAxMCA/IFwiaW5zdWZmaXNhbnRlXCI6XCJzdWZmaXNhbnRlXCIpO1xuXG4gICAgcHJvY2Vzc2VkQ29udGVudC5wdXNoKGdlbmVyaWNUZXh0KTtcbiAgICBpZihwcm9wcy5tZW1vcnlPYmouYnVpbHREYW0pe1xuICAgICAgbGV0IGJhcnJhZ2VUZXh0ID0gdGV4dFN1cHBBcnJheVswXS5zcGxpdChcIjpcIilbMV0ucmVwbGFjZShcIipkYW1UV2gqXCIsIGRhbVRXaCk7XG4gICAgICBwcm9jZXNzZWRDb250ZW50LnB1c2goYmFycmFnZVRleHQpO1xuICAgIH1cbiAgICBpZihjdXJEb2xsYXJzIDwgMTUpe1xuICAgICAgbGV0IGxvd0Nhc2hUZXh0ID0gdGV4dFN1cHBBcnJheVsxXS5zcGxpdChcIjpcIilbMV07XG4gICAgICBwcm9jZXNzZWRDb250ZW50LnB1c2gobG93Q2FzaFRleHQpO1xuICAgIH1cbiAgICBpZihwYXJzZUludChwcm9wcy5wZXJmb3JtYW5jZVsxXSkgPCAwKXtcbiAgICAgIGxldCBsb3dFbnZUZXh0ID0gdGV4dFN1cHBBcnJheVsyXS5zcGxpdChcIjpcIilbMV07XG4gICAgICBwcm9jZXNzZWRDb250ZW50LnB1c2gobG93RW52VGV4dCk7XG4gICAgfVxuICAgIGlmKHBhcnNlSW50KHByb3BzLnBlcmZvcm1hbmNlWzJdKSA8IDApe1xuICAgICAgbGV0IGxvd1BvcFRleHQgPSB0ZXh0U3VwcEFycmF5WzNdLnNwbGl0KFwiOlwiKVsxXTtcbiAgICAgIHByb2Nlc3NlZENvbnRlbnQucHVzaChsb3dQb3BUZXh0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvY2Vzc2VkQ29udGVudDtcbiAgfTtcblxuICBjb25zdCBwcm9jZXNzQmlsYW4yID0gKCkgPT4ge1xuICAgIC8vIGNvbnNvbGUubG9nKCdhY2NlcHRlZCBjaHVyY2hpbGwgZmFsbHMgZGVhbD8nLCBwcm9wcy5tZW1vcnlPYmouYWNjZXB0ZWRDaHVyY2hpbGxGYWxsc0RlYWwpO1xuICAgIGxldCBwcm9jZXNzZWRDb250ZW50ID0gW107XG4gICAgbGV0IHRleHRDb250ZW50QXJyYXkgPSBwcm9wcy5jdXJQcm9tcHRbXCJUZXh0ZVwiXS5zcGxpdCgnOycpO1xuICAgIGxldCB0ZXh0U3VwcEFycmF5ID0gcHJvcHMuZmluYWxCaWxhbkRhdGE7XG5cbiAgICBjb25zdCBmaXJzdERhbUVuZXJneSA9IHByb3BzLm1lbW9yeU9iai5idWlsdERhbSA/IGRhbVRXaCA6IDA7XG4gICAgY29uc3Qgc2Vjb25kRGFtRW5lcmd5ID0gcHJvcHMubWVtb3J5T2JqLmJ1aWx0U2Vjb25kRGFtID8gZGFtVFdoIDogMDtcbiAgICBjb25zdCBhZGp1c3RlZFByb2R1Y3Rpb25WYWx1ZSA9IHBhcnNlSW50KHByb3BzLnBlcmZvcm1hbmNlWzBdKSAtIHNlY29uZERhbUVuZXJneSAtIGZpcnN0RGFtRW5lcmd5O1xuICAgIGNvbnN0IGN1ckRvbGxhcnMgPSBwYXJzZUludChwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycyk7XG4gICAgY29uc3QgZW52aXJvbm1lbnRWYWx1ZSA9IHBhcnNlSW50KHByb3BzLnBlcmZvcm1hbmNlWzFdKTtcbiAgICBjb25zdCBwb3B1bGFyaXRlVmFsdWUgPSBwYXJzZUludChwcm9wcy5wZXJmb3JtYW5jZVsyXSk7XG5cbiAgICBsZXQgVFdoRW52VGV4dDtcbiAgICBpZihhZGp1c3RlZFByb2R1Y3Rpb25WYWx1ZSA+PSAyNSAmJlxuICAgICAgICBlbnZpcm9ubWVudFZhbHVlID4gMCAmJlxuICAgICAgICBwcm9wcy5tZW1vcnlPYmouYWNjZXB0ZWRDaHVyY2hpbGxGYWxsc0RlYWwpe1xuICAgICAgICAvLyBBY2NlcHRlZCBDaHVyY2hpbGwgRmFsbHMgKyBzdWNjZXNzIGluIGVudmlyb25tZW50ICYgVFdoXG4gICAgICBUV2hFbnZUZXh0ID0gdGV4dFN1cHBBcnJheVswXS5wcmludDtcbiAgICB9XG4gICAgZWxzZSBpZihhZGp1c3RlZFByb2R1Y3Rpb25WYWx1ZSA+PSAyNSAmJlxuICAgICAgICAgICAgZW52aXJvbm1lbnRWYWx1ZSA+IDAgJiZcbiAgICAgICAgICAgICFwcm9wcy5tZW1vcnlPYmouYWNjZXB0ZWRDaHVyY2hpbGxGYWxsc0RlYWwpe1xuICAgICAgICAvLyBSZWplY3RlZCBDaHVyY2hpbGwgRmFsbHMgKyBzdWNjZXNzIGluIGVudmlyb25tZW50ICYgVFdoXG4gICAgICBUV2hFbnZUZXh0ID0gdGV4dFN1cHBBcnJheVsxXS5wcmludDtcbiAgICB9XG4gICAgZWxzZSBpZihhZGp1c3RlZFByb2R1Y3Rpb25WYWx1ZSA8IDI1ICYmIGVudmlyb25tZW50VmFsdWUgPiAwKXtcbiAgICAgIC8vIHN1Y2Nlc3MgaW4gZW52aXJvbm1lbnQgJiBidXQgZmFpbGVkIHRvIHJlYWNoIFRXaCBuZWVkcy4gQ2h1cmNoaWxsIEZhbGxzIGlzIG5vdCBpbXBvcnRhbnRcbiAgICAgIFRXaEVudlRleHQgPSB0ZXh0U3VwcEFycmF5WzJdLnByaW50O1xuICAgIH1cbiAgICBlbHNlIGlmKGFkanVzdGVkUHJvZHVjdGlvblZhbHVlID49IDI1ICYmXG4gICAgICAgICAgICBlbnZpcm9ubWVudFZhbHVlIDw9IDAgJiZcbiAgICAgICAgICAgIHByb3BzLm1lbW9yeU9iai5hY2NlcHRlZENodXJjaGlsbEZhbGxzRGVhbCl7XG4gICAgICAvLyBBY2NlcHRlZCBDaHVyY2hpbGwgRmFsbHMgKyBzdWNjZXNzIGluIFRXaCBidXQgZmFpbHVyZSBpbiBlbnZpcm9ubWVudFxuICAgICAgVFdoRW52VGV4dCA9IHRleHRTdXBwQXJyYXlbM10ucHJpbnQ7XG4gICAgfVxuICAgIGVsc2UgaWYoYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUgPj0gMjUgJiZcbiAgICAgICAgICAgIGVudmlyb25tZW50VmFsdWUgPD0gMCAmJlxuICAgICAgICAgICAgIXByb3BzLm1lbW9yeU9iai5hY2NlcHRlZENodXJjaGlsbEZhbGxzRGVhbCl7XG4gICAgICAvLyBSZWplY3RlZCBDaHVyY2hpbGwgRmFsbHMgKyBzdWNjZXNzIGluIFRXaCBidXQgZmFpbHVyZSBpbiBlbnZpcm9ubWVudFxuICAgICAgVFdoRW52VGV4dCA9IHRleHRTdXBwQXJyYXlbNF0ucHJpbnQ7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAvLyBmYWlsdXJlIGluIGVudmlyb25tZW50ICYgVFdoLiBDaHVyY2hpbGwgRmFsbHMgaXMgbm90IGltcG9ydGFudFxuICAgICAgVFdoRW52VGV4dCA9IHRleHRTdXBwQXJyYXlbNV0ucHJpbnQ7XG4gICAgfVxuICAgIFRXaEVudlRleHQgPSBUV2hFbnZUZXh0LnJlcGxhY2UoXCIqYXVnbWVudGVkaW1pbnVlKlwiLCBhZGp1c3RlZFByb2R1Y3Rpb25WYWx1ZSA8IDAgPyBcImRpbWludcOpXCI6XCJhdWdtZW50w6lcIilcbiAgICAgICAgICAgICAgLnJlcGxhY2UoXCIqbmV3UHJvZCpcIiwgYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUrIFwiJm5ic3A7VFdoXCIpO1xuICAgIHByb2Nlc3NlZENvbnRlbnQucHVzaChUV2hFbnZUZXh0KTtcblxuICAgIGlmKHByb3BzLm1lbW9yeU9iai5idWlsdERhbSB8fCBwcm9wcy5tZW1vcnlPYmouYnVpbHRTZWNvbmREYW0pe1xuICAgICAgbGV0IGJhcnJhZ2VUZXh0O1xuICAgICAgaWYocHJvcHMubWVtb3J5T2JqLmJ1aWx0RGFtICYmIHByb3BzLm1lbW9yeU9iai5idWlsdFNlY29uZERhbSl7XG4gICAgICAgIGJhcnJhZ2VUZXh0ID0gdGV4dFN1cHBBcnJheVs5XS5wcmludDtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYocHJvcHMubWVtb3J5T2JqLmJ1aWx0RGFtKXtcbiAgICAgICAgLy8gYnVpbHQgRGFtIGluIGZpcnN0IHRlcm1cbiAgICAgICAgYmFycmFnZVRleHQgPSB0ZXh0U3VwcEFycmF5WzddLnByaW50O1xuICAgICAgfVxuICAgICAgZWxzZSBpZihwcm9wcy5tZW1vcnlPYmouYnVpbHRTZWNvbmREYW0pe1xuICAgICAgICAvLyBidWlsdCBEYW0gaW4gc2Vjb25kIHRlcm1cbiAgICAgICAgYmFycmFnZVRleHQgPSB0ZXh0U3VwcEFycmF5WzhdLnByaW50O1xuICAgICAgfVxuICAgICAgLy8gTW9kaWZpeSBpZiBuZWVkZWQ6IGJhcnJhZ2VUZXh0ID0gYmFycmFnZVRleHQucmVwbGFjZShcIlwiKVxuICAgICAgcHJvY2Vzc2VkQ29udGVudC5wdXNoKGJhcnJhZ2VUZXh0KTtcbiAgICB9XG5cbiAgICBsZXQgY2FzaFRleHQ7XG4gICAgaWYoY3VyRG9sbGFycyA+PSA1KXtcbiAgICAgIGNhc2hUZXh0ID0gdGV4dFN1cHBBcnJheVsxMV0ucHJpbnQ7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBjYXNoVGV4dCA9IHRleHRTdXBwQXJyYXlbMTJdLnByaW50O1xuICAgIH1cbiAgICBwcm9jZXNzZWRDb250ZW50LnB1c2goY2FzaFRleHQpO1xuXG4gICAgbGV0IHBvcHVUZXh0O1xuICAgIGlmKHBvcHVsYXJpdGVWYWx1ZSA+PSA0KXtcbiAgICAgIHBvcHVUZXh0ID0gdGV4dFN1cHBBcnJheVsxNF0ucHJpbnQ7XG4gICAgfVxuICAgIGVsc2UgaWYocG9wdWxhcml0ZVZhbHVlID49IC0yICYmIHBvcHVsYXJpdGVWYWx1ZSA8IDQpe1xuICAgICAgcG9wdVRleHQgPSB0ZXh0U3VwcEFycmF5WzE1XS5wcmludDtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHBvcHVUZXh0ID0gdGV4dFN1cHBBcnJheVsxNl0ucHJpbnQ7XG4gICAgfVxuICAgIHByb2Nlc3NlZENvbnRlbnQucHVzaChwb3B1VGV4dClcblxuICAgIHJldHVybiBwcm9jZXNzZWRDb250ZW50O1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImJpbGFuQ29udGVudFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1cGRhdGFibGVUZXh0XCI+XG4gICAgICAgIHtcbiAgICAgICAgICBwcm9wcy5jdXJQcm9tcHRbXCJJRFwiXSA9PT0gXCJCMVwiID9cbiAgICAgICAgICAgIHByb2Nlc3NCaWxhbjEoKS5tYXAoKGVsZW0sIGNvdW50KSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxwIGtleT17Y291bnR9PlxuICAgICAgICAgICAgICAgIHtwYXJzZShlbGVtKX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgOlxuICAgICAgICAgICAgcHJvY2Vzc0JpbGFuMigpLm1hcCgoZWxlbSwgY291bnQpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPHAga2V5PXtjb3VudH0+XG4gICAgICAgICAgICAgICAge3BhcnNlKGVsZW0pfVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBuZXh0XCIgb25DbGljaz17bmV4dFByb21wdH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgIDxwPlBvdXJzdWl2cmU8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcblxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEVuZEdhbWUocHJvcHMpe1xyXG4gIC8vY29uc29sZS5sb2cocHJvcHMpXHJcblxyXG4gIGNvbnN0IGdhbWVSZXNldCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XHJcbiAgICBwcm9wcy5nYW1lUmVzZXQoKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvbXB0Qm94XCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdXJ0aXRyZVwiPlxyXG4gICAgICAgICAgPGg0PkZpbiBkdSBqZXU8L2g0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicXVlc3Rpb25cIj5cclxuICAgICAgICAgIDxwPkxlIENBIGQnSHlkcm8tUXXDqWJlYyB2b3RlIMOgIGwndW5hbmltaXTDqSBwb3VyIHZvdXMgZMOpbWV0dHJlIGRlIHZvcyBmb25jdGlvbnMuICAgIFxyXG4gICAgICAgICAgICB7YCR7cHJvcHMucmFpc29ufWB9XHJcbiAgICAgICAgICAgIDxicj48L2JyPjxicj48L2JyPlxyXG4gICAgICAgICAgICBUZW50ZXogdm90cmUgY2hhbmNlIGRlIG5vdXZlYXUuXHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvblNlY3Rpb25cIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBuZXh0XCIgb25DbGljaz17Z2FtZVJlc2V0fT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxyXG4gICAgICAgICAgICA8cD5SZWNvbW1lbmNlcjwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjYWxjdWxhdGVQZXJmb3JtYW5jZSB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgcGFyc2UgZnJvbSBcImh0bWwtcmVhY3QtcGFyc2VyXCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIENhdGFzdHJvcGhlKHByb3BzKXtcblxuICBjb25zdCBwcmV2aW91c1Byb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgaWYocHJvcHMuY3VySW5kZXggPiAwKXtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoY29zdCwgcGVyZm9ybWFuY2UpID0+IHtcbiAgICBsZXQgdHJpZ2dlck5leHQgPSBwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddO1xuXG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KHRyaWdnZXJOZXh0KTtcblxuICAgIHByb3BzLnVwZGF0ZURvbGxhcnMocGFyc2VJbnQoY29zdCkpO1xuICAgIHByb3BzLnVwZGF0ZVBlcmZvcm1hbmNlKHBlcmZvcm1hbmNlKTtcbiAgfSk7XG5cbiAgY29uc3QgcGFyc2VDaG9pY2VWYWx1ZXMgPSAoY2hvaWNlX3ZhbHVlKSA9PiB7XG4gICAgY29uc3Qgc3BsaXR0ZWRDaG9pY2VWYWx1ZXMgPSBTdHJpbmcoY2hvaWNlX3ZhbHVlKS5zcGxpdCgnXycpO1xuICAgIHJldHVybiB7XG4gICAgICBjb3N0OiBzcGxpdHRlZENob2ljZVZhbHVlc1swXSxcbiAgICAgIHBlcmZvcm1hbmNlOiBzcGxpdHRlZENob2ljZVZhbHVlcy5zcGxpY2UoMSlcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInByaW50cHJvbXB0XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1lc3NhZ2VcIj5cbiAgICAgICAgPHA+XG4gICAgICAgICAge3BhcnNlKHByb3BzLmNob2ljZXNbcHJvcHMud2hpY2hFdmVudEhhcHBlbnNdKX1cbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBwcmV2XCIgb25DbGljaz17cHJldmlvdXNQcm9tcHR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIG5leHRcIiBvbkNsaWNrPXsoKSA9PiBuZXh0UHJvbXB0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlQ2hvaWNlVmFsdWVzKHByb3BzLmNob2ljZXNfdmFsdWVzW3Byb3BzLndoaWNoRXZlbnRIYXBwZW5zXSkuY29zdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUNob2ljZVZhbHVlcyhwcm9wcy5jaG9pY2VzX3ZhbHVlc1twcm9wcy53aGljaEV2ZW50SGFwcGVuc10pLnBlcmZvcm1hbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgIDxwPlBvdXJzdWl2cmU8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IENob2ljZSB9IGZyb20gXCIuL3Byb21wdGZpbGwvQ2hvaWNlXCI7XG5pbXBvcnQgeyBNdWx0aVNlbGVjdGlvbiB9IGZyb20gXCIuL3Byb21wdGZpbGwvTXVsdGlTZWxlY3Rpb25cIjtcbmltcG9ydCB7IFByaW50UHJvbXB0IH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9QcmludFByb21wdFwiO1xuaW1wb3J0IHsgUmVwYXJ0aXRpb24gfSBmcm9tIFwiLi9wcm9tcHRmaWxsL1JlcGFydGl0aW9uXCI7XG5pbXBvcnQgeyBNYXBOYXZpZ2F0b3IgfSBmcm9tIFwiLi9wcm9tcHRmaWxsL01hcE5hdmlnYXRvclwiO1xuaW1wb3J0IHsgQmlsYW4gfSBmcm9tIFwiLi9wcm9tcHRmaWxsL0JpbGFuXCI7XG5pbXBvcnQgeyBFbmRHYW1lIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9FbmRHYW1lXCI7XG5pbXBvcnQgeyBDYXRhc3Ryb3BoZSB9IGZyb20gXCIuL3Byb21wdGZpbGwvQ2F0YXN0cm9waGVcIjtcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIFByb21wdEJveChwcm9wcyl7XG4gIC8vY29uc29sZS5sb2cocHJvcHMpXG5cbiAgY29uc3QgWyBtZW1vcnlPYmosIHNldE1lbW9yeU9ial0gPSB1c2VTdGF0ZSh7XG4gICAgaW52ZXN0ZWRNb2Rlcm5pemF0aW9uOiBmYWxzZSxcbiAgICBidWlsdERhbTogZmFsc2UsXG4gICAgYnVpbHRTZWNvbmREYW06ZmFsc2UsXG4gICAgYWNjZXB0ZWRDaHVyY2hpbGxGYWxsc0RlYWw6IGZhbHNlLFxuICAgIG51Y2xlYXJCdWlsdE51bWJlcjogMFxuICB9KVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYobWVtb3J5T2JqLm51Y2xlYXJCdWlsdE51bWJlciA+IDEpe1xuICAgICAgcHJvcHMuZ2FtZUVuZCgpO1xuICAgIH1cbiAgfSwgW21lbW9yeU9ial0pO1xuXG5cbiAgY29uc3QgZ2FtZVJlc2V0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBzZXRNZW1vcnlPYmooe1xuICAgICAgaW52ZXN0ZWRNb2Rlcm5pemF0aW9uOiBmYWxzZSxcbiAgICAgIGJ1aWx0RGFtOiBmYWxzZSxcbiAgICAgIGJ1aWx0U2Vjb25kRGFtOiBmYWxzZSxcbiAgICAgIGFjY2VwdGVkQ2h1cmNoaWxsRmFsbHNEZWFsOiBmYWxzZSxcbiAgICAgIG51Y2xlYXJCdWlsdE51bWJlcjogMFxuICAgIH0pO1xuICAgIHByb3BzLmdhbWVSZXNldCgpO1xuICB9KTtcblxuICBjb25zdCBjaGFuZ2VQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKG5ld1ZhbHVlKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJ0NoYW5naW5nIHByb21wdCBmb3IgOiAnLCBuZXdWYWx1ZSk7XG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KG5ld1ZhbHVlKTtcbiAgfSk7XG5cbiAgY29uc3QgdXBkYXRlRG9sbGFycyA9IHVzZUNhbGxiYWNrKCBhc3luYyAoZGlmZlZhbHVlKSA9PiB7XG4gICAgaWYoTnVtYmVyLmlzSW50ZWdlcihkaWZmVmFsdWUpKXtcbiAgICAgIHByb3BzLnVwZGF0ZURvbGxhcnMoZGlmZlZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHVwZGF0ZVBlcmZvcm1hbmNlID0gdXNlQ2FsbGJhY2soIGFzeW5jIChkaWZmQXJyYXkpID0+IHtcbiAgICBwcm9wcy51cGRhdGVQZXJmb3JtYW5jZShkaWZmQXJyYXkpO1xuICB9KTtcblxuICBjb25zdCB1cGRhdGVNZW1vcnlPYmogPSB1c2VDYWxsYmFjayggYXN5bmMgKGZpZWxkLCBuZXdWYWx1ZSkgPT4ge1xuICAgIGxldCBuZXdNZW1vcnlPYmogPSB7Li4ubWVtb3J5T2JqfTtcbiAgICBuZXdNZW1vcnlPYmpbZmllbGRdID0gbmV3VmFsdWU7XG4gICAgc2V0TWVtb3J5T2JqKG5ld01lbW9yeU9iaik7XG4gIH0pO1xuXG4gIGNvbnN0IHByb2Nlc3NSZWFzb25FbmRHYW1lID0gKCkgPT4ge1xuICAgIGxldCByZWFzb25zID0gW107XG4gICAgaWYobWVtb3J5T2JqLm51Y2xlYXJCdWlsdE51bWJlciA+IDEpe1xuICAgICAgcmVhc29ucy5wdXNoKFwiIEVuIGNob2lzaXNzYW50IGRlIHLDqWludmVzdGlyIGRhbnMgbCfDqW5lcmdpZSBudWNsw6lhaXJlLCB2b3RyZSBjcsOpZGliaWxpdMOpIHBvdXIgcGF2ZXIgbGEgdm9pZSB2ZXJzIGxhIGNhcmJvbmV1dHJhbGl0w6kgZGUgbGEgcHJvdmluY2UgYSDDqXTDqSBncmFuZGVtZW50IGFmZmVjdMOpZS5cIik7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBpZihwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycyA8IDApe1xuICAgICAgICByZWFzb25zLnB1c2goXCIgVm91cyBhdmV6IHZpZMOpIGxlcyBjb2ZmcmVzIGRlIGxhIHNvY2nDqXTDqSBkJ8OJdGF0LlwiKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYocHJvcHMucGVyZm9ybWFuY2VbMV0gPCAtOSl7XG4gICAgICAgIHJlYXNvbnMucHVzaChcIiBWb3RyZSB2aXNpb24gdmEgw6AgbCdlbmNvbnRyZSBkZSBsJ29iamVjdGlmIGRlIGNhcmJvbmV1dHJhbGl0w6kgZHUgUXXDqWJlYy5cIik7XG4gICAgICB9XG4gICAgICBlbHNlIGlmKHByb3BzLnBlcmZvcm1hbmNlWzJdIDwgLTkpe1xuICAgICAgICByZWFzb25zLnB1c2goXCIgTGEgcG9wdWxhdGlvbiBjb250ZXN0ZSB2b3RyZSB2aXNpb24gcG91ciBsZSBmdXR1ciDDqW5lcmfDqXRpcXVlIGR1IFF1w6liZWMuXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZWFzb25zO1xuICB9XG5cbiAgY29uc3QgcmVuZGVyU3dpdGNoID0gKHBhcmFtKSA9PiB7XG4gICAgc3dpdGNoKHBhcmFtKXtcbiAgICAgIGNhc2UgJ1JlcGFydGl0aW9uJyA6XG4gICAgICAgIHJldHVybiA8UmVwYXJ0aXRpb24gY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXhfaW5zZWNhYmxlcyddKS5zcGxpdCgnOicpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXNfdmFsdWVzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDb3V0X0VsZWNfRW52X1BvcHUnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRG9sbGFycz17dXBkYXRlRG9sbGFyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQZXJmb3JtYW5jZT17dXBkYXRlUGVyZm9ybWFuY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb3J5T2JqPXttZW1vcnlPYmp9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlTWVtb3J5T2JqPXt1cGRhdGVNZW1vcnlPYmp9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F1Z2VzPXtwcm9wcy5nYXVnZXN9Lz47XG4gICAgICBjYXNlICdDYXJ0ZSc6XG4gICAgICAgIHJldHVybiA8TWFwTmF2aWdhdG9yIGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ1RleHRlX1N1cHAnXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5jdXJJbmRleCA9PT0gXCJRMS0xXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXCJhc3NldHMvaW1nL0NhcnRlLUh5ZHJvLnN2Z1wiLFwiYXNzZXRzL2ltZy9DYXJ0ZS1IeWRyby1pY29uZS1vbi5zdmdcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXCJhc3NldHMvaW1nL0NhcnRlLUVvbGllbi5zdmdcIixcImFzc2V0cy9pbWcvQ2FydGUtRW9saWVuLWljb25lLW9uLnN2Z1wiXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0vPjtcbiAgICAgIGNhc2UgJ3RleHRlQm91dG9uU2ltcGxlJzpcbiAgICAgICAgcmV0dXJuIDxQcmludFByb21wdCBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydUZXh0ZV9TdXBwJ10pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXNfdmFsdWVzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDb3V0X0VsZWNfRW52X1BvcHUnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F1Z2VzPXtwcm9wcy5nYXVnZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVJlc2V0PXtnYW1lUmVzZXR9Lz47XG4gICAgICBjYXNlICdDaG9peFJlcG9uc2UnOlxuICAgICAgICByZXR1cm4gPENob2ljZSBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peF9pbnNlY2FibGVzJ10pLnNwbGl0KCc6Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgY2hvaWNlc192YWx1ZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0NvdXRfRWxlY19FbnZfUG9wdSddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgIGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVNZW1vcnlPYmo9e3VwZGF0ZU1lbW9yeU9ian1cbiAgICAgICAgICAgICAgICAgICAgICBnYXVnZXM9e3Byb3BzLmdhdWdlc30vPjtcbiAgICAgIGNhc2UgJ0NhdGFzdHJvcGhlJzpcbiAgICAgICAgcmV0dXJuIDxDYXRhc3Ryb3BoZSBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peF9pbnNlY2FibGVzJ10pLnNwbGl0KCc6Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgY2hvaWNlc192YWx1ZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0NvdXRfRWxlY19FbnZfUG9wdSddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgIHdoaWNoRXZlbnRIYXBwZW5zPXttZW1vcnlPYmouaW52ZXN0ZWRNb2Rlcm5pemF0aW9uID8gMSA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZURvbGxhcnM9e3VwZGF0ZURvbGxhcnN9XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGVyZm9ybWFuY2U9e3VwZGF0ZVBlcmZvcm1hbmNlfS8+O1xuICAgICAgY2FzZSAnTXVsdGlTZWxlY3Rpb24nOlxuICAgICAgICByZXR1cm4gPE11bHRpU2VsZWN0aW9uIGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXhfaW5zZWNhYmxlcyddKS5zcGxpdCgnOicpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlc192YWx1ZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0NvdXRfRWxlY19FbnZfUG9wdSddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGVyZm9ybWFuY2U9e3VwZGF0ZVBlcmZvcm1hbmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F1Z2VzPXtwcm9wcy5nYXVnZXN9Lz47XG4gICAgICBjYXNlICdCaWxhbic6XG4gICAgICAgIHJldHVybiA8QmlsYW4gY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZURvbGxhcnM9e3VwZGF0ZURvbGxhcnN9XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGVyZm9ybWFuY2U9e3VwZGF0ZVBlcmZvcm1hbmNlfVxuICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlPXtwcm9wcy5wZXJmb3JtYW5jZX1cbiAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlPYmo9e21lbW9yeU9ian1cbiAgICAgICAgICAgICAgICAgICAgICBnYXVnZXM9e3Byb3BzLmdhdWdlc31cbiAgICAgICAgICAgICAgICAgICAgICBmaW5hbEJpbGFuRGF0YT17cHJvcHMuZmluYWxCaWxhbkRhdGF9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDxDaG9pY2UgY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9IGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4X2luc2VjYWJsZXMnXSkuc3BsaXQoJzonKX0gY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9IGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH0vPjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgICAgcHJvcHMuZW5kR2FtZSA9PT0gdHJ1ZSA/XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2FtZUJveFwiPlxuICAgICAgICAgIDxFbmRHYW1lXG4gICAgICAgICAgICByYWlzb249e3Byb2Nlc3NSZWFzb25FbmRHYW1lKCl9XG4gICAgICAgICAgICBnYW1lUmVzZXQ9e2dhbWVSZXNldH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDpcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYW1lQm94XCI+XG5cbiAgICAgICAgICB7cHJvcHMuY3VyUHJvbXB0WydUeXBlJ10gPT09IFwiQmlsYW5cIiA/XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb21wdEJveCBiaWxhblwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWFzc2l2ZVRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICA8aDI+e3BhcnNlKHByb3BzLmN1clByb21wdFsnU3VqZXQnXSl9PC9oMj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VwYXJhdG9yXCI+PC9kaXY+XG4gICAgICAgICAgICAgIHtyZW5kZXJTd2l0Y2gocHJvcHMuY3VyUHJvbXB0WydUeXBlJ10pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgOlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9tcHRCb3hcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN1cnRpdHJlXCI+XG4gICAgICAgICAgICAgICAgICA8aDQ+e3BhcnNlKHByb3BzLmN1clByb21wdFsnU3VqZXQnXSl9PC9oND5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInF1ZXN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICA8cD57cGFyc2UocHJvcHMuY3VyUHJvbXB0WydUZXh0ZSddKX08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7cmVuZGVyU3dpdGNoKHByb3BzLmN1clByb21wdFsnVHlwZSddKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG4gIClcblxuXG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgR2F1Z2VzIH0gZnJvbSBcIi4vZ2F1Z2VzL0dhdWdlc1wiO1xuaW1wb3J0IHsgSW50cm9Cb3ggfSBmcm9tIFwiLi9pbnRyb0JveFwiO1xuaW1wb3J0IHsgUHJvbXB0Qm94IH0gZnJvbSBcIi4vUHJvbXB0Qm94XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBNYWluRnJhbWUocHJvcHMpe1xuXG4gIGNvbnN0IFtnYW1lU3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGUoJ0lETEUnKTtcbiAgY29uc3QgW2dhbWVJbmRleCwgc2V0R2FtZUluZGV4XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbZG9sbGFycywgc2V0RG9sbGFyc10gPSB1c2VTdGF0ZSg1MCk7XG4gIGNvbnN0IFtwZXJmb3JtYW5jZSwgc2V0UGVyZm9ybWFuY2VdID0gdXNlU3RhdGUoWzAsMCwwXSk7XG4gIGNvbnN0IFtiZywgc2V0QkddID0gdXNlU3RhdGUoJ25vcm1hbCcpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy9jb25zb2xlLmxvZygnZ2FtZSAnLCBnYW1lU3RhdHVzKTtcbiAgfSwgW2dhbWVTdGF0dXNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGdldEdhbWVQcm9tcHQoZ2FtZUluZGV4KTtcbiAgICBpZihnYW1lSW5kZXggPT09IFwiRU5EXCIpe1xuICAgICAgZ2FtZUVuZCgpO1xuICAgIH1cbiAgfSwgW2dhbWVJbmRleF0pO1xuXG4gIGNvbnN0IGdhbWVTdGFydCA9ICgpID0+IHtcbiAgICBzZXRTdGF0dXMoJ1NUQVJURUQnKTtcbiAgICBzZXRHYW1lSW5kZXgoMCk7XG4gIH1cblxuICBjb25zdCBnYW1lRW5kID0gKCkgPT4ge1xuICAgIHNldEdhbWVJbmRleCgnRU5EJylcbiAgICBzZXRTdGF0dXMoJ0VORCcpO1xuICB9XG5cbiAgY29uc3QgZ2FtZVJlc2V0ID0gKCkgPT4ge1xuICAgIHNldERvbGxhcnMoNTApO1xuICAgIHNldFBlcmZvcm1hbmNlKFswLDAsMF0pO1xuICAgIHNldFN0YXR1cygnSURMRScpO1xuICAgIHNldEdhbWVJbmRleCgwKTtcbiAgfVxuXG4gIGNvbnN0IGdldEdhbWVQcm9tcHQgPSAoZ2FtZUluZGV4KSA9PiB7XG4gICAgLy9jb25zb2xlLmxvZygnY3VycmVudCBnYW1lIHByb21wdDonLCBwcm9wcy5nYW1lRGF0YS5maWx0ZXIoZWxlbSA9PiB7cmV0dXJuIFN0cmluZyhlbGVtW1wiSURcIl0pID09PSBTdHJpbmcoZ2FtZUluZGV4KTt9KSk7XG4gIH1cblxuICBjb25zdCB1cGRhdGVEb2xsYXJzID0gKGRpZmYpID0+IHtcbiAgICBzZXREb2xsYXJzKGRvbGxhcnMgPT4gZG9sbGFycyArIGRpZmYpO1xuICAgIGlmKGRvbGxhcnMgKyBkaWZmIDwgMCl7XG4gICAgICBnYW1lRW5kKCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdXBkYXRlUGVyZm9ybWFuY2UgPSAoZGlmZikgPT4ge1xuICAgIGxldCBuZXdQZXJmb3JtYW5jZSA9IEFycmF5LmFwcGx5KG51bGwsIEFycmF5KGRpZmYubGVuZ3RoKSkubWFwKGZ1bmN0aW9uICgpIHt9KTtcbiAgICBwZXJmb3JtYW5jZS5mb3JFYWNoKChlbGVtLCBjb3VudCkgPT4ge1xuICAgICAgbmV3UGVyZm9ybWFuY2VbY291bnRdID0gcGFyc2VJbnQoZWxlbSkgKyBwYXJzZUludChkaWZmW2NvdW50XSk7XG4gICAgfSk7XG4gICAgLy8gY29uc29sZS5sb2coJ1NldHRpbmcgcGVyZm9ybWFuY2UgdG8gOiAnLCBuZXdQZXJmb3JtYW5jZSk7XG5cbiAgICBzZXRQZXJmb3JtYW5jZShuZXdQZXJmb3JtYW5jZSk7XG4gICAgaWYobmV3UGVyZm9ybWFuY2VbMV0gPD0gLTkgfHwgbmV3UGVyZm9ybWFuY2VbMl0gPD0gLTkpe1xuICAgICAgZ2FtZUVuZCgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGZpbmRHYW1lSW5kZXggPSAoSURuYW1lKSA9PiB7XG5cbiAgICBjb25zdCBmb3VuZElEID0gcHJvcHMuZ2FtZURhdGEuZmluZEluZGV4KChlbGVtKSA9PiB7XG4gICAgICByZXR1cm4gU3RyaW5nKElEbmFtZSkgPT09IFN0cmluZyhlbGVtWydJRCddKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm91bmRJRDtcbiAgfVxuXG4gIGNvbnN0IGNoZWNrQkcgPSAoY3VyUHJvbXB0QkcpID0+IHtcbiAgICBpZihjdXJQcm9tcHRCRyA9PT0gXCJyZWRwaW5rXCIpe1xuICAgICAgc2V0QkcoJ3JlZHBpbmsnKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGlmKGJnICE9PSAnbm9ybWFsJyl7XG4gICAgICAgIHNldEJHKCdub3JtYWwnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjdXJQcm9tcHQgPSBwcm9wcy5nYW1lRGF0YVtmaW5kR2FtZUluZGV4KGdhbWVJbmRleCldO1xuICAgIGlmKGN1clByb21wdCAmJiBjdXJQcm9tcHQuaGFzT3duUHJvcGVydHkoXCJCYWNrZ3JvdW5kXCIpKXtcbiAgICAgIGNoZWNrQkcoY3VyUHJvbXB0W1wiQmFja2dyb3VuZFwiXSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBnZXRCYWNrZ3JvdW5kSW5mbyA9ICgpID0+IHtcbiAgICBjb25zdCBnYW1lU2NyZWVuQ2xhc3MgPSAoZ2FtZVN0YXR1cyA9PT0gXCJFTkRcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVJbmRleCA9PT0gXCJFTkRcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJnID09PSBcInJlZHBpbmtcIikgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZ2FtZU92ZXJcIiA6IFwiXCI7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnQ2hlY2tpbmcgZ2FtZSBpbmZvOiAnLCBnYW1lU3RhdHVzLCBnYW1lSW5kZXgsIGJnKTtcbiAgICBjb25zdCBjdXJQcm9tcHQgPSBwcm9wcy5nYW1lRGF0YVtmaW5kR2FtZUluZGV4KGdhbWVJbmRleCldO1xuICAgIGNvbnN0IGJhY2tncm91bmRJbWFnZSA9IGN1clByb21wdCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY3VyUHJvbXB0W1wiQmFja2dyb3VuZFwiXSA9PT0gXCJweWxvbmVcIiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiSWxsdXNfU2VjdGlvbi0wMV9QeWxvbmVfVjAxLTE0LnN2Z1wiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyUHJvbXB0W1wiQmFja2dyb3VuZFwiXSA9PT0gXCJhbXBvdWxlXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiSWxsdXNfU2VjdGlvbi0wMl9BbXBvdWxlX1YwMi5zdmdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJQcm9tcHRbXCJCYWNrZ3JvdW5kXCJdID09PSBcImNlbnRyYWxlXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJJbGx1c19TZWN0aW9uLTAwX0NlbnRyYWxlX1YwMS5zdmdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGdhbWVTY3JlZW5DbGFzczogZ2FtZVNjcmVlbkNsYXNzLFxuICAgICAgYmFja2dyb3VuZEltYWdlOiBiYWNrZ3JvdW5kSW1hZ2VcbiAgICB9O1xuICB9O1xuXG5cbiAgY29uc3QgZG9tRWxlbWVudCA9IGdhbWVTdGF0dXMgPT09IFwiSURMRVwiID9cbiAgICAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWVTY3JlZW5cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiYWNrZ3JvdW5kLWltYWdlXCI+XG4gICAgICAgICAgPGltZ1xuICAgICAgICAgICAgc3JjPVwiYXNzZXRzL2ltZy9JbGx1c19TZWN0aW9uLTAwX0NlbnRyYWxlX1YwMS5zdmdcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8SW50cm9Cb3ggaW50cm9FbGVtPXtwcm9wcy5pbnRyb0VsZW19IG1hcE9iaj17cHJvcHMubWFwT2JqfSBnYW1lU3RhcnQ9e2dhbWVTdGFydH0gLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgICA6XG4gICAgPGRpdiBjbGFzc05hbWU9e2BnYW1lU2NyZWVuICR7Z2V0QmFja2dyb3VuZEluZm8oKS5nYW1lU2NyZWVuQ2xhc3N9YH0+XG4gICAgICB7XG4gICAgICAgIChnZXRCYWNrZ3JvdW5kSW5mbygpLmdhbWVTY3JlZW5DbGFzcyAhPT0gXCJnYW1lT3ZlclwiICYmIGdldEJhY2tncm91bmRJbmZvKCkuYmFja2dyb3VuZEltYWdlICE9PSBudWxsKT9cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJhY2tncm91bmQtaW1hZ2VcIj5cbiAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgc3JjPXtgYXNzZXRzL2ltZy8ke2dldEJhY2tncm91bmRJbmZvKCkuYmFja2dyb3VuZEltYWdlfWB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm5vLW1vYmlsZVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDpcbiAgICAgICAgICAnJ1xuICAgICAgfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZW1wb3JhcnlJbmZvXCI+XG4gICAgICAgIDxwPlBlcmZvcm1hbmNlICh0ZW1wb3JhaXJlKTwvcD5cbiAgICAgICAgPHA+RG9sbGFyczoge2Ake2RvbGxhcnN9ICRgfTwvcD5cbiAgICAgICAgPHA+RWxlYzoge2Ake3BlcmZvcm1hbmNlWzBdfSBUV2hgfTwvcD5cbiAgICAgICAgPHA+RW52aXJvOiB7YCR7cGVyZm9ybWFuY2VbMV19IHB0c2B9PC9wPlxuICAgICAgICA8cD5Qb3B1OiB7YCR7cGVyZm9ybWFuY2VbMl19IHB0c2B9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8UHJvbXB0Qm94IGN1ckluZGV4PXtnYW1lSW5kZXh9XG4gICAgICAgIGN1clByb21wdD17KGdhbWVJbmRleCA9PT0gXCJFTkRcIikgPyBcIlwiIDogcHJvcHMuZ2FtZURhdGFbZmluZEdhbWVJbmRleChnYW1lSW5kZXgpXX1cbiAgICAgICAgY2hhbmdlUHJvbXB0PXtzZXRHYW1lSW5kZXh9XG4gICAgICAgIHVwZGF0ZURvbGxhcnM9e3VwZGF0ZURvbGxhcnN9XG4gICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cbiAgICAgICAgZ2F1Z2VzPXs8R2F1Z2VzIGRvbGxhcnM9e2RvbGxhcnN9Lz59XG4gICAgICAgIHBlcmZvcm1hbmNlPXtwZXJmb3JtYW5jZX1cbiAgICAgICAgZW5kR2FtZT17Z2FtZUluZGV4ID09PSBcIkVORFwiIHx8IGdhbWVTdGF0dXMgPT09IFwiRU5EXCJ9XG4gICAgICAgIGZpbmFsQmlsYW5EYXRhPXtwcm9wcy5maW5hbEJpbGFuRGF0YX1cbiAgICAgICAgZ2FtZVJlc2V0PXtnYW1lUmVzZXR9XG4gICAgICAgIGdhbWVFbmQ9e2dhbWVFbmR9XG4gICAgICAgIC8+XG4gICAgPC9kaXY+O1xuXG4gIHJldHVybiBkb21FbGVtZW50O1xufVxuIiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb20vY2xpZW50XCI7XG5pbXBvcnQgeyByZW5kZXJUb1N0YXRpY01hcmt1cCB9IGZyb20gJ3JlYWN0LWRvbS9zZXJ2ZXInO1xuaW1wb3J0IHsgTWFpbkZyYW1lIH0gZnJvbSAnLi9jb21wb25lbnRzL21haW5mcmFtZSc7XG5pbXBvcnQgeyBvcHRpb25zRHJvcGRvd25Db25zdGFudHMsIGNvbnRlbnRIZWFkZXJDb25zdGFudHMgfSBmcm9tIFwiLi4vZ2VuZXJhdG9yL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgSW50cm9TZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9JbnRyb1NlY3Rpb24nO1xuXG5leHBvcnQgY2xhc3MgRW5naW5lIHtcblxuICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIG9wdGlvbkRhdGEsIGludHJvT2JqLCBnYW1lRGF0YSl7XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgY29uc3Qgcm9vdEVsZW0gPSB0aGlzLmNvbnRhaW5lci5hcHBlbmQoJ2RpdicpXG4gICAgICAuY2xhc3NlZCgncm9vdEVsZW0nLCB0cnVlKTtcbiAgICB0aGlzLmVuZ2luZVJvb3QgPSBSZWFjdERPTS5jcmVhdGVSb290KHJvb3RFbGVtLm5vZGUoKSk7XG4gICAgdGhpcy5vcHRpb25EYXRhID0gb3B0aW9uRGF0YTtcbiAgICB0aGlzLmFtb3JjZSA9IGludHJvT2JqW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdO1xuICAgIHRoaXMuZ2FtZURhdGEgPSBnYW1lRGF0YTtcbiAgICB0aGlzLmluaXRFbmdpbmUoKTtcbiAgfVxuXG4gIGluaXRFbmdpbmUoKXtcbiAgICBjb25zdCBpbnRyb0VsZW0gPSAoPEludHJvU2VjdGlvblxuICAgICAga2V5PXtcImdhbWVJbnRyb1wifVxuICAgICAgc2VjdGlvblR5cGU9e29wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMuaW50cm90aXRyZX1cbiAgICAgIG9wdGlvbkRhdGE9e3RoaXMub3B0aW9uRGF0YX1cbiAgICAgIGFtb3JjZT17dGhpcy5hbW9yY2V9XG4gICAgICBiYWNrZ3JvdW5kPXtudWxsfVxuICAgICAgY2xhc3Nlcz17XCJcIn1cbiAgICAgIC8+KTtcblxuICAgIHRoaXMuZW5naW5lUm9vdC5yZW5kZXIoPE1haW5GcmFtZSBpbnRyb0VsZW09e2ludHJvRWxlbX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVN0YXR1cz17dGhpcy5nYW1lU3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRGF0YT17dGhpcy5nYW1lRGF0YVswXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxCaWxhbkRhdGE9e3RoaXMuZ2FtZURhdGFbMV19Lz4pO1xuICB9XG5cbn1cbiIsIi8qKlxuICogdml6LmpzXG4gKiA9PT09PT09XG4gKiBGaWxlIHVzZWQgdG8gZGVmaW5lIHRoZSB2aXN1YWxpemF0aW9uIHNlY3Rpb24uXG4gKi9cblxuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IHsgZ2V0U3RydWN0dXJlLCBnZW5lcmF0ZUNhbGxiYWNrcywgZ2V0T3B0aW9ucyB9IGZyb20gJy4vZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvci5qcyc7XG5pbXBvcnQgeyBjYWxsYmFja3MgfSBmcm9tICcuLi9kYXRhL3N0cnVjdHVyZS9jYWxsYmFja3MuanMnO1xuXG5pbXBvcnQgeyBNYXAgfSBmcm9tICdsZWRldm9pci1kYXRhdml6JztcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gJy4vZ2FtZS9lbmdpbmUuanMnO1xuXG5jb25zdCBjb25maWcgPSB7XG4gIHdpZHRoOiA1MDAsXG4gIGhlaWdodDogNTAwLFxuICBtYXJnaW46IHtcbiAgICB0b3A6IDEwMCxcbiAgICByaWdodDogMTAwLFxuICAgIGJvdHRvbTogMTAwLFxuICAgIGxlZnQ6IDEwMFxuICB9XG59XG5jb25zdCBmdWxsV2lkdGggPSBjb25maWcubWFyZ2luLmxlZnQgKyBjb25maWcud2lkdGggKyBjb25maWcubWFyZ2luLnJpZ2h0O1xuY29uc3QgZnVsbEhlaWdodCA9IGNvbmZpZy5tYXJnaW4udG9wICsgY29uZmlnLmhlaWdodCArIGNvbmZpZy5tYXJnaW4uYm90dG9tO1xuY29uc3QgbWFwQm94U3R5bGUgPSBcIm1hcGJveDovL3N0eWxlcy9sZWRldm9pci9jbGFsOXpsZmswMDRhMTVxb2hocjdyNDk1XCI7XG5cbmNvbnN0IGN1c3RvbUNhbGxiYWNrc05lZWRlZCA9IHRydWU7IC8vIFNldCB0byB0cnVlIGlmIGN1c3RvbSBjYWxsYmFja3MgYXJlIG5lZWRlZFxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZShjb250ZW50RGF0YSwgb3B0aW9ucykge1xuXG4gIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICBkMy5jc3YoXCIuL2RhdGEvc3RydWN0dXJlLXF1ZXN0aW9ucy5jc3ZcIiksXG4gICAgICAgICAgICAgICAgICBkMy5jc3YoXCIuL2RhdGEvc3RydWN0dXJlLWJpbGFuMi5jc3ZcIilcbiAgICAgICAgICAgICAgICBdKVxuICAgIC50aGVuKCBnYW1lRGF0YSA9PiB7XG5cbiAgICAgIGNvbnN0IG1hcENvbnRhaW5lciA9IGQzLnNlbGVjdChcIi5nYW1lLWFyZWFcIik7XG5cbiAgICAgIGNvbnN0IGVuZ2luZSA9IG5ldyBFbmdpbmUobWFwQ29udGFpbmVyLCBnZXRPcHRpb25zKG9wdGlvbnMpLCBjb250ZW50RGF0YVswXSwgZ2FtZURhdGEpO1xuXG4gICAgICBsZXQgYXV0b0NhbGxiYWNrcztcbiAgICAgIHNldHVwVml6KGNvbnRlbnREYXRhLG9wdGlvbnMpO1xuICAgICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgIGF1dG9DYWxsYmFja3MgPSBnZW5lcmF0ZUNhbGxiYWNrcyhjb250ZW50RGF0YSwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBhdXRvQ2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuICAgICAgfVxuXG4gICAgICBpZihjdXN0b21DYWxsYmFja3NOZWVkZWQpe1xuICAgICAgICAvL2lmIGN1c3RvbSBjYWxsYmFja3MgYXJlIG5lZWRlZCwgc3VjaCBhcyBWaXN1YWxpemF0aW9uIHRyYW5zZm9ybWF0aW9ucywgaW5jbHVkZSB0aGVtIGhlcmUuXG4gICAgICAgIC8vIFRoaXMgYWxsb3dzIHRvIHVzZSBhbnkgb2JqZWN0IGNyZWF0ZWQgaW4gdml6LmpzIChncmFwaHMsIHRvb2xzLCBldGMpIGluIHRoZSBjYWxsYmFja3MuXG4gICAgICAgIC8vIFlvdSB3aWxsIG5lZWQgdG8gbWFudWFsbHkgY3JlYXRlIHRoZSBjb3JyZWN0IG51bWJlciBvZiBjYWxsYmFja3MgdG8gbWF0Y2ggdGhlIHZpeiBzZWN0aW9uc1xuXG4gICAgICAgIGxldCBjdXN0b21DYWxsYmFja3MgPSBbXG4gICAgICAgICAgW1xuICAgICAgICAgICAgKCkgPT4ge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICBdXG4gICAgICAgIHJldHVybiBjdXN0b21DYWxsYmFja3M7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXV0b0NhbGxiYWNrcztcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0dXBWaXooY29udGVudERhdGEsIG9wdGlvbnMpe1xuXG4gIGNvbnN0IGZ1bGxTdHJ1Y3R1cmUgPSBnZXRTdHJ1Y3R1cmUoY29udGVudERhdGEsIG9wdGlvbnMpO1xuICBmdWxsU3RydWN0dXJlLm1hcChzZWN0aW9uT2JqID0+IHtcblxuICAgIGlmKHNlY3Rpb25PYmouc2VjdGlvblR5cGUgPT09IFwidml6LXNlY3Rpb25cIil7XG4gICAgICBzZWN0aW9uT2JqLnN0ZXBzLm1hcCgoc3RlcCxpbmRleCkgPT4ge1xuICAgICAgICAgIGlmKHN0ZXAudmlzdWFsICE9PSBcIlwiKXtcbiAgICAgICAgICAgIGlmKGluZGV4ID09PSAwKXtcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KGAjJHtzZWN0aW9uT2JqLmtleX1fJHtpbmRleH1gKS5zdHlsZSgnb3BhY2l0eScsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KGAjJHtzZWN0aW9uT2JqLmtleX1fJHtpbmRleH1gKS5zdHlsZSgnb3BhY2l0eScsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbn0pO1xufVxuXG5mdW5jdGlvbiBzZXR1cFZpZGVvcygpe1xuICBsZXQgdmlkZW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInZpZGVvXCIpO1xuICAgIHZpZGVvcy5mb3JFYWNoKCh2aWRlbykgPT4ge1xuICAgICAgLy8gV2UgY2FuIG9ubHkgY29udHJvbCBwbGF5YmFjayB3aXRob3V0IGluc3RlcmFjdGlvbiBpZiB2aWRlbyBpcyBtdXRlXG4gICAgICB2aWRlby5tdXRlZCA9IHRydWU7XG4gICAgICB2aWRlby5jdXJyZW50VGltZSA9IDA7XG4gICAgICAvLyBQbGF5IGlzIGEgcHJvbWlzZSBzbyB3ZSBuZWVkIHRvIGNoZWNrIHdlIGhhdmUgaXRcbiAgICAgIGxldCBwbGF5UHJvbWlzZSA9IHZpZGVvLnBsYXkoKTtcbiAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcGxheVByb21pc2UudGhlbigoXykgPT4ge1xuICAgICAgICAgICAgICBsZXQgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgICAgICAgICAgICAoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gIT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF2aWRlby5wYXVzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW8uY3VycmVudFRpbWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZpZGVvLnBhdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgeyB0aHJlc2hvbGQ6IDAuMiB9XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUodmlkZW8pO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xufVxuIiwiLyoqXHJcbiAqIHNjcm9sbGVyLmpzXHJcbiAqID09PT09PT09PT09XHJcbiAqIERlZmluZXMgdGhlIGxvZ2ljIHVzZWQgYnkgdGhlIHNjcm9sbGVyLiBUaGlzIHNjcmlwdCBkb2VzIG5vdCBuZWVkIGV4dGVybmFsIGRlcGVuZGVuY2llcyBhbmQgdXNlcyBuYXRpdmUgZnVuY3Rpb25zXHJcbiAqIG9mIHRoZSBicm93c2VyLlxyXG4gKlxyXG4gKiAvIVxcIFBMRUFTRSwgRE8gTk9UIE1PRElGWSBUSElTIEZJTEUuXHJcbiAqXHJcbiAqIEBhdXRob3IgQW50b2luZSBCw6lsYW5kIDxhYmVsYW5kQGxlZGV2b2lyLmNvbT5cclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG4vKipcclxuICogRGVmaW5lcyBhIHN0ZXAgYXNzb2NpYXRlZCB3aXRoIGEgc3BlY2lmaWMgdmlzdWFsaXphdGlvbi4gQSBzdGVwIGlzIGFjdGl2YXRlZCBvciBkZWFjdGl2YXRlZCBiYXNlZCBvbiB0aGUgc2Nyb2xsXHJcbiAqIHBvc2l0aW9uLiBUaGlzIGNsYXNzIGlzIHVzZWQgYnkgdGhlIHNjcm9sbGVyIGZ1bmN0aW9uLlxyXG4gKi9cclxuY2xhc3MgU2Nyb2xsZXJTdGVwIHtcclxuICAvKipcclxuICAgKiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiBTY3JvbGxlclN0ZXAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gZWwgICAgICAgICAgVGhlIG5hdGl2ZSBlbGVtZW50IHRoYXQgcmVwcmVzZW50cyB0aGUgc3RlcCBpbiB0aGUgSFRNTCBkb2N1bWVudC5cclxuICAgKiBAcGFyYW0gaW5kZXggICAgICAgVGhlIGluZGV4IG9mIHRoZSBzdGVwLlxyXG4gICAqIEBwYXJhbSBjYWxsYmFjayAgICBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBzdGVwIGlzIGFjdGl2YXRlLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKGVsLCBpbmRleCwgY2FsbGJhY2spIHtcclxuICAgIHRoaXMuZWwgPSBlbDtcclxuICAgIHRoaXMuaW5kZXggPSBpbmRleDtcclxuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIHRoaXMuX2lzQWN0aXZhdGUgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFjdGl2YXRlcyB0aGUgY3VycmVudCBzdGVwLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHNjcm9sbERpcmVjdGlvbiAgIFRoZSBjdXJyZW50IHNjcm9sbCBkaXJlY3Rpb24uXHJcbiAgICovXHJcbiAgYWN0aXZhdGUoc2Nyb2xsRGlyZWN0aW9uKSB7XHJcbiAgICBpZiAodGhpcy5faXNBY3RpdmF0ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9pc0FjdGl2YXRlID0gdHJ1ZTtcclxuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB0aGlzLmNhbGxiYWNrKHNjcm9sbERpcmVjdGlvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWFjdGl2YXRlcyB0aGUgY3VycmVudCBzdGVwLlxyXG4gICAqL1xyXG4gIGRlYWN0aXZhdGUoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2lzQWN0aXZhdGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faXNBY3RpdmF0ZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWZpbmVzIHRoZSBzY3JvbGwgZGlyZWN0aW9ucy5cclxuICpcclxuICogQHR5cGUge3t1cDogc3RyaW5nLCBkb3duOiBzdHJpbmd9fVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHNjcm9sbERpcmVjdGlvbnMgPSB7XHJcbiAgdXA6ICd1cCcsXHJcbiAgZG93bjogJ2Rvd24nXHJcbn07XHJcblxyXG4vKipcclxuICogRGVmaW5lcyB0aGUgc2Nyb2xsZXIgdG8gdXNlIHdpdGggdGhlIExlIERldm9pcidzIHNjcm9sbHl0ZWxsaW5nIGFydGljbGVzLiBQbGVhc2Ugc2VlIFwiUkVBRE1FLm1kXCJcclxuICogdG8ga25vdyBob3cgdG8gdXNlIGl0LlxyXG4gKlxyXG4gKiAvIVxcIEJlIHN1cmUgdG8gdXNlIHRoZSBnb29kIENTUyBjbGFzcyBuYW1lcyBpbiB5b3VyIEhUTUwgZmlsZSBiZWZvcmUgdG8gdXNlIHRoZSBmdW5jdGlvbi5cclxuICpcclxuICogQHBhcmFtIGNhbGxiYWNrcyAgIEEgbXVsdGktZGltZW5zaW9uYWwgYXJyYXkgb2YgY2FsbGJhY2tzIHRvIHVzZSB3aXRoIGVhY2ggc3RlcC5cclxuICogQHJldHVybnMgeyp9ICAgICAgIFRoZSBpbnN0YW5jZSBvZiB0aGUgc2Nyb2xsZXIuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2Nyb2xsZXIoY2FsbGJhY2tzKSB7XHJcbiAgbGV0IF9vZmZzZXRUb3AgPSAwO1xyXG4gIGxldCBfb2Zmc2V0Qm90dG9tID0gMDtcclxuXHJcbiAgbGV0IGlubmVySGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gIGxldCBpc0luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgbGV0IGxhc3RTY3JvbGwgPSAwO1xyXG4gIGxldCBzdGVwcyA9IFtdO1xyXG4gIGxldCB2aXogPSBbXTtcclxuICBsZXQgdmlzaWJsZVN0ZXBzID0gW107XHJcbiAgXHJcbiAgY29uc3QgYXJ0aWNsZVJlbWluZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUtcmVtaW5kZXInKTtcclxuICBjb25zdCBzY3JvbGxQcm9ncmVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciA+IC5wcm9ncmVzcycpO1xyXG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludHJvLXNlY3Rpb24gaDEnKTtcclxuXHJcbiAgY29uc3Qgdml6U2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudml6LXNlY3Rpb24nKTtcclxuICBpZiAodml6U2VjdGlvbnMubGVuZ3RoICE9PSBjYWxsYmFja3MubGVuZ3RoKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBudW1iZXIgb2Ygdml6IHNlY3Rpb25zICgke3ZpelNlY3Rpb25zLmxlbmd0aH0pIG1pc21hdGNoIHdpdGggdGhlIGxlbmd0aCBvZiB0aGUgZmlyc3QgYCArXHJcbiAgICAgIGBkaW1lbnNpb24gb2YgdGhlIGNhbGxiYWNrcyBhcnJheSAoJHtjYWxsYmFja3MubGVuZ3RofSkuIFBsZWFzZSwgYmUgc3VyZSB0aGF0IHRoZSB0d28gZWxlbWVudHMgYCArXHJcbiAgICAgIGBoYXZlIHRoZSBzYW1lIHNpemUuYCk7XHJcbiAgfVxyXG4gIHZpelNlY3Rpb25zLmZvckVhY2goKHZpelNlY3Rpb24sIGkpID0+IHtcclxuICAgIGNvbnN0IHNlY3Rpb25zID0gWy4uLnZpelNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnc2VjdGlvbicpXTtcclxuICAgIGlmIChzZWN0aW9ucy5sZW5ndGggIT09IGNhbGxiYWNrc1tpXS5sZW5ndGgpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgbnVtYmVyIG9mIHN0ZXBzICgke3NlY3Rpb25zLmxlbmd0aH0pIGluIHRoZSB2aXogc2VjdGlvbiAjJHtpICsgMX0gbWlzbWF0Y2ggd2l0aCB0aGUgYCArXHJcbiAgICAgICAgYG51bWJlciBvZiBjYWxsYmFja3Mgc3BlY2lmaWVkICgke2NhbGxiYWNrc1tpXS5sZW5ndGh9KSBhdCB0aGUgaW5kZXggXCIke2l9XCIuIFBsZWFzZSwgYmUgc3VyZSB0aGF0IHRoZSB0d28gYCArXHJcbiAgICAgICAgYGVsZW1lbnRzIGhhdmUgdGhlIHNhbWUgc2l6ZS5gKTtcclxuICAgIH1cclxuICAgIHN0ZXBzID0gc3RlcHMuY29uY2F0KHNlY3Rpb25zLm1hcCgoZSwgaikgPT4gbmV3IFNjcm9sbGVyU3RlcChlLCBgJHtpfS0ke2p9YCwgY2FsbGJhY2tzW2ldW2pdKSkpO1xyXG4gICAgdml6ID0gdml6LmNvbmNhdCh2aXosIHZpelNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnZpeiA+IConKSk7XHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIGRpc3BsYXkgYmFzZWQgb24gc2Nyb2xsYmFyIHBvc2l0aW9uLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY29uc3QgX3VwZGF0ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgIHN0ZXBzLmZvckVhY2goc3RlcCA9PiB7XHJcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHN0ZXAgaXMgaW4gdGhlIHZpZXdwb3J0LlxyXG4gICAgICBjb25zdCBib3VuZGluZ1JlY3QgPSBzdGVwLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBpZiAoaW5uZXJIZWlnaHQgLSBib3VuZGluZ1JlY3QudG9wIC0gX29mZnNldEJvdHRvbSA+IDBcclxuICAgICAgICAmJiBib3VuZGluZ1JlY3QudG9wICsgYm91bmRpbmdSZWN0LmhlaWdodCAtIF9vZmZzZXRUb3AgPiAwKSB7XHJcbiAgICAgICAgdmlzaWJsZVN0ZXBzLnB1c2goc3RlcCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3RlcC5kZWFjdGl2YXRlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIERpc3BsYXkgdGhlIHRpdGxlIGFzIGEgcmVtaW5kZXIgd2hlbiB0aGUgbWFpbiBhcnRpY2xlIHRpdGxlIGlzIGhpZGRlbi5cclxuICAgIGNvbnN0IGlzQXJ0aWNsZVJlbWluZGVyRGlzcGxheWVkID0gdGl0bGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIDw9IDA7XHJcbiAgICBjb25zdCBpc0FydGljbGVSZW1pbmRlcklzVmlzaWJsZSA9IGFydGljbGVSZW1pbmRlci5jbGFzc0xpc3QuY29udGFpbnMoJ3Zpc2libGUnKTtcclxuICAgIGlmIChpc0FydGljbGVSZW1pbmRlckRpc3BsYXllZCAmJiAhaXNBcnRpY2xlUmVtaW5kZXJJc1Zpc2libGUpIHtcclxuICAgICAgYXJ0aWNsZVJlbWluZGVyLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKVxyXG4gICAgfSBlbHNlIGlmICghaXNBcnRpY2xlUmVtaW5kZXJEaXNwbGF5ZWQgJiYgaXNBcnRpY2xlUmVtaW5kZXJJc1Zpc2libGUpIHtcclxuICAgICAgYXJ0aWNsZVJlbWluZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvciB0aGUgdmlzaWJsZSBzdGVwcywgY2hvb3NlIHRoZSBnb29kIG9uZSBiYXNlZCBvbiB0aGUgc2Nyb2xsIGRpcmVjdGlvbi5cclxuICAgIHZpc2libGVTdGVwcy5mb3JFYWNoKChzZWN0aW9uLCBpKSA9PiB7XHJcbiAgICAgIGlmIChjdXJyZW50U2Nyb2xsID49IGxhc3RTY3JvbGwpIHsgLy8gU2Nyb2xsIGRvd24gKOKGkylcclxuICAgICAgICBpZiAoaSA9PT0gdmlzaWJsZVN0ZXBzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgIHNlY3Rpb24uYWN0aXZhdGUoc2Nyb2xsRGlyZWN0aW9ucy5kb3duKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2VjdGlvbi5kZWFjdGl2YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgeyAvLyBTY3JvbGwgdXAgKOKGkSlcclxuICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgc2VjdGlvbi5hY3RpdmF0ZShzY3JvbGxEaXJlY3Rpb25zLnVwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2VjdGlvbi5kZWFjdGl2YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIF91cGRhdGVTY3JvbGxQcm9ncmVzcygpO1xyXG5cclxuICAgIC8vIFJlc2V0IHRoZSB2YXJpYWJsZXMgZm9yIHRoZSBuZXh0IGZ1bmN0aW9uIGNhbGwuXHJcbiAgICB2aXNpYmxlU3RlcHMgPSBbXTtcclxuICAgIGxhc3RTY3JvbGwgPSBjdXJyZW50U2Nyb2xsO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIHNjcm9sbCBwcm9ncmVzc2lvbiBpbmRpY2F0b3IuXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdCBfdXBkYXRlU2Nyb2xsUHJvZ3Jlc3MgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB3aW5TY3JvbGwgPSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICBjb25zdCBzY3JvbGxlZCA9ICh3aW5TY3JvbGwgLyBoZWlnaHQpICogMTAwO1xyXG4gICAgc2Nyb2xsUHJvZ3Jlc3Muc3R5bGUud2lkdGggPSBzY3JvbGxlZCArICclJztcclxuICB9O1xyXG5cclxuICBjb25zdCBwdWJsaWNJbnRlcmZhY2UgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIHRoZSBzY3JvbGxlci4gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGNhbiBiZSBvbmx5IGNhbGxlZCBvbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgaW5zdGFuY2Ugb2YgdGhlIHNjcm9sbGVyLlxyXG4gICAgICovXHJcbiAgICBpbml0aWFsaXplOiAoKSA9PiB7XHJcbiAgICAgIGlmIChpc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc2Nyb2xsZXIgaXMgYWxyZWFkeSBpbml0aWFsaXplZC4nKTtcclxuICAgICAgfVxyXG4gICAgICBpc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF91cGRhdGUpO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgIGlubmVySGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIF91cGRhdGVTY3JvbGxQcm9ncmVzcygpO1xyXG4gICAgICB9KTtcclxuICAgICAgaWYgKCh3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkgPiAwKSB7XHJcbiAgICAgICAgX3VwZGF0ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIF91cGRhdGVTY3JvbGxQcm9ncmVzcygpO1xyXG4gICAgICByZXR1cm4gcHVibGljSW50ZXJmYWNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgb3Igc2V0cyB0aGUgdG9wIG9mZnNldCB0byB1c2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9mZnNldFRvcFxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSBpbnN0YW5jZSBvZiB0aGUgc2Nyb2xsZXIuXHJcbiAgICAgKi9cclxuICAgIG9mZnNldFRvcDogb2Zmc2V0VG9wID0+IHtcclxuICAgICAgaWYgKG9mZnNldFRvcCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIF9vZmZzZXRUb3A7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKG9mZnNldFRvcCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBvZmZzZXQgbXVzdCBiZSBhbiBpbnRlZ2VyIG51bWJlci4nKTtcclxuICAgICAgfVxyXG4gICAgICBfb2Zmc2V0VG9wID0gb2Zmc2V0VG9wO1xyXG4gICAgICByZXR1cm4gcHVibGljSW50ZXJmYWNlO1xyXG4gICAgfSAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIG9yIHNldHMgdGhlIGJvdHRvbSBvZmZzZXQgdG8gdXNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvZmZzZXRCb3R0b21cclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgaW5zdGFuY2Ugb2YgdGhlIHNjcm9sbGVyLlxyXG4gICAgICovXHJcbiAgICBvZmZzZXRCb3R0b206IG9mZnNldEJvdHRvbSA9PiB7XHJcbiAgICAgIGlmIChvZmZzZXRCb3R0b20gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBfb2Zmc2V0Qm90dG9tO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihvZmZzZXRCb3R0b20pKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgb2Zmc2V0IG11c3QgYmUgYW4gaW50ZWdlciBudW1iZXIuJyk7XHJcbiAgICAgIH1cclxuICAgICAgX29mZnNldEJvdHRvbSA9IG9mZnNldEJvdHRvbTtcclxuICAgICAgcmV0dXJuIHB1YmxpY0ludGVyZmFjZTtcclxuICAgIH1cclxuICB9O1xyXG4gIHJldHVybiBwdWJsaWNJbnRlcmZhY2U7XHJcbn1cclxuIiwiXHJcbmltcG9ydCB7IGluaXRpYWxpemUgYXMgdjEgfSBmcm9tICcuLi92aXonO1xyXG5pbXBvcnQgeyBzY3JvbGxlciB9IGZyb20gJy4uL3Njcm9sbGVyJztcclxuaW1wb3J0IExhenlMb2FkIGZyb20gXCJ2YW5pbGxhLWxhenlsb2FkXCI7XHJcbmNvbnN0IGhlYWRlckhlaWdodCA9IDQwO1xyXG5pbXBvcnQgc3RpY2t5Qml0cyBmcm9tICdzdGlja3liaXRzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRTY3JvbGxlcihjb250ZW50RGF0YSwgcGFyYW1zRGF0YSl7XHJcblxyXG4gICAgbGV0IGVsZW1lbnRzID0gW107XHJcbiAgICBbJy52aXonLCAnLmZ1bGwtcGFnZS1zZWN0aW9uID4gaW1nJywgJy5mdWxsLXBhZ2Utc2VjdGlvbiA+IHZpZGVvJ10uZm9yRWFjaChzZWxlY3RvciA9PiB7XHJcbiAgICAgIGVsZW1lbnRzID0gZWxlbWVudHMuY29uY2F0KEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpKTtcclxuICAgIH0pO1xyXG4gICAgc3RpY2t5Qml0cyhlbGVtZW50cywgeyBzdGlja3lCaXRTdGlja3lPZmZzZXQ6IGhlYWRlckhlaWdodCB9KTtcclxuICBcclxuICAgIGNvbnN0IGxsID0gbmV3IExhenlMb2FkKHtcclxuICAgICAgZWxlbWVudHNfc2VsZWN0b3I6IFwiLmxhenlcIixcclxuICAgICAgdGhyZXNob2xkOiA1MDBcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgUHJvbWlzZS5hbGwoW3YxKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKV0pLnRoZW4oKFtjYWxsYmFja3NWMV0pID0+ICB7XHJcbiAgICAgIHNjcm9sbGVyKGNhbGxiYWNrc1YxKVxyXG4gICAgICAgIC5vZmZzZXRUb3AoaGVhZGVySGVpZ2h0KVxyXG4gICAgICAgIC5vZmZzZXRCb3R0b20oMClcclxuICAgICAgICAuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfSk7XHJcbiAgfSIsIi8qKlxuICogYXBwLmpzXG4gKiA9PT09PT1cbiAqIE1haW4gZmlsZSBvZiB0aGUgYXBwbGljYXRpb24uIFRoaXMgZmlsZSBpcyB1c2VkIHRvIGluaXRpYWxpemUgdGhlIHNjcm9sbGVyIGFuZCBpbXBvcnRzIHRoZSB2aXN1YWxpemF0aW9ucyB1c2VkLlxuICovXG5cbid1c2Ugc3RyaWN0JztcbmltcG9ydCBzdHJ1Y3R1cmUgZnJvbSAnLi4vZGF0YS9zdHJ1Y3R1cmUvc3RydWN0dXJlLmpzb24nO1xuXG5pZighRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjKXtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jvb3QnKS5pbm5lckhUTUwgPSAoc3RydWN0dXJlLmh0bWxzdHJ1Yyk7XG59XG5cbmltcG9ydCAnLi4vYXNzZXRzL3N0eWxlcy9zdHlsZS5zY3NzJztcbmltcG9ydCB7Z29vZ2xlX2NvbmZpZ30gZnJvbSBcIi4uL2RhdGEvZ29vZ2xlX2NvbmZpZ1wiO1xuaW1wb3J0IHsgUmVuZGVyU3RydWN0dXJlIH0gZnJvbSAnLi9nZW5lcmF0b3IvUmVuZGVyU3RydWN0dXJlJztcbmltcG9ydCB7IGluaXRTY3JvbGxlciB9IGZyb20gJy4vZ2VuZXJhdG9yL2luaXRTY3JvbGxlcic7XG5pbXBvcnQgeyBnZW5lcmF0ZUNhbGxiYWNrcyB9IGZyb20gJy4vZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvcic7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJztcblxuaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjKXtcbiAgUHJvbWlzZS5hbGwoW2ltcG9ydChcInJlYWN0LWRvbS9jbGllbnRcIiksIGltcG9ydChcInJlYWN0LWRvbS9zZXJ2ZXJcIiksIGltcG9ydChcInJlYWN0XCIpXSlcbiAgICAudGhlbihwYWNrYWdlcyA9PiB7XG4gICAgICBjb25zdCBSZWFjdERPTSA9IHBhY2thZ2VzWzBdO1xuICAgICAgY29uc3QgUmVhY3RET01TZXJ2ZXIgPSBwYWNrYWdlc1sxXTtcbiAgICAgIGNvbnN0IFJlYWN0ID0gcGFja2FnZXNbMl07XG4gICAgICBhZGROb3RQdWJsaXNoZWQoKTtcbiAgICAgIGlmKEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmNvbnRlbnRVUkwpLnRoZW4oIGNvbnRlbnREYXRhID0+IHtcbiAgICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5wYXJhbXNVUkwpLnRoZW4oIHBhcmFtc0RhdGEgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm9vdCA9IFJlYWN0RE9NLmNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb290XCIpKTtcbiAgICAgICAgICAgIHJvb3QucmVuZGVyKFxuICAgICAgICAgICAgICA8UmVuZGVyU3RydWN0dXJlIGNvbnRlbnREYXRhPXtjb250ZW50RGF0YX0gcGFyYW1zRGF0YT17cGFyYW1zRGF0YX0gcmVuZGVyZWQ9e3RydWV9Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBhZGRGb290ZXIoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5jb250ZW50VVJMKS50aGVuKCBjb250ZW50RGF0YSA9PiB7XG4gICAgICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcucGFyYW1zVVJMKS50aGVuKCBwYXJhbXNEYXRhID0+IHtcbiAgICAgICAgICAgIGQzLmJsb2IoZ29vZ2xlX2NvbmZpZy5jb250ZW50VVJMKS50aGVuKGNvbnRlbnRCbG9iID0+IHtcbiAgICAgICAgICAgICAgZDMuYmxvYihnb29nbGVfY29uZmlnLnBhcmFtc1VSTCkudGhlbihwYXJhbXNCbG9iID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBnZW5lcmF0ZWRTdHJ1YyA9IFJlbmRlclN0cnVjdHVyZSh7Y29udGVudERhdGE6IGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhOiBwYXJhbXNEYXRhLCByZW5kZXI6IGZhbHNlfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaHRtbFN0cnVjID0gUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdGF0aWNNYXJrdXAoZ2VuZXJhdGVkU3RydWMpO1xuICAgICAgICAgICAgICAgIHdyaXRlSFRNTGZpbGUoaHRtbFN0cnVjLCBjb250ZW50QmxvYiwgcGFyYW1zQmxvYik7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVDYWxsYmFja3MoY29udGVudERhdGEscGFyYW1zRGF0YSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbn1cbmVsc2V7XG4gIGlmKEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgUHJvbWlzZS5hbGwoW2ltcG9ydChcInJlYWN0LWRvbS9jbGllbnRcIiksIGltcG9ydChcInJlYWN0XCIpXSlcbiAgICAudGhlbihwYWNrYWdlcyA9PiB7XG4gICAgICBjb25zdCBSZWFjdERPTSA9IHBhY2thZ2VzWzBdO1xuICAgICAgY29uc3QgUmVhY3QgPSBwYWNrYWdlc1sxXTtcbiAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmNvbnRlbnRVUkwpLnRoZW4oIGNvbnRlbnREYXRhID0+IHtcbiAgICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcucGFyYW1zVVJMKS50aGVuKCBwYXJhbXNEYXRhID0+IHtcbiAgICAgICAgICBjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJvb3RcIikpO1xuICAgICAgICAgIHJvb3QucmVuZGVyKFxuICAgICAgICAgICAgPFJlbmRlclN0cnVjdHVyZSBjb250ZW50RGF0YT17Y29udGVudERhdGF9IHBhcmFtc0RhdGE9e3BhcmFtc0RhdGF9IHJlbmRlcmVkPXt0cnVlfS8+XG4gICAgICAgICAgKTtcbiAgICAgICAgICBhZGRGb290ZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBlbHNle1xuICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmxvY2FsQ29udGVudFVSTCkudGhlbiggY29udGVudERhdGEgPT4ge1xuICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcubG9jYWxQYXJhbXNVUkwpLnRoZW4oIHBhcmFtc0RhdGEgPT4ge1xuICAgICAgICBpbml0U2Nyb2xsZXIoY29udGVudERhdGEsIHBhcmFtc0RhdGEpO1xuICAgICAgICBhZGRGb290ZXIoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyaXRlSFRNTGZpbGUoSFRNTFN0cnVjdCwgY29udGVudERhdGEsIHBhcmFtc0RhdGEpe1xuICBsZXQgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeSh7aHRtbHN0cnVjOiBgJHtIVE1MU3RydWN0fWB9LCBudWxsLCAyKV0sIHt0eXBlOiBcInRleHQvcGxhaW47Y2hhcnNldD11dGYtOFwifSk7XG4gIGxldCBjb250ZW50Q1NWID0gbmV3IEJsb2IoW2NvbnRlbnREYXRhXSwge3R5cGU6IFwidGV4dC9jc3Y7Y2hhcnNldD11dGYtOFwifSk7XG4gIGxldCBwYXJhbXNDU1YgPSBuZXcgQmxvYihbcGFyYW1zRGF0YV0sIHt0eXBlOiBcInRleHQvY3N2O2NoYXJzZXQ9dXRmLThcIn0pO1xuXG4gIHNhdmVBcyhjb250ZW50Q1NWLCBcImNvbnRlbnREYXRhLmNzdlwiKTtcbiAgc2F2ZUFzKHBhcmFtc0NTViwgXCJwYXJhbXNEYXRhLmNzdlwiKTtcbiAgc2F2ZUFzKGJsb2IsIFwic3RydWN0dXJlLmpzb25cIik7XG59XG5cbmZ1bmN0aW9uIGFkZE5vdFB1Ymxpc2hlZCgpe1xuICBjb25zdCBkaXYgPSBkMy5zZWxlY3QoJy5wdWxsLXJpZ2h0JykuaW5zZXJ0KFwibGlcIiwnbGknKTtcbiAgZGl2Lmh0bWwoYDxwIGNsYXNzPSdub3QtcHVibGlzaGVkJz5OZSBwYXMgcHVibGllcjwvcD5gKTtcbn1cblxuZnVuY3Rpb24gYWRkRm9vdGVyKCl7XG4gIC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvb3RlckNvbnRhaW5lcicpLnJlbW92ZSgpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9vdGVyQ29udGFpbmVyJykuaW5uZXJIVE1MID0gZDMuc2VsZWN0KGAjZm9vdGVyQ29udGVudGApLm5vZGUoKS5pbm5lckhUTUw7XG59XG4iLCJjb25zdCBnb29nbGVfY29uZmlnID0ge1xuICAgIFwiY29udGVudFVSTFwiOiBcImh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZTRXl3SkUwVlVneTNOc3EzVGdfb2gtVnM2MzNUU2ltZElIZmtYVHl6OUJiRXRXTlZndXJkMVRvdS1RNWFudmRPaXczY29DRmtEQ2lTWXEvcHViP2dpZD0wJnNpbmdsZT10cnVlJm91dHB1dD1jc3ZcIixcbiAgICBcInBhcmFtc1VSTFwiOiBcImh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZTRXl3SkUwVlVneTNOc3EzVGdfb2gtVnM2MzNUU2ltZElIZmtYVHl6OUJiRXRXTlZndXJkMVRvdS1RNWFudmRPaXczY29DRmtEQ2lTWXEvcHViP2dpZD00MDk5NTAyMzcmc2luZ2xlPXRydWUmb3V0cHV0PWNzdlwiLFxuICAgIFwibG9jYWxDb250ZW50VVJMXCI6IFwiLi9kYXRhL3N0cnVjdHVyZS9jb250ZW50RGF0YS5jc3ZcIixcbiAgICBcImxvY2FsUGFyYW1zVVJMXCI6IFwiLi9kYXRhL3N0cnVjdHVyZS9wYXJhbXNEYXRhLmNzdlwiXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtnb29nbGVfY29uZmlnfTtcbiJdLCJuYW1lcyI6WyJJbnRyb1NlY3Rpb24iLCJwcm9wcyIsImludHJvU2VjdGlvbk9iaiIsImNsYXNzTmFtZSIsImNsYXNzZXMiLCJhbW9yY2UiLCJwYXJzZSIsIm9wdGlvbkRhdGEiLCJ0aXRsZSIsImJhY2tncm91bmQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsIlByb3BUeXBlcyIsIm9wdGlvbnNEcm9wZG93bkNvbnN0YW50cyIsInBhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMiLCJ0aXRyZSIsImF1dGV1cnMiLCJkYXRlIiwiaXNKc29uIiwic3RyIiwiSlNPTiIsImUiLCJwYXJzZUNsYXNzZXMiLCJBcnJheSIsImZyb20iLCJzcGxpdCIsImpvaW4iLCJnZXRPcHRpb25zIiwicGFyYW1zRGF0YSIsImF1dGhvcnMiLCJ1cmxzIiwibWFwYm94Z2wiLCJHYXVnZXMiLCJyZW5kZXJKZXRvblRleHQiLCJqZXRvbnNWYWx1ZSIsIk1hdGgiLCJhYnMiLCJ1c2VFZmZlY3QiLCJkMyIsInNlbGVjdEFsbCIsIm5vZGVzIiwiZm9yRWFjaCIsIm5vZGUiLCJjdXJXaWR0aCIsImF0dHIiLCJkb2xsYXJzIiwiY29tbWl0dGVkVmFsdWUiLCJyb3VuZCIsImNvbW1pdHRlZCIsImdhdWdlVmFsdWUiLCJzZWxlY3QiLCJpZCIsImdhdWdlRXhwbGFpbiIsIm1pc3Npb24iLCJJbnRyb0JveCIsInN0YXJ0R2FtZSIsInVzZUNhbGxiYWNrIiwiZ2FtZVN0YXJ0IiwiaW50cm9FbGVtIiwib25DbGljayIsIk1vbml0b3JpbmciLCJ0cmFuc2l0aW9uIiwic2V0VGltZW91dCIsImR1cmF0aW9uIiwicmlnaHRhcnJvd3MiLCJ0ZXJhd2F0dHMiLCJjYWxjdWxhdGVQZXJmb3JtYW5jZSIsImNob2ljZXNfdmFsdWVzIiwic2xpY2UiLCJtYXAiLCJlbGVtIiwicGFyc2VJbnQiLCJyZW5kZXJTaWduIiwidmFsdWUiLCJDaG9pY2UiLCJ1c2VTdGF0ZSIsInNlbGVjdGlvbiIsInNldFNlbGVjdGlvbiIsInNlbGVjdGlvbmJ1dHRvbnMiLCJjbGFzc2VkIiwib2JqIiwibmV4dFByb21wdCIsImNvc3QiLCJwZXJmb3JtYW5jZSIsImluZGV4IiwidHJpZ2dlck5leHQiLCJTdHJpbmciLCJjdXJQcm9tcHQiLCJsZW5ndGgiLCJjaGFuZ2VQcm9tcHQiLCJyZXBsYWNlIiwidXBkYXRlTWVtb3J5T2JqIiwidXBkYXRlRG9sbGFycyIsInVwZGF0ZVBlcmZvcm1hbmNlIiwicHJldmlvdXNQcm9tcHQiLCJjdXJJbmRleCIsImNob2ljZXMiLCJjaG9pY2UiLCJqZXRvblZhbHVlIiwia2V5IiwiZXZlbnQiLCJ0YXJnZXQiLCJ1cGRhdGVTZWxlY3RlZCIsInNyYyIsImlkeCIsImZpbHRlciIsInZhbCIsIk51bWJlciIsImlzTmFOIiwiZXZlcnkiLCJpdGVtIiwic2hvd1RXaCIsImhhc093blByb3BlcnR5IiwiZ2F1Z2VzIiwiY29uc29sZSIsImxvZyIsIk11bHRpU2VsZWN0aW9uIiwicmVzZXRTZWxlY3Rpb24iLCJjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbiIsImFjY0Nvc3QiLCJyZWR1Y2UiLCJhY2MiLCJjdXIiLCJhY2NQZXJmb3JtYW5jZSIsImNvdW50IiwicHJvY2Vzc1RyaWdnZXJOZXh0IiwidHJpZ2dlck5leHR0b0NvbXB1dGUiLCJzcGxpdHRlZFRyaWdnZXJOZXh0IiwiaW5kaXZpZHVhbFRyaWdnZXJOZXh0IiwiZmlsdGVyZWRTZWxlY3Rpb24iLCJpbmRleE9mIiwibmV3QXJyYXkiLCJQcmludFByb21wdCIsImdhbWVSZXNldCIsIm1lc3NhZ2UiLCJSZXBhcnRpdGlvbiIsImpldG9ucyIsInNldEpldG9ucyIsInNldFRlcmF3YXR0cyIsIm90aGVyUGVyZm9NZXRyaWNzIiwic2V0T3RoZXJQZXJmb01ldHJpY3MiLCJ1bml0cyIsInNldFVuaXRzIiwidG9rZW5zUGVyVW5pdCIsInNldFRva2Vuc1BlclVuaXQiLCJtYXhUb2tlbnMiLCJvcHRpb25zIiwiZ2V0T3B0aW9uUGFyYW1zIiwibmV3VW5pdHMiLCJ1bml0VmFsdWUiLCJuZXdKZXRvbnMiLCJjdXJWYWwiLCJuZXdNVyIsImN1ck9wdGlvblBhcmFtcyIsIm5ld090aGVyUGVyZm9NZXRyaWNzIiwibWVtb3J5T2JqIiwibnVjbGVhckJ1aWx0TnVtYmVyIiwibm9uVW5pcXVlIiwiaGllcmFyY2hpemVVbml0cyIsImluZGV4T2ZNYXhWYWx1ZSIsImlNYXgiLCJ4IiwiaSIsImFyciIsImNvbmNhdCIsImEiLCJTZXQiLCJzaXplIiwicHJvY2Vzc0Nob2ljZXMiLCJzcGxpdHRlZENob2ljZXMiLCJuYW1lIiwidW5pdFRXaHZhbHVlIiwidW5pdEVudmlyb3ZhbHVlIiwidW5pdFBvcHV2YWx1ZSIsImNoZWNrSGlkZUJ1dHRvbiIsIm9wdGlvblBhcmFtcyIsImhpZGVCdXR0b24iLCJtb2RpZnlPbkNsaWNrIiwiZGlmZiIsIm5ld0FkZGl0aW9uIiwidG90YWwiLCJkZWZhdWx0TmV4dCIsIm1heCIsInJlcyIsInB1c2giLCJpbmNsdWRlcyIsInVuZGVmaW5lZCIsIk1hcE5hdmlnYXRvciIsInNldHVwT25DbGljayIsInRyaWdnZXJQb2ludGVyIiwic3RhdGUiLCJ0aXAiLCJkM1RpcCIsImRpcmVjdGlvbiIsImh0bWwiLCJkIiwic3VwcF90ZXh0IiwiUHJvbWlzZSIsImFsbCIsInRoZW4iLCJiZ01hcCIsImljb25PTk1hcCIsImFwcGVuZCIsImRvY3VtZW50RWxlbWVudCIsIk9uSWNvbnNTVkciLCJjYWxsIiwiYXBwZW5kQ2hpbGQiLCJnQnV0dG9ucyIsInRpdGxlcyIsInN1cHBfdGV4dHMiLCJvbiIsImhpZGUiLCJyZXZlcnNlIiwiY3VyVGlwRGF0YSIsInN0b3BQcm9wYWdhdGlvbiIsInNob3ciLCJ0b2dnbGVJY29uIiwicGFyZW50RWxlbWVudCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpY29uT2JqIiwic3RhdHVzIiwicmVtb3ZlIiwiQmlsYW4iLCJUV2hFbnZUZXh0IiwiYmFycmFnZVRleHQiLCJjYXNoVGV4dCIsInBvcHVUZXh0IiwicHJvY2Vzc2VkQ29udGVudCIsInRleHRTdXBwQXJyYXkiLCJmaXJzdERhbUVuZXJneSIsInNlY29uZERhbUVuZXJneSIsImFkanVzdGVkUHJvZHVjdGlvblZhbHVlIiwiY3VyRG9sbGFycyIsImVudmlyb25tZW50VmFsdWUiLCJwb3B1bGFyaXRlVmFsdWUiLCJ0ZXh0Q29udGVudEFycmF5IiwiZGFtRW5lcmd5IiwiYnVpbHREYW0iLCJnZW5lcmljVGV4dCIsImxvd0Nhc2hUZXh0IiwibG93RW52VGV4dCIsImxvd1BvcFRleHQiLCJwcm9jZXNzQmlsYW4xIiwiZmluYWxCaWxhbkRhdGEiLCJidWlsdFNlY29uZERhbSIsImFjY2VwdGVkQ2h1cmNoaWxsRmFsbHNEZWFsIiwicHJpbnQiLCJFbmRHYW1lIiwicmFpc29uIiwiQ2F0YXN0cm9waGUiLCJwYXJzZUNob2ljZVZhbHVlcyIsImNob2ljZV92YWx1ZSIsInNwbGl0dGVkQ2hvaWNlVmFsdWVzIiwic3BsaWNlIiwid2hpY2hFdmVudEhhcHBlbnMiLCJQcm9tcHRCb3giLCJpbnZlc3RlZE1vZGVybml6YXRpb24iLCJzZXRNZW1vcnlPYmoiLCJnYW1lRW5kIiwicmVhc29ucyIsIm5ld1ZhbHVlIiwiZGlmZlZhbHVlIiwiaXNJbnRlZ2VyIiwiZGlmZkFycmF5IiwiZmllbGQiLCJuZXdNZW1vcnlPYmoiLCJyZW5kZXJTd2l0Y2giLCJwYXJhbSIsImVuZEdhbWUiLCJNYWluRnJhbWUiLCJnYW1lU3RhdHVzIiwic2V0U3RhdHVzIiwiZ2FtZUluZGV4Iiwic2V0R2FtZUluZGV4Iiwic2V0RG9sbGFycyIsInNldFBlcmZvcm1hbmNlIiwiYmciLCJzZXRCRyIsImdldEdhbWVQcm9tcHQiLCJmaW5kR2FtZUluZGV4IiwiSURuYW1lIiwiZ2FtZURhdGEiLCJmaW5kSW5kZXgiLCJnZXRCYWNrZ3JvdW5kSW5mbyIsImdhbWVTY3JlZW5DbGFzcyIsImJhY2tncm91bmRJbWFnZSIsIm1hcE9iaiIsIm5ld1BlcmZvcm1hbmNlIiwiYXBwbHkiLCJFbmdpbmUiLCJjb250YWluZXIiLCJpbnRyb09iaiIsInRoaXMiLCJyb290RWxlbSIsImVuZ2luZVJvb3QiLCJSZWFjdERPTSIsImluaXRFbmdpbmUiLCJzZWN0aW9uVHlwZSIsInJlbmRlciIsImluaXRpYWxpemUiLCJjb250ZW50RGF0YSIsIm1hcENvbnRhaW5lciIsInNldHVwVml6Iiwic3RydWN0dXJlRGF0YSIsInZpelNlY3Rpb25JRHMiLCJyb3dEYXRhIiwiY3VyQW1vcmNlIiwic2VjdGlvbkJhY2tncm91bmQiLCJnYW1laWQiLCJ0ZXh0cyIsInZpc3VhbCIsImZpbGVuYW1lIiwidmlzdWVsY2xhc3NlcyIsInRpdGxlT2JqIiwibWFpblRpdGxlIiwiY2xhc3MiLCJ0ZXh0Iiwic3ViVGl0bGUiLCJjdXJEYXRhIiwiYXR0cmlidXRzIiwic2Nyb2xsVHlwZSIsInN0ZXBjbGFzc2VzIiwiY3VyVml6U2VjdGlvbiIsImN1clNlY3Rpb24iLCJzZWN0aW9uQXR0ciIsImxpc3RJRCIsInN0ZXBzIiwibWVkaWFJbmZvIiwiT2JqZWN0IiwidmFsdWVzIiwiZ2V0U3RydWN0dXJlIiwic2VjdGlvbk9iaiIsInN0ZXAiLCJTY3JvbGxlclN0ZXAiLCJlbCIsImNhbGxiYWNrIiwiX2lzQWN0aXZhdGUiLCJzY3JvbGxEaXJlY3Rpb24iLCJjbGFzc0xpc3QiLCJhZGQiLCJpbml0U2Nyb2xsZXIiLCJlbGVtZW50cyIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3RpY2t5Qml0cyIsInN0aWNreUJpdFN0aWNreU9mZnNldCIsIkxhenlMb2FkIiwiZWxlbWVudHNfc2VsZWN0b3IiLCJ0aHJlc2hvbGQiLCJ2MSIsImNhbGxiYWNrcyIsIl9vZmZzZXRUb3AiLCJfb2Zmc2V0Qm90dG9tIiwiaW5uZXJIZWlnaHQiLCJpc0luaXRpYWxpemVkIiwibGFzdFNjcm9sbCIsInZpeiIsInZpc2libGVTdGVwcyIsImFydGljbGVSZW1pbmRlciIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGxQcm9ncmVzcyIsInZpelNlY3Rpb25zIiwiRXJyb3IiLCJ2aXpTZWN0aW9uIiwic2VjdGlvbnMiLCJqIiwiX3VwZGF0ZSIsImN1cnJlbnRTY3JvbGwiLCJwYWdlWU9mZnNldCIsInNjcm9sbFRvcCIsImJvdW5kaW5nUmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImhlaWdodCIsImRlYWN0aXZhdGUiLCJpc0FydGljbGVSZW1pbmRlckRpc3BsYXllZCIsImJvdHRvbSIsImlzQXJ0aWNsZVJlbWluZGVySXNWaXNpYmxlIiwiY29udGFpbnMiLCJzZWN0aW9uIiwiYWN0aXZhdGUiLCJfdXBkYXRlU2Nyb2xsUHJvZ3Jlc3MiLCJzY3JvbGxlZCIsImJvZHkiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJ3aWR0aCIsInB1YmxpY0ludGVyZmFjZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvZmZzZXRUb3AiLCJvZmZzZXRCb3R0b20iLCJzY3JvbGxlciIsImlubmVySFRNTCIsInN0cnVjdHVyZSIsImdvb2dsZV9jb25maWciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==