(self.webpackChunkscrollytelling_template=self.webpackChunkscrollytelling_template||[]).push([[179],{86702:(e,t,n)=>{"use strict";const r=JSON.parse('{"E":"<section id=\\"vizSection1_0\\" class=\\"viz-section full-page\\"><div class=\\"steps display-none\\"><section class=\\"display-none\\"><p>Hydro-Québec</p></section></div><div class=\\"viz\\" id=\\"viz\\"><div id=\\"vizSection1_0_0\\" class=\\"iframeContainer game-area\\"></div></div></section>"}');var a=n(40207),o=n(67294),c=n(25935);function i(e){var t=o.createElement("section",{className:"intro-section ".concat(e.classes)},o.createElement("h5",{className:"overTitle"},e.amorce),o.createElement("h1",null,(0,c.ZP)(e.optionData.title)),o.createElement("address",null,o.createElement("div",{className:"date"})));return e.background?o.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},t):t}var l,s=n(45697),u=n.n(s);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}u().string.isRequired,u().string.isRequired,u().oneOf(["eager","lazy"]);var p="intro-titre",d="pleine-page-titre",f="texte-classique",v="viz-section",g="centré",h=(m(l={titre:"Titre",auteurs:"Auteurs",date:"Date"},"date","Date"),m(l,"urls","LienAuteurs"),m(l,"lienfichiersource","LienFichierSource"),l);n(93162);var b=n(38682);function E(e){try{JSON.parse(e)}catch(e){return!1}return!0}function y(e){return Array.from(e.split(";")).join(" ")}function w(e){return{title:e[0][h.titre],authors:e[0][h.auteurs],urls:e[0][h.urls],date:e[0][h.date]}}n(9208);n(83731).accessToken="pk.eyJ1IjoibGVkZXZvaXIiLCJhIjoiY2p2bW81dHU2MWV1cTRhcXIzaXZqMGYxciJ9.WrIF8o69aR_TstDFu6Qyag",n(6899);var S=n(20745);function P(e){var t=function(e){return Math.abs(e)>1?"".concat(e,"&nbsp;jetons"):"".concat(e,"&nbsp;jeton")};return(0,o.useEffect)((function(){b.Ys(".gauges").selectAll(".gauge").nodes().forEach((function(t){var n=50;"dollars"===b.Ys(t).attr("id")&&(n=e.dollars);var r=n>0?Math.round(e.committed/50*100):0,a=n>0?Math.round(n/50*100):0;b.Ys(t).select(".gaugeColorHolder").select(".committed").style("width","".concat(r,"%")),b.Ys(t).select(".gaugeColor").style("width","".concat(a,"%"))}))})),o.createElement("div",{className:"gauges"},o.createElement("div",{id:"dollars",className:"gauge dollarGauge"},o.createElement("div",{className:"gaugeColorHolder ".concat(e.dollars<0?"red":"")},o.createElement("div",{className:"gaugeColor ".concat(e.dollars<0?"red":e.gaugeExplain?"lightblue":"blue")}),0!=e.committed?o.createElement("div",{className:"committed ".concat(e.dollars<0?"red":e.gaugeExplain?"lightblue":"blue")}):"",e.mission?o.createElement("div",{className:"value arrowGauge"},o.createElement("div",{className:"labelHolder"},o.createElement("p",null,o.createElement("b",null,"Budget total"))),o.createElement("div",{className:"arrow"},o.createElement("div",{className:"rect"}),o.createElement("div",{className:"rect-1"}),o.createElement("div",{className:"rect-2"})),o.createElement("div",{className:"labelHolder",style:{textAlign:"right"}},o.createElement("p",{style:{paddingRight:"7px"}},o.createElement("b",null,(0,c.ZP)(t(e.dollars)))))):e.gaugeExplain?o.createElement("div",{className:"value gaugeExplain"},o.createElement("div",{className:"budgetStamp"},o.createElement("p",null,o.createElement("b",null,"Budget"))),o.createElement("div",{className:"labelHolder"}),o.createElement("div",{className:"labelHolder",style:{textAlign:"right"}},o.createElement("p",{style:{paddingRight:"7px"}},o.createElement("b",null,(0,c.ZP)(t(e.dollars-25)))))):o.createElement("div",{className:"value basicGauge"},o.createElement("div",{className:"labelHolder"},o.createElement("p",null,o.createElement("b",null,"Budget"))),o.createElement("div",{className:"labelHolder",style:{textAlign:"right"}},o.createElement("p",{style:{paddingRight:"7px"}},o.createElement("b",null,(0,c.ZP)(t(e.dollars)))))))))}function N(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){N(o,r,a,c,i,"next",e)}function i(e){N(o,r,a,c,i,"throw",e)}c(void 0)}))}}function x(e){var t=(0,o.useCallback)(I(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.gameStart();case 1:case"end":return t.stop()}}),t)}))));return o.createElement("div",{className:"gameBox transparent"},o.createElement("div",{className:"introBox"},e.introElem),o.createElement("div",{className:"userBox"},o.createElement("div",{className:"startbutton",onClick:t},o.createElement("p",null,"Commencer le jeu"))))}function k(e){return(0,o.useEffect)((function(){e.transition&&setTimeout((function(){b.Ys(".monitoring_value").transition().duration(1e3).style("opacity",1)}),200)}),[]),o.createElement("div",{className:"monitoring"},o.createElement("div",{className:"monitoring_content"},o.createElement("div",{className:"column"},o.createElement("div",{className:"monitoring_value ".concat(e.transition?"transition":"")},o.createElement(P,{rightarrows:e.rightarrows,gaugeExplain:e.gaugeExplain,mission:e.mission,dollars:e.dollars,committed:e.committed})))),e.terawatts||0===e.terawatts?o.createElement("div",{className:"monitoring_content"},o.createElement("div",{className:"column"},o.createElement("div",{className:"monitoring_header"},o.createElement("h5",null,o.createElement("b",null,"Électricité produite")," • ",e.terawatts," TWh")))):o.createElement("div",null))}function C(e){return e.split("_").slice(1).map((function(e){return parseInt(e)}))}n(97762);var T=function(e){return 0===parseInt(e)||parseInt(e)<0?"":"ENCAISSER "};function D(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){D(o,r,a,c,i,"next",e)}function i(e){D(o,r,a,c,i,"throw",e)}c(void 0)}))}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e){console.log(e.monitoring);var t,n,r=(t=(0,o.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],i=r[1];(0,o.useEffect)((function(){}),[]),(0,o.useEffect)((function(){var e=b.td_(".choicebutton");e.select(".butn").classed("selected",!1),a?(b.Ys(a.obj).select(".butn").classed("selected",!0),e.select(".butn").style("opacity","0.5"),b.Ys(a.obj).select(".butn").style("opacity","1")):e.select(".butn").style("opacity","1")}),[a]);var l=(0,o.useCallback)(function(){var t=_(regeneratorRuntime.mark((function t(n,r,a){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(o=String(e.curPrompt.Trigger_next).split(";")).length>1?e.changePrompt(String(o[a]).replace(/(\r\n|\n|\r)/gm,"")):e.changePrompt(String(o[0]).replace(/(\r\n|\n|\r)/gm,"")),"Q2"===e.curPrompt.ID&&0===a&&e.updateMemoryObj("investedModernization",!0),"Q6"===e.curPrompt.ID&&0===a&&e.updateMemoryObj("acceptedChurchillFallsDeal",!0),e.updateDollars(parseInt(n)),e.updatePerformance(r),i(null);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),s=(0,o.useCallback)(_(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1),i(null);case 2:case"end":return t.stop()}}),t)}))));return o.createElement("div",{className:"choices",rightarrows:"Q5"===e.curPrompt.ID?"true":"false"},o.createElement("div",{className:"row"},e.choices.map((function(t,n){var r,l=e.choices_values[n].split("_")[0],s=C(e.choices_values[n]);return o.createElement("div",{className:"choicebutton",key:n,onClick:function(e){!function(e,t,n,r){i({obj:e.target,cost:parseInt(t),performance:n,index:r})}(e,l,s,n)}},o.createElement("div",{id:n,className:"butn"},o.createElement("div",{className:"holder icon"},o.createElement("img",{src:a&&a.index===n?"./assets/img/Off.svg":"./assets/img/On.svg"})),o.createElement("div",{className:"holder label"},o.createElement("h4",null,(0,c.ZP)(t)),e.choices_values.map((function(e,t){return parseInt(e.split("_")[0])})).filter((function(e){return!Number.isNaN(e)})).every((function(e){return 0===e}))?"":o.createElement("p",null,(0,c.ZP)((r=l,Math.abs(r)>1?"".concat(T(r)).concat(Math.abs(r),"&nbsp;JETONS"):"".concat(T(r)).concat(Math.abs(r),"&nbsp;JETON"))))),o.createElement("div",{className:"arrowsChoices"},o.createElement("span",null,"⟶"))))}))),o.createElement(k,{showTWh:!1,dollars:a&&a.hasOwnProperty("cost")?parseInt(e.gauges.props.dollars)+parseInt(a.cost):e.gauges.props.dollars,committed:a&&a.hasOwnProperty("cost")&&parseInt(a.cost)<0?Math.abs(a.cost):0,performance:e.gauges.props.performance}),o.createElement("div",{className:"row"},o.createElement("div",{className:"column"},e.curIndex>0?o.createElement("div",{className:"actionbutton prev",onClick:s},o.createElement("div",{className:"butn"},o.createElement("p",null,"Previous"))):o.createElement("div",null)),o.createElement("div",{className:"column"},o.createElement("div",{className:"actionbutton next ".concat(a?"":"disabled"),onClick:function(){a?l(a.cost,a.performance,a.index):console.log("")}},o.createElement("div",{className:"butn"},o.createElement("p",null,"Poursuivre"))))))}function j(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){j(o,r,a,c,i,"next",e)}function i(e){j(o,r,a,c,i,"throw",e)}c(void 0)}))}}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e){var t=M((0,o.useState)([]),2),n=t[0],r=t[1];(0,o.useEffect)((function(){a()}),[]),(0,o.useEffect)((function(){}),[n]);var a=function(){r(e.choices.map((function(e){return null})))},i=function(e){var t=e.reduce((function(e,t){return t&&(e+=t.cost),e}),0),n=[0,0,0];return e.forEach((function(e,t){e&&(n=n.map((function(t,n){return parseInt(t)+parseInt(e.performance[n])})))})),[t,n]},l=(0,o.useCallback)(function(){var t=R(regeneratorRuntime.mark((function t(n){var r,o,c,l,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.curPrompt.Trigger_next,e.changePrompt(u(r)),o=i(n),c=M(o,2),l=c[0],s=c[1],e.updateDollars(parseInt(l)),e.updatePerformance(s),a();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),s=(0,o.useCallback)(R(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1),a();case 2:case"end":return t.stop()}}),t)})))),u=function(e){var t=String(e).split("_"),r=String(t[0]).split(";"),a=n.filter((function(e){return null!==e}));return(t.length>1&&a.length>0?a.length>1?String(t[1]):String(r[n.indexOf(a[0])]):String(t[0])).replace(/(\r\n|\n|\r)/gm,"")};return o.createElement("div",{className:"choices"},o.createElement("div",{className:"row"},e.choices.map((function(t,a){var i,l=e.choices_values[a].split("_")[0],s=C(e.choices_values[a]);return o.createElement("div",{className:"selectionbutton",key:a,onClick:function(e){!function(e,t,a,o){var c,i=function(e){if(Array.isArray(e))return H(e)}(c=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||B(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n[t]?i[t]=null:i[t]={obj:e.target,cost:parseInt(a),performance:o},r(i)}(e,a,l,s)}},o.createElement("div",{id:a,className:"butn ".concat(n[a]?"selected":"")},o.createElement("div",{className:"holder icon ".concat(n[a]?"selected":"")},o.createElement("img",{src:n[a]?"assets/img/Plus-Off.svg":"assets/img/Plus-On.svg"})),o.createElement("div",{className:"holder label"},o.createElement("h4",null,(0,c.ZP)(t)),e.choices_values.map((function(e,t){return parseInt(e.split("_")[0])})).filter((function(e){return!Number.isNaN(e)})).every((function(e){return 0===e}))?"":o.createElement("p",null,(0,c.ZP)((i=l,Math.abs(i)>1?"".concat(T(i)).concat(Math.abs(i),"&nbsp;JETONS"):"".concat(T(i)).concat(Math.abs(i),"&nbsp;JETON")))))))}))),o.createElement(k,{showTWh:!1,dollars:n&&n.length>0?parseInt(e.gauges.props.dollars)+parseInt(i(n)[0]):e.gauges.props.dollars,committed:n&&n.length>0&&parseInt(i(n)[0])<0?Math.abs(parseInt(i(n)[0])):0}),o.createElement("div",{className:"row"},o.createElement("div",{className:"column"},e.curIndex>0?o.createElement("div",{className:"actionbutton prev",onClick:s},o.createElement("div",{className:"butn"},o.createElement("p",null,"Previous"))):o.createElement("div",null)),o.createElement("div",{className:"column"},o.createElement("div",{className:"actionbutton next ".concat(n?"":"disabled"),onClick:function(){n?l(n):console.log("")}},o.createElement("div",{className:"butn"},o.createElement("p",null,"Poursuivre"))))))}function z(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){z(o,r,a,c,i,"next",e)}function i(e){z(o,r,a,c,i,"throw",e)}c(void 0)}))}}function Z(e){var t=(0,o.useCallback)(L(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1);case 1:case"end":return t.stop()}}),t)})))),n=(0,o.useCallback)(L(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,e.changePrompt(n);case 2:case"end":return t.stop()}}),t)})))),r=(0,o.useCallback)(L(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.gameReset();case 1:case"end":return t.stop()}}),t)}))));return o.createElement("div",{className:"printprompt"},""!==e.message?o.createElement("div",{className:"message"},o.createElement("p",null,e.message)):"","1"===e.curIndex?o.createElement(k,{mission:!0,transition:!0,showTWh:!1,dollars:e.gauges.props.dollars,committed:0,performance:e.gauges.props.performance}):"",o.createElement("div",{className:"actionbutton prev",onClick:t},o.createElement("div",{className:"butn"},o.createElement("p",null,"Previous"))),"STARTOVER"===e.curPrompt.Trigger_next?o.createElement("div",{className:"actionbutton next",onClick:r},o.createElement("div",{className:"butn"},o.createElement("p",null,"Recommencer"))):o.createElement("div",{className:"actionbutton next",onClick:n},o.createElement("div",{className:"butn"},o.createElement("p",null,"Poursuivre"))))}function V(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){W(o,r,a,c,i,"next",e)}function i(e){W(o,r,a,c,i,"throw",e)}c(void 0)}))}}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e){var t=q((0,o.useState)(0),2),n=t[0],r=t[1],a=q((0,o.useState)(0),2),i=a[0],l=a[1],s=q((0,o.useState)([0,0]),2),u=s[0],m=s[1],p=q((0,o.useState)([]),2),d=p[0],f=p[1],v=q((0,o.useState)([]),2),g=v[0],h=v[1],b="Q1"===e.curPrompt.ID?25:50;(0,o.useEffect)((function(){var e=P(),t=e.map((function(){return 0})),n=e.map((function(e){return Math.abs(e.unitValue)}));f(t),h(n)}),[]),(0,o.useEffect)((function(){var e=d.reduce((function(e,t,n){return P()[n],e+Math.abs(t)}),0),t=d.reduce((function(e,t,n){var r=P()[n];return e+Math.round(Math.abs(t/r.unitValue)*r.unitTWhvalue)}),0),n=[0,0];d.forEach((function(e,t){var r=P()[t];n=n.map((function(t,n){return 0===n?t+Math.abs(e/r.unitValue)*r.unitEnvirovalue:1===n?t+Math.abs(e/r.unitValue)*r.unitPopuvalue:void 0}))})),r(e),l(t),m(n)}),[d]);var E=(0,o.useCallback)(U(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1);case 1:case"end":return t.stop()}}),t)})))),y=(0,o.useCallback)(U(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=String(e.curPrompt.Trigger_next).split("_"),a=String(r[0]).split(";"),"Q1"===e.curPrompt.ID&&d[0]>0?e.updateMemoryObj("builtDam",!0):d[0]>0&&e.updateMemoryObj("builtSecondDam",!0),d[2]>0?e.changePrompt(String(a[2]).replace(/(\r\n|\n|\r)/gm,"")):1==a.length?e.changePrompt(String(a).replace(/(\r\n|\n|\r)/gm,"")):a.length>1&&(w(d)?e.changePrompt(x(a,r[1])):(o=d.reduce((function(e,t,n,r){return t>r[e]?n:e}),0),e.changePrompt(String(a[o]).replace(/(\r\n|\n|\r)/gm,"")))),e.updateDollars(-n),e.updatePerformance([i].concat(u));case 6:case"end":return t.stop()}}),t)})))),w=function(e){return new Set(e).size!==e.length},S=function(e,t){var n=t.split("_");return{name:e,unitValue:parseInt(n[0]),unitTWhvalue:parseInt(n[1]),unitEnvirovalue:parseInt(n[2]),unitPopuvalue:parseInt(n[3])}},P=function(){return e.choices.map((function(t,n){return S(t,e.choices_values[n])}))},N=function(e){var t=P()[e],r=[!1,!1];return 0===Math.abs(d[e])&&(r[0]=!0),n+parseInt(Math.abs(t.unitValue))>b&&(r[1]=!0),r},I=function(e,t,n,r){var a,o,c=V(d);c[t]+n*g[t]>=0&&(n>0?(a=n*g[t],o=0,d.forEach((function(e,t){o+=e})),o+a>b||(c[t]=c[t]+n*g[t])):c[t]=c[t]+n*g[t],f(c))},x=function(e,t){var n=Math.max.apply(Math,V(d)),r=[];return d.forEach((function(e,t){return e===n?r.push(t):null})),(r.length>1?r.includes(0)?String(e[0]):r.includes(1)?String(e[1]):String(t):String(e[r[0]])).replace(/(\r\n|\n|\r)/gm,"")};return o.createElement("div",{className:"repartition"},o.createElement("div",{className:"optionZone"},e.choices.map((function(t,n){return S(t,e.choices_values[n])})).map((function(e,t){return o.createElement("div",{className:"optionUnit",key:t},o.createElement("div",{className:"selectorZone"},o.createElement("div",{className:"division minusZone ".concat(N(t)[0]?"disabled":""),onClick:function(e){return I(0,t,-1)}},o.createElement("h3",null,"-")),o.createElement("div",{className:"division centralZone"},void 0===d[t]||0===d[t]?o.createElement("img",{src:"assets/img/".concat((r=t,["Hydro.svg","Eolien.svg","Nucleaire.svg","Solaire.svg","Modernisation.svg"][r]))}):o.createElement("h3",null,d[t])),o.createElement("div",{className:"division plusZone ".concat(N(t)[1]?"disabled":""),onClick:function(e){return I(0,t,1)}},o.createElement("h3",null,"+"))),o.createElement("div",{className:"textZone"},o.createElement("h3",null,e.name),o.createElement("div",{className:"inlinetext"},o.createElement("p",null,(0,c.ZP)((n=e.unitValue,Math.abs(n)>1?"".concat(Math.abs(n),"&nbsp;jetons"):"".concat(Math.abs(n),"&nbsp;jeton")))," • ",e.unitTWhvalue," TWh"))));var n,r}))),o.createElement(k,{gaugeExplain:"Q1"===e.curPrompt.ID,showTWh:!0,dollars:e.gauges.props.dollars-n,committed:n,terawatts:i}),e.curIndex>0?o.createElement("div",{className:"actionbutton prev",onClick:E},o.createElement("div",{className:"butn"},o.createElement("p",null,"Previous"))):o.createElement("div",null),o.createElement("div",{className:"actionbutton next ".concat(n>0?"":"disabled"),onClick:y},o.createElement("div",{className:"butn"},o.createElement("p",null,"Poursuivre"))))}var G=n(83290);function J(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){J(o,r,a,c,i,"next",e)}function i(e){J(o,r,a,c,i,"throw",e)}c(void 0)}))}}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e){var t=K((0,o.useState)(null),2),n=t[0],r=t[1];(0,o.useEffect)((function(){i()}),[]),(0,o.useEffect)((function(){n?b.Ys(".popUp-bg").style("display","unset"):b.Ys(".popUp-bg").style("display","none")}),[n]);var a=function(e,t){b.Ys(e).style("cursor",t?"pointer":null)},c=(0,G.Z)().attr("class","d3-tip adjusted").direction("n").html((function(e){return"\n                  <h4>".concat(e.title,"</h4>\n                  <p>").concat(e.supp_text,"</p>\n                  ")})),i=function(){Promise.all([b.LsS(e.map[0]),b.LsS(e.map[1])]).then((function(t){var n=K(t,2),r=n[0],o=n[1];b.Ys("#bg-map").node().append(r.documentElement),b.Ys("#on-icons").node().append(o.documentElement);var i=b.Ys("#on-icons").select("svg");i.call(c),b.Ys(".gameScreen").node().appendChild(b.Ys(".d3-tip").node());var s=i.select("#Icone-On").selectAll("g"),u=String(e.curPrompt.Choix_insecables).split(":"),m=String(e.message).split(";");b.Ys(".gameBox").on("click",(function(){c.hide()})),s.nodes().reverse().map((function(e,t){var n={title:u[t],supp_text:m[t]};b.Ys(e).on("click",(function(t,r,a){t.stopPropagation(),c.show(n,e),l(t.target.parentElement,!1),c.style("pointer-events","stroke")})).on("mouseover",(function(e,t,n){a(e.target.parentElement,!0),l(e.target.parentElement,!1)})).on("mouseout",(function(e,t,n){a(e.target.parentElement,!1),l(e.target.parentElement,!0),window.innerWidth<576&&c.hide()}))}))}))},l=function(e,t){!1===t?b.Ys(e).style("opacity",0):b.Ys(e).style("opacity",1)},s=(0,o.useCallback)($(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1);case 1:case"end":return t.stop()}}),t)})))),u=(0,o.useCallback)($(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,b.Ys(".gameScreen").select(".d3-tip").remove(),e.changePrompt(n);case 3:case"end":return t.stop()}}),t)}))));return o.createElement("div",{className:"printprompt mapnavigator"},o.createElement("div",{className:"popUp-bg"},n?o.createElement("div",{className:"popUp-box"},o.createElement("h4",null,parse(n.title)),o.createElement("p",null,parse(n.supp_text)),o.createElement("div",{className:"actionbutton",onClick:function(){return r(null)}},o.createElement("div",{className:"butn"},o.createElement("p",null,"Fermer")))):o.createElement("div",null)),o.createElement("div",{className:"mapHolder"},o.createElement("div",{className:"superposedMap"},o.createElement("div",{id:"bg-map",className:"map noClick"}),o.createElement("div",{id:"on-icons",className:"map"}))),o.createElement("div",{className:"actionbutton prev",onClick:s},o.createElement("div",{className:"butn"},o.createElement("p",null,"Previous"))),o.createElement("div",{className:"actionbutton next",onClick:u},o.createElement("div",{className:"butn"},o.createElement("p",null,"Suivant"))))}function ne(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ne(o,r,a,c,i,"next",e)}function i(e){ne(o,r,a,c,i,"throw",e)}c(void 0)}))}}function ae(e){(0,o.useEffect)((function(){}),[]);var t,n,r,a,i,l,s,u,m,p,d,f,v=(0,o.useCallback)(re(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,e.changePrompt(n);case 2:case"end":return t.stop()}}),t)}))));return o.createElement("div",{className:"bilanContent"},o.createElement("div",{className:"updatableText"},"B1"===e.curPrompt.ID?function(){var t=e.curPrompt.Texte.split(";"),n=e.curPrompt.Texte_Supp.split(";"),r=[],a=e.memoryObj.builtDam?9:0,o=parseInt(e.performance[0])-a,c=parseInt(e.gauges.props.dollars),i=t[0].replace("*newProd*",o+"&nbsp;TWh").replace("*augmentediminue*",o<0?"diminué":"augmenté").replace("*suffisanteinsuffisante*",o<10?"insuffisante":"suffisante");if(r.push(i),e.memoryObj.builtDam){var l=n[0].split(":")[1].replace("*damTWh*",9);r.push(l)}if(c<15){var s=n[1].split(":")[1];r.push(s)}if(parseInt(e.performance[1])<0){var u=n[2].split(":")[1];r.push(u)}if(parseInt(e.performance[2])<0){var m=n[3].split(":")[1];r.push(m)}return r}().map((function(e,t){return o.createElement("p",{key:t},(0,c.ZP)(e))})):(i=[],e.curPrompt.Texte.split(";"),l=e.finalBilanData,s=e.memoryObj.builtDam?9:0,u=e.memoryObj.builtSecondDam?9:0,m=parseInt(e.performance[0])-u-s,p=parseInt(e.gauges.props.dollars),d=parseInt(e.performance[1]),f=parseInt(e.performance[2]),t=(t=m>=25&&d>0&&e.memoryObj.acceptedChurchillFallsDeal?l[0].print:m>=25&&d>0&&!e.memoryObj.acceptedChurchillFallsDeal?l[1].print:m<25&&d>0?l[2].print:m>=25&&d<=0&&e.memoryObj.acceptedChurchillFallsDeal?l[3].print:m>=25&&d<=0&&!e.memoryObj.acceptedChurchillFallsDeal?l[4].print:l[5].print).replace("*augmentediminue*",m<0?"diminué":"augmenté").replace("*newProd*",m+"&nbsp;TWh"),i.push(t),(e.memoryObj.builtDam||e.memoryObj.builtSecondDam)&&(e.memoryObj.builtDam&&e.memoryObj.builtSecondDam?n=l[9].print:e.memoryObj.builtDam?n=l[7].print:e.memoryObj.builtSecondDam&&(n=l[8].print),i.push(n)),r=p>=5?l[11].print:l[12].print,i.push(r),a=f>=4?l[14].print:f>=-2&&f<4?l[15].print:l[16].print,i.push(a),i).map((function(e,t){return o.createElement("p",{key:t},(0,c.ZP)(e))}))),o.createElement("div",{className:"actionbutton next",onClick:v},o.createElement("div",{className:"butn"},o.createElement("p",null,"Poursuivre"))))}function oe(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){oe(o,r,a,c,i,"next",e)}function i(e){oe(o,r,a,c,i,"throw",e)}c(void 0)}))}}function ie(e){var t=(0,o.useCallback)(ce(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.gameReset();case 1:case"end":return t.stop()}}),t)}))));return o.createElement("div",{className:"promptBox"},o.createElement("div",{className:"header"},o.createElement("div",{className:"surtitre"},o.createElement("h4",null,"Fin du jeu")),o.createElement("div",{className:"question"},o.createElement("p",null,"Le CA d'Hydro-Québec vote à l'unanimité pour vous démettre de vos fonctions.","".concat(e.raison),o.createElement("br",null),o.createElement("br",null),"Tentez votre chance de nouveau."))),o.createElement("div",{className:"actionSection"},o.createElement("div",{className:"actionbutton next",onClick:t},o.createElement("div",{className:"butn"},o.createElement("p",null,"Recommencer")))))}function le(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function se(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){le(o,r,a,c,i,"next",e)}function i(e){le(o,r,a,c,i,"throw",e)}c(void 0)}))}}function ue(e){var t=(0,o.useCallback)(se(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&e.changePrompt(e.curIndex-1);case 1:case"end":return t.stop()}}),t)})))),n=(0,o.useCallback)(function(){var t=se(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.curPrompt.Trigger_next,e.changePrompt(a),e.updateDollars(parseInt(n)),e.updatePerformance(r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),r=function(e){var t=String(e).split("_");return{cost:t[0],performance:t.splice(1)}};return o.createElement("div",{className:"printprompt"},o.createElement("div",{className:"message"},o.createElement("p",null,(0,c.ZP)(e.choices[e.whichEventHappens]))),o.createElement("div",{className:"actionbutton prev",onClick:t},o.createElement("div",{className:"butn"},o.createElement("p",null,"Previous"))),o.createElement("div",{className:"actionbutton next",onClick:function(){return n(r(e.choices_values[e.whichEventHappens]).cost,r(e.choices_values[e.whichEventHappens]).performance)}},o.createElement("div",{className:"butn"},o.createElement("p",null,"Poursuivre"))))}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){fe(o,r,a,c,i,"next",e)}function i(e){fe(o,r,a,c,i,"throw",e)}c(void 0)}))}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function he(e){var t,n,r=(t=(0,o.useState)({investedModernization:!1,builtDam:!1,builtSecondDam:!1,acceptedChurchillFallsDeal:!1,builtNuclear:!1,nuclearBuiltNumber:0}),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],i=r[1];(0,o.useEffect)((function(){}),[]);var l,s=(0,o.useCallback)(ve(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i({investedModernization:!1,builtDam:!1,builtSecondDam:!1,acceptedChurchillFallsDeal:!1,builtNuclear:!1,nuclearBuiltNumber:0}),e.gameReset();case 2:case"end":return t.stop()}}),t)})))),u=(0,o.useCallback)(function(){var t=ve(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.changePrompt(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),m=(0,o.useCallback)(function(){var t=ve(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Number.isInteger(n)&&e.updateDollars(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),p=(0,o.useCallback)(function(){var t=ve(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.updatePerformance(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),d=(0,o.useCallback)(function(){var e=ve(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=pe({},a))[t]=n,i(r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),f=function(t){switch(t){case"Repartition":return o.createElement(X,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix_insecables).split(":"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:u,curIndex:e.curIndex,updateDollars:m,updatePerformance:p,updateMemoryObj:d,gauges:e.gauges});case"Carte":return o.createElement(te,{curPrompt:e.curPrompt,message:String(e.curPrompt.Texte_Supp),changePrompt:u,curIndex:e.curIndex,map:"Q1-1"===e.curIndex?["assets/img/Carte-Hydro.svg","assets/img/Carte-Hydro-icone-on.svg"]:["assets/img/Carte-Eolien.svg","assets/img/Carte-Eolien-icone-on.svg"]});case"texteBoutonSimple":return o.createElement(Z,{curPrompt:e.curPrompt,message:String(e.curPrompt.Texte_Supp),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:u,curIndex:e.curIndex,gauges:e.gauges,gameReset:s});case"ChoixReponse":return o.createElement(A,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix_insecables).split(":"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:u,curIndex:e.curIndex,updateDollars:m,updatePerformance:p,updateMemoryObj:d,gauges:e.gauges});case"Catastrophe":return o.createElement(ue,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix_insecables).split(":"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),whichEventHappens:a.investedModernization?1:0,changePrompt:u,curIndex:e.curIndex,updateDollars:m,updatePerformance:p});case"MultiSelection":return o.createElement(Y,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix_insecables).split(":"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:u,curIndex:e.curIndex,updateDollars:m,updatePerformance:p,gauges:e.gauges});case"Bilan":return o.createElement(ae,{curPrompt:e.curPrompt,curIndex:e.curIndex,changePrompt:u,updateDollars:m,updatePerformance:p,performance:e.performance,memoryObj:a,gauges:e.gauges,finalBilanData:e.finalBilanData});default:return o.createElement(A,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix_insecables).split(":"),changePrompt:u,curIndex:e.curIndex})}};return!0===e.endGame?o.createElement("div",{className:"gameBox"},o.createElement(ie,{raison:(l=[],console.log(a),e.gauges.props.dollars<0?l.push(" Vous avez vidé les coffres de la société d'État. "):e.performance[1]<-9?l.push(" Votre vision va à l'encontre de l'objectif de carboneutralité du Québec. "):e.performance[2]<-9&&l.push(" La population conteste votre vision pour le futur énergétique du Québec. "),l),gameReset:s})):o.createElement("div",{className:"gameBox"},"Bilan"===e.curPrompt.Type?o.createElement("div",{className:"promptBox bilan"},o.createElement("div",{className:"header"},o.createElement("div",{className:"massiveTitle"},o.createElement("h2",null,(0,c.ZP)(e.curPrompt.Sujet)))),o.createElement("div",{className:"separator"}),f(e.curPrompt.Type)):o.createElement("div",{className:"promptBox"},o.createElement("div",{className:"header"},o.createElement("div",{className:"surtitre"},o.createElement("h4",null,(0,c.ZP)(e.curPrompt.Sujet))),o.createElement("div",{className:"question"},o.createElement("p",null,(0,c.ZP)(e.curPrompt.Texte)))),f(e.curPrompt.Type)))}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e){var t=be((0,o.useState)("IDLE"),2),n=t[0],r=t[1],a=be((0,o.useState)(0),2),c=a[0],i=a[1],l=be((0,o.useState)(50),2),s=l[0],u=l[1],m=be((0,o.useState)([0,0,0]),2),p=m[0],d=m[1],f=be((0,o.useState)("normal"),2),v=f[0],g=f[1];(0,o.useEffect)((function(){}),[n]),(0,o.useEffect)((function(){b(c),"END"===c&&h()}),[c]);var h=function(){r("END")},b=function(e){},E=function(t){return e.gameData.findIndex((function(e){return String(t)===String(e.ID)}))};(0,o.useEffect)((function(){var t=e.gameData[E(c)];t&&t.hasOwnProperty("Background")&&("redpink"===t.Background?g("redpink"):"normal"!==v&&g("normal"))}));var y=function(){var t="END"===n||"END"===c||"redpink"===v?"gameOver":"",r=e.gameData[E(c)];return{gameScreenClass:t,backgroundImage:r?"pylone"===r.Background?"Illus_Section-01_Pylone_V01-14.svg":"ampoule"===r.Background?"Illus_Section-02_Ampoule_V02.svg":"centrale"===r.Background?"Illus_Section-00_Centrale_V01.svg":null:null}};return"IDLE"===n?o.createElement("div",{className:"gameScreen"},o.createElement("div",{className:"background-image"},o.createElement("img",{src:"assets/img/Illus_Section-00_Centrale_V01.svg"})),o.createElement(x,{introElem:e.introElem,mapObj:e.mapObj,gameStart:function(){r("STARTED"),i(0)}})):o.createElement("div",{className:"gameScreen ".concat(y().gameScreenClass)},"gameOver"!==y().gameScreenClass&&null!==y().backgroundImage?o.createElement("div",{className:"background-image"},o.createElement("img",{src:"assets/img/".concat(y().backgroundImage),className:"no-mobile"})):"",o.createElement("div",{className:"temporaryInfo"},o.createElement("p",null,"Performance (temporaire)"),o.createElement("p",null,"Dollars: ","".concat(s," $")),o.createElement("p",null,"Elec: ","".concat(p[0]," TWh")),o.createElement("p",null,"Enviro: ","".concat(p[1]," pts")),o.createElement("p",null,"Popu: ","".concat(p[2]," pts"))),o.createElement(he,{curIndex:c,curPrompt:"END"===c?"":e.gameData[E(c)],changePrompt:i,updateDollars:function(e){u((function(t){return t+e})),s+e<0&&h()},updatePerformance:function(e){var t=Array.apply(null,Array(e.length)).map((function(){}));p.forEach((function(n,r){t[r]=parseInt(n)+parseInt(e[r])})),d(t),(t[1]<=-9||t[2]<=-9)&&h()},gauges:o.createElement(P,{dollars:s}),performance:p,endGame:"END"===c||"END"===n,finalBilanData:e.finalBilanData,gameReset:function(){u(50),d([0,0,0]),r("IDLE"),i(0)}}))}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Se=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t;var o=this.container.append("div").classed("rootElem",!0);this.engineRoot=S.createRoot(o.node()),this.optionData=n,this.amorce=r.TEXTE,this.gameData=a,this.initEngine()}var t,n;return t=e,(n=[{key:"initEngine",value:function(){var e=o.createElement(i,{key:"gameIntro",sectionType:p,optionData:this.optionData,amorce:this.amorce,background:null,classes:""});this.engineRoot.render(o.createElement(ye,{introElem:e,gameStatus:this.gameStatus,gameData:this.gameData[0],finalBilanData:this.gameData[1]}))}}])&&we(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Pe(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Pe(o,r,a,c,i,"next",e)}function i(e){Pe(o,r,a,c,i,"throw",e)}c(void 0)}))}}function Ie(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Ne(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([b.gyn("https://docs.google.com/spreadsheets/d/e/2PACX-1vQQZ3sz0q1vnZmoYYR5IrCfuONhHcNw50iDtbg1H2mIX8lHDL1BQ4sAMi7iApSE1G9WQTW2jHcWv4KW/pub?gid=1497861017&single=true&output=csv"),b.gyn("https://docs.google.com/spreadsheets/d/e/2PACX-1vQQZ3sz0q1vnZmoYYR5IrCfuONhHcNw50iDtbg1H2mIX8lHDL1BQ4sAMi7iApSE1G9WQTW2jHcWv4KW/pub?gid=2005637736&single=true&output=csv")]).then((function(e){var r=b.Ys(".game-area");return new Se(r,w(n),t[0],e),ke(t,n),[[function(){}]]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t){(function(e,t){var n={},r=[],a=w(t);return e.map((function(e,t){if(e.Section===p){var o=e.StepClasses,c=e.TEXTE,i=e.StyleFond;n[e.SectionID]={key:t,sectionType:p,optionData:a,amorce:c,background:i,classes:y(o),gameid:e.GameID}}else if(e.Section===f){var l=e.TEXTE,s=e.StepClasses,u=e.StyleFond;n[e.SectionID]={key:t,sectionType:f,texts:l,visual:e.VISUEL,filename:e.NomFichierSource,background:u,classes:y(s),visuelclasses:y(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===d){var m=e.TEXTE;E(e.TEXTE)&&(m=JSON.parse(e.TEXTE)),n[e.SectionID]={key:t,sectionType:d,texts:E(e.TEXTE)?m:{mainTitle:{class:"",text:m},subTitle:null},visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,classes:y(e.StepClasses),visuelclasses:y(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===v){var g={attributs:e.Attributs,scrollType:e.Step,text:e.TEXTE,visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,visuelclasses:y(e.VisuelClasses),stepclasses:y(e.StepClasses),gameid:e.GameID};if(n.hasOwnProperty(e.SectionID)){var h=n[e.SectionID];h.push(g),n[e.SectionID]=h}else n[e.SectionID]=[g],r.push(e.SectionID)}})),r.map((function(e){var t=n[e],r=t[0].attributs===g?" full-page":"",a=t[0].background;n[e]={key:e,sectionType:v,listID:e,steps:t,classed:"viz-section".concat(r),mediaInfo:0,background:a}})),Object.values(n)})(e,t).map((function(e){"viz-section"===e.sectionType&&e.steps.map((function(t,n){""!==t.visual&&(0===n?b.Ys("#".concat(e.key,"_").concat(n)).style("opacity",1):b.Ys("#".concat(e.key,"_").concat(n)).style("opacity",0))}))}))}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var De=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.index=n,this.callback=r,this._isActivate=!1}var t,n;return t=e,(n=[{key:"activate",value:function(e){this._isActivate||(this._isActivate=!0,this.el.classList.add("active"),this.callback(e))}},{key:"deactivate",value:function(){this._isActivate&&(this._isActivate=!1,this.el.classList.remove("active"))}}])&&Te(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_e=n(52732),Oe=n.n(_e),Ae=n(89438);function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Re(e,t){var n=[];[".viz",".full-page-section > img",".full-page-section > video"].forEach((function(e){n=n.concat(Array.from(document.querySelectorAll(e)))})),(0,Ae.Z)(n,{stickyBitStickyOffset:40}),new(Oe())({elements_selector:".lazy",threshold:500}),Promise.all([Ie(e,t)]).then((function(e){var t,n;(function(e){var t=0,n=0,r=window.innerHeight,a=!1,o=0,c=[],i=[],l=[],s=document.querySelector(".article-reminder"),u=document.querySelector("header > .progress"),m=document.querySelector(".intro-section h1"),p=document.querySelectorAll(".viz-section");if(p.length!==e.length)throw new Error("The number of viz sections (".concat(p.length,") mismatch with the length of the first ")+"dimension of the callbacks array (".concat(e.length,"). Please, be sure that the two elements ")+"have the same size.");p.forEach((function(t,n){var r,a=function(e){if(Array.isArray(e))return Ce(e)}(r=t.querySelectorAll("section"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(a.length!==e[n].length)throw new Error("The number of steps (".concat(a.length,") in the viz section #").concat(n+1," mismatch with the ")+"number of callbacks specified (".concat(e[n].length,') at the index "').concat(n,'". Please, be sure that the two ')+"elements have the same size.");c=c.concat(a.map((function(t,r){return new De(t,"".concat(n,"-").concat(r),e[n][r])}))),i=i.concat(i,t.querySelector(".viz > *"))}));var d=function(){var e=window.pageYOffset||document.documentElement.scrollTop;c.forEach((function(e){var a=e.el.getBoundingClientRect();r-a.top-n>0&&a.top+a.height-t>0?l.push(e):e.deactivate()}));var a=m.getBoundingClientRect().bottom<=0,i=s.classList.contains("visible");a&&!i?s.classList.add("visible"):!a&&i&&s.classList.remove("visible"),l.forEach((function(t,n){e>=o?n===l.length-1?t.activate("down"):t.deactivate():0===n?t.activate("up"):t.deactivate()})),f(),l=[],o=e},f=function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;u.style.width=e+"%"},v={initialize:function(){if(a)throw new Error("The scroller is already initialized.");return a=!0,window.addEventListener("scroll",d),window.addEventListener("resize",(function(){r=window.innerHeight,f()})),(window.pageYOffset||document.documentElement.scrollTop)>0&&d(),f(),v},offsetTop:function(e){if(void 0===e)return t;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return t=e,v},offsetBottom:function(e){if(void 0===e)return n;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return n=e,v}};return v})((t=e,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]).offsetTop(40).offsetBottom(0).initialize()}))}document.querySelector("#root").innerHTML=r.E,b.gyn(a.google_config.localContentURL).then((function(e){b.gyn(a.google_config.localParamsURL).then((function(t){Re(e,t),document.querySelector("#footerContainer").innerHTML=b.Ys("#footerContent").node().innerHTML}))}))},40207:e=>{e.exports={google_config:{contentURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=0&single=true&output=csv",paramsURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=409950237&single=true&output=csv",localContentURL:"./data/structure/contentData.csv",localParamsURL:"./data/structure/paramsData.csv"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[216],(()=>(t(28594),t(35666),t(86702)))),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixVQzdGNUZHLEVBQU9DLFFBQVUsQ0FBQ0YsY0FQSSxDQUNsQixXQUFjLG1LQUNkLFVBQWEsMktBQ2IsZ0JBQW1CLG1DQUNuQixlQUFrQixzQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9jb21wb25lbnRzL0ludHJvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvY29tcG9uZW50cy9EV0NoYXJ0LmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nZW5lcmF0b3IvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nZW5lcmF0b3Ivc3RydWN0dXJlR2VuZXJhdG9yLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4uL2xlZGV2b2lyLWRhdGF2aXovc3JjL21hcHMvaW50ZXJhY3RpdmUtbWFwLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4uL2xlZGV2b2lyLWRhdGF2aXovc3JjL2dyYXBocy9zdGFja2VkQXJlYUNoYXJ0LmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvZ2F1Z2VzL0dhdWdlcy5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL2ludHJvQm94LmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvZ2F1Z2VzL01vbml0b3JpbmcuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL3V0aWxzLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9DaG9pY2UuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL011bHRpU2VsZWN0aW9uLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9QcmludFByb21wdC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL3Byb21wdGZpbGwvUmVwYXJ0aXRpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL01hcE5hdmlnYXRvci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL3Byb21wdGZpbGwvQmlsYW4uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL0VuZEdhbWUuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL0NhdGFzdHJvcGhlLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvUHJvbXB0Qm94LmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvbWFpbmZyYW1lLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2VuZ2luZS5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvdml6LmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9zY3JvbGxlci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL2luaXRTY3JvbGxlci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvYXBwLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2RhdGEvZ29vZ2xlX2NvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgcGFyc2UgZnJvbSBcImh0bWwtcmVhY3QtcGFyc2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnRyb1NlY3Rpb24ocHJvcHMpe1xuXG5cbiAgICBsZXQgaW50cm9TZWN0aW9uT2JqID0gKFxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9e2BpbnRyby1zZWN0aW9uICR7cHJvcHMuY2xhc3Nlc31gfT5cbiAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJvdmVyVGl0bGVcIj5cbiAgICAgICAgICAgICAge3Byb3BzLmFtb3JjZX1cbiAgICAgICAgICAgIDwvaDU+XG4gICAgICAgICAgICA8aDE+e3BhcnNlKHByb3BzLm9wdGlvbkRhdGEudGl0bGUpfTwvaDE+XG4gICAgICAgICAgICA8YWRkcmVzcz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRhdGVcIj48L2Rpdj5cbiAgICAgICAgICAgIDwvYWRkcmVzcz5cbiAgICAgICAgPC9zZWN0aW9uPlxuICAgICk7XG4gICAgbGV0IGNvbnRhaW5lZE9iaiA9IHByb3BzLmJhY2tncm91bmQgP1xuICAgICAgICAoXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBgJHtwcm9wcy5iYWNrZ3JvdW5kfWB9fSBjbGFzc05hbWU9e1wic2VjdGlvbkNvbnRhaW5lclwifT5cbiAgICAgICAgICAgICAgICB7aW50cm9TZWN0aW9uT2JqfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIClcbiAgICAgICAgOlxuICAgICAgICAoXG4gICAgICAgICAgICBpbnRyb1NlY3Rpb25PYmpcbiAgICAgICAgKVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgY29udGFpbmVkT2JqXG4gICAgKVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRFdDaGFydCh7IHRpdGxlLCBzcmMsIC4uLnByb3BzIH0pIHtcclxuICBjb25zdCBpZnJhbWVSZWYgPSB1c2VSZWYoKVxyXG4gIGNvbnN0IFtoZWlnaHQsIHNldFN0YXRlXSA9IHVzZVN0YXRlKDUwMClcclxuXHJcbiAgY29uc3Qgb25NZXNzYWdlID0gdXNlQ2FsbGJhY2soXHJcbiAgICAoeyBkYXRhID0ge30sIHNvdXJjZSB9KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBzb3VyY2UgIT09IGlmcmFtZVJlZi5jdXJyZW50LmNvbnRlbnRXaW5kb3cgfHxcclxuICAgICAgICB0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgfHxcclxuICAgICAgICAhZGF0YVsnZGF0YXdyYXBwZXItaGVpZ2h0J11cclxuICAgICAgKVxyXG4gICAgICAgIHJldHVyblxyXG5cclxuICAgICAgLy9zZXRTdGF0ZShPYmplY3QudmFsdWVzKGRhdGFbJ2RhdGF3cmFwcGVyLWhlaWdodCddKVswXSlcclxuICAgIH0sXHJcbiAgICBbc2V0U3RhdGUsIGlmcmFtZVJlZl1cclxuICApXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uTWVzc2FnZSlcclxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uTWVzc2FnZSlcclxuICB9LCBbaGVpZ2h0LCBzZXRTdGF0ZSwgb25NZXNzYWdlXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxpZnJhbWVcclxuICAgICAgcmVmPXtpZnJhbWVSZWZ9XHJcbiAgICAgIHNjcm9sbGluZz1cIm5vXCJcclxuICAgICAgZnJhbWVCb3JkZXI9XCIwXCJcclxuICAgICAgd2lkdGg9XCIxMDAlXCJcclxuICAgICAgey4uLnByb3BzfVxyXG4gICAgICB0aXRsZT17dGl0bGV9XHJcbiAgICAgIHNyYz17c3JjfVxyXG4gICAgICBoZWlnaHQ9e2hlaWdodH1cclxuICAgIC8+XHJcbiAgKVxyXG59XHJcblxyXG5EV0NoYXJ0LnByb3BUeXBlcyA9IHtcclxuICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gIHNyYzogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gIGxvYWRpbmc6IFByb3BUeXBlcy5vbmVPZihbJ2VhZ2VyJywgJ2xhenknXSksXHJcbn0iLCJleHBvcnQgY29uc3QgY29udGVudEhlYWRlckNvbnN0YW50cyA9IHtcbiAgICBzZWN0aW9uOiBcIlNlY3Rpb25cIixcbiAgICBzZWN0aW9uSUQ6IFwiU2VjdGlvbklEXCIsXG4gICAgYXR0cmlidXRzOiBcIkF0dHJpYnV0c1wiLFxuICAgIHNvdXNzZWN0aW9uOiBcIlN0ZXBcIixcbiAgICB0ZXh0ZTogXCJURVhURVwiLFxuICAgIHZpc3VlbDogXCJWSVNVRUxcIixcbiAgICBub21maWNoaWVyc291cmNlOiBcIk5vbUZpY2hpZXJTb3VyY2VcIixcbiAgICBzdHlsZWZvbmQ6IFwiU3R5bGVGb25kXCIsXG4gICAgc3RlcGNsYXNzZXM6IFwiU3RlcENsYXNzZXNcIixcbiAgICB2aXN1ZWxjbGFzc2VzOiBcIlZpc3VlbENsYXNzZXNcIixcbiAgICBub3RlczogXCJOb3Rlc1wiLFxuICAgIGdhbWVpZDogXCJHYW1lSURcIlxufTtcblxuZXhwb3J0IGNvbnN0IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cyA9IHtcbiAgICBzZWN0aW9udHlwZXM6IHtcbiAgICAgICAgaW50cm90aXRyZTogXCJpbnRyby10aXRyZVwiLFxuICAgICAgICBwbGVpbmVwYWdldGl0cmU6IFwicGxlaW5lLXBhZ2UtdGl0cmVcIixcbiAgICAgICAgdGV4dGVjbGFzc2lxdWU6IFwidGV4dGUtY2xhc3NpcXVlXCIsXG4gICAgICAgIHZpenNlY3Rpb246IFwidml6LXNlY3Rpb25cIlxuICAgIH0sXG4gICAgc2VjdGlvbmF0dHJpYnV0ZXM6e1xuICAgICAgICBwbGVpbmVwYWdlOiBcInBsZWluZS1wYWdlXCIsXG4gICAgICAgIGZvbmRub2lyOiBcImZvbmQtbm9pclwiLFxuICAgICAgICBjZW50cmU6IFwiY2VudHLDqVwiLFxuICAgICAgICBjb3RlY290ZTogXCJjw7R0w6ktY8O0dMOpXCJcbiAgICB9LFxuICAgIHZpc3VlbHR5cGVzOntcbiAgICAgICAgcGhvdG86IFwiUGhvdG9cIixcbiAgICAgICAgdmlkZW86IFwiVmlkZW9cIixcbiAgICAgICAgYXVkaW86IFwiQXVkaW9cIixcbiAgICAgICAgdmlzdWFsaXNhdGlvbjogXCJWaXN1YWxpc2F0aW9uXCIsXG4gICAgICAgIGlmcmFtZTogXCJpZnJhbWVcIlxuICAgIH0sXG4gICAgc291c3NlY3Rpb250eXBlczp7XG4gICAgICAgIHNjcm9sbG5vcm1hbDogXCJzY3JvbGwtbm9ybWFsXCIsXG4gICAgICAgIHNjcm9sbGludmlzaWJsZTogXCJzY3JvbGwtaW52aXNpYmxlXCIsXG4gICAgICAgIHNjcm9sbGxvbmc6IFwic2Nyb2xsLWxvbmdcIlxuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCBwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzID0ge1xuICAgIHRpdHJlOiBcIlRpdHJlXCIsXG4gICAgYXV0ZXVyczogXCJBdXRldXJzXCIsXG4gICAgZGF0ZTogXCJEYXRlXCIsXG4gICAgZGF0ZTogXCJEYXRlXCIsXG4gICAgdXJsczogXCJMaWVuQXV0ZXVyc1wiLFxuICAgIGxpZW5maWNoaWVyc291cmNlOiBcIkxpZW5GaWNoaWVyU291cmNlXCJcbn07XG4iLCJcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IHsgY29udGVudEhlYWRlckNvbnN0YW50cywgb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLCBwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJ1Y3R1cmUoY29udGVudERhdGEsIHBhcmFtc0RhdGEpe1xuXG4gICAgbGV0IHN0cnVjdHVyZURhdGEgPSB7fTsgLy8gV2hvbGUgc2Nyb2xseSBzdHJ1Y3R1cmVcbiAgICBsZXQgdml6U2VjdGlvbklEcyA9IFtdOyAvLyBMaXN0IG9mIHNlY3Rpb25JRHNcblxuICAgIGxldCBvcHRpb25zID0gZ2V0T3B0aW9ucyhwYXJhbXNEYXRhKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKCdjb250ZW50IERhdGEnLCBjb250ZW50RGF0YSk7XG4gICAgY29udGVudERhdGEubWFwKChyb3dEYXRhLGluZGV4KSA9PiB7XG5cbiAgICAgICAgaWYocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25dID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLmludHJvdGl0cmUpe1xuICAgICAgICAgICAgbGV0IGNsYXNzZXMgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3RlcGNsYXNzZXNdO1xuICAgICAgICAgICAgbGV0IGN1ckFtb3JjZSA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV07XG4gICAgICAgICAgICBsZXQgc2VjdGlvbkJhY2tncm91bmQgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXTtcbiAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0ge1xuICAgICAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICAgICAgc2VjdGlvblR5cGU6IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMuaW50cm90aXRyZSxcbiAgICAgICAgICAgICAgICBvcHRpb25EYXRhOiBvcHRpb25zLFxuICAgICAgICAgICAgICAgIGFtb3JjZTogY3VyQW1vcmNlLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHNlY3Rpb25CYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgIGNsYXNzZXM6IHBhcnNlQ2xhc3NlcyhjbGFzc2VzKSxcbiAgICAgICAgICAgICAgICBnYW1laWQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5nYW1laWRdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25dID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnRleHRlY2xhc3NpcXVlKXtcbiAgICAgICAgICAgIGxldCB0ZXh0cyA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV07XG4gICAgICAgICAgICBsZXQgY2xhc3NlcyA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc107XG4gICAgICAgICAgICBsZXQgc2VjdGlvbkJhY2tncm91bmQgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXTtcbiAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0ge1xuICAgICAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICAgICAgc2VjdGlvblR5cGU6IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudGV4dGVjbGFzc2lxdWUsXG4gICAgICAgICAgICAgICAgdGV4dHM6IHRleHRzLFxuICAgICAgICAgICAgICAgIHZpc3VhbDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbF0sXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5ub21maWNoaWVyc291cmNlXSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBzZWN0aW9uQmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiBwYXJzZUNsYXNzZXMoY2xhc3NlcyksXG4gICAgICAgICAgICAgICAgdmlzdWVsY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxjbGFzc2VzXSksXG4gICAgICAgICAgICAgICAgZ2FtZWlkOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuZ2FtZWlkXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uXSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5wbGVpbmVwYWdldGl0cmUpe1xuICAgICAgICAgICAgbGV0IHRpdGxlT2JqID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXTtcbiAgICAgICAgICAgIGlmIChpc0pzb24ocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXSkpe1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0T2JqID0gSlNPTi5wYXJzZShyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdKTtcbiAgICAgICAgICAgICAgICB0aXRsZU9iaiA9IHRleHRPYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJ1Y3R1cmVEYXRhW3Jvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdXSA9IHtcbiAgICAgICAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgICAgICAgIHNlY3Rpb25UeXBlOiBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnBsZWluZXBhZ2V0aXRyZSxcbiAgICAgICAgICAgICAgICB0ZXh0czogaXNKc29uKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV0pID8gdGl0bGVPYmpcbiAgICAgICAgICAgICAgICA6e1xuICAgICAgICAgICAgICAgICAgICBtYWluVGl0bGU6e2NsYXNzOiBcIlwiLCB0ZXh0OiB0aXRsZU9ian0sXG4gICAgICAgICAgICAgICAgICAgIHN1YlRpdGxlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2aXN1YWw6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxdLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMubm9tZmljaGllcnNvdXJjZV0sXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0eWxlZm9uZF0sXG4gICAgICAgICAgICAgICAgY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIHZpc3VlbGNsYXNzZXM6IHBhcnNlQ2xhc3Nlcyhyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIGdhbWVpZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmdhbWVpZF1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbl0gPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudml6c2VjdGlvbil7XG5cbiAgICAgICAgICAgIGxldCBjdXJEYXRhID0ge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0czogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmF0dHJpYnV0c10sXG4gICAgICAgICAgICAgICAgc2Nyb2xsVHlwZTogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNvdXNzZWN0aW9uXSxcbiAgICAgICAgICAgICAgICB0ZXh0OiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdLFxuICAgICAgICAgICAgICAgIHZpc3VhbDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbF0sXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5ub21maWNoaWVyc291cmNlXSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXSxcbiAgICAgICAgICAgICAgICB2aXN1ZWxjbGFzc2VzOiBwYXJzZUNsYXNzZXMocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbGNsYXNzZXNdKSxcbiAgICAgICAgICAgICAgICBzdGVwY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIGdhbWVpZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmdhbWVpZF1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZihzdHJ1Y3R1cmVEYXRhLmhhc093blByb3BlcnR5KHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdKSl7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHN0ZXAgdG8gZXhpc3RpbmdcbiAgICAgICAgICAgICAgICBsZXQgY3VyVml6U2VjdGlvbiA9IHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dO1xuICAgICAgICAgICAgICAgIGN1clZpelNlY3Rpb24ucHVzaChjdXJEYXRhKTtcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVEYXRhW3Jvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdXSA9IGN1clZpelNlY3Rpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0gW2N1ckRhdGFdO1xuICAgICAgICAgICAgICAgIHZpelNlY3Rpb25JRHMucHVzaChyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2aXpTZWN0aW9uSURzLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgIGxldCBjdXJTZWN0aW9uID0gc3RydWN0dXJlRGF0YVtrZXldO1xuICAgICAgICBsZXQgc2VjdGlvbkF0dHIgPSBjdXJTZWN0aW9uWzBdLmF0dHJpYnV0cyA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb25hdHRyaWJ1dGVzLmNlbnRyZSA/IFwiIGZ1bGwtcGFnZVwiIDogXCJcIjtcbiAgICAgICAgbGV0IHNlY3Rpb25CYWNrZ3JvdW5kID0gY3VyU2VjdGlvblswXS5iYWNrZ3JvdW5kO1xuICAgICAgICBzdHJ1Y3R1cmVEYXRhW2tleV0gPSB7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIHNlY3Rpb25UeXBlOiBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnZpenNlY3Rpb24sXG4gICAgICAgICAgICBsaXN0SUQ6IGtleSxcbiAgICAgICAgICAgIHN0ZXBzOiBjdXJTZWN0aW9uLFxuICAgICAgICAgICAgY2xhc3NlZDogYHZpei1zZWN0aW9uJHtzZWN0aW9uQXR0cn1gLFxuICAgICAgICAgICAgbWVkaWFJbmZvOiAwLFxuICAgICAgICAgICAgYmFja2dyb3VuZDogc2VjdGlvbkJhY2tncm91bmRcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHN0cnVjdHVyZURhdGEpO1xufVxuXG4vKipcbiAqIFRha2UgYXJ0aWNsZSBzdHJ1Y3R1cmUgYXMgQ1NWIGFuZCB0cmFuc2Zvcm0gaXQgYXMgY2FsbGJhY2tBcnJheVxuICogQHBhcmFtICB7T2JqZWN0fSBjb250ZW50RGF0YSBhcnRpY2xlIHN0cnVjdHVyZVxuICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zIGFydGljbGUgb3B0aW9uc1xuICogQHJldHVybiB7QXJyYXl9IFNjcm9sbGVyIGNhbGxiYWNrIGFycmF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUNhbGxiYWNrcyhjb250ZW50RGF0YSwgcGFyYW1zRGF0YSl7XG5cbiAgICBsZXQgZnVsbFN0cnVjdHVyZSA9IGdldFN0cnVjdHVyZShjb250ZW50RGF0YSwgcGFyYW1zRGF0YSk7XG4gICAgbGV0IGNhbGxiYWNrc0FycmF5ID0gW107XG4gICAgZnVsbFN0cnVjdHVyZS5tYXAoY2FsbGJhY2sgPT4ge1xuICAgICAgICBpZihjYWxsYmFjay5zZWN0aW9uVHlwZSA9PT0gXCJ2aXotc2VjdGlvblwiKXtcbiAgICAgICAgICAgIGxldCBjdXJTdGVwcyA9IFtdO1xuICAgICAgICAgICAgY2FsbGJhY2suc3RlcHMubWFwKChzdGVwLGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGN1ckNvbW1hbmQgPSAoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcikgPyAoKCk9Pnt9KSA6IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYoc3RlcC52aXN1YWwgIT09IFwiXCIpe1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyTnVtYmVyQXJyYXkgPSBBcnJheShjYWxsYmFjay5zdGVwcy5sZW5ndGgpLmZpbGwobnVsbCkubWFwKChfLCBpKSA9PiBpKS5maWx0ZXIoZCA9PiBkICE9PSBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvcGFjaXR5U2VsZWN0b3IgPSBjdXJOdW1iZXJBcnJheS5tYXAoaW5kID0+IGAjJHtjYWxsYmFjay5rZXl9XyR7aW5kfWApLmpvaW4oJywnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChgIyR7Y2FsbGJhY2sua2V5fV8ke2luZGV4fWApLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3BhY2l0eVNlbGVjdG9yICE9PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKGAke29wYWNpdHlTZWxlY3Rvcn1gKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gYGQzLnNlbGVjdCgnIyR7Y2FsbGJhY2sua2V5fV8ke2luZGV4fScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7JHtvcGFjaXR5U2VsZWN0b3IgIT09IFwiXCIgPyBgZDMuc2VsZWN0QWxsKCcke29wYWNpdHlTZWxlY3Rvcn0nKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7YCA6IFwiXCJ9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKFN0cmluZyhzdGVwLmZpbGVuYW1lKS5zdGFydHNXaXRoKFwiVEFHSURcIikpe1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyVGFnSUQgPSBTdHJpbmcoc3RlcC5maWxlbmFtZSkuc3BsaXQoJz0nKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clRhZ0lEX2luZGV4ID0gcGFyc2VJbnQoY3VyVGFnSUQuc3BsaXQoXCJfXCIpWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ck51bWJlckFycmF5ID0gQXJyYXkoY2FsbGJhY2suc3RlcHMubGVuZ3RoKS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gaSkuZmlsdGVyKGQgPT4gZCAhPT0gY3VyVGFnSURfaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3BhY2l0eVNlbGVjdG9yID0gY3VyTnVtYmVyQXJyYXkubWFwKGluZCA9PiBgIyR7Y2FsbGJhY2sua2V5fV8ke2luZH1gKS5qb2luKCcsJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmKEVOVl9DT05GSUcuZG93bmxvYWRTdHJ1YyAmJiBFTlZfQ09ORklHLmF1dG9yZW5kZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ29tbWFuZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KGAjJHtjdXJUYWdJRH1gKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAxKS5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcGFjaXR5U2VsZWN0b3IgIT09IFwiXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKGAke29wYWNpdHlTZWxlY3Rvcn1gKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gYGQzLnNlbGVjdCgnIyR7Y3VyVGFnSUR9JykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTske29wYWNpdHlTZWxlY3RvciAhPT0gXCJcIiA/IGBkMy5zZWxlY3RBbGwoJyR7b3BhY2l0eVNlbGVjdG9yfScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDApLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtgIDogXCJcIn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgICAgICAgICAgICAgICAgY3VyU3RlcHMucHVzaChjdXJDb21tYW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY3VyU3RlcHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAoKSA9PiB7JHtjdXJDb21tYW5kfX1gXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhbGxiYWNrc0FycmF5LnB1c2goY3VyU3RlcHMpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnR09UIENBTExCQUNLUyBBUlJBWTogJywgY2FsbGJhY2tzQXJyYXkpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2tzQXJyYXk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTYXZpbmcgY2FsbGJhY2tzIHRvIGZpbGUuLi4nKTtcbiAgICAgICAgY29uc3QgdGV4dCA9IGBpbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XFxuZXhwb3J0IGNvbnN0IGNhbGxiYWNrcyA9ICR7SlNPTi5zdHJpbmdpZnkoY2FsbGJhY2tzQXJyYXksIG51bGwsIDIpfWA7XG4gICAgICAgIGxldCBibG9iID0gbmV3IEJsb2IoW3RleHQucmVwbGFjZUFsbCgnXCInLCAnJyldLCB7dHlwZTogXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLThcIn0pO1xuICAgICAgICBzYXZlQXMoYmxvYiwgXCJjYWxsYmFja3MuanNcIik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxufVxuXG5mdW5jdGlvbiBpc0pzb24oc3RyKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgSlNPTi5wYXJzZShzdHIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDbGFzc2VzKHN0cil7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oc3RyLnNwbGl0KCc7JykpLmpvaW4oJyAnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9wdGlvbnMocGFyYW1zRGF0YSl7XG5cbiAgcmV0dXJuIHtcbiAgICB0aXRsZTogcGFyYW1zRGF0YVswXVtwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzLnRpdHJlXSxcbiAgICBhdXRob3JzOiBwYXJhbXNEYXRhWzBdW3BhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMuYXV0ZXVyc10sXG4gICAgdXJsczogcGFyYW1zRGF0YVswXVtwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzLnVybHNdLFxuICAgIGRhdGU6IHBhcmFtc0RhdGFbMF1bcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cy5kYXRlXVxuICB9O1xufVxuIiwiaW1wb3J0IHsgY29uc3RhbnQgfSBmcm9tIFwibG9kYXNoXCI7XHJcbmltcG9ydCBtYXBib3hnbCBmcm9tIFwibWFwYm94LWdsXCI7XHJcbmltcG9ydCAqIGFzIHNjcmVlbiBmcm9tIFwiLi9zY3JlZW4uanNcIjtcclxuXHJcbmNvbnN0IGNvbnN0YW50cyA9IHtcclxuICB0b2tlbjpcclxuICAgIFwicGsuZXlKMUlqb2liR1ZrWlhadmFYSWlMQ0poSWpvaVkycDJiVzgxZEhVMk1XVjFjVFJoY1hJemFYWnFNR1l4Y2lKOS5XcklGOG82OWFSX1RzdERGdTZReWFnXCIsXHJcbiAgbWFwQm91bmRzOiB7XHJcbiAgICBtYXg6IFstMTY1LCAzMC43MjgzMzAsIC0yNS4yMzYzNiwgODIuMjI5NDM0XSxcclxuICB9LFxyXG4gIGNvbG9yczogW1xyXG4gICAgXCIjRjRDQkM2XCIsXHJcbiAgICBcIiNGNEEzOUFcIixcclxuICAgIFwiI0VFNkE1RVwiLFxyXG4gICAgXCIjQ0UzNzI3XCIsXHJcbiAgICBcIiNBMjI4MjNcIixcclxuICAgIFwiIzc1MUExQVwiLFxyXG4gICAgXCIjNDEwMDAwXCIsXHJcbiAgXSxcclxuICBjbHVzdGVyTWF4Wm9vbTogMTEsXHJcbiAgY2x1c3RlclJhZGl1czogMzAsXHJcbiAgY2x1c3Rlck1pblBvaW50czogNVxyXG59O1xyXG5cclxubWFwYm94Z2wuYWNjZXNzVG9rZW4gPSBjb25zdGFudHMudG9rZW47XHJcblxyXG5leHBvcnQgY2xhc3MgTWFwIHtcclxuICBjb25zdHJ1Y3RvcihkaXYsIGNsYXNzTmFtZSwgZGF0YVNvdXJjZUFycmF5LCBzdHlsZVVybCwgaW5pdENvb3JkcywgZGlzYWJsZUNvbnRyb2xzPXRydWUsIHdpdGhIYW5kbGVycz1mYWxzZSwgbWF4Qm91bmRzID0gbnVsbCkge1xyXG5cclxuICAgIHRoaXMuZGF0YVNvdXJjZU9iamVjdHMgPSBkYXRhU291cmNlQXJyYXk7XHJcbiAgICB0aGlzLmNvbnN0YW50cyA9IGNvbnN0YW50cztcclxuICAgIHRoaXMubWFwID0gbmV3IG1hcGJveGdsLk1hcCh7XHJcbiAgICAgIGNvbnRhaW5lcjogY2xhc3NOYW1lLFxyXG4gICAgICBzdHlsZTogc3R5bGVVcmwsXHJcbiAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogdHJ1ZSxcclxuICAgICAgY2VudGVyOiBpbml0Q29vcmRzLmNlbnRlcixcclxuICAgICAgem9vbTogaW5pdENvb3Jkcy56b29tXHJcbiAgICB9KTtcclxuICAgIHRoaXMubWF4Qm91bmRzID0gaW5pdENvb3JkcztcclxuICAgIHRoaXMuYm91bmRzTGlzdCA9IHRoaXMuZGF0YVNvdXJjZU9iamVjdHMubWFwKGRhdGFTb3VyY2UgPT4gZGF0YVNvdXJjZVsnY29vcmRzJ10pO1xyXG4gICAgdGhpcy5leHRyYUJvdW5kcyA9IHRoaXMuZGF0YVNvdXJjZU9iamVjdHMubWFwKGRhdGFTb3VyY2UgPT4gZGF0YVNvdXJjZVsnZXh0cmFDb29yZHMnXSk7XHJcbiAgICBpZihkaXNhYmxlQ29udHJvbHMpe1xyXG4gICAgICB0aGlzLm1hcC5zY3JvbGxab29tLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5tYXAuZHJhZ1Bhbi5kaXNhYmxlKCk7XHJcbiAgICAgIHRoaXMubWFwLmRyYWdSb3RhdGUuZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLm1hcC5ib3hab29tLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5tYXAuZG91YmxlQ2xpY2tab29tLmRpc2FibGUoKTtcclxuICAgIH1cclxuICAgIGlmKHdpdGhIYW5kbGVycyl7XHJcbiAgICAgIHRoaXMuc2V0dXBIYW5kbGVycygpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5kYXRhTGlzdCA9IHRoaXMuZGF0YVNvdXJjZU9iamVjdHMubWFwKGRhdGFTb3VyY2UgPT4gZGF0YVNvdXJjZVsnZGF0YSddKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUJvdW5kcyhcclxuICAgIGJvdW5kcyA9IHRoaXMubWF4Qm91bmRzLFxyXG4gICAgcGFkZGluZyA9IHNjcmVlbi5pc1hTKCkgPyA1IDogc2NyZWVuLmlzU20oKSA/IDE1IDogMjAsXHJcbiAgICBkdXJhdGlvbiA9IDEwMFxyXG4gICkge1xyXG4gICAgdGhpcy5tYXAgPSB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7XHJcbiAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcclxuICAgICAgcGFkZGluZzogcGFkZGluZyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQ29vcmRzQW5kWm9vbShkYXRhUGFpcil7XHJcbiAgICB0aGlzLm1hcC5mbHlUbyh7XHJcbiAgICAgIGNlbnRlcjogZGF0YVBhaXIuY2VudGVyLFxyXG4gICAgICB6b29tOiBkYXRhUGFpci56b29tLFxyXG4gICAgICBzcGVlZDogMC43LFxyXG4gICAgICBjdXJ2ZTogMSxcclxuICAgICAgZWFzaW5nKHQpe1xyXG4gICAgICAgIHJldHVybiB0XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICB2aWV3Qm91bmRPYmoob2JqaW5kZXgpe1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKHRoaXMuYm91bmRzTGlzdFtvYmppbmRleF0pO1xyXG4gIH1cclxuXHJcbiAgdmlld0V4dHJhQm91bmRPYmoob2JqaW5kZXgsIGtleU5hbWUsIGR1cmF0aW9uKXtcclxuICAgIGxldCBleHRyYUJvdW5kcyA9IHRoaXMuZXh0cmFCb3VuZHNbb2JqaW5kZXhdO1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKGV4dHJhQm91bmRzW2tleU5hbWVdKTtcclxuICB9XHJcblxyXG4gIHZpZXdJbml0Qm91bmRzKGR1cmF0aW9uKXtcclxuICAgIHRoaXMudXBkYXRlQ29vcmRzQW5kWm9vbSh0aGlzLm1heEJvdW5kcyk7XHJcbiAgfVxyXG4gIHNob3dTb3VyY2VYSXRlbVkoc291cmNlSW5kZXgsIGl0ZW1JbmRleCkge1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKHRoaXMuZGF0YUxpc3Rbc291cmNlSW5kZXhdW2l0ZW1JbmRleF0pXHJcbiAgfVxyXG5cclxuICBpbml0TWFwU291cmNlc0FuZExheWVycygpIHtcclxuICAgIGlmICh0aGlzLmluaXRpYWxpc2VkKSByZXR1cm47XHJcbiAgICB0aGlzLmluaXRpYWxpc2VkID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgdGhpcy5kYXRhU291cmNlT2JqZWN0cy5tYXAoZGF0YVNvdXJjZSA9PiB7XHJcbiAgICAgIHRoaXMubWFwLmFkZFNvdXJjZShkYXRhU291cmNlWydzb3VyY2VOYW1lJ10sIHtcclxuICAgICAgICB0eXBlOiBkYXRhU291cmNlWydzb3VyY2VUeXBlJ10sXHJcbiAgICAgICAgZGF0YTogZGF0YVNvdXJjZVsnc291cmNlRGF0YSddXHJcbiAgICAgIH0pO1xyXG4gICAgICBpZihkYXRhU291cmNlWydsYXllclR5cGUnXSA9PT0gJ2ZpbGwnKXtcclxuICAgICAgICB0aGlzLm1hcC5hZGRMYXllcih7XHJcbiAgICAgICAgICBpZDogZGF0YVNvdXJjZVsnc291cmNlTmFtZSddLFxyXG4gICAgICAgICAgdHlwZTogZGF0YVNvdXJjZVsnbGF5ZXJUeXBlJ10sXHJcbiAgICAgICAgICBzb3VyY2U6IGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSxcclxuICAgICAgICAgIHBhaW50OiB7XHJcbiAgICAgICAgICAgICdmaWxsLWNvbG9yJzogZGF0YVNvdXJjZVsnY29sb3InXSxcclxuICAgICAgICAgICAgJ2ZpbGwtb3BhY2l0eSc6IGRhdGFTb3VyY2VbJ29wYWNpdHknXVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGRhdGFTb3VyY2VbJ2xheWVyVHlwZSddID09PSAnY2lyY2xlJyl7XHJcbiAgICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIoe1xyXG4gICAgICAgICAgaWQ6IGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSxcclxuICAgICAgICAgIHR5cGU6IGRhdGFTb3VyY2VbJ2xheWVyVHlwZSddLFxyXG4gICAgICAgICAgc291cmNlOiBkYXRhU291cmNlWydzb3VyY2VOYW1lJ10sXHJcbiAgICAgICAgICBwYWludDoge1xyXG4gICAgICAgICAgICAnY2lyY2xlLWNvbG9yJzogWydtYXRjaCcsIFtcImdldFwiLCBcInN0YXR1dFwiXSwgJ1JlY2hlcmNoZXMgZWZmZWN0dcOpZXMgb3UgZW4gY291cnMnLCAnI2ZmNTYxYycsICdQaGFzZSBwcsOpbGltaW5haXJlJywgJyNmZmM3MzQnLCAnI2I3YjdiNyddLFxyXG4gICAgICAgICAgICAnY2lyY2xlLXJhZGl1cyc6IDVcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICBjaGFuZ2VMYXllclBhaW50KGlkLCBwcm9wZXJ0eSwgdmFsdWUpe1xyXG4gICAgdGhpcy5tYXAuc2V0UGFpbnRQcm9wZXJ0eShpZCwgcHJvcGVydHksIHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHNldHVwSGFuZGxlcnMoKXtcclxuICAgIFxyXG4gICAgdGhpcy5tYXAub24oXCJtb3VzZW92ZXJcIiwgXCJwZW5zaW9ubmF0c1NvdXJjZVwiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLm1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcclxuICAgICAgdGhpcy5kcmF3UG9wdXAoZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubWFwLm9uKFwibW91c2VvdXRcIiwgXCJwZW5zaW9ubmF0c1NvdXJjZVwiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLm1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubWFwLm9uKFwiY2xpY2tcIiwgXCJwZW5zaW9ubmF0c1NvdXJjZVwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMubWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgICB0aGlzLmRyYXdQb3B1cChlKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gIH1cclxuXHJcbiAgZHJhd1BvcHVwKGUpe1xyXG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSBlLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnNsaWNlKCk7XHJcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gZS5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzO1xyXG4gICAgbGV0IFtvcGVuZGF5c3RyLCBvcGVubW9udGhzdHIsIG9wZW55ZWFyc3RyXSA9IHByb3BlcnRpZXNbJ291dmVydHVyZSddLnNwbGl0KCcvJyk7XHJcbiAgICBsZXQgW2Zlcm1kYXlzdHIsIGZlcm1tb250aHN0ciwgZmVybXllYXJzdHJdID0gcHJvcGVydGllc1snZmVybWV0dXJlJ10uc3BsaXQoJy8nKTtcclxuICAgIGxldCBbZGF0ZV9vdXZlcnR1cmUsZGF0ZV9mZXJtZXR1cmVdID0gW1xyXG4gICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImZyLUNBXCIsIHtkYXRlU3R5bGU6XCJsb25nXCJ9KS5mb3JtYXQobmV3IERhdGUoRGF0ZS5VVEMob3BlbnllYXJzdHIsIG9wZW5tb250aHN0ciwgb3BlbmRheXN0cikpKSxcclxuICAgICAgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJmci1DQVwiLCB7ZGF0ZVN0eWxlOlwibG9uZ1wifSkuZm9ybWF0KG5ldyBEYXRlKERhdGUuVVRDKGZlcm15ZWFyc3RyLCBmZXJtbW9udGhzdHIsIGZlcm1kYXlzdHIpKSlcclxuICAgIF07XHJcbiAgICBsZXQgaHRtbF9wb3B1cF9jb250ZW50ID0gYFxyXG4gICAgICA8aDM+JHtwcm9wZXJ0aWVzWyduYW1lJ119PC9oMz5cclxuICAgICAgPGg0PiR7cHJvcGVydGllc1sndmlsbGUnXX0sICR7cHJvcGVydGllc1sncHJvdmluY2UnXX08L2g0PlxyXG4gICAgICA8cD4ke2RhdGVfb3V2ZXJ0dXJlfSAtICR7ZGF0ZV9mZXJtZXR1cmV9PC9wPlxyXG4gICAgICA8cD4ke3Byb3BlcnRpZXNbJ3N0YXR1dCddfTwvcD5cclxuICAgIGA7XHJcbiAgICB3aGlsZSAoTWF0aC5hYnMoZS5sbmdMYXQubG5nIC0gY29vcmRpbmF0ZXNbMF0pID4gMTgwKSB7XHJcbiAgICAgIGNvb3JkaW5hdGVzWzBdICs9IGUubG5nTGF0LmxuZyA+IGNvb3JkaW5hdGVzWzBdID8gMzYwIDogLTM2MDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnBvcHVwID0gbmV3IG1hcGJveGdsLlBvcHVwKClcclxuICAgICAgLnNldExuZ0xhdChjb29yZGluYXRlcylcclxuICAgICAgLnNldEhUTUwoaHRtbF9wb3B1cF9jb250ZW50KVxyXG4gICAgICAuYWRkVG8odGhpcy5tYXApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIGlmICh0aGlzLnBvcHVwKSB7XHJcbiAgICAgIHRoaXMucG9wdXAucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVEYXRhKGRhdGFTb3VyY2VOYW1lLCBkYXRhKSB7XHJcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGlzZWQpIHRoaXMuaW5pdE1hcFNvdXJjZXNBbmRMYXllcnMoKTtcclxuICAgIHRoaXMubWFwLmdldFNvdXJjZShkYXRhU291cmNlTmFtZSkuc2V0RGF0YShkYXRhKTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcclxuXHJcbmNvbnN0IHBvc2l0aXZlT3JkZXJEaWN0ID0ge1xyXG4gICAgXCJsYW5kX3NpbmtcIjowLFxyXG4gICAgXCJmb3NzaWxfZW1pc3Npb25zXCI6MSxcclxuICAgIFwibGFuZF91c2VfY2hhbmdlXCI6Mn07XHJcblxyXG5jb25zdCBuZWdhdGl2ZU9yZGVyRGljdCA9IHtcIm9jZWFuX3NpbmtcIjowLFxyXG4gICAgXCJhdG1vc19zaW5rXCI6MSxcclxuICAgIFwibGFuZF9zaW5rXCI6Mn07XHJcblxyXG5jb25zdCBjb2xvckRpY3QgPSB7XHJcblxyXG4gICAgZm9zc2lsX2VtaXNzaW9uczogXCIjYjdjM2MzXCIsXHJcbiAgICBsYW5kX3VzZV9jaGFuZ2U6IFwiI0VGRTY2RlwiLFxyXG4gICAgbGFuZF9zaW5rOiBcIiNhNWRhYThcIixcclxuICAgIG9jZWFuX3Npbms6IFwiIzc1YTNiMVwiLFxyXG4gICAgYXRtb3Nfc2luazogXCIjODljZmYwXCIsXHJcbiAgICBjZW1lbnRfc2luazogXCIjYTJhMTk4XCJcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIHN0YWNrZWRBcmVhQ2hhcnR7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3Znb2JqLCByYXdkYXRhKXtcclxuXHJcbiAgICAgICAgdGhpcy5zdmdPYmogPSBzdmdvYmo7XHJcbiAgICAgICAgdGhpcy5zdmdXaWR0aCA9IHRoaXMuc3ZnT2JqLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICAgICAgICB0aGlzLnN2Z0hlaWdodCA9IHRoaXMuc3ZnT2JqLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5jaGFydFdpZHRoID0gdGhpcy5zdmdXaWR0aCAqIDAuOTtcclxuICAgICAgICB0aGlzLmNoYXJ0SGVpZ2h0ID0gdGhpcy5zdmdIZWlnaHQgKiAwLjk7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5jbGVhbkRhdGEocmF3ZGF0YSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NzdkRhdGE6JywgdGhpcy5kYXRhKTtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdGhpcy5tYWluR3JvdXAgPSB0aGlzLnN2Z09iai5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLmNoYXJ0V2lkdGgpXHJcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLmNoYXJ0SGVpZ2h0KVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkeyh0aGlzLnN2Z1dpZHRoLXRoaXMuY2hhcnRXaWR0aCkvMn0sJHsodGhpcy5zdmdIZWlnaHQtdGhpcy5jaGFydEhlaWdodCkvMn0pYCk7XHJcbiAgICAgICAgdGhpcy5pbml0Q2hhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhbkRhdGEoZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEubWFwKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHllYXI6IHllYXJEYXRhW1wiQW5uw6llXCJdLFxyXG4gICAgICAgICAgICAgICAgZm9zc2lsX2VtaXNzaW9uczogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCLDiW1pc3Npb25zIGlzc3VlcyBkZXMgw6luZXJnaWVzIGZvc3NpbGVzXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgbGFuZF91c2VfY2hhbmdlOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIkNoYW5nZW1lbnQgZCdhZmZlY3RhdGlvbiBkZXMgdGVycmVzXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgbGFuZF9zaW5rOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIlB1aXRzIHRlcnJlc3RyZVwiXSkucmVwbGFjZSgnLCcsXCIuXCIpKSxcclxuICAgICAgICAgICAgICAgIG9jZWFuX3Npbms6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiT2PDqWFuXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgYXRtb3Nfc2luazogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCJBdG1vc3Bow6hyZVwiXSkucmVwbGFjZSgnLCcsXCIuXCIpKSxcclxuICAgICAgICAgICAgICAgIGNlbWVudF9zaW5rOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIlB1aXRzIGRlIGNpbWVudFwiXSkucmVwbGFjZSgnLCcsXCIuXCIpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdENoYXJ0KCl7XHJcblxyXG4gICAgICAgIGxldCBsZWdlbmREYXRhID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogXCLDiW1pc3Npb25zIGlzc3VlcyBkZXMgw6luZXJnaWVzIGZvc3NpbGVzXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJmb3NzaWxfZW1pc3Npb25zXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiQ2hhbmdlbWVudCBkJ2FmZmVjdGF0aW9uIGRlcyB0ZXJyZXNcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcImxhbmRfdXNlX2NoYW5nZVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIlB1aXRzIHRlcnJlc3RyZVwiLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwibGFuZF9zaW5rXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiT2PDqWFuXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJvY2Vhbl9zaW5rXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiQXRtb3NwaMOocmVcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcImF0bW9zX3NpbmtcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc3QgeEF4aXMgPSB0aGlzLmRyYXdYQXhpcyh0aGlzLm1haW5Hcm91cCwgdGhpcy5jaGFydFdpZHRoLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgIGNvbnN0IHlBeGlzID0gdGhpcy5kcmF3WUF4aXModGhpcy5tYWluR3JvdXAsIHRoaXMuY2hhcnRIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuZHJhd0FyZWFzKHRoaXMubWFpbkdyb3VwLCB4QXhpcywgeUF4aXMpO1xyXG4gICAgICAgIC8vdGhpcy5kcmF3UmVjdGFuZ2xlcyh0aGlzLm1haW5Hcm91cCwgeEF4aXMsIHlBeGlzKTtcclxuICAgICAgICB0aGlzLmRyYXdUaXRsZSh0aGlzLm1haW5Hcm91cCk7XHJcbiAgICAgICAgdGhpcy5kcmF3Qm90dG9tQm94KHRoaXMubWFpbkdyb3VwLCB0aGlzLmNoYXJ0V2lkdGgpXHJcbiAgICAgICAgdGhpcy5kcmF3RGV0YWlscyh0aGlzLm1haW5Hcm91cCwgbGVnZW5kRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2QzLlNlbGVjdGlvbn0gY29udGFpbmVyIGQzIHNlbGVjdGlvblxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIHdpZHRoIG9mIHRoZSBjaGFydFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgZGF0YSBPYmogY29udGFpbmluZyBzZXJpZXMgYW5kIGRvbWFpbnNcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBheGlzVGl0bGUgeCBheGlzIHRpdGxlXHJcbiAgICAgKi9cclxuICAgICBkcmF3WEF4aXMoY29udGFpbmVyLCB3aWR0aCwgZGF0YSwgYXhpc1RpdGxlKXtcclxuXHJcbiAgICAgICAgY29uc3QgeEF4aXNHcm91cCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAneEF4aXNHcm91cCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7MH0sJHt0aGlzLmNoYXJ0SGVpZ2h0KjAuOTB9KWApO1xyXG5cclxuICAgICAgICBjb25zdCBzY2FsZSA9IGQzLnNjYWxlQmFuZCgpXHJcbiAgICAgICAgICAgIC5kb21haW4oZGF0YS5tYXAoZWxlbSA9PiBlbGVtLnllYXIpKVxyXG4gICAgICAgICAgICAucmFuZ2UoW3RoaXMuY2hhcnRXaWR0aCowLjA1LCB3aWR0aF0pO1xyXG5cclxuICAgICAgICBjb25zdCBheGlzID0gZDMuYXhpc0JvdHRvbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZShzY2FsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tWYWx1ZXMoc2NhbGUuZG9tYWluKCkuZmlsdGVyKChkLGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaSsxMCklMjAgPT09IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGlja0Zvcm1hdCgoZCxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zcGxpdCgnLScpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB4QXhpc0dyb3VwLmNhbGwoYXhpcylcclxuICAgICAgICAgICAgLmNhbGwoZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aWNrR3JvdXBzID0gZy5zZWxlY3RBbGwoXCIudGlja1wiKTtcclxuICAgICAgICAgICAgICAgIHRpY2tHcm91cHMuc2VsZWN0KCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTRwdCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgKGQsaSkgPT4gaSA9PT0gdGlja0dyb3Vwcy5ub2RlcygpLmxlbmd0aC0xID8gXCJlbmRcIiA6IFwibWlkZGxlXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4gc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2QzLlNlbGVjdGlvbn0gY29udGFpbmVyIGQzIHNlbGVjdGlvblxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIHdpZHRoIG9mIHRoZSBjaGFydFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgZGF0YSBPYmogY29udGFpbmluZyBzZXJpZXMgYW5kIGRvbWFpbnNcclxuICAgICAqL1xyXG4gICAgIGRyYXdZQXhpcyhjb250YWluZXIsIGhlaWdodCl7XHJcblxyXG4gICAgICAgIGNvbnN0IHlBeGlzR3JvdXAgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3lBeGlzR3JvdXAnKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3RoaXMuY2hhcnRXaWR0aCowLjA1fSwkezB9KWApO1xyXG5cclxuICAgICAgICBjb25zdCBzY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgICAgLmRvbWFpbihbMTIsLTEyXSlcclxuICAgICAgICAgICAgLnJhbmdlKFswLGhlaWdodCowLjkwXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGF4aXMgPSBkMy5heGlzTGVmdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZShzY2FsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMCk7XHJcbiAgICAgICAgeUF4aXNHcm91cC5jYWxsKGF4aXMpXHJcbiAgICAgICAgICAgIC5jYWxsKGcgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGlja0dyb3VwcyA9IGcuc2VsZWN0QWxsKFwiLnRpY2tcIik7XHJcbiAgICAgICAgICAgICAgICB0aWNrR3JvdXBzLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDQwMClcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgJ2dyYXBoaWsnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzEycHQnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAncm90YXRlKC05MCknKVxyXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgMClcclxuICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIC1zY2FsZSgwKSlcclxuICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi0zZW1cIilcclxuICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxMnB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LWZhbWlseScsICdncmFwaGlrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsICc2MDAnKVxyXG4gICAgICAgICAgICAudGV4dChcIkZsdXggZGUgQ08yIChHdEMgLyBhbm7DqWUpXCIpO1xyXG4gICAgICAgIHJldHVybiBzY2FsZTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3QXJlYXMoY29udGFpbmVyLCB4U2NhbGUsIHlTY2FsZSl7XHJcblxyXG4gICAgICAgIGxldCBwb3NpdGl2ZV9wYXRoc19hcnJheSA9IHt9O1xyXG4gICAgICAgIGxldCBuZWdhdGl2ZV9wYXRoc19hcnJheSA9IHt9O1xyXG5cclxuICAgICAgICBjb25zdCBwb3NEYXRhID0gdGhpcy5kYXRhLm1hcCh5ZWFyRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBwb3NFbGVtcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgY3VyVG90YWwgPSAwO1xyXG4gICAgICAgICAgICBsZXQgY3VyWWVhciA9IHllYXJEYXRhLnllYXI7XHJcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHllYXJEYXRhKS5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgIGlmKGN1ckVsZW0+MCAmJiBlbnRyeVswXSAhPT0gXCJ5ZWFyXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc0VsZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVudHJ5WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IGN1clRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyVG90YWwgKz0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKGVudHJ5WzBdID09PSBcImNlbWVudF9zaW5rXCIpeyAvLyBBZGQgY2VtZW50IHNpbmsgdG8gcmVtb3ZlIGl0IGFmdGVyd2FyZHMgKGluIGZvc3NpbCBmdWVsKSAgXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW50cnlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4gcG9zRWxlbXMuc29ydCgoYSxiKSA9PiBwb3NpdGl2ZU9yZGVyRGljdFthLnR5cGVdIC0gcG9zaXRpdmVPcmRlckRpY3RbYi50eXBlXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5lZ0RhdGEgPSB0aGlzLmRhdGEubWFwKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgbGV0IG5lZ0VsZW1zID0gW107XHJcbiAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBjdXJZZWFyID0geWVhckRhdGEueWVhcjtcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoeWVhckRhdGEpLnNvcnQoKGEsYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5lZ2F0aXZlT3JkZXJEaWN0W2FbMF1dIC0gbmVnYXRpdmVPcmRlckRpY3RbYlswXV07XHJcbiAgICAgICAgICAgIH0pLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgaWYoY3VyRWxlbTwwICYmIGVudHJ5WzBdICE9PSBcInllYXJcIiAmJiBlbnRyeVswXSAhPT0gXCJjZW1lbnRfc2lua1wiICl7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVnRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW50cnlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuIG5lZ0VsZW1zOy8vLnNvcnQoKGEsYikgPT4gbmVnYXRpdmVPcmRlckRpY3RbYS50eXBlXSAtIG5lZ2F0aXZlT3JkZXJEaWN0W2IudHlwZV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnZ290IG5lZ0RhdGE6ICcsIG5lZ0RhdGEpO1xyXG5cclxuICAgICAgICBsZXQgYXJlYUdlbiA9IGQzLmFyZWEoKVxyXG4gICAgICAgICAgICAueChkID0+IHhTY2FsZShkLmN1clllYXIpKVxyXG4gICAgICAgICAgICAueTAoZCA9PiB5U2NhbGUoZC5jdXJUb3QpKVxyXG4gICAgICAgICAgICAueTEoZCA9PiB5U2NhbGUoZC5jdXJUb3QrZC52YWx1ZSkpO1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHBvc2l0aXZlT3JkZXJEaWN0KS5mb3JFYWNoKG9yZGVyT2JqID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBjdXJLZXkgPSBvcmRlck9ialswXTtcclxuICAgICAgICAgICAgbGV0IGN1ck9yZGVyVmFsdWUgPSBvcmRlck9ialsxXTtcclxuICAgICAgICAgICAgbGV0IGN1clBhdGhBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICBwb3NEYXRhLmZvckVhY2goeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSB5ZWFyRGF0YVswXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJZZWFyID0gY3VyRWxlbVsnY3VyWWVhciddO1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleU9iaiA9IHllYXJEYXRhLmZpbHRlcihlbGVtID0+IGN1cktleSA9PT0gZWxlbS50eXBlKTtcclxuICAgICAgICAgICAgICAgIGxldCBjZW1lbnRPYmogPSB5ZWFyRGF0YS5maWx0ZXIoZWxlbSA9PiAnY2VtZW50X3NpbmsnID09PSBlbGVtLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihrZXlPYmoubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICBpZihjdXJLZXkgPT09IFwiZm9zc2lsX2VtaXNzaW9uc1wiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY3VyS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDoga2V5T2JqWzBdLmN1clRvdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBrZXlPYmpbMF0udmFsdWUgLSBNYXRoLmFicyhjZW1lbnRPYmpbMF0udmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY3VyS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDoga2V5T2JqWzBdLmN1clRvdC0gTWF0aC5hYnMoY2VtZW50T2JqWzBdLnZhbHVlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBrZXlPYmpbMF0udmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAvL0FkZCB6ZXJvXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjdXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBvc2l0aXZlX3BhdGhzX2FycmF5W2N1cktleV0gPSBjdXJQYXRoQXJyYXk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY29uc3QgcG9zaXRpdmVQYXRocyA9IHRoaXMubWFpbkdyb3VwLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdwb3NpdGl2ZVBhdGhzJyk7XHJcblxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHBvc2l0aXZlX3BhdGhzX2FycmF5KS5mb3JFYWNoKGNhdGVnb3J5T2JqID0+IHtcclxuICAgICAgICAgICAgbGV0IGN1cktleSA9IGNhdGVnb3J5T2JqWzBdO1xyXG4gICAgICAgICAgICBsZXQgY3VyQXJyYXkgPSBjYXRlZ29yeU9ialsxXTtcclxuXHJcbiAgICAgICAgICAgIHBvc2l0aXZlUGF0aHMuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGN1cktleSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgLmRhdHVtKGN1ckFycmF5KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBjb2xvckRpY3RbY3VyS2V5XSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDApXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIGQgPT4gYXJlYUdlbihkKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG5lZ2F0aXZlT3JkZXJEaWN0KS5zb3J0KChhLGIpID0+IGJbMV0gLSBhWzFdKS5mb3JFYWNoKG9yZGVyT2JqID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBjdXJLZXkgPSBvcmRlck9ialswXTtcclxuICAgICAgICAgICAgbGV0IGN1ck9yZGVyVmFsdWUgPSBvcmRlck9ialsxXTtcclxuICAgICAgICAgICAgbGV0IGN1clBhdGhBcnJheSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgbmVnRGF0YS5mb3JFYWNoKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0geWVhckRhdGFbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyWWVhciA9IGN1ckVsZW1bJ2N1clllYXInXTtcclxuICAgICAgICAgICAgICAgIGxldCBrZXlPYmogPSB5ZWFyRGF0YS5maWx0ZXIoZWxlbSA9PiBjdXJLZXkgPT09IGVsZW0udHlwZSk7XHJcbiAgICAgICAgICAgICAgICBpZihrZXlPYmoubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaChrZXlPYmpbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAvL0FkZCB6ZXJvXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjdXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5lZ2F0aXZlX3BhdGhzX2FycmF5W2N1cktleV0gPSBjdXJQYXRoQXJyYXk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY29uc3QgbmVnYXRpdmVQYXRocyA9IHRoaXMubWFpbkdyb3VwLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICduZWdhdGl2ZXBhdGhzJyk7XHJcblxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG5lZ2F0aXZlX3BhdGhzX2FycmF5KS5mb3JFYWNoKGNhdGVnb3J5T2JqID0+IHtcclxuICAgICAgICAgICAgbGV0IGN1cktleSA9IGNhdGVnb3J5T2JqWzBdO1xyXG4gICAgICAgICAgICBsZXQgY3VyQXJyYXkgPSBjYXRlZ29yeU9ialsxXTtcclxuXHJcbiAgICAgICAgICAgIG5lZ2F0aXZlUGF0aHMuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGN1cktleSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgLmRhdHVtKGN1ckFycmF5KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBjb2xvckRpY3RbY3VyS2V5XSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDApXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIGQgPT4gYXJlYUdlbihkKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIERyYXcgbGluZVxyXG4gICAgICAgIGNvbnN0IGxpbmVHZW4gPSBkMy5saW5lKCkueChkID0+IHhTY2FsZShkLnllYXIpKS55KGQgPT4geVNjYWxlKGQudmFsdWUpKTtcclxuXHJcbiAgICAgICAgbGV0IG5lZ1llYXJUb3RhbCA9IFtdO1xyXG4gICAgICAgIGxldCBwb3NZZWFyVG90YWwgPSBbXTtcclxuICAgICAgICBwb3NEYXRhLmZvckVhY2goeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW5pdFZhbHVlID0gMDtcclxuICAgICAgICAgICAgbGV0IGN1clZhbHVlID0geWVhckRhdGEucmVkdWNlKChwcmV2VmFsLGN1clZhbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlZHVjaW5nLi4uJywgcHJldlZhbCAsIGN1clZhbCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldlZhbCArIGN1clZhbC52YWx1ZTtcclxuICAgICAgICAgICAgfSwgaW5pdFZhbHVlKTtcclxuICAgICAgICAgICAgbmVnWWVhclRvdGFsLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgeWVhcjogeWVhckRhdGFbMF0uY3VyWWVhcixcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAtY3VyVmFsdWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBvc1llYXJUb3RhbC5wdXNoKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXI6IHllYXJEYXRhWzBdLmN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGN1clZhbHVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZygneWVhciB0b3RhbDonLCApO1xyXG5cclxuICAgICAgICB2YXIgcG9zbGluZSA9IGQzLnNlbGVjdCgnc3ZnJylcclxuICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgIC5kYXR1bShwb3NZZWFyVG90YWwpXHJcbiAgICAgICAgICAgIC5hdHRyKCdkJywgbGluZUdlbilcclxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJ25vbmUnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5jaGFydFdpZHRoKjAuMDUgKyB4U2NhbGUuYmFuZHdpZHRoKCl9LCR7TWF0aC5hYnMoeVNjYWxlKDIqMC43NCkteVNjYWxlKDApKX0pYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIG5lZ2xpbmUgPSBkMy5zZWxlY3QoJ3N2ZycpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAuZGF0dW0obmVnWWVhclRvdGFsKVxyXG4gICAgICAgICAgICAuYXR0cignZCcsIGxpbmVHZW4pXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICdub25lJylcclxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJzdHJva2UtZGFzaGFycmF5XCIsIChcIjMsIDNcIikpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5jaGFydFdpZHRoKjAuMDUgKyB4U2NhbGUuYmFuZHdpZHRoKCl9LCR7TWF0aC5hYnMoeVNjYWxlKDIqMC43NCkteVNjYWxlKDApKX0pYCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdUaXRsZShjb250YWluZXIpe1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsICh0aGlzLnN2Z1dpZHRoIC0gdGhpcy5jaGFydFdpZHRoKSAvIDIgKyB0aGlzLmNoYXJ0V2lkdGgqMC4wNSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCAodGhpcy5zdmdIZWlnaHQgLSB0aGlzLmNoYXJ0SGVpZ2h0KS8yIC0gNTApXHJcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTdwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnNjAwJylcclxuICAgICAgICAgICAgLnRleHQoXCJMZSB0aXRyZSBkdSBncmFwaGlxdWVcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywodGhpcy5zdmdXaWR0aCAtIHRoaXMuY2hhcnRXaWR0aCkgLyAyICsgdGhpcy5jaGFydFdpZHRoKjAuMDUpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgKHRoaXMuc3ZnSGVpZ2h0IC0gdGhpcy5jaGFydEhlaWdodCkvMiAtIDI1KVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzEzcHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgJ2dyYXBoaWsnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgJzQwMCcpXHJcbiAgICAgICAgICAgIC50ZXh0KFwiTGUgc291cy10aXRyZSBkdSBncmFwaGlxdWVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0JvdHRvbUJveChjb250YWluZXIsIHdpZHRoKXtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdzdG9rZS13aWR0aCcsIDEpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDAuMylcclxuICAgICAgICAgICAgLmF0dHIoXCJ4MVwiLCB0aGlzLmNoYXJ0V2lkdGgqMC4wNSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ5MVwiLCB0aGlzLmNoYXJ0SGVpZ2h0LTMwKVxyXG4gICAgICAgICAgICAuYXR0cihcIngyXCIsIHRoaXMuY2hhcnRXaWR0aClcclxuICAgICAgICAgICAgLmF0dHIoXCJ5MlwiLCB0aGlzLmNoYXJ0SGVpZ2h0LTMwKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jaGFydFdpZHRoKjAuMDUpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgdGhpcy5jaGFydEhlaWdodC0xNylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDYwMClcclxuICAgICAgICAgICAgLnRleHQoJ0dyYXBoaXF1ZSA6JylcclxuICAgICAgICAgICAgLmFwcGVuZCgndHNwYW4nKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIHRoaXMuY2hhcnRXaWR0aCowLjA1KyA2NSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmNoYXJ0SGVpZ2h0LTE3KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgICAgICAudGV4dCgnTGUgRGV2b2lyIC0gJyk7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jaGFydFdpZHRoKjAuMDUgKyAxMjIpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgdGhpcy5jaGFydEhlaWdodC0xNylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDYwMClcclxuICAgICAgICAgICAgLnRleHQoJ1NvdXJjZSA6JylcclxuICAgICAgICAgICAgLmFwcGVuZCgndHNwYW4nKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIHRoaXMuY2hhcnRXaWR0aCowLjA1ICsgMTY5KVxyXG4gICAgICAgICAgICAuYXR0cigneScsIHRoaXMuY2hhcnRIZWlnaHQtMTcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA0MDApXHJcbiAgICAgICAgICAgIC50ZXh0KCcgLi4uICcpO1xyXG5cclxuICAgICAgICAvLyBjb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3gnLCB0aGlzLnN2Z1dpZHRoKjAuMSlcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3knLCB0aGlzLnN2Z0hlaWdodCowLjk1MSlcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDYwMClcclxuICAgICAgICAvLyAgICAgLnRleHQoJ05vdGUgOicpXHJcbiAgICAgICAgLy8gICAgIC5hcHBlbmQoJ3RzcGFuJylcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3gnLCB0aGlzLnN2Z1dpZHRoKjAuMSszNSlcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3knLCB0aGlzLnN2Z0hlaWdodCowLjk1MSlcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDQwMClcclxuICAgICAgICAvLyAgICAgLnRleHQoJ0Rvbm7DqWVzIGNvbGxlY3TDqWVzIGRlcHVpcyBodHRwczovL2Rvbm5lZXMubW9udHJlYWwuY2EvdmlsbGUtZGUtbW9udHJlYWwvY29tcHRhZ2UtdmVoaWN1bGVzLXBpZXRvbnMnKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3RGV0YWlscyhjb250YWluZXIsIGxlZ2VuZERhdGEpe1xyXG5cclxuICAgICAgICBjb25zdCBsZWdlbmRDb250YWluZXIgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xlZ2VuZENvbnRhaW5lcicpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7KHRoaXMuc3ZnV2lkdGggLSB0aGlzLmNoYXJ0V2lkdGgpIC8gMiArICh0aGlzLmNoYXJ0V2lkdGgqMC4wNSArIDEwKX0sJHt0aGlzLnN2Z0hlaWdodCowLjA3fSlgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgcm93cyA9IGxlZ2VuZENvbnRhaW5lci5zZWxlY3RBbGwoJ2cnKVxyXG4gICAgICAgICAgICAuZGF0YShsZWdlbmREYXRhKVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xlZ2VuZFJvdycpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCxpKSA9PiBgdHJhbnNsYXRlKDAsJHtpKjIwfSlgKTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcm93cy5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjeCcsIDApXHJcbiAgICAgICAgICAgIC5hdHRyKCdjeScsIDApXHJcbiAgICAgICAgICAgIC5hdHRyKCdyJywgOClcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGNvbG9yRGljdFtkLmNvbG9yXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIHJvd3MuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCAxOClcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCA0KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNTAwKVxyXG4gICAgICAgICAgICAudGV4dCggZCA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5sYWJlbDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdSZWN0YW5nbGVzKGNvbnRhaW5lciwgeFNjYWxlLCB5U2NhbGUpeyAvLyBub3QgdXNlZFxyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGl2ZUFyZWFHcm91cCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgIC5hdHRyKCdpZCcsICdwb3NBcmVhZ3JvdXAnKVxyXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsJHswfSlgKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVnYXRpdmVBcmVhR3JvdXAgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAuYXR0cignaWQnLCAnbmVnQXJlYWdyb3VwJylcclxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgwLCR7MH0pYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBvc1llYXJHcm91cHMgPSBwb3NpdGl2ZUFyZWFHcm91cC5zZWxlY3RBbGwoJ2cnKVxyXG4gICAgICAgICAgICAuZGF0YSh0aGlzLmRhdGEpXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBkID0+IGB5ZWFyXyR7ZC55ZWFyfWApO1xyXG4gICAgICAgIGNvbnN0IHBvc1JlY3RzID0gcG9zWWVhckdyb3Vwcy5zZWxlY3RBbGwoJ3JlY3QnKVxyXG4gICAgICAgICAgICAuZGF0YShkID0+IHsgXHJcbiAgICAgICAgICAgICAgICBsZXQgcG9zRWxlbXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyWWVhciA9IGQueWVhcjtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQpLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjdXJFbGVtPjAgJiYgZW50cnlbMF0gIT09IFwieWVhclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvc0VsZW1zLnNvcnQoKGEsYikgPT4gcG9zaXRpdmVPcmRlckRpY3RbYS50eXBlXSAtIHBvc2l0aXZlT3JkZXJEaWN0W2IudHlwZV0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgZCA9PiBgJHtkLnR5cGV9XyR7ZC52YWx1ZX1gKVxyXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB4U2NhbGUuYmFuZHdpZHRoKCkpXHJcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAoZCxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoeVNjYWxlKDApIC0geVNjYWxlKGQudmFsdWUpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCBkID0+IHhTY2FsZShkLmN1clllYXIpKVxyXG4gICAgICAgICAgICAuYXR0cigneScsIGQgPT4gKHlTY2FsZSgwKSAtIChNYXRoLmFicyh5U2NhbGUoMCkgLSB5U2NhbGUoZC52YWx1ZSkpKSAtIChNYXRoLmFicyh5U2NhbGUoMCkgLSB5U2NhbGUoZC5jdXJUb3QpKSkpKVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsIGQgPT4gY29sb3JEaWN0W2QudHlwZV0pO1xyXG5cclxuICAgICAgICBjb25zdCBuZWdhdGl2ZVllYXJHcm91cHMgPSBuZWdhdGl2ZUFyZWFHcm91cC5zZWxlY3RBbGwoJ2cnKVxyXG4gICAgICAgICAgICAuZGF0YSh0aGlzLmRhdGEpXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBkID0+IGB5ZWFyXyR7ZC55ZWFyfWApO1xyXG5cclxuICAgICAgICBjb25zdCBuZWdSZWN0cyA9IG5lZ2F0aXZlWWVhckdyb3Vwcy5zZWxlY3RBbGwoJ3JlY3QnKVxyXG4gICAgICAgICAgICAuZGF0YShkID0+IHsgXHJcbiAgICAgICAgICAgICAgICBsZXQgbmVnRWxlbXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyWWVhciA9IGQueWVhcjtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQpLmZpbHRlcihlbGVtID0+IGVsZW1bMV08MCkuc29ydCgoYSxiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYVZhbCA9IG5lZ2F0aXZlT3JkZXJEaWN0W2FbMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJWYWwgPSBuZWdhdGl2ZU9yZGVyRGljdFtiWzBdXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYVZhbCAtIGJWYWw7XHJcbiAgICAgICAgICAgICAgICB9KS5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZW50cnlbMF0gIT09IFwieWVhclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVnRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5lZ0VsZW1zO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgZCA9PiBgJHtkLnR5cGV9XyR7ZC52YWx1ZX1gKVxyXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB4U2NhbGUuYmFuZHdpZHRoKCkpXHJcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAoZCxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoeVNjYWxlKDApIC0geVNjYWxlKE1hdGguYWJzKGQudmFsdWUpKSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgZCA9PiB4U2NhbGUoZC5jdXJZZWFyKSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCBkID0+ICh5U2NhbGUoZC5jdXJUb3QpKSlcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGNvbG9yRGljdFtkLnR5cGVdKTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xyXG5pbXBvcnQgcGFyc2UgZnJvbSBcImh0bWwtcmVhY3QtcGFyc2VyXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2F1Z2VzKHByb3BzKXtcclxuICAgLy9jb25zb2xlLmxvZyhwcm9wcylcclxuICBjb25zdCBtYXhXaWR0aFZhbHVlID0gNTA7XHJcbiAgY29uc3QgY2FsY3VsYXRlR2F1Z2VXaWR0aCA9ICgpID0+IHtcclxuICAgIGNvbnN0IGdhdWdlc0VsZW1zID0gZDMuc2VsZWN0KCcuZ2F1Z2VzJykuc2VsZWN0QWxsKCcuZ2F1Z2UnKTtcclxuICAgIGdhdWdlc0VsZW1zLm5vZGVzKCkuZm9yRWFjaCgobm9kZSkgPT4ge1xyXG4gICAgICBsZXQgY3VyV2lkdGggPSBtYXhXaWR0aFZhbHVlO1xyXG4gICAgICBpZihkMy5zZWxlY3Qobm9kZSkuYXR0cignaWQnKSA9PT0gXCJkb2xsYXJzXCIpe1xyXG4gICAgICAgIGN1cldpZHRoID0gcHJvcHMuZG9sbGFycztcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjb21taXR0ZWRWYWx1ZSA9IGN1cldpZHRoID4gMCA/IE1hdGgucm91bmQocHJvcHMuY29tbWl0dGVkL21heFdpZHRoVmFsdWUqMTAwKSA6IDA7XHJcbiAgICAgIGNvbnN0IGdhdWdlVmFsdWUgPSBjdXJXaWR0aCA+IDAgPyBNYXRoLnJvdW5kKGN1cldpZHRoL21heFdpZHRoVmFsdWUqMTAwKSA6IDA7XHJcbiAgICAgIGQzLnNlbGVjdChub2RlKS5zZWxlY3QoJy5nYXVnZUNvbG9ySG9sZGVyJykuc2VsZWN0KCcuY29tbWl0dGVkJykuc3R5bGUoJ3dpZHRoJywgYCR7Y29tbWl0dGVkVmFsdWV9JWApO1xyXG4gICAgICBkMy5zZWxlY3Qobm9kZSkuc2VsZWN0KCcuZ2F1Z2VDb2xvcicpLnN0eWxlKCd3aWR0aCcsIGAke2dhdWdlVmFsdWV9JWApO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVuZGVySmV0b25UZXh0ID0gKGpldG9uc1ZhbHVlKSA9PiB7XHJcbiAgICBpZihNYXRoLmFicyhqZXRvbnNWYWx1ZSk+MSl7XHJcbiAgICAgIHJldHVybiBgJHtqZXRvbnNWYWx1ZX0mbmJzcDtqZXRvbnNgO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke2pldG9uc1ZhbHVlfSZuYnNwO2pldG9uYDtcclxuICB9XHJcblxyXG4gIHVzZUVmZmVjdCggKCkgPT4ge1xyXG4gICAgY2FsY3VsYXRlR2F1Z2VXaWR0aCgpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJnYXVnZXNcIj5cclxuICAgICAgPGRpdiBpZD1cImRvbGxhcnNcIiBjbGFzc05hbWU9XCJnYXVnZSBkb2xsYXJHYXVnZVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZ2F1Z2VDb2xvckhvbGRlciAke3Byb3BzLmRvbGxhcnMgPCAwID8gXCJyZWRcIjpcIlwifWB9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BnYXVnZUNvbG9yICR7cHJvcHMuZG9sbGFycyA8IDAgPyBcInJlZFwiOiBwcm9wcy5nYXVnZUV4cGxhaW4gPyBcImxpZ2h0Ymx1ZVwiIDogXCJibHVlXCJ9YH0+XHJcblxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB7cHJvcHMuY29tbWl0dGVkICE9IDAgP1xyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Bjb21taXR0ZWQgJHtwcm9wcy5kb2xsYXJzIDwgMCA/IFwicmVkXCI6cHJvcHMuZ2F1Z2VFeHBsYWluID8gXCJsaWdodGJsdWVcIiA6IFwiYmx1ZVwifWB9PlxyXG4gICAgICAgICAgICAgIHsvKiA8cD57cHJvcHMuY29tbWl0dGVkfTwvcD4gKi99XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDpcIlwiXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHByb3BzLm1pc3Npb24gP1xyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZhbHVlIGFycm93R2F1Z2VcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxhYmVsSG9sZGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8cD48Yj5CdWRnZXQmbmJzcDt0b3RhbDwvYj48L3A+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXJyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWN0XCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVjdC0xXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVjdC0yXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGFiZWxIb2xkZXJcIiBzdHlsZT17e1widGV4dEFsaWduXCI6IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9e3tcInBhZGRpbmdSaWdodFwiOiBcIjdweFwifX0+PGI+e3BhcnNlKHJlbmRlckpldG9uVGV4dChwcm9wcy5kb2xsYXJzKSl9PC9iPjwvcD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgcHJvcHMuZ2F1Z2VFeHBsYWluID8gXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmFsdWUgZ2F1Z2VFeHBsYWluXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidWRnZXRTdGFtcFwiPlxyXG4gICAgICAgICAgICAgIDxwPjxiPkJ1ZGdldDwvYj48L3A+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsYWJlbEhvbGRlclwiPlxyXG4gICAgICAgICAgICAgICAgey8qIDxwPjxiPkJ1ZGdldDwvYj48L3A+ICovfVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGFiZWxIb2xkZXJcIiBzdHlsZT17e1widGV4dEFsaWduXCI6IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9e3tcInBhZGRpbmdSaWdodFwiOiBcIjdweFwifX0+PGI+e3BhcnNlKHJlbmRlckpldG9uVGV4dChwcm9wcy5kb2xsYXJzLTI1KSl9PC9iPjwvcD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZhbHVlIGJhc2ljR2F1Z2VcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGFiZWxIb2xkZXJcIj5cclxuICAgICAgICAgICAgICAgIDxwPjxiPkJ1ZGdldDwvYj48L3A+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsYWJlbEhvbGRlclwiIHN0eWxlPXt7XCJ0ZXh0QWxpZ25cIjogXCJyaWdodFwifX0+XHJcbiAgICAgICAgICAgICAgICA8cCBzdHlsZT17e1wicGFkZGluZ1JpZ2h0XCI6IFwiN3B4XCJ9fT48Yj57cGFyc2UocmVuZGVySmV0b25UZXh0KHByb3BzLmRvbGxhcnMpKX08L2I+PC9wPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIH1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApXHJcblxyXG59XHJcbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIEludHJvQm94KHByb3BzKXtcblxuICBjb25zdCBzdGFydEdhbWUgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIC8vY29uc29sZS5sb2coJ3N0YXJ0aW5nIGdhbWUnKTtcbiAgICBwcm9wcy5nYW1lU3RhcnQoKTtcbiAgfSk7XG5cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2FtZUJveCB0cmFuc3BhcmVudFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnRyb0JveFwiPlxuICAgICAgICB7cHJvcHMuaW50cm9FbGVtfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXJCb3hcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdGFydGJ1dHRvblwiIG9uQ2xpY2s9e3N0YXJ0R2FtZX0+XG4gICAgICAgICAgPHA+Q29tbWVuY2VyIGxlIGpldTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICApXG5cbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUVmZmVjdH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IEdhdWdlcyB9IGZyb20gXCIuL0dhdWdlc1wiO1xyXG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBNb25pdG9yaW5nKHByb3BzKXtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmKHByb3BzLnRyYW5zaXRpb24pe1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBkMy5zZWxlY3QoXCIubW9uaXRvcmluZ192YWx1ZVwiKS50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTAwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgfSwyMDApO1xyXG4gICAgfVxyXG5cclxuICB9LFtdKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ1wiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vbml0b3JpbmdfY29udGVudFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YG1vbml0b3JpbmdfdmFsdWUgJHtwcm9wcy50cmFuc2l0aW9uID8gXCJ0cmFuc2l0aW9uXCI6IFwiXCJ9YH0+XHJcbiAgICAgICAgICAgIDxHYXVnZXMgcmlnaHRhcnJvd3M9e3Byb3BzLnJpZ2h0YXJyb3dzfSBnYXVnZUV4cGxhaW49e3Byb3BzLmdhdWdlRXhwbGFpbn0gbWlzc2lvbj17cHJvcHMubWlzc2lvbn0gZG9sbGFycz17cHJvcHMuZG9sbGFyc30gY29tbWl0dGVkPXtwcm9wcy5jb21taXR0ZWR9Lz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHsgcHJvcHMudGVyYXdhdHRzIHx8IHByb3BzLnRlcmF3YXR0cyA9PT0gMCA/XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX2NvbnRlbnRcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ19oZWFkZXJcIj5cclxuICAgICAgICAgICAgICA8aDU+PGI+w4lsZWN0cmljaXTDqSBwcm9kdWl0ZTwvYj4mbmJzcDsmIzgyMjY7Jm5ic3A7e3Byb3BzLnRlcmF3YXR0c30mbmJzcDtUV2g8L2g1PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDpcclxuICAgICAgICA8ZGl2PjwvZGl2PlxyXG4gICAgICB9XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgKVxyXG59XHJcbiIsIlxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlUGVyZm9ybWFuY2UoY2hvaWNlc192YWx1ZXMpe1xyXG4gIHJldHVybiBjaG9pY2VzX3ZhbHVlcy5zcGxpdCgnXycpLnNsaWNlKDEpLm1hcChlbGVtID0+IHBhcnNlSW50KGVsZW0pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvcnJlY3RJY29uU291cmNlKGlkeCl7XHJcblxyXG4gIGNvbnN0IGljb25MaXN0ID0gW1xyXG4gICAgXCJIeWRyby5zdmdcIixcclxuICAgIFwiRW9saWVuLnN2Z1wiLFxyXG4gICAgXCJOdWNsZWFpcmUuc3ZnXCIsXHJcbiAgICBcIlNvbGFpcmUuc3ZnXCIsXHJcbiAgICBcIk1vZGVybmlzYXRpb24uc3ZnXCJcclxuICBdO1xyXG4gIHJldHVybiBpY29uTGlzdFtpZHhdO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcmVuZGVyU2lnbiA9ICh2YWx1ZSkgPT4ge1xyXG4gIHJldHVybiBwYXJzZUludCh2YWx1ZSkgPT09IDAgP1xyXG4gICAgXCJcIlxyXG4gICAgOlxyXG4gICAgcGFyc2VJbnQodmFsdWUpIDwgMCA/XHJcbiAgICAgIFwiXCJcclxuICAgICAgOlxyXG4gICAgICBcIkVOQ0FJU1NFUiBcIjtcclxufTtcclxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyBNb25pdG9yaW5nIH0gZnJvbSBcIi4uL2dhdWdlcy9Nb25pdG9yaW5nXCI7XHJcbmltcG9ydCB7IGNhbGN1bGF0ZVBlcmZvcm1hbmNlLCByZW5kZXJTaWduIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xyXG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDaG9pY2UocHJvcHMpe1xyXG4gICAgY29uc29sZS5sb2cocHJvcHMubW9uaXRvcmluZylcclxuXHJcbiAgY29uc3QgW3NlbGVjdGlvbiwgc2V0U2VsZWN0aW9uXSA9IHVzZVN0YXRlKG51bGwpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG5cclxuICB9LCBbXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBzZWxlY3Rpb25idXR0b25zID0gZDMuc2VsZWN0QWxsKCcuY2hvaWNlYnV0dG9uJyk7XHJcbiAgICBzZWxlY3Rpb25idXR0b25zLnNlbGVjdCgnLmJ1dG4nKS5jbGFzc2VkKCdzZWxlY3RlZCcsIGZhbHNlKTtcclxuICAgIGlmKHNlbGVjdGlvbil7XHJcbiAgICAgIGQzLnNlbGVjdChzZWxlY3Rpb24ub2JqKS5zZWxlY3QoJy5idXRuJykuY2xhc3NlZCgnc2VsZWN0ZWQnLCB0cnVlKTtcclxuICAgICAgc2VsZWN0aW9uYnV0dG9ucy5zZWxlY3QoJy5idXRuJykuc3R5bGUoJ29wYWNpdHknLCBcIjAuNVwiKTtcclxuICAgICAgZDMuc2VsZWN0KHNlbGVjdGlvbi5vYmopLnNlbGVjdCgnLmJ1dG4nKS5zdHlsZSgnb3BhY2l0eScsIFwiMVwiKTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIHNlbGVjdGlvbmJ1dHRvbnMuc2VsZWN0KCcuYnV0bicpLnN0eWxlKCdvcGFjaXR5JywgXCIxXCIpO1xyXG4gICAgfVxyXG5cclxuICB9LFtzZWxlY3Rpb25dKVxyXG5cclxuICBjb25zdCBuZXh0UHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jIChjb3N0LCBwZXJmb3JtYW5jZSwgaW5kZXgpID0+IHtcclxuICAgIGxldCB0cmlnZ2VyTmV4dCA9IFN0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddKS5zcGxpdChcIjtcIik7XHJcbiAgICBpZih0cmlnZ2VyTmV4dC5sZW5ndGggPiAxKXtcclxuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KFN0cmluZyh0cmlnZ2VyTmV4dFtpbmRleF0pLnJlcGxhY2UoLyhcXHJcXG58XFxufFxccikvZ20sIFwiXCIpKTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChTdHJpbmcodHJpZ2dlck5leHRbMF0pLnJlcGxhY2UoLyhcXHJcXG58XFxufFxccikvZ20sIFwiXCIpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZihwcm9wcy5jdXJQcm9tcHRbXCJJRFwiXSA9PT0gXCJRMlwiICYmIGluZGV4ID09PSAwKXtcclxuICAgICAgcHJvcHMudXBkYXRlTWVtb3J5T2JqKFwiaW52ZXN0ZWRNb2Rlcm5pemF0aW9uXCIsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHByb3BzLmN1clByb21wdFtcIklEXCJdID09PSBcIlE2XCIgJiYgaW5kZXggPT09IDApe1xyXG4gICAgICAvL0FjY2VwdGVkIENodXJjaGlsbCBGYWxscyBkZWFsLCByZWdpc3RlciBhY3Rpb25cclxuICAgICAgcHJvcHMudXBkYXRlTWVtb3J5T2JqKFwiYWNjZXB0ZWRDaHVyY2hpbGxGYWxsc0RlYWxcIiwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvcHMudXBkYXRlRG9sbGFycyhwYXJzZUludChjb3N0KSk7XHJcbiAgICBwcm9wcy51cGRhdGVQZXJmb3JtYW5jZShwZXJmb3JtYW5jZSk7XHJcbiAgICBzZXRTZWxlY3Rpb24obnVsbCk7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcclxuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XHJcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xyXG4gICAgfVxyXG4gICAgc2V0U2VsZWN0aW9uKG51bGwpO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCB1cGRhdGVTZWxlY3RlZCA9IChldmVudCwgY29zdCwgcGVyZm9ybWFuY2UsIGluZGV4KSA9PiB7XHJcbiAgICBzZXRTZWxlY3Rpb24oe1xyXG4gICAgICBvYmo6IGV2ZW50LnRhcmdldCxcclxuICAgICAgY29zdDogcGFyc2VJbnQoY29zdCksXHJcbiAgICAgIHBlcmZvcm1hbmNlOiBwZXJmb3JtYW5jZSxcclxuICAgICAgaW5kZXg6IGluZGV4XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJlbmRlckpldG9uVGV4dCA9IChqZXRvblZhbHVlKSA9PiB7XHJcbiAgICBpZihNYXRoLmFicyhqZXRvblZhbHVlKT4xKXtcclxuICAgICAgcmV0dXJuIGAke3JlbmRlclNpZ24oamV0b25WYWx1ZSl9JHtNYXRoLmFicyhqZXRvblZhbHVlKX0mbmJzcDtKRVRPTlNgO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3JlbmRlclNpZ24oamV0b25WYWx1ZSl9JHtNYXRoLmFicyhqZXRvblZhbHVlKX0mbmJzcDtKRVRPTmA7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjaGVja0lmRnVsbFplcm8gPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjb3N0cyA9IHByb3BzLmNob2ljZXNfdmFsdWVzLm1hcCgoZWxlbSwgaWR4KSA9PiB7XHJcbiAgICAgIHJldHVybiBwYXJzZUludChlbGVtLnNwbGl0KFwiX1wiKVswXSk7XHJcbiAgICB9KS5maWx0ZXIodmFsID0+ICFOdW1iZXIuaXNOYU4odmFsKSk7XHJcbiAgICByZXR1cm4gY29zdHMuZXZlcnkoaXRlbSA9PiBpdGVtID09PSAwKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4oXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImNob2ljZXNcIiByaWdodGFycm93cz17cHJvcHMuY3VyUHJvbXB0W1wiSURcIl0gPT09IFwiUTVcIiA/XCJ0cnVlXCI6XCJmYWxzZVwifT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm9wcy5jaG9pY2VzLm1hcCgoY2hvaWNlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY29zdCA9IHByb3BzLmNob2ljZXNfdmFsdWVzW2luZGV4XS5zcGxpdCgnXycpWzBdO1xyXG4gICAgICAgICAgICBsZXQgcGVyZm9ybWFuY2UgPSBjYWxjdWxhdGVQZXJmb3JtYW5jZShwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0pO1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hvaWNlYnV0dG9uXCIga2V5PXtpbmRleH0gb25DbGljaz17KGUpID0+IHt1cGRhdGVTZWxlY3RlZChlLCBjb3N0LCBwZXJmb3JtYW5jZSwgaW5kZXgpfX0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPXtpbmRleH0gY2xhc3NOYW1lPVwiYnV0blwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9sZGVyIGljb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtzZWxlY3Rpb24gP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLmluZGV4ID09PSBpbmRleCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLi9hc3NldHMvaW1nL09mZi5zdmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLi9hc3NldHMvaW1nL09uLnN2Z1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLi9hc3NldHMvaW1nL09uLnN2Z1wifT48L2ltZz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvbGRlciBsYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGg0PntwYXJzZShjaG9pY2UpfTwvaDQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrSWZGdWxsWmVybygpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPntwYXJzZShyZW5kZXJKZXRvblRleHQoY29zdCkpfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXJyb3dzQ2hvaWNlc1wiPjxzcGFuPiYjMTAyMzA7PC9zcGFuPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxNb25pdG9yaW5nIHNob3dUV2g9e2ZhbHNlfSBkb2xsYXJzPXsoc2VsZWN0aW9uICYmIHNlbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShcImNvc3RcIikpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycykgKyBwYXJzZUludChzZWxlY3Rpb24uY29zdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuZ2F1Z2VzLnByb3BzLmRvbGxhcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0dGVkPXsoc2VsZWN0aW9uICYmIHNlbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShcImNvc3RcIikgJiYgKHBhcnNlSW50KHNlbGVjdGlvbi5jb3N0KSA8IDApKSA/IE1hdGguYWJzKHNlbGVjdGlvbi5jb3N0KSA6IDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybWFuY2U9e3Byb3BzLmdhdWdlcy5wcm9wcy5wZXJmb3JtYW5jZX0vPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XHJcbiAgICAgICAgICB7cHJvcHMuY3VySW5kZXggPiAwID9cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gcHJldlwiIG9uQ2xpY2s9e3ByZXZpb3VzUHJvbXB0fT5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cclxuICAgICAgICAgICAgICAgIDxwPlByZXZpb3VzPC9wPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICA8ZGl2PjwvZGl2PlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGFjdGlvbmJ1dHRvbiBuZXh0ICR7c2VsZWN0aW9uID8gJycgOiAnZGlzYWJsZWQnfWB9IG9uQ2xpY2s9eygpID0+IHtzZWxlY3Rpb24gPyBuZXh0UHJvbXB0KHNlbGVjdGlvbi5jb3N0LCBzZWxlY3Rpb24ucGVyZm9ybWFuY2UsIHNlbGVjdGlvbi5pbmRleCkgOiBjb25zb2xlLmxvZygnJyl9fT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XHJcbiAgICAgICAgICAgICAgPHA+UG91cnN1aXZyZTwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApXHJcblxyXG59XHJcbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IE1vbml0b3JpbmcgfSBmcm9tIFwiLi4vZ2F1Z2VzL01vbml0b3JpbmdcIjtcbmltcG9ydCB7IGNhbGN1bGF0ZVBlcmZvcm1hbmNlLCByZW5kZXJTaWduIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gTXVsdGlTZWxlY3Rpb24ocHJvcHMpe1xuXG4gIGNvbnN0IFtzZWxlY3Rpb24sIHNldFNlbGVjdGlvbl0gPSB1c2VTdGF0ZShbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXNldFNlbGVjdGlvbigpO1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcblxuICB9LCBbc2VsZWN0aW9uXSk7XG5cbiAgY29uc3QgcmVzZXRTZWxlY3Rpb24gPSAoKSA9PiB7XG4gICAgc2V0U2VsZWN0aW9uKHByb3BzLmNob2ljZXMubWFwKGVsZW0gPT4gbnVsbCkpO1xuICB9XG5cbiAgY29uc3QgY2FsY3VsYXRlVG90YWxTZWxlY3Rpb24gPSAoc2VsZWN0aW9uKSA9PiB7XG4gICAgY29uc3QgYWNjQ29zdCA9IHNlbGVjdGlvbi5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7XG4gICAgICBpZihjdXIpe1xuICAgICAgICBhY2MgKz0gY3VyLmNvc3Q7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIDApO1xuICAgIGxldCBhY2NQZXJmb3JtYW5jZSA9IFswLDAsMF07XG4gICAgc2VsZWN0aW9uLmZvckVhY2goKGN1ciwgY291bnQpID0+IHtcbiAgICAgIGlmKGN1cil7XG4gICAgICAgIGFjY1BlcmZvcm1hbmNlID0gYWNjUGVyZm9ybWFuY2UubWFwKChlbGVtLCBpZHgpID0+IHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWxlbSkgKyBwYXJzZUludChjdXIucGVyZm9ybWFuY2VbaWR4XSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBbYWNjQ29zdCwgYWNjUGVyZm9ybWFuY2VdO1xuICB9O1xuXG4gIGNvbnN0IG5leHRQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKHNlbGVjdGlvbikgPT4ge1xuICAgIGxldCB0cmlnZ2VyTmV4dCA9IHByb3BzLmN1clByb21wdFsnVHJpZ2dlcl9uZXh0J107XG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb2Nlc3NUcmlnZ2VyTmV4dCh0cmlnZ2VyTmV4dCkpO1xuICAgIGNvbnN0IFthY2NDb3N0LCBhY2NQZXJmb3JtYW5jZV0gPSBjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbihzZWxlY3Rpb24pO1xuXG4gICAgcHJvcHMudXBkYXRlRG9sbGFycyhwYXJzZUludChhY2NDb3N0KSk7XG4gICAgcHJvcHMudXBkYXRlUGVyZm9ybWFuY2UoYWNjUGVyZm9ybWFuY2UpO1xuICAgIHJlc2V0U2VsZWN0aW9uKCk7XG4gIH0pO1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgfVxuICAgIHJlc2V0U2VsZWN0aW9uKCk7XG4gIH0pO1xuXG4gIGNvbnN0IHVwZGF0ZVNlbGVjdGVkID0gKGV2ZW50LCBpbmRleCwgY29zdCwgcGVyZm9ybWFuY2UpID0+IHtcbiAgICBsZXQgbmV3QXJyYXkgPSBbLi4uc2VsZWN0aW9uXTtcbiAgICBpZihzZWxlY3Rpb25baW5kZXhdKXtcbiAgICAgIC8vIFVuc2VsZWN0XG4gICAgICBuZXdBcnJheVtpbmRleF0gPSBudWxsO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgLy8gU2VsZWN0XG4gICAgICBuZXdBcnJheVtpbmRleF0gPSB7XG4gICAgICAgIG9iajogZXZlbnQudGFyZ2V0LFxuICAgICAgICBjb3N0OiBwYXJzZUludChjb3N0KSxcbiAgICAgICAgcGVyZm9ybWFuY2U6IHBlcmZvcm1hbmNlXG4gICAgICB9O1xuICAgIH1cbiAgICBzZXRTZWxlY3Rpb24obmV3QXJyYXkpO1xuICB9XG5cbiAgY29uc3QgcHJvY2Vzc1RyaWdnZXJOZXh0ID0gKHRyaWdnZXJOZXh0dG9Db21wdXRlKSA9PiB7XG4gICAgbGV0IGNob3NlblN0cmluZztcbiAgICBjb25zdCBzcGxpdHRlZFRyaWdnZXJOZXh0ID0gU3RyaW5nKHRyaWdnZXJOZXh0dG9Db21wdXRlKS5zcGxpdChcIl9cIik7XG4gICAgY29uc3QgaW5kaXZpZHVhbFRyaWdnZXJOZXh0ID0gU3RyaW5nKHNwbGl0dGVkVHJpZ2dlck5leHRbMF0pLnNwbGl0KFwiO1wiKTtcbiAgICBjb25zdCBmaWx0ZXJlZFNlbGVjdGlvbiA9IHNlbGVjdGlvbi5maWx0ZXIoKGVsZW0pID0+IGVsZW0gIT09IG51bGwpO1xuICAgIGlmKHNwbGl0dGVkVHJpZ2dlck5leHQubGVuZ3RoID4gMSAmJiBmaWx0ZXJlZFNlbGVjdGlvbi5sZW5ndGggPiAwKXtcbiAgICAgIC8vIEluZGl2aWR1YWwgYW5kIGRlZmF1bHQgdmFsdWVzIGFyZSBhdmFpbGFibGVcbiAgICAgIGlmKGZpbHRlcmVkU2VsZWN0aW9uLmxlbmd0aCA+IDEpe1xuICAgICAgICAvLyByZXR1cm4gZGVmYXVsdCBjaG9pY2VcbiAgICAgICAgY2hvc2VuU3RyaW5nID0gU3RyaW5nKHNwbGl0dGVkVHJpZ2dlck5leHRbMV0pO1xuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgY2hvc2VuU3RyaW5nID0gU3RyaW5nKGluZGl2aWR1YWxUcmlnZ2VyTmV4dFtzZWxlY3Rpb24uaW5kZXhPZihmaWx0ZXJlZFNlbGVjdGlvblswXSldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGNob3NlblN0cmluZyA9IFN0cmluZyhzcGxpdHRlZFRyaWdnZXJOZXh0WzBdKTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coJ2NoZWNraW5nIGNob3NlblN0cmluZzonLCBjaG9zZW5TdHJpbmcpO1xuICAgIHJldHVybiBjaG9zZW5TdHJpbmcucmVwbGFjZSgvKFxcclxcbnxcXG58XFxyKS9nbSwgXCJcIik7XG4gIH1cblxuICBjb25zdCByZW5kZXJKZXRvblRleHQgPSAoamV0b25WYWx1ZSkgPT4ge1xuICAgIGlmKE1hdGguYWJzKGpldG9uVmFsdWUpPjEpe1xuICAgICAgcmV0dXJuIGAke3JlbmRlclNpZ24oamV0b25WYWx1ZSl9JHtNYXRoLmFicyhqZXRvblZhbHVlKX0mbmJzcDtKRVRPTlNgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7cmVuZGVyU2lnbihqZXRvblZhbHVlKX0ke01hdGguYWJzKGpldG9uVmFsdWUpfSZuYnNwO0pFVE9OYDtcbiAgfVxuXG4gIGNvbnN0IGNoZWNrSWZGdWxsWmVybyA9ICgpID0+IHtcbiAgICBjb25zdCBjb3N0cyA9IHByb3BzLmNob2ljZXNfdmFsdWVzLm1hcCgoZWxlbSwgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoZWxlbS5zcGxpdChcIl9cIilbMF0pO1xuICAgIH0pLmZpbHRlcih2YWwgPT4gIU51bWJlci5pc05hTih2YWwpKTtcbiAgICByZXR1cm4gY29zdHMuZXZlcnkoaXRlbSA9PiBpdGVtID09PSAwKTtcbiAgfTtcblxuICByZXR1cm4oXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjaG9pY2VzXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICB7XG4gICAgICAgICAgcHJvcHMuY2hvaWNlcy5tYXAoKGNob2ljZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBjb3N0ID0gcHJvcHMuY2hvaWNlc192YWx1ZXNbaW5kZXhdLnNwbGl0KCdfJylbMF07XG4gICAgICAgICAgICBsZXQgcGVyZm9ybWFuY2UgPSBjYWxjdWxhdGVQZXJmb3JtYW5jZShwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0pO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3Rpb25idXR0b25cIiBrZXk9e2luZGV4fSBvbkNsaWNrPXsoZSkgPT4ge3VwZGF0ZVNlbGVjdGVkKGUsIGluZGV4LCBjb3N0LCBwZXJmb3JtYW5jZSl9fT5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPXtpbmRleH0gY2xhc3NOYW1lPXtgYnV0biAke3NlbGVjdGlvbltpbmRleF0gPyAnc2VsZWN0ZWQnIDogJyd9YH0+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGhvbGRlciBpY29uICR7c2VsZWN0aW9uW2luZGV4XSA/ICdzZWxlY3RlZCcgOiAnJ31gfT5cblxuICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgc3JjPXtzZWxlY3Rpb25baW5kZXhdID8gXCJhc3NldHMvaW1nL1BsdXMtT2ZmLnN2Z1wiIDogXCJhc3NldHMvaW1nL1BsdXMtT24uc3ZnXCJ9XG4gICAgICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob2xkZXIgbGFiZWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDQ+e3BhcnNlKGNob2ljZSl9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0lmRnVsbFplcm8oKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD57cGFyc2UocmVuZGVySmV0b25UZXh0KGNvc3QpKX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgICA8TW9uaXRvcmluZyBzaG93VFdoPXtmYWxzZX0gZG9sbGFycz17KHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24ubGVuZ3RoID4gMCkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQocHJvcHMuZ2F1Z2VzLnByb3BzLmRvbGxhcnMpICsgcGFyc2VJbnQoY2FsY3VsYXRlVG90YWxTZWxlY3Rpb24oc2VsZWN0aW9uKVswXSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuZ2F1Z2VzLnByb3BzLmRvbGxhcnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXR0ZWQ9eyhzZWxlY3Rpb24gJiYgc2VsZWN0aW9uLmxlbmd0aCA+IDAgJiYgcGFyc2VJbnQoY2FsY3VsYXRlVG90YWxTZWxlY3Rpb24oc2VsZWN0aW9uKVswXSkgPCAwKSA/IE1hdGguYWJzKHBhcnNlSW50KGNhbGN1bGF0ZVRvdGFsU2VsZWN0aW9uKHNlbGVjdGlvbilbMF0pKSA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2x1bW5cIj5cbiAgICAgICAgICB7cHJvcHMuY3VySW5kZXggPiAwID9cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIHByZXZcIiBvbkNsaWNrPXtwcmV2aW91c1Byb21wdH0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgICAgIDxwPlByZXZpb3VzPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgOlxuICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgYWN0aW9uYnV0dG9uIG5leHQgJHtzZWxlY3Rpb24gPyAnJyA6ICdkaXNhYmxlZCd9YH0gb25DbGljaz17KCkgPT4ge3NlbGVjdGlvbiA/IG5leHRQcm9tcHQoc2VsZWN0aW9uKSA6IGNvbnNvbGUubG9nKCcnKX19PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgIDxwPlBvdXJzdWl2cmU8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgTW9uaXRvcmluZyB9IGZyb20gXCIuLi9nYXVnZXMvTW9uaXRvcmluZ1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gUHJpbnRQcm9tcHQocHJvcHMpe1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBuZXh0UHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBsZXQgdHJpZ2dlck5leHQgPSBwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddO1xuICAgIHByb3BzLmNoYW5nZVByb21wdCh0cmlnZ2VyTmV4dCk7XG4gIH0pO1xuXG4gIGNvbnN0IGdhbWVSZXNldCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgcHJvcHMuZ2FtZVJlc2V0KCk7XG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwcmludHByb21wdFwiPlxuICAgICAge1xuICAgICAgICBwcm9wcy5tZXNzYWdlICE9PSBcIlwiID9cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1lc3NhZ2VcIj5cbiAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICB7cHJvcHMubWVzc2FnZX1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgOlxuICAgICAgICAgIFwiXCJcbiAgICAgIH1cbiAgICAgIHtcbiAgICAgICAgcHJvcHMuY3VySW5kZXggPT09IFwiMVwiID9cbiAgICAgICAgPE1vbml0b3JpbmcgbWlzc2lvbj17dHJ1ZX0gdHJhbnNpdGlvbj17dHJ1ZX0gc2hvd1RXaD17ZmFsc2V9IGRvbGxhcnM9e3Byb3BzLmdhdWdlcy5wcm9wcy5kb2xsYXJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXR0ZWQ9ezB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlPXtwcm9wcy5nYXVnZXMucHJvcHMucGVyZm9ybWFuY2V9Lz5cbiAgICAgICAgOlxuICAgICAgICBcIlwiXG4gICAgICB9XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBwcmV2XCIgb25DbGljaz17cHJldmlvdXNQcm9tcHR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIHtcbiAgICAgICAgcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXSA9PT0gXCJTVEFSVE9WRVJcIiA/XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gbmV4dFwiIG9uQ2xpY2s9e2dhbWVSZXNldH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgPHA+UmVjb21tZW5jZXI8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA6XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gbmV4dFwiIG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgIDxwPlBvdXJzdWl2cmU8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgIH1cbiAgICA8L2Rpdj5cbilcbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgR2F1Z2VzIH0gZnJvbSBcIi4uL2dhdWdlcy9HYXVnZXNcIjtcclxuaW1wb3J0IHsgTW9uaXRvcmluZyB9IGZyb20gXCIuLi9nYXVnZXMvTW9uaXRvcmluZ1wiO1xyXG5pbXBvcnQgeyBnZXRDb3JyZWN0SWNvblNvdXJjZSB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBSZXBhcnRpdGlvbihwcm9wcyl7XHJcblxyXG4gIGNvbnN0IFtqZXRvbnMsIHNldEpldG9uc10gPSB1c2VTdGF0ZSgwKTtcclxuICBjb25zdCBbdGVyYXdhdHRzLCBzZXRUZXJhd2F0dHNdID0gdXNlU3RhdGUoMCk7XHJcbiAgY29uc3QgW290aGVyUGVyZm9NZXRyaWNzLCBzZXRPdGhlclBlcmZvTWV0cmljc10gPSB1c2VTdGF0ZShbMCwwXSk7XHJcbiAgY29uc3QgW3VuaXRzLCBzZXRVbml0c10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW3Rva2Vuc1BlclVuaXQsIHNldFRva2Vuc1BlclVuaXRdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IG1heFRva2VucyA9IHByb3BzLmN1clByb21wdFtcIklEXCJdID09PSBcIlExXCIgPyAyNSA6IDUwO1xyXG4gIGNvbnN0IG51Y2xlYXJJbmRleCA9IDI7XHJcbiAgY29uc3QgZGFtSW5kZXggPSAwO1xyXG5cclxuICB1c2VFZmZlY3QoICgpID0+IHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gZ2V0T3B0aW9uUGFyYW1zKCk7XHJcbiAgICBjb25zdCBuZXdVbml0cyA9IG9wdGlvbnMubWFwKCgpID0+IDApO1xyXG4gICAgY29uc3QgdG9rZW5zUGVyVW5pdCA9IG9wdGlvbnMubWFwKGVsZW0gPT4gTWF0aC5hYnMoZWxlbS51bml0VmFsdWUpKTtcclxuICAgIHNldFVuaXRzKG5ld1VuaXRzKTtcclxuICAgIHNldFRva2Vuc1BlclVuaXQodG9rZW5zUGVyVW5pdCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICB1c2VFZmZlY3QoICgpID0+IHtcclxuICAgIGxldCBuZXdKZXRvbnMgPSB1bml0cy5yZWR1Y2UoXHJcbiAgICAgIChhY2MsIGN1clZhbCwgaW5kZXgpID0+IHtcclxuICAgICAgICBsZXQgY3VyT3B0aW9uUGFyYW1zID0gZ2V0T3B0aW9uUGFyYW1zKClbaW5kZXhdO1xyXG4gICAgICAgIHJldHVybiBhY2MgKyBNYXRoLmFicyhjdXJWYWwpO1xyXG4gICAgICB9LDApO1xyXG4gICAgbGV0IG5ld01XID0gdW5pdHMucmVkdWNlKFxyXG4gICAgICAoYWNjLCBjdXJWYWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgbGV0IGN1ck9wdGlvblBhcmFtcyA9IGdldE9wdGlvblBhcmFtcygpW2luZGV4XTtcclxuICAgICAgICByZXR1cm4gYWNjICsgTWF0aC5yb3VuZChNYXRoLmFicyhjdXJWYWwvY3VyT3B0aW9uUGFyYW1zW1widW5pdFZhbHVlXCJdKSpjdXJPcHRpb25QYXJhbXNbXCJ1bml0VFdodmFsdWVcIl0pO1xyXG4gICAgICB9LDApO1xyXG4gICAgLy9jYWxjdWxhdGUgb3RoZXIgcGVyZm9ybWFuY2UgbWV0cmljcyBhZ2dyZWdhdGlvblxyXG4gICAgbGV0IG5ld090aGVyUGVyZm9NZXRyaWNzID0gWzAsMF07XHJcbiAgICB1bml0cy5mb3JFYWNoKChjdXJWYWwsIGNvdW50KSA9PiB7XHJcbiAgICAgIGxldCBjdXJPcHRpb25QYXJhbXMgPSBnZXRPcHRpb25QYXJhbXMoKVtjb3VudF07XHJcbiAgICAgIG5ld090aGVyUGVyZm9NZXRyaWNzID0gbmV3T3RoZXJQZXJmb01ldHJpY3MubWFwKChlbGVtLCBpZHgpID0+IHtcclxuICAgICAgICBpZihpZHggPT09IDApe1xyXG4gICAgICAgICAgcmV0dXJuIGVsZW0gKyBNYXRoLmFicyhjdXJWYWwvY3VyT3B0aW9uUGFyYW1zW1widW5pdFZhbHVlXCJdKSpjdXJPcHRpb25QYXJhbXNbXCJ1bml0RW52aXJvdmFsdWVcIl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoaWR4ID09PSAxKXtcclxuICAgICAgICAgIHJldHVybiBlbGVtICsgTWF0aC5hYnMoY3VyVmFsL2N1ck9wdGlvblBhcmFtc1tcInVuaXRWYWx1ZVwiXSkqY3VyT3B0aW9uUGFyYW1zW1widW5pdFBvcHV2YWx1ZVwiXTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBzZXRKZXRvbnMobmV3SmV0b25zKTtcclxuICAgIHNldFRlcmF3YXR0cyhuZXdNVyk7XHJcbiAgICBzZXRPdGhlclBlcmZvTWV0cmljcyhuZXdPdGhlclBlcmZvTWV0cmljcyk7XHJcbiAgfSwgW3VuaXRzXSk7XHJcblxyXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcclxuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XHJcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBuZXh0UHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcclxuICAgIGxldCBzcGxpdHRlZFRyaWdnZXJOZXh0ID0gU3RyaW5nKHByb3BzLmN1clByb21wdFsnVHJpZ2dlcl9uZXh0J10pLnNwbGl0KFwiX1wiKTtcclxuICAgIGxldCB0cmlnZ2VyTmV4dCA9IFN0cmluZyhzcGxpdHRlZFRyaWdnZXJOZXh0WzBdKS5zcGxpdChcIjtcIik7XHJcblxyXG4gICAgaWYocHJvcHMuY3VyUHJvbXB0W1wiSURcIl0gPT09IFwiUTFcIiAmJiB1bml0c1tkYW1JbmRleF0gPiAwKXtcclxuICAgICAgcHJvcHMudXBkYXRlTWVtb3J5T2JqKFwiYnVpbHREYW1cIiwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHVuaXRzW2RhbUluZGV4XSA+IDApe1xyXG4gICAgICBwcm9wcy51cGRhdGVNZW1vcnlPYmooXCJidWlsdFNlY29uZERhbVwiLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZih1bml0c1tudWNsZWFySW5kZXhdID4gMCl7XHJcbiAgICAgIC8vTWFrZSBwbGF5ZXIgZGllLCBudWNsZWFyIHdhcyBzZWxlY3RlZFxyXG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQoU3RyaW5nKHRyaWdnZXJOZXh0W251Y2xlYXJJbmRleF0pLnJlcGxhY2UoLyhcXHJcXG58XFxufFxccikvZ20sIFwiXCIpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYodHJpZ2dlck5leHQubGVuZ3RoID09IDEpe1xyXG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQoU3RyaW5nKHRyaWdnZXJOZXh0KS5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRyaWdnZXJOZXh0Lmxlbmd0aCA+IDEpe1xyXG4gICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2tpbmcgbm9uIHVuaXF1ZTonLCBub25VbmlxdWUodW5pdHMpKTtcclxuICAgICAgaWYobm9uVW5pcXVlKHVuaXRzKSl7XHJcbiAgICAgICAgLy8gU29tZSB2YWx1ZXMgYXJlIGVxdWFsLiBIaWVyYXJjaGl6ZVxyXG4gICAgICAgIHByb3BzLmNoYW5nZVByb21wdChoaWVyYXJjaGl6ZVVuaXRzKHRyaWdnZXJOZXh0LCBzcGxpdHRlZFRyaWdnZXJOZXh0WzFdKSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICAvLyBBbGwgdmFsdWVzIGFyZSBkaWZmZXJlbnQsIGhlbmNlIHRyaWdnZXIgY29uY29yZGluZyBuZXh0IHByb21wdFxyXG4gICAgICAgIGxldCBpbmRleE9mTWF4VmFsdWUgPSB1bml0cy5yZWR1Y2UoKGlNYXgsIHgsIGksIGFycikgPT4geCA+IGFycltpTWF4XSA/IGkgOiBpTWF4LCAwKTtcclxuICAgICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQoU3RyaW5nKHRyaWdnZXJOZXh0W2luZGV4T2ZNYXhWYWx1ZV0pLnJlcGxhY2UoLyhcXHJcXG58XFxufFxccikvZ20sIFwiXCIpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJvcHMudXBkYXRlRG9sbGFycygtamV0b25zKTtcclxuICAgIHByb3BzLnVwZGF0ZVBlcmZvcm1hbmNlKFt0ZXJhd2F0dHNdLmNvbmNhdChvdGhlclBlcmZvTWV0cmljcykpO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBub25VbmlxdWUgPSBhID0+IG5ldyBTZXQoYSkuc2l6ZSAhPT0gYS5sZW5ndGg7XHJcblxyXG4gIGNvbnN0IHByb2Nlc3NDaG9pY2VzID0gKGNob2ljZSwgY2hvaWNlc192YWx1ZXMpID0+IHtcclxuICAgIGNvbnN0IHNwbGl0dGVkQ2hvaWNlcyA9IGNob2ljZXNfdmFsdWVzLnNwbGl0KCdfJyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiBjaG9pY2UsXHJcbiAgICAgIHVuaXRWYWx1ZTogcGFyc2VJbnQoc3BsaXR0ZWRDaG9pY2VzWzBdKSxcclxuICAgICAgdW5pdFRXaHZhbHVlOiBwYXJzZUludChzcGxpdHRlZENob2ljZXNbMV0pLFxyXG4gICAgICB1bml0RW52aXJvdmFsdWU6IHBhcnNlSW50KHNwbGl0dGVkQ2hvaWNlc1syXSksXHJcbiAgICAgIHVuaXRQb3B1dmFsdWU6IHBhcnNlSW50KHNwbGl0dGVkQ2hvaWNlc1szXSksXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBnZXRPcHRpb25QYXJhbXMgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gcHJvcHMuY2hvaWNlcy5tYXAoKGNob2ljZSwgaW5kZXgpID0+IHtcclxuICAgICAgcmV0dXJuIHByb2Nlc3NDaG9pY2VzKGNob2ljZSwgcHJvcHMuY2hvaWNlc192YWx1ZXNbaW5kZXhdKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBjb25zdCBjaGVja0lmRnVsbCA9IChuZXdBZGRpdGlvbikgPT4ge1xyXG4gICAgbGV0IHRvdGFsID0gMDtcclxuICAgIHVuaXRzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xyXG4gICAgICB0b3RhbCArPSB2YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgaWYodG90YWwrbmV3QWRkaXRpb24gPiBtYXhUb2tlbnMpe1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjaGVja0hpZGVCdXR0b24gPSAoaWR4KSA9PiB7XHJcbiAgICBjb25zdCBvcHRpb25QYXJhbXMgPSBnZXRPcHRpb25QYXJhbXMoKVtpZHhdO1xyXG4gICAgY29uc3QgY3VyVW5pdFZhbHVlID0gTWF0aC5hYnModW5pdHNbaWR4XSk7XHJcbiAgICBsZXQgaGlkZUJ1dHRvbiA9IFtmYWxzZSxmYWxzZV07XHJcbiAgICBpZihjdXJVbml0VmFsdWUgPT09IDApe1xyXG4gICAgICAvLyBDaGVjayBmb3IgbG93ZXIgYm91bmRhcnlcclxuICAgICAgaGlkZUJ1dHRvblswXSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIGhpZ2hlciBib3VuZGFyeVxyXG4gICAgaWYoamV0b25zK3BhcnNlSW50KE1hdGguYWJzKG9wdGlvblBhcmFtcy51bml0VmFsdWUpKSA+IG1heFRva2Vucyl7XHJcbiAgICAgIGhpZGVCdXR0b25bMV0gPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoaWRlQnV0dG9uO1xyXG5cclxuICB9XHJcblxyXG4gIGNvbnN0IHJlbmRlckpldG9uVGV4dCA9IChqZXRvblZhbHVlKSA9PiB7XHJcbiAgICBpZihNYXRoLmFicyhqZXRvblZhbHVlKT4xKXtcclxuICAgICAgcmV0dXJuIGAke01hdGguYWJzKGpldG9uVmFsdWUpfSZuYnNwO2pldG9uc2A7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7TWF0aC5hYnMoamV0b25WYWx1ZSl9Jm5ic3A7amV0b25gO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbW9kaWZ5T25DbGljayA9IChlLCBpbmRleCwgZGlmZiwgZWxlbSkgPT4ge1xyXG4gICAgbGV0IG5ld0FycmF5ID0gWy4uLnVuaXRzXTtcclxuICAgIGlmKChuZXdBcnJheVtpbmRleF0rZGlmZip0b2tlbnNQZXJVbml0W2luZGV4XSkgPj0gMCl7XHJcbiAgICAgIGlmKGRpZmYgPiAwKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYoIWNoZWNrSWZGdWxsKGRpZmYqdG9rZW5zUGVyVW5pdFtpbmRleF0pKXtcclxuICAgICAgICAgIG5ld0FycmF5W2luZGV4XSA9IG5ld0FycmF5W2luZGV4XSArIGRpZmYqdG9rZW5zUGVyVW5pdFtpbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2V7XHJcbiAgICAgICAgbmV3QXJyYXlbaW5kZXhdID0gbmV3QXJyYXlbaW5kZXhdICsgZGlmZip0b2tlbnNQZXJVbml0W2luZGV4XTtcclxuICAgICAgfVxyXG4gICAgICBzZXRVbml0cyhuZXdBcnJheSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBjaGVja0lmWmVybyA9ICgpID0+IHtcclxuICAgIHJldHVybiBqZXRvbnMgPiAwO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaGllcmFyY2hpemVVbml0cyA9ICh0cmlnZ2VyTmV4dCwgZGVmYXVsdE5leHQpID0+IHtcclxuXHJcbiAgICBjb25zdCBtYXggPSBNYXRoLm1heCguLi51bml0cyk7XHJcbiAgICBjb25zdCByZXMgPSBbXTtcclxuICAgIHVuaXRzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiBpdGVtID09PSBtYXggPyByZXMucHVzaChpbmRleCk6IG51bGwpO1xyXG4gICAgbGV0IGNob3NlblN0cmluZztcclxuICAgIGlmKHJlcy5sZW5ndGggPiAxKXtcclxuICAgICAgLy9NYXggaXMgbXVsdGlwbGUsIGhpZXJhcmNoaXplXHJcbiAgICAgIC8vIEJhcnJhZ2VzIGluZGV4IGlzIDBcclxuICAgICAgLy8gRW9saWVuIGluZGV4IGlzIDFcclxuICAgICAgLy8gSWYgZXF1YWxpdHkgd2l0aCBvbmx5IG90aGVycywgc2tpcCBxdWVzdGlvbi5cclxuXHJcbiAgICAgIGlmKHJlcy5pbmNsdWRlcygwKSl7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2VxdWFsIG1heCB1bml0cyBjb250YWlucyBiYXJyYWdlcycpO1xyXG4gICAgICAgIGNob3NlblN0cmluZyA9IFN0cmluZyh0cmlnZ2VyTmV4dFswXSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihyZXMuaW5jbHVkZXMoMSkpe1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdlcXVhbCBtYXggdW5pdHMgY29udGFpbnMgZW9saWVucycpO1xyXG4gICAgICAgIGNob3NlblN0cmluZyA9IFN0cmluZyh0cmlnZ2VyTmV4dFsxXSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZXF1YWxpdHkgYmV0d2VlbiBub24gaW1wb3J0YW50IGNob2ljZXMnKTtcclxuICAgICAgICBjaG9zZW5TdHJpbmcgPSBTdHJpbmcoZGVmYXVsdE5leHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICBjaG9zZW5TdHJpbmcgPSBTdHJpbmcodHJpZ2dlck5leHRbcmVzWzBdXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNob3NlblN0cmluZy5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKTtcclxuXHJcbiAgfVxyXG5cclxuICBjb25zdCByZW5kZXJSb3dzID0gKGNob2ljZXMpID0+IHtcclxuICAgIHJldHVybiBjaG9pY2VzLm1hcCggKGVsZW0saW5kZXgpID0+IHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wdGlvblVuaXRcIiBrZXk9e2luZGV4fT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VsZWN0b3Jab25lXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZGl2aXNpb24gbWludXNab25lICR7Y2hlY2tIaWRlQnV0dG9uKGluZGV4KVswXSA/ICdkaXNhYmxlZCc6Jyd9YH0gb25DbGljaz17KGUpID0+IG1vZGlmeU9uQ2xpY2soZSwgaW5kZXgsIC0xLCBlbGVtKX0+XHJcbiAgICAgICAgICAgICAgPGgzPi08L2gzPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpc2lvbiBjZW50cmFsWm9uZVwiPlxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICh1bml0c1tpbmRleF0gPT09IHVuZGVmaW5lZCB8fCB1bml0c1tpbmRleF0gPT09IDApID9cclxuICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgc3JjPXtgYXNzZXRzL2ltZy8ke2dldENvcnJlY3RJY29uU291cmNlKGluZGV4KX1gfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgIDxoMz57dW5pdHNbaW5kZXhdfTwvaDM+XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BkaXZpc2lvbiBwbHVzWm9uZSAke2NoZWNrSGlkZUJ1dHRvbihpbmRleClbMV0gPyAnZGlzYWJsZWQnOicnfWB9IG9uQ2xpY2s9eyhlKSA9PiBtb2RpZnlPbkNsaWNrKGUsIGluZGV4LCAxLCBlbGVtKX0+XHJcbiAgICAgICAgICAgICAgPGgzPis8L2gzPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0Wm9uZVwiPlxyXG4gICAgICAgICAgICA8aDM+e2VsZW0ubmFtZX08L2gzPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubGluZXRleHRcIj5cclxuICAgICAgICAgICAgICA8cD57cGFyc2UocmVuZGVySmV0b25UZXh0KGVsZW0udW5pdFZhbHVlKSl9Jm5ic3A7JiM4MjI2OyZuYnNwO3tlbGVtLnVuaXRUV2h2YWx1ZX0gVFdoPC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJyZXBhcnRpdGlvblwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wdGlvblpvbmVcIj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICByZW5kZXJSb3dzKHByb3BzLmNob2ljZXMubWFwKChlLCBpbmRleCkgPT4gcHJvY2Vzc0Nob2ljZXMoZSwgcHJvcHMuY2hvaWNlc192YWx1ZXNbaW5kZXhdKSkpXHJcbiAgICAgICAgfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPE1vbml0b3JpbmcgZ2F1Z2VFeHBsYWluPXtwcm9wcy5jdXJQcm9tcHRbXCJJRFwiXSA9PT0gXCJRMVwiID90cnVlOmZhbHNlfSBzaG93VFdoPXt0cnVlfSBkb2xsYXJzPXtwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycy1qZXRvbnN9IGNvbW1pdHRlZD17amV0b25zfSB0ZXJhd2F0dHM9e3RlcmF3YXR0c30vPlxyXG4gICAgICB7cHJvcHMuY3VySW5kZXggPiAwID9cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBwcmV2XCIgb25DbGljaz17cHJldmlvdXNQcm9tcHR9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XHJcbiAgICAgICAgICAgIDxwPlByZXZpb3VzPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgOlxyXG4gICAgICAgIDxkaXY+PC9kaXY+XHJcbiAgICAgIH1cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e2BhY3Rpb25idXR0b24gbmV4dCAke2NoZWNrSWZaZXJvKCk/ICcnIDogJ2Rpc2FibGVkJ31gfSBvbkNsaWNrPXtuZXh0UHJvbXB0fT5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cclxuICAgICAgICAgIDxwPlBvdXJzdWl2cmU8L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG5cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgZDNUaXAgZnJvbSAnZDMtdGlwJztcblxuZXhwb3J0IGZ1bmN0aW9uIE1hcE5hdmlnYXRvcihwcm9wcyl7XG5cbiAgY29uc3QgW3NlbGVjdGlvbiwgc2V0U2VsZWN0aW9uXSA9IHVzZVN0YXRlKG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0dXBPbkNsaWNrKCk7XG4gIH0sW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYoc2VsZWN0aW9uKXtcbiAgICAgIGQzLnNlbGVjdCgnLnBvcFVwLWJnJykuc3R5bGUoJ2Rpc3BsYXknLCAndW5zZXQnKTtcblxuICAgIH1cbiAgICBlbHNle1xuICAgICAgZDMuc2VsZWN0KCcucG9wVXAtYmcnKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG5cblxuICAgIH1cbiAgfSwgW3NlbGVjdGlvbl0pO1xuXG4gIGNvbnN0IHRyaWdnZXJQb2ludGVyID0gKGVsZW0sIHN0YXRlKSA9PiB7XG4gICAgZDMuc2VsZWN0KGVsZW0pLnN0eWxlKFwiY3Vyc29yXCIsIHN0YXRlID8gXCJwb2ludGVyXCI6bnVsbCk7XG4gIH1cblxuICBjb25zdCB0aXAgPSBkM1RpcCgpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2QzLXRpcCBhZGp1c3RlZCcpXG4gICAgICAgICAgICAgICAgLmRpcmVjdGlvbignbicpXG4gICAgICAgICAgICAgICAgLmh0bWwoKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgICAgICA8aDQ+JHtkLnRpdGxlfTwvaDQ+XG4gICAgICAgICAgICAgICAgICA8cD4ke2Quc3VwcF90ZXh0fTwvcD5cbiAgICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgY29uc3Qgc2V0dXBPbkNsaWNrID0gKCkgPT4ge1xuICAgIFByb21pc2UuYWxsKFtcbiAgICAgIGQzLnhtbChwcm9wcy5tYXBbMF0pLFxuICAgICAgZDMueG1sKHByb3BzLm1hcFsxXSlcbiAgICBdKS50aGVuKChbYmdNYXAsIGljb25PTk1hcF0pID0+IHtcbiAgICAgIGQzLnNlbGVjdCgnI2JnLW1hcCcpLm5vZGUoKVxuICAgICAgICAuYXBwZW5kKGJnTWFwLmRvY3VtZW50RWxlbWVudCk7XG4gICAgICBkMy5zZWxlY3QoJyNvbi1pY29ucycpLm5vZGUoKVxuICAgICAgICAuYXBwZW5kKGljb25PTk1hcC5kb2N1bWVudEVsZW1lbnQpO1xuICAgICAgY29uc3QgT25JY29uc1NWRyA9IGQzLnNlbGVjdCgnI29uLWljb25zJykuc2VsZWN0KCdzdmcnKTtcbiAgICAgIE9uSWNvbnNTVkcuY2FsbCh0aXApO1xuICAgICAgZDMuc2VsZWN0KCcuZ2FtZVNjcmVlbicpLm5vZGUoKS5hcHBlbmRDaGlsZChcbiAgICAgICAgZDMuc2VsZWN0KCcuZDMtdGlwJykubm9kZSgpXG4gICAgICApO1xuICAgICAgY29uc3QgZ0J1dHRvbnMgPSBPbkljb25zU1ZHLnNlbGVjdCgnI0ljb25lLU9uJykuc2VsZWN0QWxsKCdnJyk7XG4gICAgICBjb25zdCB0aXRsZXMgPSBTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peF9pbnNlY2FibGVzJ10pLnNwbGl0KCc6Jyk7XG4gICAgICBjb25zdCBzdXBwX3RleHRzID0gU3RyaW5nKHByb3BzLm1lc3NhZ2UpLnNwbGl0KCc7Jyk7XG4gICAgICBkMy5zZWxlY3QoXCIuZ2FtZUJveFwiKS5vbignY2xpY2snLCAoKSA9PiB7dGlwLmhpZGUoKX0pO1xuICAgICAgZ0J1dHRvbnMubm9kZXMoKS5yZXZlcnNlKCkubWFwKChub2RlLGNvdW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1clRpcERhdGEgPSB7XG4gICAgICAgICAgICB0aXRsZTogdGl0bGVzW2NvdW50XSxcbiAgICAgICAgICAgIHN1cHBfdGV4dDogc3VwcF90ZXh0c1tjb3VudF1cbiAgICAgICAgICB9XG4gICAgICAgIGQzLnNlbGVjdChub2RlKVxuICAgICAgICAub24oJ2NsaWNrJywgKGQsaSxub2RlcykgPT4ge1xuICAgICAgICAgIGQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgdGlwLnNob3coY3VyVGlwRGF0YSwgbm9kZSk7XG4gICAgICAgICAgdG9nZ2xlSWNvbihkLnRhcmdldC5wYXJlbnRFbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgLy9ORVcgISEhXG4gICAgICAgICAgdGlwLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIiwgXCJzdHJva2VcIilcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdtb3VzZW92ZXInLCAoZCxpLG5vZGVzKSA9PiB7XG4gICAgICAgICAgdHJpZ2dlclBvaW50ZXIoZC50YXJnZXQucGFyZW50RWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgICAgdG9nZ2xlSWNvbihkLnRhcmdldC5wYXJlbnRFbGVtZW50LCBmYWxzZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignbW91c2VvdXQnLCAoZCxpLG5vZGVzKSA9PiB7XG4gICAgICAgICAgdHJpZ2dlclBvaW50ZXIoZC50YXJnZXQucGFyZW50RWxlbWVudCwgZmFsc2UpO1xuICAgICAgICAgIHRvZ2dsZUljb24oZC50YXJnZXQucGFyZW50RWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgICAgaWYod2luZG93LmlubmVyV2lkdGggPCA1NzYpe1xuICAgICAgICAgICAgdGlwLmhpZGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KTtcblxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZUljb24gPSAoaWNvbk9iaiwgc3RhdHVzKSA9PiB7XG4gICAgaWYoc3RhdHVzID09PSBmYWxzZSl7XG4gICAgICBkMy5zZWxlY3QoaWNvbk9iaikuc3R5bGUoJ29wYWNpdHknLCAwKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGQzLnNlbGVjdChpY29uT2JqKS5zdHlsZSgnb3BhY2l0eScsIDEpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBwcmV2aW91c1Byb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgaWYocHJvcHMuY3VySW5kZXggPiAwKXtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXTtcblxuICAgIGQzLnNlbGVjdChcIi5nYW1lU2NyZWVuXCIpLnNlbGVjdChcIi5kMy10aXBcIikucmVtb3ZlKCk7XG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KHRyaWdnZXJOZXh0KTtcblxuICB9KTtcblxuICByZXR1cm4gKFxuICA8ZGl2IGNsYXNzTmFtZT1cInByaW50cHJvbXB0IG1hcG5hdmlnYXRvclwiPlxuICAgIDxkaXYgY2xhc3NOYW1lPVwicG9wVXAtYmdcIj5cbiAgICAgIHsgc2VsZWN0aW9uID9cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicG9wVXAtYm94XCI+XG4gICAgICAgIDxoND57cGFyc2Uoc2VsZWN0aW9uLnRpdGxlKX08L2g0PlxuICAgICAgICA8cD57cGFyc2Uoc2VsZWN0aW9uLnN1cHBfdGV4dCl9PC9wPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvblwiIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGlvbihudWxsKX0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICA8cD5GZXJtZXI8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA6XG4gICAgICA8ZGl2PjwvZGl2PlxuICAgICAgfVxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3NOYW1lPVwibWFwSG9sZGVyXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN1cGVycG9zZWRNYXBcIj5cbiAgICAgICAgPGRpdiBpZD1cImJnLW1hcFwiIGNsYXNzTmFtZT1cIm1hcCBub0NsaWNrXCI+PC9kaXY+XG4gICAgICAgIDxkaXYgaWQ9XCJvbi1pY29uc1wiIGNsYXNzTmFtZT1cIm1hcFwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gcHJldlwiIG9uQ2xpY2s9e3ByZXZpb3VzUHJvbXB0fT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIG5leHRcIiBvbkNsaWNrPXtuZXh0UHJvbXB0fT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICA8cD5TdWl2YW50PC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgcGFyc2UgZnJvbSBcImh0bWwtcmVhY3QtcGFyc2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBCaWxhbihwcm9wcyl7XG5cbiAgY29uc3QgZGFtVFdoID0gOTtcbiAgY29uc3QgbmVlZHNJbmNyZWFzZVRXaCA9IDEwO1xuXG4gIC8vIFRoaXMgY29tcG9uZW50IGlzIHF1aXRlIGhhcmRjb2RlZCBhcyBpdCdzIHZlcnkgc3BlY2lmaWMgdG8gdGhpcyBIeWRyby1RdWViZWMgZ2FtZS5cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIGNvbnNvbGUubG9nKCdnb3QgYmlsYW4gOiAnLCBwcm9wcy5jdXJQcm9tcHQpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXTtcblxuICAgIHByb3BzLmNoYW5nZVByb21wdCh0cmlnZ2VyTmV4dCk7XG5cbiAgfSk7XG5cbiAgY29uc3QgcHJvY2Vzc0JpbGFuMSA9ICgpID0+IHtcbiAgICBsZXQgdGV4dENvbnRlbnRBcnJheSA9IHByb3BzLmN1clByb21wdFtcIlRleHRlXCJdLnNwbGl0KCc7Jyk7XG4gICAgbGV0IHRleHRTdXBwQXJyYXkgPSBwcm9wcy5jdXJQcm9tcHRbXCJUZXh0ZV9TdXBwXCJdLnNwbGl0KCc7Jyk7XG4gICAgbGV0IHByb2Nlc3NlZENvbnRlbnQgPSBbXTtcbiAgICAvLyBnZW5lcmljIHRleHRcbiAgICBjb25zdCBkYW1FbmVyZ3kgPSBwcm9wcy5tZW1vcnlPYmouYnVpbHREYW0gPyBkYW1UV2ggOiAwO1xuICAgIGNvbnN0IGFkanVzdGVkUHJvZHVjdGlvblZhbHVlID0gcGFyc2VJbnQocHJvcHMucGVyZm9ybWFuY2VbMF0pIC0gZGFtRW5lcmd5O1xuICAgIGNvbnN0IGN1ckRvbGxhcnMgPSBwYXJzZUludChwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycyk7XG5cbiAgICBsZXQgZ2VuZXJpY1RleHQgPSB0ZXh0Q29udGVudEFycmF5WzBdLnJlcGxhY2UoJypuZXdQcm9kKicsIGFkanVzdGVkUHJvZHVjdGlvblZhbHVlICsgXCImbmJzcDtUV2hcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCcqYXVnbWVudGVkaW1pbnVlKicsIGFkanVzdGVkUHJvZHVjdGlvblZhbHVlIDwgMCA/IFwiZGltaW51w6lcIjpcImF1Z21lbnTDqVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJypzdWZmaXNhbnRlaW5zdWZmaXNhbnRlKicsIGFkanVzdGVkUHJvZHVjdGlvblZhbHVlIDwgMTAgPyBcImluc3VmZmlzYW50ZVwiOlwic3VmZmlzYW50ZVwiKTtcblxuICAgIHByb2Nlc3NlZENvbnRlbnQucHVzaChnZW5lcmljVGV4dCk7XG4gICAgaWYocHJvcHMubWVtb3J5T2JqLmJ1aWx0RGFtKXtcbiAgICAgIGxldCBiYXJyYWdlVGV4dCA9IHRleHRTdXBwQXJyYXlbMF0uc3BsaXQoXCI6XCIpWzFdLnJlcGxhY2UoXCIqZGFtVFdoKlwiLCBkYW1UV2gpO1xuICAgICAgcHJvY2Vzc2VkQ29udGVudC5wdXNoKGJhcnJhZ2VUZXh0KTtcbiAgICB9XG4gICAgaWYoY3VyRG9sbGFycyA8IDE1KXtcbiAgICAgIGxldCBsb3dDYXNoVGV4dCA9IHRleHRTdXBwQXJyYXlbMV0uc3BsaXQoXCI6XCIpWzFdO1xuICAgICAgcHJvY2Vzc2VkQ29udGVudC5wdXNoKGxvd0Nhc2hUZXh0KTtcbiAgICB9XG4gICAgaWYocGFyc2VJbnQocHJvcHMucGVyZm9ybWFuY2VbMV0pIDwgMCl7XG4gICAgICBsZXQgbG93RW52VGV4dCA9IHRleHRTdXBwQXJyYXlbMl0uc3BsaXQoXCI6XCIpWzFdO1xuICAgICAgcHJvY2Vzc2VkQ29udGVudC5wdXNoKGxvd0VudlRleHQpO1xuICAgIH1cbiAgICBpZihwYXJzZUludChwcm9wcy5wZXJmb3JtYW5jZVsyXSkgPCAwKXtcbiAgICAgIGxldCBsb3dQb3BUZXh0ID0gdGV4dFN1cHBBcnJheVszXS5zcGxpdChcIjpcIilbMV07XG4gICAgICBwcm9jZXNzZWRDb250ZW50LnB1c2gobG93UG9wVGV4dCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2Nlc3NlZENvbnRlbnQ7XG4gIH07XG5cbiAgY29uc3QgcHJvY2Vzc0JpbGFuMiA9ICgpID0+IHtcbiAgICAvLyBjb25zb2xlLmxvZygnYWNjZXB0ZWQgY2h1cmNoaWxsIGZhbGxzIGRlYWw/JywgcHJvcHMubWVtb3J5T2JqLmFjY2VwdGVkQ2h1cmNoaWxsRmFsbHNEZWFsKTtcbiAgICBsZXQgcHJvY2Vzc2VkQ29udGVudCA9IFtdO1xuICAgIGxldCB0ZXh0Q29udGVudEFycmF5ID0gcHJvcHMuY3VyUHJvbXB0W1wiVGV4dGVcIl0uc3BsaXQoJzsnKTtcbiAgICBsZXQgdGV4dFN1cHBBcnJheSA9IHByb3BzLmZpbmFsQmlsYW5EYXRhO1xuXG4gICAgY29uc3QgZmlyc3REYW1FbmVyZ3kgPSBwcm9wcy5tZW1vcnlPYmouYnVpbHREYW0gPyBkYW1UV2ggOiAwO1xuICAgIGNvbnN0IHNlY29uZERhbUVuZXJneSA9IHByb3BzLm1lbW9yeU9iai5idWlsdFNlY29uZERhbSA/IGRhbVRXaCA6IDA7XG4gICAgY29uc3QgYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUgPSBwYXJzZUludChwcm9wcy5wZXJmb3JtYW5jZVswXSkgLSBzZWNvbmREYW1FbmVyZ3kgLSBmaXJzdERhbUVuZXJneTtcbiAgICBjb25zdCBjdXJEb2xsYXJzID0gcGFyc2VJbnQocHJvcHMuZ2F1Z2VzLnByb3BzLmRvbGxhcnMpO1xuICAgIGNvbnN0IGVudmlyb25tZW50VmFsdWUgPSBwYXJzZUludChwcm9wcy5wZXJmb3JtYW5jZVsxXSk7XG4gICAgY29uc3QgcG9wdWxhcml0ZVZhbHVlID0gcGFyc2VJbnQocHJvcHMucGVyZm9ybWFuY2VbMl0pO1xuXG4gICAgbGV0IFRXaEVudlRleHQ7XG4gICAgaWYoYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUgPj0gMjUgJiZcbiAgICAgICAgZW52aXJvbm1lbnRWYWx1ZSA+IDAgJiZcbiAgICAgICAgcHJvcHMubWVtb3J5T2JqLmFjY2VwdGVkQ2h1cmNoaWxsRmFsbHNEZWFsKXtcbiAgICAgICAgLy8gQWNjZXB0ZWQgQ2h1cmNoaWxsIEZhbGxzICsgc3VjY2VzcyBpbiBlbnZpcm9ubWVudCAmIFRXaFxuICAgICAgVFdoRW52VGV4dCA9IHRleHRTdXBwQXJyYXlbMF0ucHJpbnQ7XG4gICAgfVxuICAgIGVsc2UgaWYoYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUgPj0gMjUgJiZcbiAgICAgICAgICAgIGVudmlyb25tZW50VmFsdWUgPiAwICYmXG4gICAgICAgICAgICAhcHJvcHMubWVtb3J5T2JqLmFjY2VwdGVkQ2h1cmNoaWxsRmFsbHNEZWFsKXtcbiAgICAgICAgLy8gUmVqZWN0ZWQgQ2h1cmNoaWxsIEZhbGxzICsgc3VjY2VzcyBpbiBlbnZpcm9ubWVudCAmIFRXaFxuICAgICAgVFdoRW52VGV4dCA9IHRleHRTdXBwQXJyYXlbMV0ucHJpbnQ7XG4gICAgfVxuICAgIGVsc2UgaWYoYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUgPCAyNSAmJiBlbnZpcm9ubWVudFZhbHVlID4gMCl7XG4gICAgICAvLyBzdWNjZXNzIGluIGVudmlyb25tZW50ICYgYnV0IGZhaWxlZCB0byByZWFjaCBUV2ggbmVlZHMuIENodXJjaGlsbCBGYWxscyBpcyBub3QgaW1wb3J0YW50XG4gICAgICBUV2hFbnZUZXh0ID0gdGV4dFN1cHBBcnJheVsyXS5wcmludDtcbiAgICB9XG4gICAgZWxzZSBpZihhZGp1c3RlZFByb2R1Y3Rpb25WYWx1ZSA+PSAyNSAmJlxuICAgICAgICAgICAgZW52aXJvbm1lbnRWYWx1ZSA8PSAwICYmXG4gICAgICAgICAgICBwcm9wcy5tZW1vcnlPYmouYWNjZXB0ZWRDaHVyY2hpbGxGYWxsc0RlYWwpe1xuICAgICAgLy8gQWNjZXB0ZWQgQ2h1cmNoaWxsIEZhbGxzICsgc3VjY2VzcyBpbiBUV2ggYnV0IGZhaWx1cmUgaW4gZW52aXJvbm1lbnRcbiAgICAgIFRXaEVudlRleHQgPSB0ZXh0U3VwcEFycmF5WzNdLnByaW50O1xuICAgIH1cbiAgICBlbHNlIGlmKGFkanVzdGVkUHJvZHVjdGlvblZhbHVlID49IDI1ICYmXG4gICAgICAgICAgICBlbnZpcm9ubWVudFZhbHVlIDw9IDAgJiZcbiAgICAgICAgICAgICFwcm9wcy5tZW1vcnlPYmouYWNjZXB0ZWRDaHVyY2hpbGxGYWxsc0RlYWwpe1xuICAgICAgLy8gUmVqZWN0ZWQgQ2h1cmNoaWxsIEZhbGxzICsgc3VjY2VzcyBpbiBUV2ggYnV0IGZhaWx1cmUgaW4gZW52aXJvbm1lbnRcbiAgICAgIFRXaEVudlRleHQgPSB0ZXh0U3VwcEFycmF5WzRdLnByaW50O1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgLy8gZmFpbHVyZSBpbiBlbnZpcm9ubWVudCAmIFRXaC4gQ2h1cmNoaWxsIEZhbGxzIGlzIG5vdCBpbXBvcnRhbnRcbiAgICAgIFRXaEVudlRleHQgPSB0ZXh0U3VwcEFycmF5WzVdLnByaW50O1xuICAgIH1cbiAgICBUV2hFbnZUZXh0ID0gVFdoRW52VGV4dC5yZXBsYWNlKFwiKmF1Z21lbnRlZGltaW51ZSpcIiwgYWRqdXN0ZWRQcm9kdWN0aW9uVmFsdWUgPCAwID8gXCJkaW1pbnXDqVwiOlwiYXVnbWVudMOpXCIpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKFwiKm5ld1Byb2QqXCIsIGFkanVzdGVkUHJvZHVjdGlvblZhbHVlKyBcIiZuYnNwO1RXaFwiKTtcbiAgICBwcm9jZXNzZWRDb250ZW50LnB1c2goVFdoRW52VGV4dCk7XG5cbiAgICBpZihwcm9wcy5tZW1vcnlPYmouYnVpbHREYW0gfHwgcHJvcHMubWVtb3J5T2JqLmJ1aWx0U2Vjb25kRGFtKXtcbiAgICAgIGxldCBiYXJyYWdlVGV4dDtcbiAgICAgIGlmKHByb3BzLm1lbW9yeU9iai5idWlsdERhbSAmJiBwcm9wcy5tZW1vcnlPYmouYnVpbHRTZWNvbmREYW0pe1xuICAgICAgICBiYXJyYWdlVGV4dCA9IHRleHRTdXBwQXJyYXlbOV0ucHJpbnQ7XG4gICAgICB9XG4gICAgICBlbHNlIGlmKHByb3BzLm1lbW9yeU9iai5idWlsdERhbSl7XG4gICAgICAgIC8vIGJ1aWx0IERhbSBpbiBmaXJzdCB0ZXJtXG4gICAgICAgIGJhcnJhZ2VUZXh0ID0gdGV4dFN1cHBBcnJheVs3XS5wcmludDtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYocHJvcHMubWVtb3J5T2JqLmJ1aWx0U2Vjb25kRGFtKXtcbiAgICAgICAgLy8gYnVpbHQgRGFtIGluIHNlY29uZCB0ZXJtXG4gICAgICAgIGJhcnJhZ2VUZXh0ID0gdGV4dFN1cHBBcnJheVs4XS5wcmludDtcbiAgICAgIH1cbiAgICAgIC8vIE1vZGlmaXkgaWYgbmVlZGVkOiBiYXJyYWdlVGV4dCA9IGJhcnJhZ2VUZXh0LnJlcGxhY2UoXCJcIilcbiAgICAgIHByb2Nlc3NlZENvbnRlbnQucHVzaChiYXJyYWdlVGV4dCk7XG4gICAgfVxuXG4gICAgbGV0IGNhc2hUZXh0O1xuICAgIGlmKGN1ckRvbGxhcnMgPj0gNSl7XG4gICAgICBjYXNoVGV4dCA9IHRleHRTdXBwQXJyYXlbMTFdLnByaW50O1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgY2FzaFRleHQgPSB0ZXh0U3VwcEFycmF5WzEyXS5wcmludDtcbiAgICB9XG4gICAgcHJvY2Vzc2VkQ29udGVudC5wdXNoKGNhc2hUZXh0KTtcblxuICAgIGxldCBwb3B1VGV4dDtcbiAgICBpZihwb3B1bGFyaXRlVmFsdWUgPj0gNCl7XG4gICAgICBwb3B1VGV4dCA9IHRleHRTdXBwQXJyYXlbMTRdLnByaW50O1xuICAgIH1cbiAgICBlbHNlIGlmKHBvcHVsYXJpdGVWYWx1ZSA+PSAtMiAmJiBwb3B1bGFyaXRlVmFsdWUgPCA0KXtcbiAgICAgIHBvcHVUZXh0ID0gdGV4dFN1cHBBcnJheVsxNV0ucHJpbnQ7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBwb3B1VGV4dCA9IHRleHRTdXBwQXJyYXlbMTZdLnByaW50O1xuICAgIH1cbiAgICBwcm9jZXNzZWRDb250ZW50LnB1c2gocG9wdVRleHQpXG5cbiAgICByZXR1cm4gcHJvY2Vzc2VkQ29udGVudDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJiaWxhbkNvbnRlbnRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXBkYXRhYmxlVGV4dFwiPlxuICAgICAgICB7XG4gICAgICAgICAgcHJvcHMuY3VyUHJvbXB0W1wiSURcIl0gPT09IFwiQjFcIiA/XG4gICAgICAgICAgICBwcm9jZXNzQmlsYW4xKCkubWFwKChlbGVtLCBjb3VudCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8cCBrZXk9e2NvdW50fT5cbiAgICAgICAgICAgICAgICB7cGFyc2UoZWxlbSl9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgIHByb2Nlc3NCaWxhbjIoKS5tYXAoKGVsZW0sIGNvdW50KSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxwIGtleT17Y291bnR9PlxuICAgICAgICAgICAgICAgIHtwYXJzZShlbGVtKX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gbmV4dFwiIG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5Qb3Vyc3VpdnJlPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG5cbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBFbmRHYW1lKHByb3BzKXtcclxuICAvL2NvbnNvbGUubG9nKHByb3BzKVxyXG5cclxuICBjb25zdCBnYW1lUmVzZXQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xyXG4gICAgcHJvcHMuZ2FtZVJlc2V0KCk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInByb21wdEJveFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3VydGl0cmVcIj5cclxuICAgICAgICAgIDxoND5GaW4gZHUgamV1PC9oND5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInF1ZXN0aW9uXCI+XHJcbiAgICAgICAgICA8cD5MZSBDQSBkJ0h5ZHJvLVF1w6liZWMgdm90ZSDDoCBsJ3VuYW5pbWl0w6kgcG91ciB2b3VzIGTDqW1ldHRyZSBkZSB2b3MgZm9uY3Rpb25zLiAgICBcclxuICAgICAgICAgICAge2Ake3Byb3BzLnJhaXNvbn1gfVxyXG4gICAgICAgICAgICA8YnI+PC9icj48YnI+PC9icj5cclxuICAgICAgICAgICAgVGVudGV6IHZvdHJlIGNoYW5jZSBkZSBub3V2ZWF1LlxyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25TZWN0aW9uXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gbmV4dFwiIG9uQ2xpY2s9e2dhbWVSZXNldH0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cclxuICAgICAgICAgICAgPHA+UmVjb21tZW5jZXI8L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgY2FsY3VsYXRlUGVyZm9ybWFuY2UgfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBDYXRhc3Ryb3BoZShwcm9wcyl7XG5cbiAgY29uc3QgcHJldmlvdXNQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IG5leHRQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKGNvc3QsIHBlcmZvcm1hbmNlKSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXTtcblxuICAgIHByb3BzLmNoYW5nZVByb21wdCh0cmlnZ2VyTmV4dCk7XG5cbiAgICBwcm9wcy51cGRhdGVEb2xsYXJzKHBhcnNlSW50KGNvc3QpKTtcbiAgICBwcm9wcy51cGRhdGVQZXJmb3JtYW5jZShwZXJmb3JtYW5jZSk7XG4gIH0pO1xuXG4gIGNvbnN0IHBhcnNlQ2hvaWNlVmFsdWVzID0gKGNob2ljZV92YWx1ZSkgPT4ge1xuICAgIGNvbnN0IHNwbGl0dGVkQ2hvaWNlVmFsdWVzID0gU3RyaW5nKGNob2ljZV92YWx1ZSkuc3BsaXQoJ18nKTtcbiAgICByZXR1cm4ge1xuICAgICAgY29zdDogc3BsaXR0ZWRDaG9pY2VWYWx1ZXNbMF0sXG4gICAgICBwZXJmb3JtYW5jZTogc3BsaXR0ZWRDaG9pY2VWYWx1ZXMuc3BsaWNlKDEpXG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwcmludHByb21wdFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXNzYWdlXCI+XG4gICAgICAgIDxwPlxuICAgICAgICAgIHtwYXJzZShwcm9wcy5jaG9pY2VzW3Byb3BzLndoaWNoRXZlbnRIYXBwZW5zXSl9XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gcHJldlwiIG9uQ2xpY2s9e3ByZXZpb3VzUHJvbXB0fT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgPHA+UHJldmlvdXM8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBuZXh0XCIgb25DbGljaz17KCkgPT4gbmV4dFByb21wdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUNob2ljZVZhbHVlcyhwcm9wcy5jaG9pY2VzX3ZhbHVlc1twcm9wcy53aGljaEV2ZW50SGFwcGVuc10pLmNvc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VDaG9pY2VWYWx1ZXMocHJvcHMuY2hvaWNlc192YWx1ZXNbcHJvcHMud2hpY2hFdmVudEhhcHBlbnNdKS5wZXJmb3JtYW5jZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5Qb3Vyc3VpdnJlPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IENob2ljZSB9IGZyb20gXCIuL3Byb21wdGZpbGwvQ2hvaWNlXCI7XHJcbmltcG9ydCB7IE11bHRpU2VsZWN0aW9uIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9NdWx0aVNlbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBQcmludFByb21wdCB9IGZyb20gXCIuL3Byb21wdGZpbGwvUHJpbnRQcm9tcHRcIjtcclxuaW1wb3J0IHsgUmVwYXJ0aXRpb24gfSBmcm9tIFwiLi9wcm9tcHRmaWxsL1JlcGFydGl0aW9uXCI7XHJcbmltcG9ydCB7IE1hcE5hdmlnYXRvciB9IGZyb20gXCIuL3Byb21wdGZpbGwvTWFwTmF2aWdhdG9yXCI7XHJcbmltcG9ydCB7IEJpbGFuIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9CaWxhblwiO1xyXG5pbXBvcnQgeyBFbmRHYW1lIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9FbmRHYW1lXCI7XHJcbmltcG9ydCB7IENhdGFzdHJvcGhlIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9DYXRhc3Ryb3BoZVwiO1xyXG5pbXBvcnQgcGFyc2UgZnJvbSBcImh0bWwtcmVhY3QtcGFyc2VyXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUHJvbXB0Qm94KHByb3BzKXtcclxuICAvL2NvbnNvbGUubG9nKHByb3BzKVxyXG5cclxuICBjb25zdCBbIG1lbW9yeU9iaiwgc2V0TWVtb3J5T2JqXSA9IHVzZVN0YXRlKHtcclxuICAgIGludmVzdGVkTW9kZXJuaXphdGlvbjogZmFsc2UsXHJcbiAgICBidWlsdERhbTogZmFsc2UsXHJcbiAgICBidWlsdFNlY29uZERhbTpmYWxzZSxcclxuICAgIGFjY2VwdGVkQ2h1cmNoaWxsRmFsbHNEZWFsOiBmYWxzZSxcclxuICAgIGJ1aWx0TnVjbGVhcjogZmFsc2UsXHJcbiAgICBudWNsZWFyQnVpbHROdW1iZXI6IDBcclxuICB9KVxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG5cclxuICB9LCBbXSk7XHJcblxyXG5cclxuICBjb25zdCBnYW1lUmVzZXQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xyXG4gICAgc2V0TWVtb3J5T2JqKHtcclxuICAgICAgaW52ZXN0ZWRNb2Rlcm5pemF0aW9uOiBmYWxzZSxcclxuICAgICAgYnVpbHREYW06IGZhbHNlLFxyXG4gICAgICBidWlsdFNlY29uZERhbTogZmFsc2UsXHJcbiAgICAgIGFjY2VwdGVkQ2h1cmNoaWxsRmFsbHNEZWFsOiBmYWxzZSxcclxuICAgICAgYnVpbHROdWNsZWFyOiBmYWxzZSxcclxuICAgICAgbnVjbGVhckJ1aWx0TnVtYmVyOiAwXHJcbiAgICB9KTtcclxuICAgIHByb3BzLmdhbWVSZXNldCgpO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBjaGFuZ2VQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKG5ld1ZhbHVlKSA9PiB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnQ2hhbmdpbmcgcHJvbXB0IGZvciA6ICcsIG5ld1ZhbHVlKTtcclxuICAgIHByb3BzLmNoYW5nZVByb21wdChuZXdWYWx1ZSk7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHVwZGF0ZURvbGxhcnMgPSB1c2VDYWxsYmFjayggYXN5bmMgKGRpZmZWYWx1ZSkgPT4ge1xyXG4gICAgaWYoTnVtYmVyLmlzSW50ZWdlcihkaWZmVmFsdWUpKXtcclxuICAgICAgcHJvcHMudXBkYXRlRG9sbGFycyhkaWZmVmFsdWUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjb25zdCB1cGRhdGVQZXJmb3JtYW5jZSA9IHVzZUNhbGxiYWNrKCBhc3luYyAoZGlmZkFycmF5KSA9PiB7XHJcbiAgICBwcm9wcy51cGRhdGVQZXJmb3JtYW5jZShkaWZmQXJyYXkpO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCB1cGRhdGVNZW1vcnlPYmogPSB1c2VDYWxsYmFjayggYXN5bmMgKGZpZWxkLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgbGV0IG5ld01lbW9yeU9iaiA9IHsuLi5tZW1vcnlPYmp9O1xyXG4gICAgbmV3TWVtb3J5T2JqW2ZpZWxkXSA9IG5ld1ZhbHVlO1xyXG4gICAgc2V0TWVtb3J5T2JqKG5ld01lbW9yeU9iaik7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHByb2Nlc3NSZWFzb25FbmRHYW1lID0gKCkgPT4ge1xyXG4gICAgbGV0IHJlYXNvbnMgPSBbXTtcclxuICAgIGNvbnNvbGUubG9nKG1lbW9yeU9iaik7XHJcbiAgICAvLyBpZihjb25kaXRpb24pe1xyXG4gICAgLy8gICByZWFzb25zLnB1c2goXCIgRW4gY2hvaXNpc3NhbnQgZGUgcsOpaW52ZXN0aXIgZGFucyBsJ8OpbmVyZ2llIG51Y2zDqWFpcmUsIHZvdHJlIGNyw6lkaWJpbGl0w6kgcG91ciBwYXZlciBsYSB2b2llIHZlcnMgbGEgY2FyYm9uZXV0cmFsaXTDqSBkZSBsYSBwcm92aW5jZSBhIMOpdMOpIGdyYW5kZW1lbnQgYWZmZWN0w6llLiBcIik7XHJcbiAgICAvLyB9XHJcbiAgICBpZihwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycyA8IDApe1xyXG4gICAgICByZWFzb25zLnB1c2goXCIgVm91cyBhdmV6IHZpZMOpIGxlcyBjb2ZmcmVzIGRlIGxhIHNvY2nDqXTDqSBkJ8OJdGF0LiBcIik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHByb3BzLnBlcmZvcm1hbmNlWzFdIDwgLTkpe1xyXG4gICAgICByZWFzb25zLnB1c2goXCIgVm90cmUgdmlzaW9uIHZhIMOgIGwnZW5jb250cmUgZGUgbCdvYmplY3RpZiBkZSBjYXJib25ldXRyYWxpdMOpIGR1IFF1w6liZWMuIFwiKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYocHJvcHMucGVyZm9ybWFuY2VbMl0gPCAtOSl7XHJcbiAgICAgIHJlYXNvbnMucHVzaChcIiBMYSBwb3B1bGF0aW9uIGNvbnRlc3RlIHZvdHJlIHZpc2lvbiBwb3VyIGxlIGZ1dHVyIMOpbmVyZ8OpdGlxdWUgZHUgUXXDqWJlYy4gXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlYXNvbnM7XHJcbiAgfVxyXG5cclxuICBjb25zdCByZW5kZXJTd2l0Y2ggPSAocGFyYW0pID0+IHtcclxuICAgIHN3aXRjaChwYXJhbSl7XHJcbiAgICAgIGNhc2UgJ1JlcGFydGl0aW9uJyA6XHJcbiAgICAgICAgcmV0dXJuIDxSZXBhcnRpdGlvbiBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4X2luc2VjYWJsZXMnXSkuc3BsaXQoJzonKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXNfdmFsdWVzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDb3V0X0VsZWNfRW52X1BvcHUnXSkuc3BsaXQoJzsnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRG9sbGFycz17dXBkYXRlRG9sbGFyc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1lbW9yeU9iaj17dXBkYXRlTWVtb3J5T2JqfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F1Z2VzPXtwcm9wcy5nYXVnZXN9Lz47XHJcbiAgICAgIGNhc2UgJ0NhcnRlJzpcclxuICAgICAgICByZXR1cm4gPE1hcE5hdmlnYXRvciBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ1RleHRlX1N1cHAnXSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLmN1ckluZGV4ID09PSBcIlExLTFcIiA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1wiYXNzZXRzL2ltZy9DYXJ0ZS1IeWRyby5zdmdcIixcImFzc2V0cy9pbWcvQ2FydGUtSHlkcm8taWNvbmUtb24uc3ZnXCJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcImFzc2V0cy9pbWcvQ2FydGUtRW9saWVuLnN2Z1wiLFwiYXNzZXRzL2ltZy9DYXJ0ZS1Fb2xpZW4taWNvbmUtb24uc3ZnXCJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Lz47XHJcbiAgICAgIGNhc2UgJ3RleHRlQm91dG9uU2ltcGxlJzpcclxuICAgICAgICByZXR1cm4gPFByaW50UHJvbXB0IGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17U3RyaW5nKHByb3BzLmN1clByb21wdFsnVGV4dGVfU3VwcCddKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXNfdmFsdWVzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDb3V0X0VsZWNfRW52X1BvcHUnXSkuc3BsaXQoJzsnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F1Z2VzPXtwcm9wcy5nYXVnZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lUmVzZXQ9e2dhbWVSZXNldH0vPjtcclxuICAgICAgY2FzZSAnQ2hvaXhSZXBvbnNlJzpcclxuICAgICAgICByZXR1cm4gPENob2ljZSBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH1cclxuICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4X2luc2VjYWJsZXMnXSkuc3BsaXQoJzonKX1cclxuICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXNfdmFsdWVzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDb3V0X0VsZWNfRW52X1BvcHUnXSkuc3BsaXQoJzsnKX1cclxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRG9sbGFycz17dXBkYXRlRG9sbGFyc31cclxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cclxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1lbW9yeU9iaj17dXBkYXRlTWVtb3J5T2JqfVxyXG4gICAgICAgICAgICAgICAgICAgICAgZ2F1Z2VzPXtwcm9wcy5nYXVnZXN9Lz47XHJcbiAgICAgIGNhc2UgJ0NhdGFzdHJvcGhlJzpcclxuICAgICAgICByZXR1cm4gPENhdGFzdHJvcGhlIGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXhfaW5zZWNhYmxlcyddKS5zcGxpdCgnOicpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2hvaWNlc192YWx1ZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0NvdXRfRWxlY19FbnZfUG9wdSddKS5zcGxpdCgnOycpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgd2hpY2hFdmVudEhhcHBlbnM9e21lbW9yeU9iai5pbnZlc3RlZE1vZGVybml6YXRpb24gPyAxIDogMH1cclxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRG9sbGFycz17dXBkYXRlRG9sbGFyc31cclxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX0vPjtcclxuICAgICAgY2FzZSAnTXVsdGlTZWxlY3Rpb24nOlxyXG4gICAgICAgIHJldHVybiA8TXVsdGlTZWxlY3Rpb24gY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4X2luc2VjYWJsZXMnXSkuc3BsaXQoJzonKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlc192YWx1ZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0NvdXRfRWxlY19FbnZfUG9wdSddKS5zcGxpdCgnOycpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQZXJmb3JtYW5jZT17dXBkYXRlUGVyZm9ybWFuY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhdWdlcz17cHJvcHMuZ2F1Z2VzfS8+O1xyXG4gICAgICBjYXNlICdCaWxhbic6XHJcbiAgICAgICAgcmV0dXJuIDxCaWxhbiBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH1cclxuICAgICAgICAgICAgICAgICAgICAgIGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRG9sbGFycz17dXBkYXRlRG9sbGFyc31cclxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cclxuICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlPXtwcm9wcy5wZXJmb3JtYW5jZX1cclxuICAgICAgICAgICAgICAgICAgICAgIG1lbW9yeU9iaj17bWVtb3J5T2JqfVxyXG4gICAgICAgICAgICAgICAgICAgICAgZ2F1Z2VzPXtwcm9wcy5nYXVnZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICBmaW5hbEJpbGFuRGF0YT17cHJvcHMuZmluYWxCaWxhbkRhdGF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gPENob2ljZSBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH0gY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXhfaW5zZWNhYmxlcyddKS5zcGxpdCgnOicpfSBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH0gY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fS8+O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgICAgcHJvcHMuZW5kR2FtZSA9PT0gdHJ1ZSA/XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYW1lQm94XCI+XHJcbiAgICAgICAgICA8RW5kR2FtZVxyXG4gICAgICAgICAgICByYWlzb249e3Byb2Nlc3NSZWFzb25FbmRHYW1lKCl9XHJcbiAgICAgICAgICAgIGdhbWVSZXNldD17Z2FtZVJlc2V0fVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgOlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2FtZUJveFwiPlxyXG5cclxuICAgICAgICAgIHtwcm9wcy5jdXJQcm9tcHRbJ1R5cGUnXSA9PT0gXCJCaWxhblwiID9cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9tcHRCb3ggYmlsYW5cIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXNzaXZlVGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgPGgyPntwYXJzZShwcm9wcy5jdXJQcm9tcHRbJ1N1amV0J10pfTwvaDI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlcGFyYXRvclwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgIHtyZW5kZXJTd2l0Y2gocHJvcHMuY3VyUHJvbXB0WydUeXBlJ10pfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDpcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9tcHRCb3hcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdXJ0aXRyZVwiPlxyXG4gICAgICAgICAgICAgICAgICA8aDQ+e3BhcnNlKHByb3BzLmN1clByb21wdFsnU3VqZXQnXSl9PC9oND5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJxdWVzdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICA8cD57cGFyc2UocHJvcHMuY3VyUHJvbXB0WydUZXh0ZSddKX08L3A+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICB7cmVuZGVyU3dpdGNoKHByb3BzLmN1clByb21wdFsnVHlwZSddKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgKVxyXG5cclxuXHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEdhdWdlcyB9IGZyb20gXCIuL2dhdWdlcy9HYXVnZXNcIjtcbmltcG9ydCB7IEludHJvQm94IH0gZnJvbSBcIi4vaW50cm9Cb3hcIjtcbmltcG9ydCB7IFByb21wdEJveCB9IGZyb20gXCIuL1Byb21wdEJveFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gTWFpbkZyYW1lKHByb3BzKXtcblxuICBjb25zdCBbZ2FtZVN0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlKCdJRExFJyk7XG4gIGNvbnN0IFtnYW1lSW5kZXgsIHNldEdhbWVJbmRleF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2RvbGxhcnMsIHNldERvbGxhcnNdID0gdXNlU3RhdGUoNTApO1xuICBjb25zdCBbcGVyZm9ybWFuY2UsIHNldFBlcmZvcm1hbmNlXSA9IHVzZVN0YXRlKFswLDAsMF0pO1xuICBjb25zdCBbYmcsIHNldEJHXSA9IHVzZVN0YXRlKCdub3JtYWwnKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vY29uc29sZS5sb2coJ2dhbWUgJywgZ2FtZVN0YXR1cyk7XG4gIH0sIFtnYW1lU3RhdHVzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBnZXRHYW1lUHJvbXB0KGdhbWVJbmRleCk7XG4gICAgaWYoZ2FtZUluZGV4ID09PSBcIkVORFwiKXtcbiAgICAgIGdhbWVFbmQoKTtcbiAgICB9XG4gIH0sIFtnYW1lSW5kZXhdKTtcblxuICBjb25zdCBnYW1lU3RhcnQgPSAoKSA9PiB7XG4gICAgc2V0U3RhdHVzKCdTVEFSVEVEJyk7XG4gICAgc2V0R2FtZUluZGV4KDApO1xuICB9XG5cbiAgY29uc3QgZ2FtZUVuZCA9ICgpID0+IHtcbiAgICBzZXRTdGF0dXMoJ0VORCcpO1xuICB9XG5cbiAgY29uc3QgZ2FtZVJlc2V0ID0gKCkgPT4ge1xuICAgIHNldERvbGxhcnMoNTApO1xuICAgIHNldFBlcmZvcm1hbmNlKFswLDAsMF0pO1xuICAgIHNldFN0YXR1cygnSURMRScpO1xuICAgIHNldEdhbWVJbmRleCgwKTtcbiAgfVxuXG4gIGNvbnN0IGdldEdhbWVQcm9tcHQgPSAoZ2FtZUluZGV4KSA9PiB7XG4gICAgLy9jb25zb2xlLmxvZygnY3VycmVudCBnYW1lIHByb21wdDonLCBwcm9wcy5nYW1lRGF0YS5maWx0ZXIoZWxlbSA9PiB7cmV0dXJuIFN0cmluZyhlbGVtW1wiSURcIl0pID09PSBTdHJpbmcoZ2FtZUluZGV4KTt9KSk7XG4gIH1cblxuICBjb25zdCB1cGRhdGVEb2xsYXJzID0gKGRpZmYpID0+IHtcbiAgICBzZXREb2xsYXJzKGRvbGxhcnMgPT4gZG9sbGFycyArIGRpZmYpO1xuICAgIGlmKGRvbGxhcnMgKyBkaWZmIDwgMCl7XG4gICAgICBnYW1lRW5kKCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdXBkYXRlUGVyZm9ybWFuY2UgPSAoZGlmZikgPT4ge1xuICAgIGxldCBuZXdQZXJmb3JtYW5jZSA9IEFycmF5LmFwcGx5KG51bGwsIEFycmF5KGRpZmYubGVuZ3RoKSkubWFwKGZ1bmN0aW9uICgpIHt9KTtcbiAgICBwZXJmb3JtYW5jZS5mb3JFYWNoKChlbGVtLCBjb3VudCkgPT4ge1xuICAgICAgbmV3UGVyZm9ybWFuY2VbY291bnRdID0gcGFyc2VJbnQoZWxlbSkgKyBwYXJzZUludChkaWZmW2NvdW50XSk7XG4gICAgfSk7XG4gICAgLy8gY29uc29sZS5sb2coJ1NldHRpbmcgcGVyZm9ybWFuY2UgdG8gOiAnLCBuZXdQZXJmb3JtYW5jZSk7XG5cbiAgICBzZXRQZXJmb3JtYW5jZShuZXdQZXJmb3JtYW5jZSk7XG4gICAgaWYobmV3UGVyZm9ybWFuY2VbMV0gPD0gLTkgfHwgbmV3UGVyZm9ybWFuY2VbMl0gPD0gLTkpe1xuICAgICAgZ2FtZUVuZCgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGZpbmRHYW1lSW5kZXggPSAoSURuYW1lKSA9PiB7XG5cbiAgICBjb25zdCBmb3VuZElEID0gcHJvcHMuZ2FtZURhdGEuZmluZEluZGV4KChlbGVtKSA9PiB7XG4gICAgICByZXR1cm4gU3RyaW5nKElEbmFtZSkgPT09IFN0cmluZyhlbGVtWydJRCddKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm91bmRJRDtcbiAgfVxuXG4gIGNvbnN0IGNoZWNrQkcgPSAoY3VyUHJvbXB0QkcpID0+IHtcbiAgICBpZihjdXJQcm9tcHRCRyA9PT0gXCJyZWRwaW5rXCIpe1xuICAgICAgc2V0QkcoJ3JlZHBpbmsnKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGlmKGJnICE9PSAnbm9ybWFsJyl7XG4gICAgICAgIHNldEJHKCdub3JtYWwnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjdXJQcm9tcHQgPSBwcm9wcy5nYW1lRGF0YVtmaW5kR2FtZUluZGV4KGdhbWVJbmRleCldO1xuICAgIGlmKGN1clByb21wdCAmJiBjdXJQcm9tcHQuaGFzT3duUHJvcGVydHkoXCJCYWNrZ3JvdW5kXCIpKXtcbiAgICAgIGNoZWNrQkcoY3VyUHJvbXB0W1wiQmFja2dyb3VuZFwiXSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBnZXRCYWNrZ3JvdW5kSW5mbyA9ICgpID0+IHtcbiAgICBjb25zdCBnYW1lU2NyZWVuQ2xhc3MgPSAoZ2FtZVN0YXR1cyA9PT0gXCJFTkRcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVJbmRleCA9PT0gXCJFTkRcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJnID09PSBcInJlZHBpbmtcIikgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZ2FtZU92ZXJcIiA6IFwiXCI7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnQ2hlY2tpbmcgZ2FtZSBpbmZvOiAnLCBnYW1lU3RhdHVzLCBnYW1lSW5kZXgsIGJnKTtcbiAgICBjb25zdCBjdXJQcm9tcHQgPSBwcm9wcy5nYW1lRGF0YVtmaW5kR2FtZUluZGV4KGdhbWVJbmRleCldO1xuICAgIGNvbnN0IGJhY2tncm91bmRJbWFnZSA9IGN1clByb21wdCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY3VyUHJvbXB0W1wiQmFja2dyb3VuZFwiXSA9PT0gXCJweWxvbmVcIiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiSWxsdXNfU2VjdGlvbi0wMV9QeWxvbmVfVjAxLTE0LnN2Z1wiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyUHJvbXB0W1wiQmFja2dyb3VuZFwiXSA9PT0gXCJhbXBvdWxlXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiSWxsdXNfU2VjdGlvbi0wMl9BbXBvdWxlX1YwMi5zdmdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJQcm9tcHRbXCJCYWNrZ3JvdW5kXCJdID09PSBcImNlbnRyYWxlXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJJbGx1c19TZWN0aW9uLTAwX0NlbnRyYWxlX1YwMS5zdmdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGdhbWVTY3JlZW5DbGFzczogZ2FtZVNjcmVlbkNsYXNzLFxuICAgICAgYmFja2dyb3VuZEltYWdlOiBiYWNrZ3JvdW5kSW1hZ2VcbiAgICB9O1xuICB9O1xuXG5cbiAgY29uc3QgZG9tRWxlbWVudCA9IGdhbWVTdGF0dXMgPT09IFwiSURMRVwiID9cbiAgICAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWVTY3JlZW5cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiYWNrZ3JvdW5kLWltYWdlXCI+XG4gICAgICAgICAgPGltZ1xuICAgICAgICAgICAgc3JjPVwiYXNzZXRzL2ltZy9JbGx1c19TZWN0aW9uLTAwX0NlbnRyYWxlX1YwMS5zdmdcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8SW50cm9Cb3ggaW50cm9FbGVtPXtwcm9wcy5pbnRyb0VsZW19IG1hcE9iaj17cHJvcHMubWFwT2JqfSBnYW1lU3RhcnQ9e2dhbWVTdGFydH0gLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgICA6XG4gICAgPGRpdiBjbGFzc05hbWU9e2BnYW1lU2NyZWVuICR7Z2V0QmFja2dyb3VuZEluZm8oKS5nYW1lU2NyZWVuQ2xhc3N9YH0+XG4gICAgICB7XG4gICAgICAgIChnZXRCYWNrZ3JvdW5kSW5mbygpLmdhbWVTY3JlZW5DbGFzcyAhPT0gXCJnYW1lT3ZlclwiICYmIGdldEJhY2tncm91bmRJbmZvKCkuYmFja2dyb3VuZEltYWdlICE9PSBudWxsKT9cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJhY2tncm91bmQtaW1hZ2VcIj5cbiAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgc3JjPXtgYXNzZXRzL2ltZy8ke2dldEJhY2tncm91bmRJbmZvKCkuYmFja2dyb3VuZEltYWdlfWB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm5vLW1vYmlsZVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDpcbiAgICAgICAgICAnJ1xuICAgICAgfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZW1wb3JhcnlJbmZvXCI+XG4gICAgICAgIDxwPlBlcmZvcm1hbmNlICh0ZW1wb3JhaXJlKTwvcD5cbiAgICAgICAgPHA+RG9sbGFyczoge2Ake2RvbGxhcnN9ICRgfTwvcD5cbiAgICAgICAgPHA+RWxlYzoge2Ake3BlcmZvcm1hbmNlWzBdfSBUV2hgfTwvcD5cbiAgICAgICAgPHA+RW52aXJvOiB7YCR7cGVyZm9ybWFuY2VbMV19IHB0c2B9PC9wPlxuICAgICAgICA8cD5Qb3B1OiB7YCR7cGVyZm9ybWFuY2VbMl19IHB0c2B9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8UHJvbXB0Qm94IGN1ckluZGV4PXtnYW1lSW5kZXh9XG4gICAgICAgIGN1clByb21wdD17KGdhbWVJbmRleCA9PT0gXCJFTkRcIikgPyBcIlwiIDogcHJvcHMuZ2FtZURhdGFbZmluZEdhbWVJbmRleChnYW1lSW5kZXgpXX1cbiAgICAgICAgY2hhbmdlUHJvbXB0PXtzZXRHYW1lSW5kZXh9XG4gICAgICAgIHVwZGF0ZURvbGxhcnM9e3VwZGF0ZURvbGxhcnN9XG4gICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cbiAgICAgICAgZ2F1Z2VzPXs8R2F1Z2VzIGRvbGxhcnM9e2RvbGxhcnN9Lz59XG4gICAgICAgIHBlcmZvcm1hbmNlPXtwZXJmb3JtYW5jZX1cbiAgICAgICAgZW5kR2FtZT17Z2FtZUluZGV4ID09PSBcIkVORFwiIHx8IGdhbWVTdGF0dXMgPT09IFwiRU5EXCJ9XG4gICAgICAgIGZpbmFsQmlsYW5EYXRhPXtwcm9wcy5maW5hbEJpbGFuRGF0YX1cbiAgICAgICAgZ2FtZVJlc2V0PXtnYW1lUmVzZXR9XG4gICAgICAgIC8+XG4gICAgPC9kaXY+O1xuXG4gIHJldHVybiBkb21FbGVtZW50O1xufVxuIiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb20vY2xpZW50XCI7XG5pbXBvcnQgeyByZW5kZXJUb1N0YXRpY01hcmt1cCB9IGZyb20gJ3JlYWN0LWRvbS9zZXJ2ZXInO1xuaW1wb3J0IHsgTWFpbkZyYW1lIH0gZnJvbSAnLi9jb21wb25lbnRzL21haW5mcmFtZSc7XG5pbXBvcnQgeyBvcHRpb25zRHJvcGRvd25Db25zdGFudHMsIGNvbnRlbnRIZWFkZXJDb25zdGFudHMgfSBmcm9tIFwiLi4vZ2VuZXJhdG9yL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgSW50cm9TZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9JbnRyb1NlY3Rpb24nO1xuXG5leHBvcnQgY2xhc3MgRW5naW5lIHtcblxuICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIG9wdGlvbkRhdGEsIGludHJvT2JqLCBnYW1lRGF0YSl7XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgY29uc3Qgcm9vdEVsZW0gPSB0aGlzLmNvbnRhaW5lci5hcHBlbmQoJ2RpdicpXG4gICAgICAuY2xhc3NlZCgncm9vdEVsZW0nLCB0cnVlKTtcbiAgICB0aGlzLmVuZ2luZVJvb3QgPSBSZWFjdERPTS5jcmVhdGVSb290KHJvb3RFbGVtLm5vZGUoKSk7XG4gICAgdGhpcy5vcHRpb25EYXRhID0gb3B0aW9uRGF0YTtcbiAgICB0aGlzLmFtb3JjZSA9IGludHJvT2JqW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdO1xuICAgIHRoaXMuZ2FtZURhdGEgPSBnYW1lRGF0YTtcbiAgICB0aGlzLmluaXRFbmdpbmUoKTtcbiAgfVxuXG4gIGluaXRFbmdpbmUoKXtcbiAgICBjb25zdCBpbnRyb0VsZW0gPSAoPEludHJvU2VjdGlvblxuICAgICAga2V5PXtcImdhbWVJbnRyb1wifVxuICAgICAgc2VjdGlvblR5cGU9e29wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMuaW50cm90aXRyZX1cbiAgICAgIG9wdGlvbkRhdGE9e3RoaXMub3B0aW9uRGF0YX1cbiAgICAgIGFtb3JjZT17dGhpcy5hbW9yY2V9XG4gICAgICBiYWNrZ3JvdW5kPXtudWxsfVxuICAgICAgY2xhc3Nlcz17XCJcIn1cbiAgICAgIC8+KTtcblxuICAgIHRoaXMuZW5naW5lUm9vdC5yZW5kZXIoPE1haW5GcmFtZSBpbnRyb0VsZW09e2ludHJvRWxlbX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVN0YXR1cz17dGhpcy5nYW1lU3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRGF0YT17dGhpcy5nYW1lRGF0YVswXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxCaWxhbkRhdGE9e3RoaXMuZ2FtZURhdGFbMV19Lz4pO1xuICB9XG5cbn1cbiIsIi8qKlxuICogdml6LmpzXG4gKiA9PT09PT09XG4gKiBGaWxlIHVzZWQgdG8gZGVmaW5lIHRoZSB2aXN1YWxpemF0aW9uIHNlY3Rpb24uXG4gKi9cblxuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IHsgZ2V0U3RydWN0dXJlLCBnZW5lcmF0ZUNhbGxiYWNrcywgZ2V0T3B0aW9ucyB9IGZyb20gJy4vZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvci5qcyc7XG5pbXBvcnQgeyBjYWxsYmFja3MgfSBmcm9tICcuLi9kYXRhL3N0cnVjdHVyZS9jYWxsYmFja3MuanMnO1xuXG5pbXBvcnQgeyBNYXAgfSBmcm9tICdsZWRldm9pci1kYXRhdml6JztcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gJy4vZ2FtZS9lbmdpbmUuanMnO1xuXG5jb25zdCBjb25maWcgPSB7XG4gIHdpZHRoOiA1MDAsXG4gIGhlaWdodDogNTAwLFxuICBtYXJnaW46IHtcbiAgICB0b3A6IDEwMCxcbiAgICByaWdodDogMTAwLFxuICAgIGJvdHRvbTogMTAwLFxuICAgIGxlZnQ6IDEwMFxuICB9XG59XG5jb25zdCBmdWxsV2lkdGggPSBjb25maWcubWFyZ2luLmxlZnQgKyBjb25maWcud2lkdGggKyBjb25maWcubWFyZ2luLnJpZ2h0O1xuY29uc3QgZnVsbEhlaWdodCA9IGNvbmZpZy5tYXJnaW4udG9wICsgY29uZmlnLmhlaWdodCArIGNvbmZpZy5tYXJnaW4uYm90dG9tO1xuY29uc3QgbWFwQm94U3R5bGUgPSBcIm1hcGJveDovL3N0eWxlcy9sZWRldm9pci9jbGFsOXpsZmswMDRhMTVxb2hocjdyNDk1XCI7XG5cbmNvbnN0IGN1c3RvbUNhbGxiYWNrc05lZWRlZCA9IHRydWU7IC8vIFNldCB0byB0cnVlIGlmIGN1c3RvbSBjYWxsYmFja3MgYXJlIG5lZWRlZFxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZShjb250ZW50RGF0YSwgb3B0aW9ucykge1xuXG4gIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICBkMy5jc3YoXCJodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2UVFaM3N6MHExdm5abW9ZWVI1SXJDZnVPTmhIY053NTBpRHRiZzFIMm1JWDhsSERMMUJRNHNBTWk3aUFwU0UxRzlXUVRXMmpIY1d2NEtXL3B1Yj9naWQ9MTQ5Nzg2MTAxNyZzaW5nbGU9dHJ1ZSZvdXRwdXQ9Y3N2XCIpLFxuICAgICAgICAgICAgICAgICAgZDMuY3N2KFwiaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvZS8yUEFDWC0xdlFRWjNzejBxMXZuWm1vWVlSNUlyQ2Z1T05oSGNOdzUwaUR0YmcxSDJtSVg4bEhETDFCUTRzQU1pN2lBcFNFMUc5V1FUVzJqSGNXdjRLVy9wdWI/Z2lkPTIwMDU2Mzc3MzYmc2luZ2xlPXRydWUmb3V0cHV0PWNzdlwiKVxuICAgICAgICAgICAgICAgIF0pXG4gICAgLnRoZW4oIGdhbWVEYXRhID0+IHtcblxuICAgICAgY29uc3QgbWFwQ29udGFpbmVyID0gZDMuc2VsZWN0KFwiLmdhbWUtYXJlYVwiKTtcblxuICAgICAgY29uc3QgZW5naW5lID0gbmV3IEVuZ2luZShtYXBDb250YWluZXIsIGdldE9wdGlvbnMob3B0aW9ucyksIGNvbnRlbnREYXRhWzBdLCBnYW1lRGF0YSk7XG5cbiAgICAgIGxldCBhdXRvQ2FsbGJhY2tzO1xuICAgICAgc2V0dXBWaXooY29udGVudERhdGEsb3B0aW9ucyk7XG4gICAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgYXV0b0NhbGxiYWNrcyA9IGdlbmVyYXRlQ2FsbGJhY2tzKGNvbnRlbnREYXRhLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIGF1dG9DYWxsYmFja3MgPSBjYWxsYmFja3M7XG4gICAgICB9XG5cbiAgICAgIGlmKGN1c3RvbUNhbGxiYWNrc05lZWRlZCl7XG4gICAgICAgIC8vaWYgY3VzdG9tIGNhbGxiYWNrcyBhcmUgbmVlZGVkLCBzdWNoIGFzIFZpc3VhbGl6YXRpb24gdHJhbnNmb3JtYXRpb25zLCBpbmNsdWRlIHRoZW0gaGVyZS5cbiAgICAgICAgLy8gVGhpcyBhbGxvd3MgdG8gdXNlIGFueSBvYmplY3QgY3JlYXRlZCBpbiB2aXouanMgKGdyYXBocywgdG9vbHMsIGV0YykgaW4gdGhlIGNhbGxiYWNrcy5cbiAgICAgICAgLy8gWW91IHdpbGwgbmVlZCB0byBtYW51YWxseSBjcmVhdGUgdGhlIGNvcnJlY3QgbnVtYmVyIG9mIGNhbGxiYWNrcyB0byBtYXRjaCB0aGUgdml6IHNlY3Rpb25zXG5cbiAgICAgICAgbGV0IGN1c3RvbUNhbGxiYWNrcyA9IFtcbiAgICAgICAgICBbXG4gICAgICAgICAgICAoKSA9PiB7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIF1cbiAgICAgICAgcmV0dXJuIGN1c3RvbUNhbGxiYWNrcztcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdXRvQ2FsbGJhY2tzO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBzZXR1cFZpeihjb250ZW50RGF0YSwgb3B0aW9ucyl7XG5cbiAgY29uc3QgZnVsbFN0cnVjdHVyZSA9IGdldFN0cnVjdHVyZShjb250ZW50RGF0YSwgb3B0aW9ucyk7XG4gIGZ1bGxTdHJ1Y3R1cmUubWFwKHNlY3Rpb25PYmogPT4ge1xuXG4gICAgaWYoc2VjdGlvbk9iai5zZWN0aW9uVHlwZSA9PT0gXCJ2aXotc2VjdGlvblwiKXtcbiAgICAgIHNlY3Rpb25PYmouc3RlcHMubWFwKChzdGVwLGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYoc3RlcC52aXN1YWwgIT09IFwiXCIpe1xuICAgICAgICAgICAgaWYoaW5kZXggPT09IDApe1xuICAgICAgICAgICAgICBkMy5zZWxlY3QoYCMke3NlY3Rpb25PYmoua2V5fV8ke2luZGV4fWApLnN0eWxlKCdvcGFjaXR5JywgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICBkMy5zZWxlY3QoYCMke3NlY3Rpb25PYmoua2V5fV8ke2luZGV4fWApLnN0eWxlKCdvcGFjaXR5JywgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxufSk7XG59XG5cbmZ1bmN0aW9uIHNldHVwVmlkZW9zKCl7XG4gIGxldCB2aWRlb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidmlkZW9cIik7XG4gICAgdmlkZW9zLmZvckVhY2goKHZpZGVvKSA9PiB7XG4gICAgICAvLyBXZSBjYW4gb25seSBjb250cm9sIHBsYXliYWNrIHdpdGhvdXQgaW5zdGVyYWN0aW9uIGlmIHZpZGVvIGlzIG11dGVcbiAgICAgIHZpZGVvLm11dGVkID0gdHJ1ZTtcbiAgICAgIHZpZGVvLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgIC8vIFBsYXkgaXMgYSBwcm9taXNlIHNvIHdlIG5lZWQgdG8gY2hlY2sgd2UgaGF2ZSBpdFxuICAgICAgbGV0IHBsYXlQcm9taXNlID0gdmlkZW8ucGxheSgpO1xuICAgICAgaWYgKHBsYXlQcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKChfKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICAgICAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyAhPT0gMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXZpZGVvLnBhdXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5jdXJyZW50VGltZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlkZW8ucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7IHRocmVzaG9sZDogMC4yIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh2aWRlbyk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG59XG4iLCIvKipcclxuICogc2Nyb2xsZXIuanNcclxuICogPT09PT09PT09PT1cclxuICogRGVmaW5lcyB0aGUgbG9naWMgdXNlZCBieSB0aGUgc2Nyb2xsZXIuIFRoaXMgc2NyaXB0IGRvZXMgbm90IG5lZWQgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzIGFuZCB1c2VzIG5hdGl2ZSBmdW5jdGlvbnNcclxuICogb2YgdGhlIGJyb3dzZXIuXHJcbiAqXHJcbiAqIC8hXFwgUExFQVNFLCBETyBOT1QgTU9ESUZZIFRISVMgRklMRS5cclxuICpcclxuICogQGF1dGhvciBBbnRvaW5lIELDqWxhbmQgPGFiZWxhbmRAbGVkZXZvaXIuY29tPlxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBEZWZpbmVzIGEgc3RlcCBhc3NvY2lhdGVkIHdpdGggYSBzcGVjaWZpYyB2aXN1YWxpemF0aW9uLiBBIHN0ZXAgaXMgYWN0aXZhdGVkIG9yIGRlYWN0aXZhdGVkIGJhc2VkIG9uIHRoZSBzY3JvbGxcclxuICogcG9zaXRpb24uIFRoaXMgY2xhc3MgaXMgdXNlZCBieSB0aGUgc2Nyb2xsZXIgZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBTY3JvbGxlclN0ZXAge1xyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIFNjcm9sbGVyU3RlcC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBlbCAgICAgICAgICBUaGUgbmF0aXZlIGVsZW1lbnQgdGhhdCByZXByZXNlbnRzIHRoZSBzdGVwIGluIHRoZSBIVE1MIGRvY3VtZW50LlxyXG4gICAqIEBwYXJhbSBpbmRleCAgICAgICBUaGUgaW5kZXggb2YgdGhlIHN0ZXAuXHJcbiAgICogQHBhcmFtIGNhbGxiYWNrICAgIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIHN0ZXAgaXMgYWN0aXZhdGUuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoZWwsIGluZGV4LCBjYWxsYmFjaykge1xyXG4gICAgdGhpcy5lbCA9IGVsO1xyXG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5faXNBY3RpdmF0ZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWN0aXZhdGVzIHRoZSBjdXJyZW50IHN0ZXAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gc2Nyb2xsRGlyZWN0aW9uICAgVGhlIGN1cnJlbnQgc2Nyb2xsIGRpcmVjdGlvbi5cclxuICAgKi9cclxuICBhY3RpdmF0ZShzY3JvbGxEaXJlY3Rpb24pIHtcclxuICAgIGlmICh0aGlzLl9pc0FjdGl2YXRlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX2lzQWN0aXZhdGUgPSB0cnVlO1xyXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIHRoaXMuY2FsbGJhY2soc2Nyb2xsRGlyZWN0aW9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlYWN0aXZhdGVzIHRoZSBjdXJyZW50IHN0ZXAuXHJcbiAgICovXHJcbiAgZGVhY3RpdmF0ZSgpIHtcclxuICAgIGlmICghdGhpcy5faXNBY3RpdmF0ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9pc0FjdGl2YXRlID0gZmFsc2U7XHJcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERlZmluZXMgdGhlIHNjcm9sbCBkaXJlY3Rpb25zLlxyXG4gKlxyXG4gKiBAdHlwZSB7e3VwOiBzdHJpbmcsIGRvd246IHN0cmluZ319XHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgc2Nyb2xsRGlyZWN0aW9ucyA9IHtcclxuICB1cDogJ3VwJyxcclxuICBkb3duOiAnZG93bidcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZWZpbmVzIHRoZSBzY3JvbGxlciB0byB1c2Ugd2l0aCB0aGUgTGUgRGV2b2lyJ3Mgc2Nyb2xseXRlbGxpbmcgYXJ0aWNsZXMuIFBsZWFzZSBzZWUgXCJSRUFETUUubWRcIlxyXG4gKiB0byBrbm93IGhvdyB0byB1c2UgaXQuXHJcbiAqXHJcbiAqIC8hXFwgQmUgc3VyZSB0byB1c2UgdGhlIGdvb2QgQ1NTIGNsYXNzIG5hbWVzIGluIHlvdXIgSFRNTCBmaWxlIGJlZm9yZSB0byB1c2UgdGhlIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gY2FsbGJhY2tzICAgQSBtdWx0aS1kaW1lbnNpb25hbCBhcnJheSBvZiBjYWxsYmFja3MgdG8gdXNlIHdpdGggZWFjaCBzdGVwLlxyXG4gKiBAcmV0dXJucyB7Kn0gICAgICAgVGhlIGluc3RhbmNlIG9mIHRoZSBzY3JvbGxlci5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzY3JvbGxlcihjYWxsYmFja3MpIHtcclxuICBsZXQgX29mZnNldFRvcCA9IDA7XHJcbiAgbGV0IF9vZmZzZXRCb3R0b20gPSAwO1xyXG5cclxuICBsZXQgaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgbGV0IGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICBsZXQgbGFzdFNjcm9sbCA9IDA7XHJcbiAgbGV0IHN0ZXBzID0gW107XHJcbiAgbGV0IHZpeiA9IFtdO1xyXG4gIGxldCB2aXNpYmxlU3RlcHMgPSBbXTtcclxuICBcclxuICBjb25zdCBhcnRpY2xlUmVtaW5kZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZS1yZW1pbmRlcicpO1xyXG4gIGNvbnN0IHNjcm9sbFByb2dyZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyID4gLnByb2dyZXNzJyk7XHJcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50cm8tc2VjdGlvbiBoMScpO1xyXG5cclxuICBjb25zdCB2aXpTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52aXotc2VjdGlvbicpO1xyXG4gIGlmICh2aXpTZWN0aW9ucy5sZW5ndGggIT09IGNhbGxiYWNrcy5sZW5ndGgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIG51bWJlciBvZiB2aXogc2VjdGlvbnMgKCR7dml6U2VjdGlvbnMubGVuZ3RofSkgbWlzbWF0Y2ggd2l0aCB0aGUgbGVuZ3RoIG9mIHRoZSBmaXJzdCBgICtcclxuICAgICAgYGRpbWVuc2lvbiBvZiB0aGUgY2FsbGJhY2tzIGFycmF5ICgke2NhbGxiYWNrcy5sZW5ndGh9KS4gUGxlYXNlLCBiZSBzdXJlIHRoYXQgdGhlIHR3byBlbGVtZW50cyBgICtcclxuICAgICAgYGhhdmUgdGhlIHNhbWUgc2l6ZS5gKTtcclxuICB9XHJcbiAgdml6U2VjdGlvbnMuZm9yRWFjaCgodml6U2VjdGlvbiwgaSkgPT4ge1xyXG4gICAgY29uc3Qgc2VjdGlvbnMgPSBbLi4udml6U2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCdzZWN0aW9uJyldO1xyXG4gICAgaWYgKHNlY3Rpb25zLmxlbmd0aCAhPT0gY2FsbGJhY2tzW2ldLmxlbmd0aCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBudW1iZXIgb2Ygc3RlcHMgKCR7c2VjdGlvbnMubGVuZ3RofSkgaW4gdGhlIHZpeiBzZWN0aW9uICMke2kgKyAxfSBtaXNtYXRjaCB3aXRoIHRoZSBgICtcclxuICAgICAgICBgbnVtYmVyIG9mIGNhbGxiYWNrcyBzcGVjaWZpZWQgKCR7Y2FsbGJhY2tzW2ldLmxlbmd0aH0pIGF0IHRoZSBpbmRleCBcIiR7aX1cIi4gUGxlYXNlLCBiZSBzdXJlIHRoYXQgdGhlIHR3byBgICtcclxuICAgICAgICBgZWxlbWVudHMgaGF2ZSB0aGUgc2FtZSBzaXplLmApO1xyXG4gICAgfVxyXG4gICAgc3RlcHMgPSBzdGVwcy5jb25jYXQoc2VjdGlvbnMubWFwKChlLCBqKSA9PiBuZXcgU2Nyb2xsZXJTdGVwKGUsIGAke2l9LSR7an1gLCBjYWxsYmFja3NbaV1bal0pKSk7XHJcbiAgICB2aXogPSB2aXouY29uY2F0KHZpeiwgdml6U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcudml6ID4gKicpKTtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgZGlzcGxheSBiYXNlZCBvbiBzY3JvbGxiYXIgcG9zaXRpb24uXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdCBfdXBkYXRlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFNjcm9sbCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgc3RlcHMuZm9yRWFjaChzdGVwID0+IHtcclxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgc3RlcCBpcyBpbiB0aGUgdmlld3BvcnQuXHJcbiAgICAgIGNvbnN0IGJvdW5kaW5nUmVjdCA9IHN0ZXAuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGlmIChpbm5lckhlaWdodCAtIGJvdW5kaW5nUmVjdC50b3AgLSBfb2Zmc2V0Qm90dG9tID4gMFxyXG4gICAgICAgICYmIGJvdW5kaW5nUmVjdC50b3AgKyBib3VuZGluZ1JlY3QuaGVpZ2h0IC0gX29mZnNldFRvcCA+IDApIHtcclxuICAgICAgICB2aXNpYmxlU3RlcHMucHVzaChzdGVwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdGVwLmRlYWN0aXZhdGUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRGlzcGxheSB0aGUgdGl0bGUgYXMgYSByZW1pbmRlciB3aGVuIHRoZSBtYWluIGFydGljbGUgdGl0bGUgaXMgaGlkZGVuLlxyXG4gICAgY29uc3QgaXNBcnRpY2xlUmVtaW5kZXJEaXNwbGF5ZWQgPSB0aXRsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPD0gMDtcclxuICAgIGNvbnN0IGlzQXJ0aWNsZVJlbWluZGVySXNWaXNpYmxlID0gYXJ0aWNsZVJlbWluZGVyLmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpO1xyXG4gICAgaWYgKGlzQXJ0aWNsZVJlbWluZGVyRGlzcGxheWVkICYmICFpc0FydGljbGVSZW1pbmRlcklzVmlzaWJsZSkge1xyXG4gICAgICBhcnRpY2xlUmVtaW5kZXIuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpXHJcbiAgICB9IGVsc2UgaWYgKCFpc0FydGljbGVSZW1pbmRlckRpc3BsYXllZCAmJiBpc0FydGljbGVSZW1pbmRlcklzVmlzaWJsZSkge1xyXG4gICAgICBhcnRpY2xlUmVtaW5kZXIuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9yIHRoZSB2aXNpYmxlIHN0ZXBzLCBjaG9vc2UgdGhlIGdvb2Qgb25lIGJhc2VkIG9uIHRoZSBzY3JvbGwgZGlyZWN0aW9uLlxyXG4gICAgdmlzaWJsZVN0ZXBzLmZvckVhY2goKHNlY3Rpb24sIGkpID0+IHtcclxuICAgICAgaWYgKGN1cnJlbnRTY3JvbGwgPj0gbGFzdFNjcm9sbCkgeyAvLyBTY3JvbGwgZG93biAo4oaTKVxyXG4gICAgICAgIGlmIChpID09PSB2aXNpYmxlU3RlcHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgc2VjdGlvbi5hY3RpdmF0ZShzY3JvbGxEaXJlY3Rpb25zLmRvd24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWN0aW9uLmRlYWN0aXZhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7IC8vIFNjcm9sbCB1cCAo4oaRKVxyXG4gICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICBzZWN0aW9uLmFjdGl2YXRlKHNjcm9sbERpcmVjdGlvbnMudXApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWN0aW9uLmRlYWN0aXZhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgX3VwZGF0ZVNjcm9sbFByb2dyZXNzKCk7XHJcblxyXG4gICAgLy8gUmVzZXQgdGhlIHZhcmlhYmxlcyBmb3IgdGhlIG5leHQgZnVuY3Rpb24gY2FsbC5cclxuICAgIHZpc2libGVTdGVwcyA9IFtdO1xyXG4gICAgbGFzdFNjcm9sbCA9IGN1cnJlbnRTY3JvbGw7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgc2Nyb2xsIHByb2dyZXNzaW9uIGluZGljYXRvci5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNvbnN0IF91cGRhdGVTY3JvbGxQcm9ncmVzcyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHdpblNjcm9sbCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgIGNvbnN0IHNjcm9sbGVkID0gKHdpblNjcm9sbCAvIGhlaWdodCkgKiAxMDA7XHJcbiAgICBzY3JvbGxQcm9ncmVzcy5zdHlsZS53aWR0aCA9IHNjcm9sbGVkICsgJyUnO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHB1YmxpY0ludGVyZmFjZSA9IHtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIHNjcm9sbGVyLiBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gY2FuIGJlIG9ubHkgY2FsbGVkIG9uY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSBpbnN0YW5jZSBvZiB0aGUgc2Nyb2xsZXIuXHJcbiAgICAgKi9cclxuICAgIGluaXRpYWxpemU6ICgpID0+IHtcclxuICAgICAgaWYgKGlzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzY3JvbGxlciBpcyBhbHJlYWR5IGluaXRpYWxpemVkLicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX3VwZGF0ZSk7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgX3VwZGF0ZVNjcm9sbFByb2dyZXNzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoKHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSA+IDApIHtcclxuICAgICAgICBfdXBkYXRlKCk7XHJcbiAgICAgIH1cclxuICAgICAgX3VwZGF0ZVNjcm9sbFByb2dyZXNzKCk7XHJcbiAgICAgIHJldHVybiBwdWJsaWNJbnRlcmZhY2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBvciBzZXRzIHRoZSB0b3Agb2Zmc2V0IHRvIHVzZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0VG9wXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIGluc3RhbmNlIG9mIHRoZSBzY3JvbGxlci5cclxuICAgICAqL1xyXG4gICAgb2Zmc2V0VG9wOiBvZmZzZXRUb3AgPT4ge1xyXG4gICAgICBpZiAob2Zmc2V0VG9wID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gX29mZnNldFRvcDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIob2Zmc2V0VG9wKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIG9mZnNldCBtdXN0IGJlIGFuIGludGVnZXIgbnVtYmVyLicpO1xyXG4gICAgICB9XHJcbiAgICAgIF9vZmZzZXRUb3AgPSBvZmZzZXRUb3A7XHJcbiAgICAgIHJldHVybiBwdWJsaWNJbnRlcmZhY2U7XHJcbiAgICB9ICxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgb3Igc2V0cyB0aGUgYm90dG9tIG9mZnNldCB0byB1c2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9mZnNldEJvdHRvbVxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSBpbnN0YW5jZSBvZiB0aGUgc2Nyb2xsZXIuXHJcbiAgICAgKi9cclxuICAgIG9mZnNldEJvdHRvbTogb2Zmc2V0Qm90dG9tID0+IHtcclxuICAgICAgaWYgKG9mZnNldEJvdHRvbSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIF9vZmZzZXRCb3R0b207XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKG9mZnNldEJvdHRvbSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBvZmZzZXQgbXVzdCBiZSBhbiBpbnRlZ2VyIG51bWJlci4nKTtcclxuICAgICAgfVxyXG4gICAgICBfb2Zmc2V0Qm90dG9tID0gb2Zmc2V0Qm90dG9tO1xyXG4gICAgICByZXR1cm4gcHVibGljSW50ZXJmYWNlO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgcmV0dXJuIHB1YmxpY0ludGVyZmFjZTtcclxufVxyXG4iLCJcclxuaW1wb3J0IHsgaW5pdGlhbGl6ZSBhcyB2MSB9IGZyb20gJy4uL3Zpeic7XHJcbmltcG9ydCB7IHNjcm9sbGVyIH0gZnJvbSAnLi4vc2Nyb2xsZXInO1xyXG5pbXBvcnQgTGF6eUxvYWQgZnJvbSBcInZhbmlsbGEtbGF6eWxvYWRcIjtcclxuY29uc3QgaGVhZGVySGVpZ2h0ID0gNDA7XHJcbmltcG9ydCBzdGlja3lCaXRzIGZyb20gJ3N0aWNreWJpdHMnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdFNjcm9sbGVyKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKXtcclxuXHJcbiAgICBsZXQgZWxlbWVudHMgPSBbXTtcclxuICAgIFsnLnZpeicsICcuZnVsbC1wYWdlLXNlY3Rpb24gPiBpbWcnLCAnLmZ1bGwtcGFnZS1zZWN0aW9uID4gdmlkZW8nXS5mb3JFYWNoKHNlbGVjdG9yID0+IHtcclxuICAgICAgZWxlbWVudHMgPSBlbGVtZW50cy5jb25jYXQoQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkpO1xyXG4gICAgfSk7XHJcbiAgICBzdGlja3lCaXRzKGVsZW1lbnRzLCB7IHN0aWNreUJpdFN0aWNreU9mZnNldDogaGVhZGVySGVpZ2h0IH0pO1xyXG4gIFxyXG4gICAgY29uc3QgbGwgPSBuZXcgTGF6eUxvYWQoe1xyXG4gICAgICBlbGVtZW50c19zZWxlY3RvcjogXCIubGF6eVwiLFxyXG4gICAgICB0aHJlc2hvbGQ6IDUwMFxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBQcm9taXNlLmFsbChbdjEoY29udGVudERhdGEsIHBhcmFtc0RhdGEpXSkudGhlbigoW2NhbGxiYWNrc1YxXSkgPT4gIHtcclxuICAgICAgc2Nyb2xsZXIoY2FsbGJhY2tzVjEpXHJcbiAgICAgICAgLm9mZnNldFRvcChoZWFkZXJIZWlnaHQpXHJcbiAgICAgICAgLm9mZnNldEJvdHRvbSgwKVxyXG4gICAgICAgIC5pbml0aWFsaXplKCk7XHJcbiAgICB9KTtcclxuICB9IiwiLyoqXG4gKiBhcHAuanNcbiAqID09PT09PVxuICogTWFpbiBmaWxlIG9mIHRoZSBhcHBsaWNhdGlvbi4gVGhpcyBmaWxlIGlzIHVzZWQgdG8gaW5pdGlhbGl6ZSB0aGUgc2Nyb2xsZXIgYW5kIGltcG9ydHMgdGhlIHZpc3VhbGl6YXRpb25zIHVzZWQuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHN0cnVjdHVyZSBmcm9tICcuLi9kYXRhL3N0cnVjdHVyZS9zdHJ1Y3R1cmUuanNvbic7XG5cbmlmKCFFTlZfQ09ORklHLmRvd25sb2FkU3RydWMpe1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcm9vdCcpLmlubmVySFRNTCA9IChzdHJ1Y3R1cmUuaHRtbHN0cnVjKTtcbn1cblxuaW1wb3J0ICcuLi9hc3NldHMvc3R5bGVzL3N0eWxlLnNjc3MnO1xuaW1wb3J0IHtnb29nbGVfY29uZmlnfSBmcm9tIFwiLi4vZGF0YS9nb29nbGVfY29uZmlnXCI7XG5pbXBvcnQgeyBSZW5kZXJTdHJ1Y3R1cmUgfSBmcm9tICcuL2dlbmVyYXRvci9SZW5kZXJTdHJ1Y3R1cmUnO1xuaW1wb3J0IHsgaW5pdFNjcm9sbGVyIH0gZnJvbSAnLi9nZW5lcmF0b3IvaW5pdFNjcm9sbGVyJztcbmltcG9ydCB7IGdlbmVyYXRlQ2FsbGJhY2tzIH0gZnJvbSAnLi9nZW5lcmF0b3Ivc3RydWN0dXJlR2VuZXJhdG9yJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xuXG5pZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMpe1xuICBQcm9taXNlLmFsbChbaW1wb3J0KFwicmVhY3QtZG9tL2NsaWVudFwiKSwgaW1wb3J0KFwicmVhY3QtZG9tL3NlcnZlclwiKSwgaW1wb3J0KFwicmVhY3RcIildKVxuICAgIC50aGVuKHBhY2thZ2VzID0+IHtcbiAgICAgIGNvbnN0IFJlYWN0RE9NID0gcGFja2FnZXNbMF07XG4gICAgICBjb25zdCBSZWFjdERPTVNlcnZlciA9IHBhY2thZ2VzWzFdO1xuICAgICAgY29uc3QgUmVhY3QgPSBwYWNrYWdlc1syXTtcbiAgICAgIGFkZE5vdFB1Ymxpc2hlZCgpO1xuICAgICAgaWYoRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcuY29udGVudFVSTCkudGhlbiggY29udGVudERhdGEgPT4ge1xuICAgICAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLnBhcmFtc1VSTCkudGhlbiggcGFyYW1zRGF0YSA9PiB7XG4gICAgICAgICAgICBjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJvb3RcIikpO1xuICAgICAgICAgICAgcm9vdC5yZW5kZXIoXG4gICAgICAgICAgICAgIDxSZW5kZXJTdHJ1Y3R1cmUgY29udGVudERhdGE9e2NvbnRlbnREYXRhfSBwYXJhbXNEYXRhPXtwYXJhbXNEYXRhfSByZW5kZXJlZD17dHJ1ZX0vPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGFkZEZvb3RlcigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmNvbnRlbnRVUkwpLnRoZW4oIGNvbnRlbnREYXRhID0+IHtcbiAgICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5wYXJhbXNVUkwpLnRoZW4oIHBhcmFtc0RhdGEgPT4ge1xuICAgICAgICAgICAgZDMuYmxvYihnb29nbGVfY29uZmlnLmNvbnRlbnRVUkwpLnRoZW4oY29udGVudEJsb2IgPT4ge1xuICAgICAgICAgICAgICBkMy5ibG9iKGdvb2dsZV9jb25maWcucGFyYW1zVVJMKS50aGVuKHBhcmFtc0Jsb2IgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlZFN0cnVjID0gUmVuZGVyU3RydWN0dXJlKHtjb250ZW50RGF0YTogY29udGVudERhdGEsIHBhcmFtc0RhdGE6IHBhcmFtc0RhdGEsIHJlbmRlcjogZmFsc2V9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBodG1sU3RydWMgPSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cChnZW5lcmF0ZWRTdHJ1Yyk7XG4gICAgICAgICAgICAgICAgd3JpdGVIVE1MZmlsZShodG1sU3RydWMsIGNvbnRlbnRCbG9iLCBwYXJhbXNCbG9iKTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZUNhbGxiYWNrcyhjb250ZW50RGF0YSxwYXJhbXNEYXRhKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KVxufVxuZWxzZXtcbiAgaWYoRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICBQcm9taXNlLmFsbChbaW1wb3J0KFwicmVhY3QtZG9tL2NsaWVudFwiKSwgaW1wb3J0KFwicmVhY3RcIildKVxuICAgIC50aGVuKHBhY2thZ2VzID0+IHtcbiAgICAgIGNvbnN0IFJlYWN0RE9NID0gcGFja2FnZXNbMF07XG4gICAgICBjb25zdCBSZWFjdCA9IHBhY2thZ2VzWzFdO1xuICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcuY29udGVudFVSTCkudGhlbiggY29udGVudERhdGEgPT4ge1xuICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5wYXJhbXNVUkwpLnRoZW4oIHBhcmFtc0RhdGEgPT4ge1xuICAgICAgICAgIGNvbnN0IHJvb3QgPSBSZWFjdERPTS5jcmVhdGVSb290KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKSk7XG4gICAgICAgICAgcm9vdC5yZW5kZXIoXG4gICAgICAgICAgICA8UmVuZGVyU3RydWN0dXJlIGNvbnRlbnREYXRhPXtjb250ZW50RGF0YX0gcGFyYW1zRGF0YT17cGFyYW1zRGF0YX0gcmVuZGVyZWQ9e3RydWV9Lz5cbiAgICAgICAgICApO1xuICAgICAgICAgIGFkZEZvb3RlcigpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIGVsc2V7XG4gICAgZDMuY3N2KGdvb2dsZV9jb25maWcubG9jYWxDb250ZW50VVJMKS50aGVuKCBjb250ZW50RGF0YSA9PiB7XG4gICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5sb2NhbFBhcmFtc1VSTCkudGhlbiggcGFyYW1zRGF0YSA9PiB7XG4gICAgICAgIGluaXRTY3JvbGxlcihjb250ZW50RGF0YSwgcGFyYW1zRGF0YSk7XG4gICAgICAgIGFkZEZvb3RlcigpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gd3JpdGVIVE1MZmlsZShIVE1MU3RydWN0LCBjb250ZW50RGF0YSwgcGFyYW1zRGF0YSl7XG4gIGxldCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHtodG1sc3RydWM6IGAke0hUTUxTdHJ1Y3R9YH0sIG51bGwsIDIpXSwge3R5cGU6IFwidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04XCJ9KTtcbiAgbGV0IGNvbnRlbnRDU1YgPSBuZXcgQmxvYihbY29udGVudERhdGFdLCB7dHlwZTogXCJ0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04XCJ9KTtcbiAgbGV0IHBhcmFtc0NTViA9IG5ldyBCbG9iKFtwYXJhbXNEYXRhXSwge3R5cGU6IFwidGV4dC9jc3Y7Y2hhcnNldD11dGYtOFwifSk7XG5cbiAgc2F2ZUFzKGNvbnRlbnRDU1YsIFwiY29udGVudERhdGEuY3N2XCIpO1xuICBzYXZlQXMocGFyYW1zQ1NWLCBcInBhcmFtc0RhdGEuY3N2XCIpO1xuICBzYXZlQXMoYmxvYiwgXCJzdHJ1Y3R1cmUuanNvblwiKTtcbn1cblxuZnVuY3Rpb24gYWRkTm90UHVibGlzaGVkKCl7XG4gIGNvbnN0IGRpdiA9IGQzLnNlbGVjdCgnLnB1bGwtcmlnaHQnKS5pbnNlcnQoXCJsaVwiLCdsaScpO1xuICBkaXYuaHRtbChgPHAgY2xhc3M9J25vdC1wdWJsaXNoZWQnPk5lIHBhcyBwdWJsaWVyPC9wPmApO1xufVxuXG5mdW5jdGlvbiBhZGRGb290ZXIoKXtcbiAgLy9kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9vdGVyQ29udGFpbmVyJykucmVtb3ZlKCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb290ZXJDb250YWluZXInKS5pbm5lckhUTUwgPSBkMy5zZWxlY3QoYCNmb290ZXJDb250ZW50YCkubm9kZSgpLmlubmVySFRNTDtcbn1cbiIsImNvbnN0IGdvb2dsZV9jb25maWcgPSB7XG4gICAgXCJjb250ZW50VVJMXCI6IFwiaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvZS8yUEFDWC0xdlNFeXdKRTBWVWd5M05zcTNUZ19vaC1WczYzM1RTaW1kSUhma1hUeXo5QmJFdFdOVmd1cmQxVG91LVE1YW52ZE9pdzNjb0NGa0RDaVNZcS9wdWI/Z2lkPTAmc2luZ2xlPXRydWUmb3V0cHV0PWNzdlwiLFxuICAgIFwicGFyYW1zVVJMXCI6IFwiaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvZS8yUEFDWC0xdlNFeXdKRTBWVWd5M05zcTNUZ19vaC1WczYzM1RTaW1kSUhma1hUeXo5QmJFdFdOVmd1cmQxVG91LVE1YW52ZE9pdzNjb0NGa0RDaVNZcS9wdWI/Z2lkPTQwOTk1MDIzNyZzaW5nbGU9dHJ1ZSZvdXRwdXQ9Y3N2XCIsXG4gICAgXCJsb2NhbENvbnRlbnRVUkxcIjogXCIuL2RhdGEvc3RydWN0dXJlL2NvbnRlbnREYXRhLmNzdlwiLFxuICAgIFwibG9jYWxQYXJhbXNVUkxcIjogXCIuL2RhdGEvc3RydWN0dXJlL3BhcmFtc0RhdGEuY3N2XCJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge2dvb2dsZV9jb25maWd9O1xuIl0sIm5hbWVzIjpbIkludHJvU2VjdGlvbiIsInByb3BzIiwiaW50cm9TZWN0aW9uT2JqIiwiY2xhc3NOYW1lIiwiY2xhc3NlcyIsImFtb3JjZSIsInBhcnNlIiwib3B0aW9uRGF0YSIsInRpdGxlIiwiYmFja2dyb3VuZCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiUHJvcFR5cGVzIiwib3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzIiwicGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cyIsInRpdHJlIiwiYXV0ZXVycyIsImRhdGUiLCJpc0pzb24iLCJzdHIiLCJKU09OIiwiZSIsInBhcnNlQ2xhc3NlcyIsIkFycmF5IiwiZnJvbSIsInNwbGl0Iiwiam9pbiIsImdldE9wdGlvbnMiLCJwYXJhbXNEYXRhIiwiYXV0aG9ycyIsInVybHMiLCJtYXBib3hnbCIsIkdhdWdlcyIsInJlbmRlckpldG9uVGV4dCIsImpldG9uc1ZhbHVlIiwiTWF0aCIsImFicyIsInVzZUVmZmVjdCIsImQzIiwic2VsZWN0QWxsIiwibm9kZXMiLCJmb3JFYWNoIiwibm9kZSIsImN1cldpZHRoIiwiYXR0ciIsImRvbGxhcnMiLCJjb21taXR0ZWRWYWx1ZSIsInJvdW5kIiwiY29tbWl0dGVkIiwiZ2F1Z2VWYWx1ZSIsInNlbGVjdCIsImlkIiwiZ2F1Z2VFeHBsYWluIiwibWlzc2lvbiIsIkludHJvQm94Iiwic3RhcnRHYW1lIiwidXNlQ2FsbGJhY2siLCJnYW1lU3RhcnQiLCJpbnRyb0VsZW0iLCJvbkNsaWNrIiwiTW9uaXRvcmluZyIsInRyYW5zaXRpb24iLCJzZXRUaW1lb3V0IiwiZHVyYXRpb24iLCJyaWdodGFycm93cyIsInRlcmF3YXR0cyIsImNhbGN1bGF0ZVBlcmZvcm1hbmNlIiwiY2hvaWNlc192YWx1ZXMiLCJzbGljZSIsIm1hcCIsImVsZW0iLCJwYXJzZUludCIsInJlbmRlclNpZ24iLCJ2YWx1ZSIsIkNob2ljZSIsImNvbnNvbGUiLCJsb2ciLCJtb25pdG9yaW5nIiwidXNlU3RhdGUiLCJzZWxlY3Rpb24iLCJzZXRTZWxlY3Rpb24iLCJzZWxlY3Rpb25idXR0b25zIiwiY2xhc3NlZCIsIm9iaiIsIm5leHRQcm9tcHQiLCJjb3N0IiwicGVyZm9ybWFuY2UiLCJpbmRleCIsInRyaWdnZXJOZXh0IiwiU3RyaW5nIiwiY3VyUHJvbXB0IiwibGVuZ3RoIiwiY2hhbmdlUHJvbXB0IiwicmVwbGFjZSIsInVwZGF0ZU1lbW9yeU9iaiIsInVwZGF0ZURvbGxhcnMiLCJ1cGRhdGVQZXJmb3JtYW5jZSIsInByZXZpb3VzUHJvbXB0IiwiY3VySW5kZXgiLCJjaG9pY2VzIiwiY2hvaWNlIiwiamV0b25WYWx1ZSIsImtleSIsImV2ZW50IiwidGFyZ2V0IiwidXBkYXRlU2VsZWN0ZWQiLCJzcmMiLCJpZHgiLCJmaWx0ZXIiLCJ2YWwiLCJOdW1iZXIiLCJpc05hTiIsImV2ZXJ5IiwiaXRlbSIsInNob3dUV2giLCJoYXNPd25Qcm9wZXJ0eSIsImdhdWdlcyIsIk11bHRpU2VsZWN0aW9uIiwicmVzZXRTZWxlY3Rpb24iLCJjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbiIsImFjY0Nvc3QiLCJyZWR1Y2UiLCJhY2MiLCJjdXIiLCJhY2NQZXJmb3JtYW5jZSIsImNvdW50IiwicHJvY2Vzc1RyaWdnZXJOZXh0IiwidHJpZ2dlck5leHR0b0NvbXB1dGUiLCJzcGxpdHRlZFRyaWdnZXJOZXh0IiwiaW5kaXZpZHVhbFRyaWdnZXJOZXh0IiwiZmlsdGVyZWRTZWxlY3Rpb24iLCJpbmRleE9mIiwibmV3QXJyYXkiLCJQcmludFByb21wdCIsImdhbWVSZXNldCIsIm1lc3NhZ2UiLCJSZXBhcnRpdGlvbiIsImpldG9ucyIsInNldEpldG9ucyIsInNldFRlcmF3YXR0cyIsIm90aGVyUGVyZm9NZXRyaWNzIiwic2V0T3RoZXJQZXJmb01ldHJpY3MiLCJ1bml0cyIsInNldFVuaXRzIiwidG9rZW5zUGVyVW5pdCIsInNldFRva2Vuc1BlclVuaXQiLCJtYXhUb2tlbnMiLCJvcHRpb25zIiwiZ2V0T3B0aW9uUGFyYW1zIiwibmV3VW5pdHMiLCJ1bml0VmFsdWUiLCJuZXdKZXRvbnMiLCJjdXJWYWwiLCJuZXdNVyIsImN1ck9wdGlvblBhcmFtcyIsIm5ld090aGVyUGVyZm9NZXRyaWNzIiwibm9uVW5pcXVlIiwiaGllcmFyY2hpemVVbml0cyIsImluZGV4T2ZNYXhWYWx1ZSIsImlNYXgiLCJ4IiwiaSIsImFyciIsImNvbmNhdCIsImEiLCJTZXQiLCJzaXplIiwicHJvY2Vzc0Nob2ljZXMiLCJzcGxpdHRlZENob2ljZXMiLCJuYW1lIiwidW5pdFRXaHZhbHVlIiwidW5pdEVudmlyb3ZhbHVlIiwidW5pdFBvcHV2YWx1ZSIsImNoZWNrSGlkZUJ1dHRvbiIsIm9wdGlvblBhcmFtcyIsImhpZGVCdXR0b24iLCJtb2RpZnlPbkNsaWNrIiwiZGlmZiIsIm5ld0FkZGl0aW9uIiwidG90YWwiLCJkZWZhdWx0TmV4dCIsIm1heCIsInJlcyIsInB1c2giLCJpbmNsdWRlcyIsInVuZGVmaW5lZCIsIk1hcE5hdmlnYXRvciIsInNldHVwT25DbGljayIsInRyaWdnZXJQb2ludGVyIiwic3RhdGUiLCJ0aXAiLCJkM1RpcCIsImRpcmVjdGlvbiIsImh0bWwiLCJkIiwic3VwcF90ZXh0IiwiUHJvbWlzZSIsImFsbCIsInRoZW4iLCJiZ01hcCIsImljb25PTk1hcCIsImFwcGVuZCIsImRvY3VtZW50RWxlbWVudCIsIk9uSWNvbnNTVkciLCJjYWxsIiwiYXBwZW5kQ2hpbGQiLCJnQnV0dG9ucyIsInRpdGxlcyIsInN1cHBfdGV4dHMiLCJvbiIsImhpZGUiLCJyZXZlcnNlIiwiY3VyVGlwRGF0YSIsInN0b3BQcm9wYWdhdGlvbiIsInNob3ciLCJ0b2dnbGVJY29uIiwicGFyZW50RWxlbWVudCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpY29uT2JqIiwic3RhdHVzIiwicmVtb3ZlIiwiQmlsYW4iLCJUV2hFbnZUZXh0IiwiYmFycmFnZVRleHQiLCJjYXNoVGV4dCIsInBvcHVUZXh0IiwicHJvY2Vzc2VkQ29udGVudCIsInRleHRTdXBwQXJyYXkiLCJmaXJzdERhbUVuZXJneSIsInNlY29uZERhbUVuZXJneSIsImFkanVzdGVkUHJvZHVjdGlvblZhbHVlIiwiY3VyRG9sbGFycyIsImVudmlyb25tZW50VmFsdWUiLCJwb3B1bGFyaXRlVmFsdWUiLCJ0ZXh0Q29udGVudEFycmF5IiwiZGFtRW5lcmd5IiwibWVtb3J5T2JqIiwiYnVpbHREYW0iLCJnZW5lcmljVGV4dCIsImxvd0Nhc2hUZXh0IiwibG93RW52VGV4dCIsImxvd1BvcFRleHQiLCJwcm9jZXNzQmlsYW4xIiwiZmluYWxCaWxhbkRhdGEiLCJidWlsdFNlY29uZERhbSIsImFjY2VwdGVkQ2h1cmNoaWxsRmFsbHNEZWFsIiwicHJpbnQiLCJFbmRHYW1lIiwicmFpc29uIiwiQ2F0YXN0cm9waGUiLCJwYXJzZUNob2ljZVZhbHVlcyIsImNob2ljZV92YWx1ZSIsInNwbGl0dGVkQ2hvaWNlVmFsdWVzIiwic3BsaWNlIiwid2hpY2hFdmVudEhhcHBlbnMiLCJQcm9tcHRCb3giLCJpbnZlc3RlZE1vZGVybml6YXRpb24iLCJidWlsdE51Y2xlYXIiLCJudWNsZWFyQnVpbHROdW1iZXIiLCJzZXRNZW1vcnlPYmoiLCJyZWFzb25zIiwibmV3VmFsdWUiLCJkaWZmVmFsdWUiLCJpc0ludGVnZXIiLCJkaWZmQXJyYXkiLCJmaWVsZCIsIm5ld01lbW9yeU9iaiIsInJlbmRlclN3aXRjaCIsInBhcmFtIiwiZW5kR2FtZSIsIk1haW5GcmFtZSIsImdhbWVTdGF0dXMiLCJzZXRTdGF0dXMiLCJnYW1lSW5kZXgiLCJzZXRHYW1lSW5kZXgiLCJzZXREb2xsYXJzIiwic2V0UGVyZm9ybWFuY2UiLCJiZyIsInNldEJHIiwiZ2V0R2FtZVByb21wdCIsImdhbWVFbmQiLCJmaW5kR2FtZUluZGV4IiwiSURuYW1lIiwiZ2FtZURhdGEiLCJmaW5kSW5kZXgiLCJnZXRCYWNrZ3JvdW5kSW5mbyIsImdhbWVTY3JlZW5DbGFzcyIsImJhY2tncm91bmRJbWFnZSIsIm1hcE9iaiIsIm5ld1BlcmZvcm1hbmNlIiwiYXBwbHkiLCJFbmdpbmUiLCJjb250YWluZXIiLCJpbnRyb09iaiIsInRoaXMiLCJyb290RWxlbSIsImVuZ2luZVJvb3QiLCJSZWFjdERPTSIsImluaXRFbmdpbmUiLCJzZWN0aW9uVHlwZSIsInJlbmRlciIsImluaXRpYWxpemUiLCJjb250ZW50RGF0YSIsIm1hcENvbnRhaW5lciIsInNldHVwVml6Iiwic3RydWN0dXJlRGF0YSIsInZpelNlY3Rpb25JRHMiLCJyb3dEYXRhIiwiY3VyQW1vcmNlIiwic2VjdGlvbkJhY2tncm91bmQiLCJnYW1laWQiLCJ0ZXh0cyIsInZpc3VhbCIsImZpbGVuYW1lIiwidmlzdWVsY2xhc3NlcyIsInRpdGxlT2JqIiwibWFpblRpdGxlIiwiY2xhc3MiLCJ0ZXh0Iiwic3ViVGl0bGUiLCJjdXJEYXRhIiwiYXR0cmlidXRzIiwic2Nyb2xsVHlwZSIsInN0ZXBjbGFzc2VzIiwiY3VyVml6U2VjdGlvbiIsImN1clNlY3Rpb24iLCJzZWN0aW9uQXR0ciIsImxpc3RJRCIsInN0ZXBzIiwibWVkaWFJbmZvIiwiT2JqZWN0IiwidmFsdWVzIiwiZ2V0U3RydWN0dXJlIiwic2VjdGlvbk9iaiIsInN0ZXAiLCJTY3JvbGxlclN0ZXAiLCJlbCIsImNhbGxiYWNrIiwiX2lzQWN0aXZhdGUiLCJzY3JvbGxEaXJlY3Rpb24iLCJjbGFzc0xpc3QiLCJhZGQiLCJpbml0U2Nyb2xsZXIiLCJlbGVtZW50cyIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3RpY2t5Qml0cyIsInN0aWNreUJpdFN0aWNreU9mZnNldCIsIkxhenlMb2FkIiwiZWxlbWVudHNfc2VsZWN0b3IiLCJ0aHJlc2hvbGQiLCJ2MSIsImNhbGxiYWNrcyIsIl9vZmZzZXRUb3AiLCJfb2Zmc2V0Qm90dG9tIiwiaW5uZXJIZWlnaHQiLCJpc0luaXRpYWxpemVkIiwibGFzdFNjcm9sbCIsInZpeiIsInZpc2libGVTdGVwcyIsImFydGljbGVSZW1pbmRlciIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGxQcm9ncmVzcyIsInZpelNlY3Rpb25zIiwiRXJyb3IiLCJ2aXpTZWN0aW9uIiwic2VjdGlvbnMiLCJqIiwiX3VwZGF0ZSIsImN1cnJlbnRTY3JvbGwiLCJwYWdlWU9mZnNldCIsInNjcm9sbFRvcCIsImJvdW5kaW5nUmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImhlaWdodCIsImRlYWN0aXZhdGUiLCJpc0FydGljbGVSZW1pbmRlckRpc3BsYXllZCIsImJvdHRvbSIsImlzQXJ0aWNsZVJlbWluZGVySXNWaXNpYmxlIiwiY29udGFpbnMiLCJzZWN0aW9uIiwiYWN0aXZhdGUiLCJfdXBkYXRlU2Nyb2xsUHJvZ3Jlc3MiLCJzY3JvbGxlZCIsImJvZHkiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJ3aWR0aCIsInB1YmxpY0ludGVyZmFjZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvZmZzZXRUb3AiLCJvZmZzZXRCb3R0b20iLCJzY3JvbGxlciIsImlubmVySFRNTCIsInN0cnVjdHVyZSIsImdvb2dsZV9jb25maWciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==