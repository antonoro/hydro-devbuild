(self.webpackChunkscrollytelling_template=self.webpackChunkscrollytelling_template||[]).push([[179],{40014:(e,t,n)=>{"use strict";const r=JSON.parse('{"E":"<section id=\\"vizSection1_0\\" class=\\"viz-section full-page\\"><div class=\\"steps display-none\\"><section class=\\"display-none\\"><p>Bla bl abl abl ablalbalanl.</p></section></div><div class=\\"viz\\" id=\\"viz\\"><div id=\\"vizSection1_0_0\\" class=\\"iframeContainer map-area\\"></div></div></section>"}');var a=n(40207),c=n(67294);function o(e){var t=c.createElement("section",{className:"intro-section ".concat(e.classes)},c.createElement("h5",{className:"overTitle"},e.amorce),c.createElement("h1",null,e.optionData.title),c.createElement("address",null,c.createElement("div",{className:"date"})));return e.background?c.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},t):t}var i=n(25935);function s(e){var t,n=String(e.classes).includes("citation");n&&(t={text:String(e.texts).split("/")[0],author:String(e.texts).split("/")[1]});var r,a=String(e.classes).includes("bigNumber");a&&(r={number:String(e.texts).split("/")[0],underText:String(e.texts).split("/")[1]});var o=e.visual,s=""!==o?"Photo"===e.visual?c.createElement("img",{key:"photoTextSection_".concat(e.id),id:"photoTextSection_".concat(e.id),src:"assets/img/675/".concat(e.filename),"data-srcset":"assets/img/2048/".concat(e.filename," 2048w, assets/img/990/").concat(e.filename," 990w, assets/img/675/").concat(e.filename," 675w, assets/img/1350/").concat(e.filename," 1350w, assets/img/100/").concat(e.filename," 100w, assets/img/495/").concat(e.filename," 495w, assets/img/1024/").concat(e.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(e.visuelclasses),style:{paddingBottom:"1rem"}}):"Video"===e.visual?c.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(e.visuelclasses),preload:"metadata",key:"videoTextSection_".concat(e.id),id:"videoTextSection_".concat(e.id)},c.createElement("source",{src:"assets/videos/".concat(e.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):c.createElement("div",null):c.createElement("div",null),l=c.createElement("section",{className:"text-section ".concat(e.classes)},n?c.createElement("blockquote",{className:"small"},c.createElement("div",null,c.createElement("p",null,c.createElement("b",null,(0,i.ZP)(t.text))),c.createElement("p",{className:"author"},t.author),c.createElement("div",{className:"symbol"}))):a?c.createElement("div",{className:"container-number"},c.createElement("div",{className:"numbers"},c.createElement("h2",null,r.number),c.createElement("small",null,r.underText))):c.createElement("div",null,o?s:c.createElement("div",null),String(e.texts).startsWith("<")?(0,i.ZP)(e.texts):c.createElement("p",null,(0,i.ZP)(e.texts))));return e.background?c.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},l):l}var l,u=n(45697),m=n.n(u),d=["title","src"];function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t,n,r=e.title,a=e.src,o=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,d),i=(0,c.useRef)(),s=(t=(0,c.useState)(500),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],u=s[1],m=(0,c.useCallback)((function(e){var t=e.data,n=void 0===t?{}:t;e.source===i.current.contentWindow&&"string"!=typeof n&&n["datawrapper-height"]}),[u,i]);return(0,c.useEffect)((function(){return window.addEventListener("message",m),function(){return window.removeEventListener("message",m)}}),[l,u,m]),c.createElement("iframe",p({ref:i,scrolling:"no",frameBorder:"0",width:"100%"},o,{title:r,src:a,height:l}))}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}v.propTypes={title:m().string.isRequired,src:m().string.isRequired,loading:m().oneOf(["eager","lazy"])};var h="intro-titre",y="pleine-page-titre",E="texte-classique",b="viz-section",x="centré",w="Photo",S="Video",N="Visualisation",I="iframe",k=(g(l={titre:"Titre",auteurs:"Auteurs",date:"Date"},"date","Date"),g(l,"urls","LienAuteurs"),g(l,"lienfichiersource","LienFichierSource"),l);function P(e){var t,n,r,a=c.createElement("section",{id:e.listID,className:e.classed},c.createElement("div",{className:"steps ".concat((t=e.steps,n=t.map((function(e,t){return e.stepclasses})),r=new Array(n.length),n.forEach((function(e,t){if(Array.isArray(e))e.forEach((function(e){for(var a=t;a<n.length;a++)n[a].includes(e)&&(r[a]=e)}));else if("string"==typeof e)for(var a=t;a<n.length;a++)n[a].includes(e)&&(r[a]=e)})),r.reduce((function(e,t){return e===t&&""!==e&&""!==t?e:""}))))},e.steps.map((function(e,t){var n,r=String(e.stepclasses).includes("citation");return r&&(n={text:String(e.text).split("/")[0],author:String(e.text).split("/")[1]}),c.createElement("section",{key:t,className:e.stepclasses},r?c.createElement("blockquote",{className:"small"},c.createElement("div",null,c.createElement("p",null,c.createElement("b",null,(0,i.ZP)(n.text))),c.createElement("p",{className:"author"},n.author),c.createElement("div",{className:"symbol"}))):String(e.text).startsWith("<")?(0,i.ZP)(e.text):c.createElement("p",null,e.text?(0,i.ZP)(e.text):""))}))),c.createElement("div",{className:"viz",id:"viz"},e.steps.map((function(t,n){return t.visual===w?c.createElement("img",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),src:"assets/img/675/".concat(t.filename),"data-srcset":"assets/img/2048/".concat(t.filename," 2048w, assets/img/990/").concat(t.filename," 990w, assets/img/675/").concat(t.filename," 675w, assets/img/1350/").concat(t.filename," 1350w, assets/img/100/").concat(t.filename," 100w, assets/img/495/").concat(t.filename," 495w, assets/img/1024/").concat(t.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(t.visuelclasses)}):t.visual===S?c.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(t.visuelclasses),preload:"metadata",key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n)},c.createElement("source",{src:"assets/videos/".concat(t.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):t.visual===I?c.createElement("div",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),className:"iframeContainer"},c.createElement(v,{title:"Mesures d'arsenic",src:"".concat(t.filename)})):t.visual===N?c.createElement("div",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),className:"iframeContainer ".concat(t.visuelclasses)}):void 0}))));return e.background?c.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},a):a}function T(e){var t=c.createElement("section",{className:"full-page-section ".concat(e.classes)},c.createElement("div",{className:"titleImage"},e.filename?"Photo"===e.visual?c.createElement("img",{key:"".concat(e.id),id:"".concat(e.id),src:"assets/img/675/".concat(e.filename),"data-srcset":"assets/img/2048/".concat(e.filename," 2048w, assets/img/990/").concat(e.filename," 990w, assets/img/675/").concat(e.filename," 675w, assets/img/1350/").concat(e.filename," 1350w, assets/img/100/").concat(e.filename," 100w, assets/img/495/").concat(e.filename," 495w, assets/img/1024/").concat(e.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(e.visuelclasses)}):"Video"===e.visual?c.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(e.visuelclasses),preload:"metadata",key:"".concat(e.id),id:"".concat(e.id)},c.createElement("source",{src:"assets/videos/".concat(e.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):c.createElement("div",null):c.createElement("div",null),e.filename?c.createElement("div",{className:"filter"}):c.createElement("div",null)),c.createElement("div",{className:"captionholder"},c.createElement("h2",{className:"caption ".concat(e.mainTitle.class)},e.mainTitle.text),e.subTitle?c.createElement("h3",{className:"caption ".concat(e.subTitle.class)},e.subTitle.text):c.createElement("div",null)));return e.background?c.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},t):t}n(93162);var C=n(26355);function A(e,t){var n={},r=[],a=j(t);return console.log("content Data",e),e.map((function(e,t){if(e.Section===h){var c=e.StepClasses,o=e.TEXTE,i=e.StyleFond;n[e.SectionID]={key:t,sectionType:h,optionData:a,amorce:o,background:i,classes:_(c),gameid:e.GameID}}else if(e.Section===E){var s=e.TEXTE,l=e.StepClasses,u=e.StyleFond;n[e.SectionID]={key:t,sectionType:E,texts:s,visual:e.VISUEL,filename:e.NomFichierSource,background:u,classes:_(l),visuelclasses:_(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===y){var m=e.TEXTE;D(e.TEXTE)&&(m=JSON.parse(e.TEXTE)),n[e.SectionID]={key:t,sectionType:y,texts:D(e.TEXTE)?m:{mainTitle:{class:"",text:m},subTitle:null},visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,classes:_(e.StepClasses),visuelclasses:_(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===b){var d={attributs:e.Attributs,scrollType:e.Step,text:e.TEXTE,visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,visuelclasses:_(e.VisuelClasses),stepclasses:_(e.StepClasses),gameid:e.GameID};if(n.hasOwnProperty(e.SectionID)){var p=n[e.SectionID];p.push(d),n[e.SectionID]=p}else n[e.SectionID]=[d],r.push(e.SectionID)}})),r.map((function(e){var t=n[e],r=t[0].attributs===x?" full-page":"",a=t[0].background;n[e]={key:e,sectionType:b,listID:e,steps:t,classed:"viz-section".concat(r),mediaInfo:0,background:a}})),Object.values(n)}function D(e){try{JSON.parse(e)}catch(e){return!1}return!0}function _(e){return Array.from(e.split(";")).join(" ")}function j(e){return{title:e[0][k.titre],authors:e[0][k.auteurs],urls:e[0][k.urls],date:e[0][k.date]}}n(9208);n(83731).accessToken="pk.eyJ1IjoibGVkZXZvaXIiLCJhIjoiY2p2bW81dHU2MWV1cTRhcXIzaXZqMGYxciJ9.WrIF8o69aR_TstDFu6Qyag",n(6899);var R=n(20745);function O(e){return(0,c.useEffect)((function(){var t,n;t=C.Ys(".gauges").selectAll(".gauge"),n=Math.max(50,Math.max(parseInt(e.dollars),parseInt(e.performance))),t.nodes().forEach((function(t){var r=n;console.log("gauge: ",t),"dollars"===C.Ys(t).attr("id")?r=e.dollars:"performance"===C.Ys(t).attr("id")&&(r=e.performance),C.Ys(t).select(".gaugeColor").style("width","".concat(Math.round(r/n*100),"%"))}))})),c.createElement("div",{className:"gauges"},c.createElement("div",{id:"dollars",className:"gauge dollarGauge"},c.createElement("div",{className:"textBox"},c.createElement("h5",null,"Jetons")),c.createElement("div",{className:"gaugeColorHolder"},c.createElement("div",{className:"gaugeColor blue"},c.createElement("div",{className:"value"},c.createElement("p",null,e.dollars))))),c.createElement("div",{id:"performance",className:"gauge performanceGauge"},c.createElement("div",{className:"textBox"},c.createElement("h5",null,"Performance")),c.createElement("div",{className:"gaugeColorHolder"},c.createElement("div",{className:"gaugeColor green"},c.createElement("div",{className:"value"},c.createElement("p",null,e.performance))))))}function z(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function V(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){z(c,r,a,o,i,"next",e)}function i(e){z(c,r,a,o,i,"throw",e)}o(void 0)}))}}function L(e){var t=(0,c.useCallback)(V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("starting game"),e.gameStart();case 2:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"gameBox transparent"},c.createElement("div",{className:"introBox"},e.introElem),c.createElement("div",{className:"userBox"},c.createElement("div",{className:"startbutton",onClick:t},c.createElement("p",null,"Commencer le jeu"))))}function q(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){q(c,r,a,o,i,"next",e)}function i(e){q(c,r,a,o,i,"throw",e)}o(void 0)}))}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e){var t,n,r=(t=(0,c.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],o=r[1];(0,c.useEffect)((function(){}),[]),(0,c.useEffect)((function(){C.td_(".choicebutton").select(".butn").classed("selected",!1),a&&C.Ys(a.obj).select(".butn").classed("selected",!0)}),[a]);var i=(0,c.useCallback)(function(){var t=Z(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.curPrompt.Trigger_next,Number.isInteger(parseInt(a))&&(console.log("Checking trigger next: ",parseInt(a)),e.changePrompt(parseInt(a))),e.updateDollars(-parseInt(n)),e.updatePerformance(parseInt(r)),o(null);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),s=(0,c.useCallback)(Z(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("previous prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1)),o(null);case 2:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"choices"},c.createElement("div",{className:"row"},e.choices.map((function(t,n){var r=e.choices_values[n].split("_")[0],a=e.choices_values[n].split("_")[1];return c.createElement("div",{className:"choicebutton",key:n,onClick:function(e){!function(e,t,n){o({obj:e.target,cost:t,use:n})}(e,r,a)}},c.createElement("div",{id:n,className:"butn"},c.createElement("p",null,t," (coût: ",r," ; effet: ",a,")")))}))),c.createElement("div",{className:"monitoring"},c.createElement("div",{className:"column"},c.createElement("div",{className:"monitoring_header"},c.createElement("h5",null,"Répartition de vos jetons")),c.createElement("div",{className:"monitoring_value"},c.createElement(O,{dollars:a&&a.hasOwnProperty("cost")?e.gauges.props.dollars-a.cost:e.gauges.props.dollars,performance:e.gauges.props.performance})))),c.createElement("div",{className:"row"},c.createElement("div",{className:"column"},e.curIndex>0?c.createElement("div",{className:"actionbutton prev",onClick:s},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))):c.createElement("div",null)),c.createElement("div",{className:"column"},c.createElement("div",{className:"actionbutton next ".concat(a?"":"disabled"),onClick:function(){a?i(a.cost,a.use):console.log("Disabled.")}},c.createElement("div",{className:"butn"},c.createElement("p",null,"Next"))))))}function X(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){X(c,r,a,o,i,"next",e)}function i(e){X(c,r,a,o,i,"throw",e)}o(void 0)}))}}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e){var t=W((0,c.useState)([]),2),n=t[0],r=t[1];(0,c.useEffect)((function(){a()}),[]),(0,c.useEffect)((function(){}),[n]);var a=function(){r(e.choices.map((function(e){return null})))},o=function(e){return[e.reduce((function(e,t){return t&&(e+=t.cost),e}),0),e.reduce((function(e,t){return t&&(e+=t.use),e}),0)]},i=(0,c.useCallback)(function(){var t=M(regeneratorRuntime.mark((function t(n){var r,c,i,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.curPrompt.Trigger_next,Number.isInteger(parseInt(r))&&(console.log("Checking trigger next: ",parseInt(r)),e.changePrompt(parseInt(r))),c=o(n),i=W(c,2),s=i[0],l=i[1],e.updateDollars(-parseInt(s)),e.updatePerformance(parseInt(l)),a();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),s=(0,c.useCallback)(M(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("previous prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1)),a();case 2:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"choices"},c.createElement("div",{className:"row"},e.choices.map((function(t,a){var o=e.choices_values[a].split("_")[0],i=e.choices_values[a].split("_")[1];return c.createElement("div",{className:"selectionbutton",key:a,onClick:function(e){!function(e,t,a,c){var o,i=function(e){if(Array.isArray(e))return H(e)}(o=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||Y(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n[t]?i[t]=null:i[t]={obj:e.target,cost:parseInt(a),use:parseInt(c)},r(i)}(e,a,o,i)}},c.createElement("div",{id:a,className:"butn"},c.createElement("div",{className:"selectionBox"},n[a]?"X":""),c.createElement("p",null,t," (coût: ",o," ; effet: ",i,")")))}))),c.createElement("div",{className:"monitoring"},c.createElement("div",{className:"column"},c.createElement("div",{className:"monitoring_header"},c.createElement("h5",null,"Répartition de vos jetons")),c.createElement("div",{className:"monitoring_value"},c.createElement(O,{dollars:n&&n.length>0?e.gauges.props.dollars-o(n)[0]:e.gauges.props.dollars,performance:e.gauges.props.performance})))),c.createElement("div",{className:"row"},c.createElement("div",{className:"column"},e.curIndex>0?c.createElement("div",{className:"actionbutton prev",onClick:s},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))):c.createElement("div",null)),c.createElement("div",{className:"column"},c.createElement("div",{className:"actionbutton next ".concat(n?"":"disabled"),onClick:function(){n?i(n):console.log("Disabled.")}},c.createElement("div",{className:"butn"},c.createElement("p",null,"Next"))))))}function G(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){G(c,r,a,o,i,"next",e)}function i(e){G(c,r,a,o,i,"throw",e)}o(void 0)}))}}function Q(e){var t=(0,c.useCallback)(J(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("prev prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1));case 1:case"end":return t.stop()}}),t)})))),n=(0,c.useCallback)(J(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,Number.isInteger(parseInt(n))&&(console.log("Checking trigger next: ",parseInt(n)),e.changePrompt(parseInt(n)));case 2:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"printprompt"},c.createElement("div",{className:"message"},c.createElement("p",null,e.message)),c.createElement("div",{className:"actionbutton prev",onClick:t},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))),c.createElement("div",{className:"actionbutton next",onClick:n},c.createElement("div",{className:"butn"},c.createElement("p",null,"Suivant"))))}function $(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function K(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){$(c,r,a,o,i,"next",e)}function i(e){$(c,r,a,o,i,"throw",e)}o(void 0)}))}}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e){var t=ee((0,c.useState)(0),2),n=t[0],r=t[1],a=ee((0,c.useState)(0),2),o=a[0],i=a[1],s=ee((0,c.useState)([]),2),l=s[0],u=s[1],m=ee((0,c.useState)([]),2),d=m[0],p=m[1];(0,c.useEffect)((function(){var e=h(),t=e.map((function(){return 0})),n=e.map((function(e){return e.unitValue}));u(t),p(n),console.log("optionParams:",h())}),[]),(0,c.useEffect)((function(){var e=l.reduce((function(e,t,n){return e+t*h()[n].unitValue}),0),t=l.reduce((function(e,t,n){return e+t*h()[n].unitTWhvalue}),0);r(e),i(t)}),[l]);var f=(0,c.useCallback)(K(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("prev prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1));case 1:case"end":return t.stop()}}),t)})))),v=(0,c.useCallback)(K(regeneratorRuntime.mark((function t(){var r,a,c,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=String(e.curPrompt.Trigger_next).split("_"),1==(a=String(r[0]).split(";")).length&&Number.isInteger(parseInt(a[0]))?(console.log("Checking trigger next: ",a),e.changePrompt(parseInt(a))):a.length>1&&(l.every((function(e){return e===l[0]}))?(o=r[1],e.changePrompt(parseInt(o))):(c=l.reduce((function(e,t,n,r){return t>r[e]?n:e}),0),Number.isInteger(parseInt(a[c]))&&(console.log("Checking trigger next: ",a[c]),e.changePrompt(parseInt(a[c]))))),e.updateDollars(-n);case 4:case"end":return t.stop()}}),t)})))),g=function(e,t){var n=t.split("_");return{name:e,unitValue:parseInt(n[0]),unitTWhvalue:parseInt(n[2])}},h=function(){return e.choices.map((function(t,n){return g(t,e.choices_values[n])}))},y=function(e,t,n,r){var a,c,o,i=function(e){if(Array.isArray(e))return ne(e)}(o=l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||te(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();i[t]+n>=0&&(n>0?(a=n*d[t],c=0,l.forEach((function(e,t){c+=e*d[t]})),c+a>10||(i[t]=i[t]+n)):i[t]=i[t]+n,u(i))};return c.createElement("div",{className:"repartition"},c.createElement("div",{className:"optionZone"},e.choices.map((function(t,n){return g(t,e.choices_values[n])})).map((function(e,t){return c.createElement("div",{className:"optionUnit",key:t},c.createElement("div",{className:"selectorZone"},c.createElement("div",{className:"division minusZone",onClick:function(e){return y(0,t,-1)}},c.createElement("h3",null,"-")),c.createElement("div",{className:"division centralZone"},c.createElement("h3",null,l[t])),c.createElement("div",{className:"division plusZone",onClick:function(e){return y(0,t,1)}},c.createElement("h3",null,"+"))),c.createElement("div",{className:"textZone"},c.createElement("h3",null,e.name),c.createElement("div",{className:"inlinetext"},c.createElement("h5",null,e.unitValue," jetons par unité • ",e.unitTWhvalue," TWh par unité"))))}))),c.createElement("div",{className:"monitoring"},c.createElement("div",{className:"column"},c.createElement("div",{className:"monitoring_header"},c.createElement("h5",null,"Répartition de vos jetons")),c.createElement("div",{className:"monitoring_value"},c.createElement(O,{dollars:e.gauges.props.dollars-n,committed:n,performance:e.gauges.props.performance})))),c.createElement("div",{className:"monitoring"},c.createElement("div",{className:"column"},c.createElement("div",{className:"monitoring_header"},c.createElement("h5",null,"Électricité produite")),c.createElement("div",{className:"monitoring_value"},c.createElement("h3",null,o," TWh")))),e.curIndex>0?c.createElement("div",{className:"actionbutton prev",onClick:f},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))):c.createElement("div",null),c.createElement("div",{className:"actionbutton next",onClick:v},c.createElement("div",{className:"butn"},c.createElement("p",null,"Suivant"))))}function ae(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ae(c,r,a,o,i,"next",e)}function i(e){ae(c,r,a,o,i,"throw",e)}o(void 0)}))}}function oe(e){(0,c.useEffect)((function(){}),[]);var t=(0,c.useCallback)(function(){var t=ce(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.changePrompt(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n=(0,c.useCallback)(function(){var t=ce(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Number.isInteger(n)&&e.updateDollars(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r=(0,c.useCallback)(function(){var t=ce(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Number.isInteger(n)&&e.updatePerformance(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return c.createElement("div",{className:"gameBox"},c.createElement("div",{className:"promptBox"},c.createElement("div",{className:"header"},c.createElement("div",{className:"surtitre"},c.createElement("h4",null,(0,i.ZP)(e.curPrompt.Sujet))),c.createElement("div",{className:"question"},c.createElement("p",null,(0,i.ZP)(e.curPrompt.Question)))),function(a){switch(a){case"Repartition":return c.createElement(re,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),choices_values:String(e.curPrompt.Choix_Valeurs).split(";"),changePrompt:t,curIndex:e.curIndex,updateDollars:n,gauges:e.gauges});case"Carte":case"Suivi":default:return c.createElement(U,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),changePrompt:t,curIndex:e.curIndex});case"Print":return c.createElement(Q,{curPrompt:e.curPrompt,message:String(e.curPrompt.Texte_Supp),changePrompt:t,curIndex:e.curIndex});case"choixReponse":case"Catastrophe":return c.createElement(U,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),choices_values:String(e.curPrompt.Choix_Valeurs).split(";"),changePrompt:t,curIndex:e.curIndex,updateDollars:n,updatePerformance:r,gauges:e.gauges});case"Cocher":return c.createElement(F,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),choices_values:String(e.curPrompt.Choix_Valeurs).split(";"),changePrompt:t,curIndex:e.curIndex,updateDollars:n,updatePerformance:r,gauges:e.gauges})}}(e.curPrompt.Type)))}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e){var t=ie((0,c.useState)("IDLE"),2),n=t[0],r=t[1],a=ie((0,c.useState)(0),2),o=a[0],i=a[1],s=ie((0,c.useState)(50),2),l=s[0],u=s[1],m=ie((0,c.useState)(50),2),d=m[0],p=m[1];(0,c.useEffect)((function(){console.log("checking props mapObj:",e.mapObj)}),[]),(0,c.useEffect)((function(){console.log("game ",n)}),[n]),(0,c.useEffect)((function(){v(o)}),[o]);var f=function(){r("END")},v=function(t){console.log("current game prompt:",e.gameData.filter((function(e){return String(e.Index)===String(t)})))};return"IDLE"===n?c.createElement("div",{className:"gameScreen"},c.createElement(L,{introElem:e.introElem,mapObj:e.mapObj,gameStart:function(){r("STARTED"),i(0)}})):"END"===n?c.createElement("div",null):c.createElement("div",{className:"gameScreen"},c.createElement(oe,{curIndex:o,curPrompt:e.gameData[o],changePrompt:i,updateDollars:function(e){l+e>=0?u((function(t){return t+e})):f()},updatePerformance:function(e){d+e>=0?p((function(t){return t+e})):f()},gauges:c.createElement(O,{dollars:l,performance:d})}))}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(97762);var me=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t;var c=this.container.append("div").classed("rootElem",!0);this.engineRoot=R.createRoot(c.node()),this.optionData=n,this.amorce=r.TEXTE,this.gameData=a,console.log("game Data is : ",this.gameData),this.initEngine()}var t,n;return t=e,(n=[{key:"initEngine",value:function(){var e=c.createElement(o,{key:"gameIntro",sectionType:h,optionData:this.optionData,amorce:this.amorce,background:null,classes:""});this.engineRoot.render(c.createElement(le,{introElem:e,gameStatus:this.gameStatus,gameData:this.gameData}))}}])&&ue(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function de(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){de(c,r,a,o,i,"next",e)}function i(e){de(c,r,a,o,i,"throw",e)}o(void 0)}))}}function fe(e,t){return ve.apply(this,arguments)}function ve(){return(ve=pe(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.gyn("https://docs.google.com/spreadsheets/d/e/2PACX-1vQQZ3sz0q1vnZmoYYR5IrCfuONhHcNw50iDtbg1H2mIX8lHDL1BQ4sAMi7iApSE1G9WQTW2jHcWv4KW/pub?gid=0&single=true&output=csv").then((function(e){var r=C.Ys(".game-area");return new me(r,j(n),t[0],e),ge(t,n),[[function(){}]]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t){var n=A(e,t);console.log("checking structure:",n),n.map((function(e){"viz-section"===e.sectionType&&e.steps.map((function(t,n){""!==t.visual&&(0===n?C.Ys("#".concat(e.key,"_").concat(n)).style("opacity",1):C.Ys("#".concat(e.key,"_").concat(n)).style("opacity",0))}))}))}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ee=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.index=n,this.callback=r,this._isActivate=!1}var t,n;return t=e,(n=[{key:"activate",value:function(e){this._isActivate||(this._isActivate=!0,this.el.classList.add("active"),this.callback(e))}},{key:"deactivate",value:function(){this._isActivate&&(this._isActivate=!1,this.el.classList.remove("active"))}}])&&ye(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),be=n(52732),xe=n.n(be),we=n(89438);function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ne(e,t){var n=[];[".viz",".full-page-section > img",".full-page-section > video"].forEach((function(e){n=n.concat(Array.from(document.querySelectorAll(e)))})),(0,we.Z)(n,{stickyBitStickyOffset:40}),new(xe())({elements_selector:".lazy",threshold:500}),Promise.all([fe(e,t)]).then((function(e){var t,n;(function(e){var t=0,n=0,r=window.innerHeight,a=!1,c=0,o=[],i=[],s=[],l=document.querySelector(".article-reminder"),u=document.querySelector("header > .progress"),m=document.querySelector(".intro-section h1"),d=document.querySelectorAll(".viz-section");if(d.length!==e.length)throw new Error("The number of viz sections (".concat(d.length,") mismatch with the length of the first ")+"dimension of the callbacks array (".concat(e.length,"). Please, be sure that the two elements ")+"have the same size.");d.forEach((function(t,n){var r,a=function(e){if(Array.isArray(e))return he(e)}(r=t.querySelectorAll("section"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(a.length!==e[n].length)throw new Error("The number of steps (".concat(a.length,") in the viz section #").concat(n+1," mismatch with the ")+"number of callbacks specified (".concat(e[n].length,') at the index "').concat(n,'". Please, be sure that the two ')+"elements have the same size.");o=o.concat(a.map((function(t,r){return new Ee(t,"".concat(n,"-").concat(r),e[n][r])}))),i=i.concat(i,t.querySelector(".viz > *"))}));var p=function(){var e=window.pageYOffset||document.documentElement.scrollTop;o.forEach((function(e){var a=e.el.getBoundingClientRect();r-a.top-n>0&&a.top+a.height-t>0?s.push(e):e.deactivate()}));var a=m.getBoundingClientRect().bottom<=0,i=l.classList.contains("visible");a&&!i?l.classList.add("visible"):!a&&i&&l.classList.remove("visible"),s.forEach((function(t,n){e>=c?n===s.length-1?t.activate("down"):t.deactivate():0===n?t.activate("up"):t.deactivate()})),f(),s=[],c=e},f=function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;u.style.width=e+"%"},v={initialize:function(){if(a)throw new Error("The scroller is already initialized.");return a=!0,window.addEventListener("scroll",p),window.addEventListener("resize",(function(){r=window.innerHeight,f()})),(window.pageYOffset||document.documentElement.scrollTop)>0&&p(),f(),v},offsetTop:function(e){if(void 0===e)return t;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return t=e,v},offsetBottom:function(e){if(void 0===e)return n;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return n=e,v}};return v})((t=e,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]).offsetTop(40).offsetBottom(0).initialize()}))}function Ie(e){return e.rendered&&(0,c.useEffect)((function(){Ne(e.contentData,e.paramsData)}),[]),t=A(e.contentData,e.paramsData),n={},Object.keys(t).map((function(e,r){var a=t[e];a.sectionType===h?n[e]=c.createElement(o,{key:a.key,sectionType:a.sectionType,optionData:a.optionData,amorce:(0,i.ZP)(a.amorce),background:a.background,classes:a.classes}):a.sectionType===E?n[e]=c.createElement(s,{key:a.key,id:a.key,sectionType:a.sectionType,texts:a.texts,background:a.background,classes:a.classes,visuelclasses:a.visuelclasses,visual:a.visual,filename:a.filename}):a.sectionType===y?n[e]=c.createElement(T,{key:a.key,id:a.key,sectionType:a.sectionType,background:a.background,classes:a.classes,visuelclasses:a.visuelclasses,visual:a.visual,mainTitle:a.texts.mainTitle,subTitle:a.texts.subTitle,filename:a.filename}):a.sectionType===b&&(n[e]=c.createElement(P,{key:a.key,listID:a.listID,steps:a.steps,classed:a.classed,mediaInfo:a.mediaInfo,background:a.background}))})),Object.values(n);var t,n}document.querySelector("#root").innerHTML=r.E,Promise.all([Promise.resolve().then(n.t.bind(n,20745,19)),Promise.resolve().then(n.t.bind(n,67294,19))]).then((function(e){var t=e[0],n=e[1];C.gyn(a.google_config.contentURL).then((function(e){C.gyn(a.google_config.paramsURL).then((function(r){t.createRoot(document.getElementById("root")).render(n.createElement(Ie,{contentData:e,paramsData:r,rendered:!0})),document.querySelector("#footerContainer").innerHTML=C.Ys("#footerContent").node().innerHTML}))}))}))},40207:e=>{e.exports={google_config:{contentURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=0&single=true&output=csv",paramsURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=409950237&single=true&output=csv",localContentURL:"./data/structure/contentData.csv",localParamsURL:"./data/structure/paramsData.csv"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[216],(()=>(t(28594),t(35666),t(40014)))),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVMyQixjQUFleUYsRUFBV3pGLGNBQWVOLE9BQVErRixFQUFXL0YsT0FBUW9FLFVBQVcyQixFQUFXdkcsTUFBTTRFLFVBQVdFLFNBQVV5QixFQUFXdkcsTUFBTThFLFNBQVVqRSxTQUFVMEYsRUFBVzFGLFdBRTdWMEYsRUFBV1osY0FBZ0I1QyxJQUMvQjZQLEVBQWFFLEdBQWUsZ0JBQUMxUCxFQUFELENBQVkxQyxJQUFLNkYsRUFBVzdGLElBQUsrQyxPQUFROEMsRUFBVzlDLE9BQVFKLE1BQU9rRCxFQUFXbEQsTUFBT0ssUUFBUzZDLEVBQVc3QyxRQUFTK0MsVUFBV0YsRUFBV0UsVUFBV2xILFdBQVlnSCxFQUFXaEgsaUJBR3ZNbUgsT0FBT0MsT0FBT2lNLEdBcEJsQixJQUFvQjFOLEVBRW5CME4sRUN0Qk5yRCxTQUFTbUIsY0FBYyxTQUFTcUMsVUFBYUMsRUFBQUEsRUFnRDNDbEQsUUFBUUMsSUFBSSxDQUFDLDZDQUE0QiwrQ0FDeEN6QixNQUFLLFNBQUEyRSxHQUNKLElBQU0vRSxFQUFXK0UsRUFBUyxHQUNwQkMsRUFBUUQsRUFBUyxHQUN2QjNMLEVBQUFBLElBQU82TCxFQUFjLGNBQWRBLFlBQTBCN0UsTUFBTSxTQUFBdEosR0FDckNzQyxFQUFBQSxJQUFPNkwsRUFBYyxjQUFkQSxXQUF5QjdFLE1BQU0sU0FBQXJKLEdBQ3ZCaUosRUFBU2tGLFdBQVc3RCxTQUFTOEQsZUFBZSxTQUNwRGpGLE9BQ0gsZ0JBQUNzRSxHQUFELENBQWlCMU4sWUFBYUEsRUFBYUMsV0FBWUEsRUFBWTBOLFVBQVUsS0FrQ3ZGcEQsU0FBU21CLGNBQWMsb0JBQW9CcUMsVUFBWXpMLEVBQUFBLEdBQUEsa0JBQTRCUSxPQUFPaUwsb0IsVUM3RjVGTyxFQUFPQyxRQUFVLENBQUNKLGNBUEksQ0FDbEIsV0FBYyxtS0FDZCxVQUFhLDJLQUNiLGdCQUFtQixtQ0FDbkIsZUFBa0Isc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvY29tcG9uZW50cy9JbnRyb1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dFNlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2NvbXBvbmVudHMvRFdDaGFydC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvY29tcG9uZW50cy9WaXpTZWN0aW9uLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9jb21wb25lbnRzL0Z1bGxQYWdlU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uLi9sZWRldm9pci1kYXRhdml6L3NyYy9tYXBzL2ludGVyYWN0aXZlLW1hcC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uLi9sZWRldm9pci1kYXRhdml6L3NyYy9ncmFwaHMvc3RhY2tlZEFyZWFDaGFydC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL2dhdWdlcy9HYXVnZXMuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9pbnRyb0JveC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL3Byb21wdGZpbGwvQ2hvaWNlLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9NdWx0aVNlbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL3Byb21wdGZpbGwvUHJpbnRQcm9tcHQuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL1JlcGFydGl0aW9uLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvUHJvbXB0Qm94LmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvbWFpbmZyYW1lLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2VuZ2luZS5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvdml6LmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9zY3JvbGxlci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL2luaXRTY3JvbGxlci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL1JlbmRlclN0cnVjdHVyZS5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvYXBwLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2RhdGEvZ29vZ2xlX2NvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnRyb1NlY3Rpb24ocHJvcHMpe1xuXG5cbiAgICBsZXQgaW50cm9TZWN0aW9uT2JqID0gKFxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9e2BpbnRyby1zZWN0aW9uICR7cHJvcHMuY2xhc3Nlc31gfT5cbiAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJvdmVyVGl0bGVcIj5cbiAgICAgICAgICAgICAge3Byb3BzLmFtb3JjZX1cbiAgICAgICAgICAgIDwvaDU+XG4gICAgICAgICAgICA8aDE+e3Byb3BzLm9wdGlvbkRhdGEudGl0bGV9PC9oMT5cbiAgICAgICAgICAgIDxhZGRyZXNzPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGF0ZVwiPjwvZGl2PlxuICAgICAgICAgICAgPC9hZGRyZXNzPlxuICAgICAgICA8L3NlY3Rpb24+XG4gICAgKTtcbiAgICBsZXQgY29udGFpbmVkT2JqID0gcHJvcHMuYmFja2dyb3VuZCA/XG4gICAgICAgIChcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6IGAke3Byb3BzLmJhY2tncm91bmR9YH19IGNsYXNzTmFtZT17XCJzZWN0aW9uQ29udGFpbmVyXCJ9PlxuICAgICAgICAgICAgICAgIHtpbnRyb1NlY3Rpb25PYmp9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgICAgICA6XG4gICAgICAgIChcbiAgICAgICAgICAgIGludHJvU2VjdGlvbk9ialxuICAgICAgICApXG5cbiAgICByZXR1cm4gKFxuICAgICAgICBjb250YWluZWRPYmpcbiAgICApXG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBUZXh0U2VjdGlvbihwcm9wcyl7XHJcblxyXG4gICAgbGV0IGlzUXVvdGUgPSBTdHJpbmcocHJvcHMuY2xhc3NlcykuaW5jbHVkZXMoJ2NpdGF0aW9uJyk7XHJcbiAgICBsZXQgcXVvdGVPYmo7XHJcbiAgICBpZihpc1F1b3RlKXtcclxuICAgICAgICBxdW90ZU9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDpTdHJpbmcocHJvcHMudGV4dHMpLnNwbGl0KCcvJylbMF0sXHJcbiAgICAgICAgICAgIGF1dGhvcjpTdHJpbmcocHJvcHMudGV4dHMpLnNwbGl0KCcvJylbMV1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0JpZ051bWJlciA9IFN0cmluZyhwcm9wcy5jbGFzc2VzKS5pbmNsdWRlcygnYmlnTnVtYmVyJyk7XHJcbiAgICBsZXQgYmlnTnVtYmVyT2JqO1xyXG4gICAgaWYoaXNCaWdOdW1iZXIpe1xyXG4gICAgICAgIGJpZ051bWJlck9iaiA9IHtcclxuICAgICAgICAgICAgbnVtYmVyOlN0cmluZyhwcm9wcy50ZXh0cykuc3BsaXQoJy8nKVswXSxcclxuICAgICAgICAgICAgdW5kZXJUZXh0OlN0cmluZyhwcm9wcy50ZXh0cykuc3BsaXQoJy8nKVsxXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlzVmlzdWFsID0gcHJvcHMudmlzdWFsO1xyXG4gICAgbGV0IHZpc3VhbE9iaiA9IChcclxuICAgICAgICAoaXNWaXN1YWwgIT09IFwiXCIpID8gXHJcbiAgICAgICAgICAgIHByb3BzLnZpc3VhbCA9PT0gXCJQaG90b1wiID8gXHJcbiAgICAgICAgICAgICAgICA8aW1nIFxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17YHBob3RvVGV4dFNlY3Rpb25fJHtwcm9wcy5pZH1gfVxyXG4gICAgICAgICAgICAgICAgICAgIGlkPXtgcGhvdG9UZXh0U2VjdGlvbl8ke3Byb3BzLmlkfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjPXtgYXNzZXRzL2ltZy82NzUvJHtwcm9wcy5maWxlbmFtZX1gfVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtc3Jjc2V0PXtgYXNzZXRzL2ltZy8yMDQ4LyR7cHJvcHMuZmlsZW5hbWV9IDIwNDh3LCBhc3NldHMvaW1nLzk5MC8ke3Byb3BzLmZpbGVuYW1lfSA5OTB3LCBhc3NldHMvaW1nLzY3NS8ke3Byb3BzLmZpbGVuYW1lfSA2NzV3LCBhc3NldHMvaW1nLzEzNTAvJHtwcm9wcy5maWxlbmFtZX0gMTM1MHcsIGFzc2V0cy9pbWcvMTAwLyR7cHJvcHMuZmlsZW5hbWV9IDEwMHcsIGFzc2V0cy9pbWcvNDk1LyR7cHJvcHMuZmlsZW5hbWV9IDQ5NXcsIGFzc2V0cy9pbWcvMTAyNC8ke3Byb3BzLmZpbGVuYW1lfSAxMDI0d2B9XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS1zaXplcz1cIihtYXgtd2lkdGg6IDEwMHB4KSAxMDBweCwgKG1heC13aWR0aDogNDk1cHgpIDQ5NXB4LCAobWF4LXdpZHRoOiA2NzVweCkgNjc1cHgsIChtYXgtd2lkdGg6IDk5MHB4KSA5OTBweCwgKG1heC13aWR0aDogIDEwMjRweCkgMTAyNHB4LCAobWF4LXdpZHRoOiAgMTM1MHB4KSAxMzUwcHgsIChtYXgtd2lkdGg6ICAyMDQ4cHgpIDIwNDhweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbGF6eSAke3Byb3BzLnZpc3VlbGNsYXNzZXN9YH1cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206ICcxcmVtJ319XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA6XHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIHByb3BzLnZpc3VhbCA9PT0gXCJWaWRlb1wiID8gXHJcbiAgICAgICAgICAgICAgICA8dmlkZW8gYXV0b1BsYXkgbG9vcCBtdXRlZCBwbGF5c0lubGluZSBjbGFzc05hbWU9e2B2aWRlbyAke3Byb3BzLnZpc3VlbGNsYXNzZXN9YH0gcHJlbG9hZD1cIm1ldGFkYXRhXCIga2V5PXtgdmlkZW9UZXh0U2VjdGlvbl8ke3Byb3BzLmlkfWB9IGlkPXtgdmlkZW9UZXh0U2VjdGlvbl8ke3Byb3BzLmlkfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzb3VyY2Ugc3JjPXtgYXNzZXRzL3ZpZGVvcy8ke3Byb3BzLmZpbGVuYW1lfWB9Lz5cclxuICAgICAgICAgICAgICAgICAgICBWaWTDqW8gbm9uIHN1cHBvcnTDqWUuIFLDqS1lc3NheWV6IHN1ciB1biBhdXRyZSBhcHBhcmVpbCBvdSBmdXJldGV1ci5cclxuICAgICAgICAgICAgICAgIDwvdmlkZW8+XHJcbiAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIDpcclxuICAgICAgICA8ZGl2PjwvZGl2PlxyXG4gICAgKVxyXG5cclxuICAgIGxldCB0ZXh0U2VjdGlvbk9iaiA9IChcclxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9e2B0ZXh0LXNlY3Rpb24gJHtwcm9wcy5jbGFzc2VzfWB9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaXNRdW90ZSA/IFxyXG4gICAgICAgICAgICA8YmxvY2txdW90ZSBjbGFzc05hbWU9XCJzbWFsbFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAgICAgIDxiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtwYXJzZShxdW90ZU9iai50ZXh0KX1cclxuICAgICAgICAgICAgICAgICAgICA8L2I+XHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJhdXRob3JcIj5cclxuICAgICAgICAgICAgICAgICAgICB7cXVvdGVPYmouYXV0aG9yfVxyXG4gICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzeW1ib2xcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Jsb2NrcXVvdGU+XHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgaXNCaWdOdW1iZXIgP1xyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyLW51bWJlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm51bWJlcnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMj57YmlnTnVtYmVyT2JqLm51bWJlcn08L2gyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNtYWxsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtiaWdOdW1iZXJPYmoudW5kZXJUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zbWFsbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWaXN1YWwgPyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXN1YWxPYmpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyhwcm9wcy50ZXh0cykuc3RhcnRzV2l0aCgnPCcpID8gIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2UocHJvcHMudGV4dHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57cGFyc2UocHJvcHMudGV4dHMpfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICApO1xyXG4gICAgbGV0IGNvbnRhaW5lZE9iaiA9IHByb3BzLmJhY2tncm91bmQgPyBcclxuICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBgJHtwcm9wcy5iYWNrZ3JvdW5kfWB9fSBjbGFzc05hbWU9e1wic2VjdGlvbkNvbnRhaW5lclwifT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RleHRTZWN0aW9uT2JqfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRTZWN0aW9uT2JqXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICBjb250YWluZWRPYmpcclxuICAgIClcclxufSIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERXQ2hhcnQoeyB0aXRsZSwgc3JjLCAuLi5wcm9wcyB9KSB7XHJcbiAgY29uc3QgaWZyYW1lUmVmID0gdXNlUmVmKClcclxuICBjb25zdCBbaGVpZ2h0LCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSg1MDApXHJcblxyXG4gIGNvbnN0IG9uTWVzc2FnZSA9IHVzZUNhbGxiYWNrKFxyXG4gICAgKHsgZGF0YSA9IHt9LCBzb3VyY2UgfSkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgc291cmNlICE9PSBpZnJhbWVSZWYuY3VycmVudC5jb250ZW50V2luZG93IHx8XHJcbiAgICAgICAgdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgIWRhdGFbJ2RhdGF3cmFwcGVyLWhlaWdodCddXHJcbiAgICAgIClcclxuICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgIC8vc2V0U3RhdGUoT2JqZWN0LnZhbHVlcyhkYXRhWydkYXRhd3JhcHBlci1oZWlnaHQnXSlbMF0pXHJcbiAgICB9LFxyXG4gICAgW3NldFN0YXRlLCBpZnJhbWVSZWZdXHJcbiAgKVxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpXHJcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpXHJcbiAgfSwgW2hlaWdodCwgc2V0U3RhdGUsIG9uTWVzc2FnZV0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8aWZyYW1lXHJcbiAgICAgIHJlZj17aWZyYW1lUmVmfVxyXG4gICAgICBzY3JvbGxpbmc9XCJub1wiXHJcbiAgICAgIGZyYW1lQm9yZGVyPVwiMFwiXHJcbiAgICAgIHdpZHRoPVwiMTAwJVwiXHJcbiAgICAgIHsuLi5wcm9wc31cclxuICAgICAgdGl0bGU9e3RpdGxlfVxyXG4gICAgICBzcmM9e3NyY31cclxuICAgICAgaGVpZ2h0PXtoZWlnaHR9XHJcbiAgICAvPlxyXG4gIClcclxufVxyXG5cclxuRFdDaGFydC5wcm9wVHlwZXMgPSB7XHJcbiAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICBzcmM6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICBsb2FkaW5nOiBQcm9wVHlwZXMub25lT2YoWydlYWdlcicsICdsYXp5J10pLFxyXG59IiwiZXhwb3J0IGNvbnN0IGNvbnRlbnRIZWFkZXJDb25zdGFudHMgPSB7XG4gICAgc2VjdGlvbjogXCJTZWN0aW9uXCIsXG4gICAgc2VjdGlvbklEOiBcIlNlY3Rpb25JRFwiLFxuICAgIGF0dHJpYnV0czogXCJBdHRyaWJ1dHNcIixcbiAgICBzb3Vzc2VjdGlvbjogXCJTdGVwXCIsXG4gICAgdGV4dGU6IFwiVEVYVEVcIixcbiAgICB2aXN1ZWw6IFwiVklTVUVMXCIsXG4gICAgbm9tZmljaGllcnNvdXJjZTogXCJOb21GaWNoaWVyU291cmNlXCIsXG4gICAgc3R5bGVmb25kOiBcIlN0eWxlRm9uZFwiLFxuICAgIHN0ZXBjbGFzc2VzOiBcIlN0ZXBDbGFzc2VzXCIsXG4gICAgdmlzdWVsY2xhc3NlczogXCJWaXN1ZWxDbGFzc2VzXCIsXG4gICAgbm90ZXM6IFwiTm90ZXNcIixcbiAgICBnYW1laWQ6IFwiR2FtZUlEXCJcbn07XG5cbmV4cG9ydCBjb25zdCBvcHRpb25zRHJvcGRvd25Db25zdGFudHMgPSB7XG4gICAgc2VjdGlvbnR5cGVzOiB7XG4gICAgICAgIGludHJvdGl0cmU6IFwiaW50cm8tdGl0cmVcIixcbiAgICAgICAgcGxlaW5lcGFnZXRpdHJlOiBcInBsZWluZS1wYWdlLXRpdHJlXCIsXG4gICAgICAgIHRleHRlY2xhc3NpcXVlOiBcInRleHRlLWNsYXNzaXF1ZVwiLFxuICAgICAgICB2aXpzZWN0aW9uOiBcInZpei1zZWN0aW9uXCJcbiAgICB9LFxuICAgIHNlY3Rpb25hdHRyaWJ1dGVzOntcbiAgICAgICAgcGxlaW5lcGFnZTogXCJwbGVpbmUtcGFnZVwiLFxuICAgICAgICBmb25kbm9pcjogXCJmb25kLW5vaXJcIixcbiAgICAgICAgY2VudHJlOiBcImNlbnRyw6lcIixcbiAgICAgICAgY290ZWNvdGU6IFwiY8O0dMOpLWPDtHTDqVwiXG4gICAgfSxcbiAgICB2aXN1ZWx0eXBlczp7XG4gICAgICAgIHBob3RvOiBcIlBob3RvXCIsXG4gICAgICAgIHZpZGVvOiBcIlZpZGVvXCIsXG4gICAgICAgIGF1ZGlvOiBcIkF1ZGlvXCIsXG4gICAgICAgIHZpc3VhbGlzYXRpb246IFwiVmlzdWFsaXNhdGlvblwiLFxuICAgICAgICBpZnJhbWU6IFwiaWZyYW1lXCJcbiAgICB9LFxuICAgIHNvdXNzZWN0aW9udHlwZXM6e1xuICAgICAgICBzY3JvbGxub3JtYWw6IFwic2Nyb2xsLW5vcm1hbFwiLFxuICAgICAgICBzY3JvbGxpbnZpc2libGU6IFwic2Nyb2xsLWludmlzaWJsZVwiLFxuICAgICAgICBzY3JvbGxsb25nOiBcInNjcm9sbC1sb25nXCJcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cyA9IHtcbiAgICB0aXRyZTogXCJUaXRyZVwiLFxuICAgIGF1dGV1cnM6IFwiQXV0ZXVyc1wiLFxuICAgIGRhdGU6IFwiRGF0ZVwiLFxuICAgIGRhdGU6IFwiRGF0ZVwiLFxuICAgIHVybHM6IFwiTGllbkF1dGV1cnNcIixcbiAgICBsaWVuZmljaGllcnNvdXJjZTogXCJMaWVuRmljaGllclNvdXJjZVwiXG59O1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgcGFyc2UgZnJvbSBcImh0bWwtcmVhY3QtcGFyc2VyXCI7XG5pbXBvcnQgRFdDaGFydCBmcm9tIFwiLi9EV0NoYXJ0XCI7XG5pbXBvcnQgeyBvcHRpb25zRHJvcGRvd25Db25zdGFudHMgfSBmcm9tIFwiLi4vZ2VuZXJhdG9yL2NvbnN0YW50c1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gVml6U2VjdGlvbihwcm9wcyl7XG5cbiAgICBsZXQgdml6U2VjdGlvbk9iaiA9IChcbiAgICAgICAgPHNlY3Rpb24gaWQ9e3Byb3BzLmxpc3RJRH0gY2xhc3NOYW1lPXtwcm9wcy5jbGFzc2VkfT5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BzdGVwcyAke2dldFN0ZXBDb21tb25DbGFzcyhwcm9wcy5zdGVwcyl9YH0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzLnN0ZXBzLm1hcCgoc3RlcCxpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc3RlcCBpcyAnLCBzdGVwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc1F1b3RlID0gU3RyaW5nKHN0ZXAuc3RlcGNsYXNzZXMpLmluY2x1ZGVzKCdjaXRhdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHF1b3RlT2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNRdW90ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVPYmogPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6U3RyaW5nKHN0ZXAudGV4dCkuc3BsaXQoJy8nKVswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yOlN0cmluZyhzdGVwLnRleHQpLnNwbGl0KCcvJylbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBrZXk9e2luZGV4fSBjbGFzc05hbWU9e3N0ZXAuc3RlcGNsYXNzZXN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1F1b3RlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxibG9ja3F1b3RlIGNsYXNzTmFtZT1cInNtYWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwYXJzZShxdW90ZU9iai50ZXh0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9iPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJhdXRob3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3F1b3RlT2JqLmF1dGhvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzeW1ib2xcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYmxvY2txdW90ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyhzdGVwLnRleHQpLnN0YXJ0c1dpdGgoJzwnKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2Uoc3RlcC50ZXh0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3N0ZXAudGV4dCA/IHBhcnNlKHN0ZXAudGV4dCkgOiBcIlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidml6XCIgaWQ9XCJ2aXpcIj5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzLnN0ZXBzLm1hcCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0ZXAudmlzdWFsID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMudmlzdWVsdHlwZXMucGhvdG8pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e2Bhc3NldHMvaW1nLzY3NS8ke3N0ZXAuZmlsZW5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtc3Jjc2V0PXtgYXNzZXRzL2ltZy8yMDQ4LyR7c3RlcC5maWxlbmFtZX0gMjA0OHcsIGFzc2V0cy9pbWcvOTkwLyR7c3RlcC5maWxlbmFtZX0gOTkwdywgYXNzZXRzL2ltZy82NzUvJHtzdGVwLmZpbGVuYW1lfSA2NzV3LCBhc3NldHMvaW1nLzEzNTAvJHtzdGVwLmZpbGVuYW1lfSAxMzUwdywgYXNzZXRzL2ltZy8xMDAvJHtzdGVwLmZpbGVuYW1lfSAxMDB3LCBhc3NldHMvaW1nLzQ5NS8ke3N0ZXAuZmlsZW5hbWV9IDQ5NXcsIGFzc2V0cy9pbWcvMTAyNC8ke3N0ZXAuZmlsZW5hbWV9IDEwMjR3YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtc2l6ZXM9XCIobWF4LXdpZHRoOiAxMDBweCkgMTAwcHgsIChtYXgtd2lkdGg6IDQ5NXB4KSA0OTVweCwgKG1heC13aWR0aDogNjc1cHgpIDY3NXB4LCAobWF4LXdpZHRoOiA5OTBweCkgOTkwcHgsIChtYXgtd2lkdGg6ICAxMDI0cHgpIDEwMjRweCwgKG1heC13aWR0aDogIDEzNTBweCkgMTM1MHB4LCAobWF4LXdpZHRoOiAgMjA0OHB4KSAyMDQ4cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbGF6eSAke3N0ZXAudmlzdWVsY2xhc3Nlc31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoc3RlcC52aXN1YWwgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy52aXN1ZWx0eXBlcy52aWRlbyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHZpZGVvIGF1dG9QbGF5IGxvb3AgbXV0ZWQgcGxheXNJbmxpbmUgY2xhc3NOYW1lPXtgdmlkZW8gJHtzdGVwLnZpc3VlbGNsYXNzZXN9YH0gcHJlbG9hZD1cIm1ldGFkYXRhXCIga2V5PXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH0gaWQ9e2Ake3Byb3BzLmxpc3RJRH1fJHtpbmRleH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzb3VyY2Ugc3JjPXtgYXNzZXRzL3ZpZGVvcy8ke3N0ZXAuZmlsZW5hbWV9YH0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlkw6lvIG5vbiBzdXBwb3J0w6llLiBSw6ktZXNzYXlleiBzdXIgdW4gYXV0cmUgYXBwYXJlaWwgb3UgZnVyZXRldXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdmlkZW8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHN0ZXAudmlzdWFsID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMudmlzdWVsdHlwZXMuaWZyYW1lKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9IGlkPXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH0gY2xhc3NOYW1lPVwiaWZyYW1lQ29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RFdDaGFydCB0aXRsZT1cIk1lc3VyZXMgZCdhcnNlbmljXCIgc3JjPXtgJHtzdGVwLmZpbGVuYW1lfWB9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihzdGVwLnZpc3VhbCA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnZpc3VlbHR5cGVzLnZpc3VhbGlzYXRpb24pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH0gaWQ9e2Ake3Byb3BzLmxpc3RJRH1fJHtpbmRleH1gfSBjbGFzc05hbWU9e2BpZnJhbWVDb250YWluZXIgJHtzdGVwLnZpc3VlbGNsYXNzZXN9YH0+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICApO1xuICAgIGxldCBjb250YWluZWRPYmogPSBwcm9wcy5iYWNrZ3JvdW5kID9cbiAgICAgICAgKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogYCR7cHJvcHMuYmFja2dyb3VuZH1gfX0gY2xhc3NOYW1lPXtcInNlY3Rpb25Db250YWluZXJcIn0+XG4gICAgICAgICAgICAgICAge3ZpelNlY3Rpb25PYmp9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgICAgICA6XG4gICAgICAgIChcbiAgICAgICAgICAgIHZpelNlY3Rpb25PYmpcbiAgICAgICAgKVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgY29udGFpbmVkT2JqXG4gICAgKVxufVxuXG5mdW5jdGlvbiBnZXRTdGVwQ29tbW9uQ2xhc3Moc3RlcHMpe1xuICAgIGxldCBjdXJTdGVwQ2xhc3NlcyA9IHN0ZXBzLm1hcCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHN0ZXAuc3RlcGNsYXNzZXM7XG4gICAgfSk7XG4gICAgbGV0IGN1ckNvbW1vbkNsYXNzID0gbmV3IEFycmF5KGN1clN0ZXBDbGFzc2VzLmxlbmd0aCk7XG4gICAgY3VyU3RlcENsYXNzZXMuZm9yRWFjaCgoc3RlcEVsZW0sIGlkeCkgPT4ge1xuICAgICAgICBpZihBcnJheS5pc0FycmF5KHN0ZXBFbGVtKSl7XG4gICAgICAgICAgICBzdGVwRWxlbS5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgICAgIGZvciggbGV0IGkgPSBpZHg7IGkgPCBjdXJTdGVwQ2xhc3Nlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGN1clN0ZXBDbGFzc2VzW2ldLmluY2x1ZGVzKGVsZW0pKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvbW1vbkNsYXNzW2ldID0gKGVsZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Yoc3RlcEVsZW0pID09PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgIGZvciggbGV0IGkgPSBpZHg7IGkgPCBjdXJTdGVwQ2xhc3Nlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoY3VyU3RlcENsYXNzZXNbaV0uaW5jbHVkZXMoc3RlcEVsZW0pKXtcbiAgICAgICAgICAgICAgICAgICAgY3VyQ29tbW9uQ2xhc3NbaV0gPSAoc3RlcEVsZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjdXJDb21tb25DbGFzcy5yZWR1Y2UoZnVuY3Rpb24oYSwgYil7IHJldHVybiAoYSA9PT0gYiAmJiBhICE9PSBcIlwiICYmIGIgIT09IFwiXCIpID8gYSA6IFwiXCI7IH0pO1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEZ1bGxQYWdlU2VjdGlvbihwcm9wcyl7XHJcblxyXG4gICAgbGV0IGZ1bGxwYWdlU2VjdGlvbk9iaiA9IChcclxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9e2BmdWxsLXBhZ2Utc2VjdGlvbiAke3Byb3BzLmNsYXNzZXN9YH0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGl0bGVJbWFnZVwiPlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLmZpbGVuYW1lID8gXHJcbiAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy52aXN1YWwgPT09IFwiUGhvdG9cIiA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtwcm9wcy5pZH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgJHtwcm9wcy5pZH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17YGFzc2V0cy9pbWcvNjc1LyR7cHJvcHMuZmlsZW5hbWV9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXNyY3NldD17YGFzc2V0cy9pbWcvMjA0OC8ke3Byb3BzLmZpbGVuYW1lfSAyMDQ4dywgYXNzZXRzL2ltZy85OTAvJHtwcm9wcy5maWxlbmFtZX0gOTkwdywgYXNzZXRzL2ltZy82NzUvJHtwcm9wcy5maWxlbmFtZX0gNjc1dywgYXNzZXRzL2ltZy8xMzUwLyR7cHJvcHMuZmlsZW5hbWV9IDEzNTB3LCBhc3NldHMvaW1nLzEwMC8ke3Byb3BzLmZpbGVuYW1lfSAxMDB3LCBhc3NldHMvaW1nLzQ5NS8ke3Byb3BzLmZpbGVuYW1lfSA0OTV3LCBhc3NldHMvaW1nLzEwMjQvJHtwcm9wcy5maWxlbmFtZX0gMTAyNHdgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtc2l6ZXM9XCIobWF4LXdpZHRoOiAxMDBweCkgMTAwcHgsIChtYXgtd2lkdGg6IDQ5NXB4KSA0OTVweCwgKG1heC13aWR0aDogNjc1cHgpIDY3NXB4LCAobWF4LXdpZHRoOiA5OTBweCkgOTkwcHgsIChtYXgtd2lkdGg6ICAxMDI0cHgpIDEwMjRweCwgKG1heC13aWR0aDogIDEzNTBweCkgMTM1MHB4LCAobWF4LXdpZHRoOiAgMjA0OHB4KSAyMDQ4cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGxhenkgJHtwcm9wcy52aXN1ZWxjbGFzc2VzfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMudmlzdWFsID09PSBcIlZpZGVvXCIgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx2aWRlbyBhdXRvUGxheSBsb29wIG11dGVkIHBsYXlzSW5saW5lIGNsYXNzTmFtZT17YHZpZGVvICR7cHJvcHMudmlzdWVsY2xhc3Nlc31gfSBwcmVsb2FkPVwibWV0YWRhdGFcIiBrZXk9e2Ake3Byb3BzLmlkfWB9IGlkPXtgJHtwcm9wcy5pZH1gfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNvdXJjZSBzcmM9e2Bhc3NldHMvdmlkZW9zLyR7cHJvcHMuZmlsZW5hbWV9YH0vPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWTDqW8gbm9uIHN1cHBvcnTDqWUuIFLDqS1lc3NheWV6IHN1ciB1biBhdXRyZSBhcHBhcmVpbCBvdSBmdXJldGV1ci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3ZpZGVvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxkaXY+PC9kaXY+KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAoPGRpdj48L2Rpdj4pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuZmlsZW5hbWUgPyBcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbHRlclwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FwdGlvbmhvbGRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT17YGNhcHRpb24gJHtwcm9wcy5tYWluVGl0bGUuY2xhc3N9YH0+e3Byb3BzLm1haW5UaXRsZS50ZXh0fTwvaDI+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuc3ViVGl0bGUgPyBcclxuICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9e2BjYXB0aW9uICR7cHJvcHMuc3ViVGl0bGUuY2xhc3N9YH0+e3Byb3BzLnN1YlRpdGxlLnRleHR9PC9oMz5cclxuICAgICAgICAgICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgKTtcclxuICAgIGxldCBjb250YWluZWRPYmogPSBwcm9wcy5iYWNrZ3JvdW5kID8gXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBgJHtwcm9wcy5iYWNrZ3JvdW5kfWB9fSBjbGFzc05hbWU9e1wic2VjdGlvbkNvbnRhaW5lclwifT5cclxuICAgICAgICAgICAgICAgIHtmdWxscGFnZVNlY3Rpb25PYmp9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIClcclxuICAgICAgICA6XHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICBmdWxscGFnZVNlY3Rpb25PYmpcclxuICAgICAgICApXHJcblxyXG4gICAgcmV0dXJuIGNvbnRhaW5lZE9iajtcclxuXHJcbn0iLCJcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IHsgY29udGVudEhlYWRlckNvbnN0YW50cywgb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLCBwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJ1Y3R1cmUoY29udGVudERhdGEsIHBhcmFtc0RhdGEpe1xuXG4gICAgbGV0IHN0cnVjdHVyZURhdGEgPSB7fTsgLy8gV2hvbGUgc2Nyb2xseSBzdHJ1Y3R1cmVcbiAgICBsZXQgdml6U2VjdGlvbklEcyA9IFtdOyAvLyBMaXN0IG9mIHNlY3Rpb25JRHNcblxuICAgIGxldCBvcHRpb25zID0gZ2V0T3B0aW9ucyhwYXJhbXNEYXRhKTtcblxuICAgIGNvbnNvbGUubG9nKCdjb250ZW50IERhdGEnLCBjb250ZW50RGF0YSk7XG4gICAgY29udGVudERhdGEubWFwKChyb3dEYXRhLGluZGV4KSA9PiB7XG5cbiAgICAgICAgaWYocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25dID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLmludHJvdGl0cmUpe1xuICAgICAgICAgICAgbGV0IGNsYXNzZXMgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3RlcGNsYXNzZXNdO1xuICAgICAgICAgICAgbGV0IGN1ckFtb3JjZSA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV07XG4gICAgICAgICAgICBsZXQgc2VjdGlvbkJhY2tncm91bmQgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXTtcbiAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0ge1xuICAgICAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICAgICAgc2VjdGlvblR5cGU6IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMuaW50cm90aXRyZSxcbiAgICAgICAgICAgICAgICBvcHRpb25EYXRhOiBvcHRpb25zLFxuICAgICAgICAgICAgICAgIGFtb3JjZTogY3VyQW1vcmNlLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHNlY3Rpb25CYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgIGNsYXNzZXM6IHBhcnNlQ2xhc3NlcyhjbGFzc2VzKSxcbiAgICAgICAgICAgICAgICBnYW1laWQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5nYW1laWRdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25dID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnRleHRlY2xhc3NpcXVlKXtcbiAgICAgICAgICAgIGxldCB0ZXh0cyA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV07XG4gICAgICAgICAgICBsZXQgY2xhc3NlcyA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc107XG4gICAgICAgICAgICBsZXQgc2VjdGlvbkJhY2tncm91bmQgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXTtcbiAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0ge1xuICAgICAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICAgICAgc2VjdGlvblR5cGU6IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudGV4dGVjbGFzc2lxdWUsXG4gICAgICAgICAgICAgICAgdGV4dHM6IHRleHRzLFxuICAgICAgICAgICAgICAgIHZpc3VhbDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbF0sXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5ub21maWNoaWVyc291cmNlXSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBzZWN0aW9uQmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiBwYXJzZUNsYXNzZXMoY2xhc3NlcyksXG4gICAgICAgICAgICAgICAgdmlzdWVsY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxjbGFzc2VzXSksXG4gICAgICAgICAgICAgICAgZ2FtZWlkOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuZ2FtZWlkXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uXSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5wbGVpbmVwYWdldGl0cmUpe1xuICAgICAgICAgICAgbGV0IHRpdGxlT2JqID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXTtcbiAgICAgICAgICAgIGlmIChpc0pzb24ocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXSkpe1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0T2JqID0gSlNPTi5wYXJzZShyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdKTtcbiAgICAgICAgICAgICAgICB0aXRsZU9iaiA9IHRleHRPYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJ1Y3R1cmVEYXRhW3Jvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdXSA9IHtcbiAgICAgICAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgICAgICAgIHNlY3Rpb25UeXBlOiBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnBsZWluZXBhZ2V0aXRyZSxcbiAgICAgICAgICAgICAgICB0ZXh0czogaXNKc29uKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV0pID8gdGl0bGVPYmpcbiAgICAgICAgICAgICAgICA6e1xuICAgICAgICAgICAgICAgICAgICBtYWluVGl0bGU6e2NsYXNzOiBcIlwiLCB0ZXh0OiB0aXRsZU9ian0sXG4gICAgICAgICAgICAgICAgICAgIHN1YlRpdGxlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2aXN1YWw6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxdLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMubm9tZmljaGllcnNvdXJjZV0sXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0eWxlZm9uZF0sXG4gICAgICAgICAgICAgICAgY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIHZpc3VlbGNsYXNzZXM6IHBhcnNlQ2xhc3Nlcyhyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIGdhbWVpZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmdhbWVpZF1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbl0gPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudml6c2VjdGlvbil7XG5cbiAgICAgICAgICAgIGxldCBjdXJEYXRhID0ge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0czogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmF0dHJpYnV0c10sXG4gICAgICAgICAgICAgICAgc2Nyb2xsVHlwZTogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNvdXNzZWN0aW9uXSxcbiAgICAgICAgICAgICAgICB0ZXh0OiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdLFxuICAgICAgICAgICAgICAgIHZpc3VhbDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbF0sXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5ub21maWNoaWVyc291cmNlXSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXSxcbiAgICAgICAgICAgICAgICB2aXN1ZWxjbGFzc2VzOiBwYXJzZUNsYXNzZXMocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbGNsYXNzZXNdKSxcbiAgICAgICAgICAgICAgICBzdGVwY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIGdhbWVpZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmdhbWVpZF1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZihzdHJ1Y3R1cmVEYXRhLmhhc093blByb3BlcnR5KHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdKSl7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHN0ZXAgdG8gZXhpc3RpbmdcbiAgICAgICAgICAgICAgICBsZXQgY3VyVml6U2VjdGlvbiA9IHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dO1xuICAgICAgICAgICAgICAgIGN1clZpelNlY3Rpb24ucHVzaChjdXJEYXRhKTtcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVEYXRhW3Jvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdXSA9IGN1clZpelNlY3Rpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0gW2N1ckRhdGFdO1xuICAgICAgICAgICAgICAgIHZpelNlY3Rpb25JRHMucHVzaChyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2aXpTZWN0aW9uSURzLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgIGxldCBjdXJTZWN0aW9uID0gc3RydWN0dXJlRGF0YVtrZXldO1xuICAgICAgICBsZXQgc2VjdGlvbkF0dHIgPSBjdXJTZWN0aW9uWzBdLmF0dHJpYnV0cyA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb25hdHRyaWJ1dGVzLmNlbnRyZSA/IFwiIGZ1bGwtcGFnZVwiIDogXCJcIjtcbiAgICAgICAgbGV0IHNlY3Rpb25CYWNrZ3JvdW5kID0gY3VyU2VjdGlvblswXS5iYWNrZ3JvdW5kO1xuICAgICAgICBzdHJ1Y3R1cmVEYXRhW2tleV0gPSB7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIHNlY3Rpb25UeXBlOiBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnZpenNlY3Rpb24sXG4gICAgICAgICAgICBsaXN0SUQ6IGtleSxcbiAgICAgICAgICAgIHN0ZXBzOiBjdXJTZWN0aW9uLFxuICAgICAgICAgICAgY2xhc3NlZDogYHZpei1zZWN0aW9uJHtzZWN0aW9uQXR0cn1gLFxuICAgICAgICAgICAgbWVkaWFJbmZvOiAwLFxuICAgICAgICAgICAgYmFja2dyb3VuZDogc2VjdGlvbkJhY2tncm91bmRcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHN0cnVjdHVyZURhdGEpO1xufVxuXG4vKipcbiAqIFRha2UgYXJ0aWNsZSBzdHJ1Y3R1cmUgYXMgQ1NWIGFuZCB0cmFuc2Zvcm0gaXQgYXMgY2FsbGJhY2tBcnJheVxuICogQHBhcmFtICB7T2JqZWN0fSBjb250ZW50RGF0YSBhcnRpY2xlIHN0cnVjdHVyZVxuICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zIGFydGljbGUgb3B0aW9uc1xuICogQHJldHVybiB7QXJyYXl9IFNjcm9sbGVyIGNhbGxiYWNrIGFycmF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUNhbGxiYWNrcyhjb250ZW50RGF0YSwgcGFyYW1zRGF0YSl7XG5cbiAgICBsZXQgZnVsbFN0cnVjdHVyZSA9IGdldFN0cnVjdHVyZShjb250ZW50RGF0YSwgcGFyYW1zRGF0YSk7XG4gICAgbGV0IGNhbGxiYWNrc0FycmF5ID0gW107XG4gICAgZnVsbFN0cnVjdHVyZS5tYXAoY2FsbGJhY2sgPT4ge1xuICAgICAgICBpZihjYWxsYmFjay5zZWN0aW9uVHlwZSA9PT0gXCJ2aXotc2VjdGlvblwiKXtcbiAgICAgICAgICAgIGxldCBjdXJTdGVwcyA9IFtdO1xuICAgICAgICAgICAgY2FsbGJhY2suc3RlcHMubWFwKChzdGVwLGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGN1ckNvbW1hbmQgPSAoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcikgPyAoKCk9Pnt9KSA6IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYoc3RlcC52aXN1YWwgIT09IFwiXCIpe1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyTnVtYmVyQXJyYXkgPSBBcnJheShjYWxsYmFjay5zdGVwcy5sZW5ndGgpLmZpbGwobnVsbCkubWFwKChfLCBpKSA9PiBpKS5maWx0ZXIoZCA9PiBkICE9PSBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvcGFjaXR5U2VsZWN0b3IgPSBjdXJOdW1iZXJBcnJheS5tYXAoaW5kID0+IGAjJHtjYWxsYmFjay5rZXl9XyR7aW5kfWApLmpvaW4oJywnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChgIyR7Y2FsbGJhY2sua2V5fV8ke2luZGV4fWApLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3BhY2l0eVNlbGVjdG9yICE9PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKGAke29wYWNpdHlTZWxlY3Rvcn1gKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gYGQzLnNlbGVjdCgnIyR7Y2FsbGJhY2sua2V5fV8ke2luZGV4fScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7JHtvcGFjaXR5U2VsZWN0b3IgIT09IFwiXCIgPyBgZDMuc2VsZWN0QWxsKCcke29wYWNpdHlTZWxlY3Rvcn0nKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7YCA6IFwiXCJ9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKFN0cmluZyhzdGVwLmZpbGVuYW1lKS5zdGFydHNXaXRoKFwiVEFHSURcIikpe1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyVGFnSUQgPSBTdHJpbmcoc3RlcC5maWxlbmFtZSkuc3BsaXQoJz0nKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clRhZ0lEX2luZGV4ID0gcGFyc2VJbnQoY3VyVGFnSUQuc3BsaXQoXCJfXCIpWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ck51bWJlckFycmF5ID0gQXJyYXkoY2FsbGJhY2suc3RlcHMubGVuZ3RoKS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gaSkuZmlsdGVyKGQgPT4gZCAhPT0gY3VyVGFnSURfaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3BhY2l0eVNlbGVjdG9yID0gY3VyTnVtYmVyQXJyYXkubWFwKGluZCA9PiBgIyR7Y2FsbGJhY2sua2V5fV8ke2luZH1gKS5qb2luKCcsJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmKEVOVl9DT05GSUcuZG93bmxvYWRTdHJ1YyAmJiBFTlZfQ09ORklHLmF1dG9yZW5kZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ29tbWFuZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KGAjJHtjdXJUYWdJRH1gKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAxKS5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcGFjaXR5U2VsZWN0b3IgIT09IFwiXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKGAke29wYWNpdHlTZWxlY3Rvcn1gKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gYGQzLnNlbGVjdCgnIyR7Y3VyVGFnSUR9JykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTske29wYWNpdHlTZWxlY3RvciAhPT0gXCJcIiA/IGBkMy5zZWxlY3RBbGwoJyR7b3BhY2l0eVNlbGVjdG9yfScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDApLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtgIDogXCJcIn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgICAgICAgICAgICAgICAgY3VyU3RlcHMucHVzaChjdXJDb21tYW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY3VyU3RlcHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAoKSA9PiB7JHtjdXJDb21tYW5kfX1gXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhbGxiYWNrc0FycmF5LnB1c2goY3VyU3RlcHMpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnR09UIENBTExCQUNLUyBBUlJBWTogJywgY2FsbGJhY2tzQXJyYXkpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2tzQXJyYXk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTYXZpbmcgY2FsbGJhY2tzIHRvIGZpbGUuLi4nKTtcbiAgICAgICAgY29uc3QgdGV4dCA9IGBpbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XFxuZXhwb3J0IGNvbnN0IGNhbGxiYWNrcyA9ICR7SlNPTi5zdHJpbmdpZnkoY2FsbGJhY2tzQXJyYXksIG51bGwsIDIpfWA7XG4gICAgICAgIGxldCBibG9iID0gbmV3IEJsb2IoW3RleHQucmVwbGFjZUFsbCgnXCInLCAnJyldLCB7dHlwZTogXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLThcIn0pO1xuICAgICAgICBzYXZlQXMoYmxvYiwgXCJjYWxsYmFja3MuanNcIik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxufVxuXG5mdW5jdGlvbiBpc0pzb24oc3RyKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgSlNPTi5wYXJzZShzdHIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDbGFzc2VzKHN0cil7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oc3RyLnNwbGl0KCc7JykpLmpvaW4oJyAnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9wdGlvbnMocGFyYW1zRGF0YSl7XG5cbiAgcmV0dXJuIHtcbiAgICB0aXRsZTogcGFyYW1zRGF0YVswXVtwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzLnRpdHJlXSxcbiAgICBhdXRob3JzOiBwYXJhbXNEYXRhWzBdW3BhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMuYXV0ZXVyc10sXG4gICAgdXJsczogcGFyYW1zRGF0YVswXVtwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzLnVybHNdLFxuICAgIGRhdGU6IHBhcmFtc0RhdGFbMF1bcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cy5kYXRlXVxuICB9O1xufVxuIiwiaW1wb3J0IHsgY29uc3RhbnQgfSBmcm9tIFwibG9kYXNoXCI7XHJcbmltcG9ydCBtYXBib3hnbCBmcm9tIFwibWFwYm94LWdsXCI7XHJcbmltcG9ydCAqIGFzIHNjcmVlbiBmcm9tIFwiLi9zY3JlZW4uanNcIjtcclxuXHJcbmNvbnN0IGNvbnN0YW50cyA9IHtcclxuICB0b2tlbjpcclxuICAgIFwicGsuZXlKMUlqb2liR1ZrWlhadmFYSWlMQ0poSWpvaVkycDJiVzgxZEhVMk1XVjFjVFJoY1hJemFYWnFNR1l4Y2lKOS5XcklGOG82OWFSX1RzdERGdTZReWFnXCIsXHJcbiAgbWFwQm91bmRzOiB7XHJcbiAgICBtYXg6IFstMTY1LCAzMC43MjgzMzAsIC0yNS4yMzYzNiwgODIuMjI5NDM0XSxcclxuICB9LFxyXG4gIGNvbG9yczogW1xyXG4gICAgXCIjRjRDQkM2XCIsXHJcbiAgICBcIiNGNEEzOUFcIixcclxuICAgIFwiI0VFNkE1RVwiLFxyXG4gICAgXCIjQ0UzNzI3XCIsXHJcbiAgICBcIiNBMjI4MjNcIixcclxuICAgIFwiIzc1MUExQVwiLFxyXG4gICAgXCIjNDEwMDAwXCIsXHJcbiAgXSxcclxuICBjbHVzdGVyTWF4Wm9vbTogMTEsXHJcbiAgY2x1c3RlclJhZGl1czogMzAsXHJcbiAgY2x1c3Rlck1pblBvaW50czogNVxyXG59O1xyXG5cclxubWFwYm94Z2wuYWNjZXNzVG9rZW4gPSBjb25zdGFudHMudG9rZW47XHJcblxyXG5leHBvcnQgY2xhc3MgTWFwIHtcclxuICBjb25zdHJ1Y3RvcihkaXYsIGNsYXNzTmFtZSwgZGF0YVNvdXJjZUFycmF5LCBzdHlsZVVybCwgaW5pdENvb3JkcywgZGlzYWJsZUNvbnRyb2xzPXRydWUsIHdpdGhIYW5kbGVycz1mYWxzZSwgbWF4Qm91bmRzID0gbnVsbCkge1xyXG5cclxuICAgIHRoaXMuZGF0YVNvdXJjZU9iamVjdHMgPSBkYXRhU291cmNlQXJyYXk7XHJcbiAgICB0aGlzLmNvbnN0YW50cyA9IGNvbnN0YW50cztcclxuICAgIHRoaXMubWFwID0gbmV3IG1hcGJveGdsLk1hcCh7XHJcbiAgICAgIGNvbnRhaW5lcjogY2xhc3NOYW1lLFxyXG4gICAgICBzdHlsZTogc3R5bGVVcmwsXHJcbiAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogdHJ1ZSxcclxuICAgICAgY2VudGVyOiBpbml0Q29vcmRzLmNlbnRlcixcclxuICAgICAgem9vbTogaW5pdENvb3Jkcy56b29tXHJcbiAgICB9KTtcclxuICAgIHRoaXMubWF4Qm91bmRzID0gaW5pdENvb3JkcztcclxuICAgIHRoaXMuYm91bmRzTGlzdCA9IHRoaXMuZGF0YVNvdXJjZU9iamVjdHMubWFwKGRhdGFTb3VyY2UgPT4gZGF0YVNvdXJjZVsnY29vcmRzJ10pO1xyXG4gICAgdGhpcy5leHRyYUJvdW5kcyA9IHRoaXMuZGF0YVNvdXJjZU9iamVjdHMubWFwKGRhdGFTb3VyY2UgPT4gZGF0YVNvdXJjZVsnZXh0cmFDb29yZHMnXSk7XHJcbiAgICBpZihkaXNhYmxlQ29udHJvbHMpe1xyXG4gICAgICB0aGlzLm1hcC5zY3JvbGxab29tLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5tYXAuZHJhZ1Bhbi5kaXNhYmxlKCk7XHJcbiAgICAgIHRoaXMubWFwLmRyYWdSb3RhdGUuZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLm1hcC5ib3hab29tLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5tYXAuZG91YmxlQ2xpY2tab29tLmRpc2FibGUoKTtcclxuICAgIH1cclxuICAgIGlmKHdpdGhIYW5kbGVycyl7XHJcbiAgICAgIHRoaXMuc2V0dXBIYW5kbGVycygpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5kYXRhTGlzdCA9IHRoaXMuZGF0YVNvdXJjZU9iamVjdHMubWFwKGRhdGFTb3VyY2UgPT4gZGF0YVNvdXJjZVsnZGF0YSddKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUJvdW5kcyhcclxuICAgIGJvdW5kcyA9IHRoaXMubWF4Qm91bmRzLFxyXG4gICAgcGFkZGluZyA9IHNjcmVlbi5pc1hTKCkgPyA1IDogc2NyZWVuLmlzU20oKSA/IDE1IDogMjAsXHJcbiAgICBkdXJhdGlvbiA9IDEwMFxyXG4gICkge1xyXG4gICAgdGhpcy5tYXAgPSB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7XHJcbiAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcclxuICAgICAgcGFkZGluZzogcGFkZGluZyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQ29vcmRzQW5kWm9vbShkYXRhUGFpcil7XHJcbiAgICB0aGlzLm1hcC5mbHlUbyh7XHJcbiAgICAgIGNlbnRlcjogZGF0YVBhaXIuY2VudGVyLFxyXG4gICAgICB6b29tOiBkYXRhUGFpci56b29tLFxyXG4gICAgICBzcGVlZDogMC43LFxyXG4gICAgICBjdXJ2ZTogMSxcclxuICAgICAgZWFzaW5nKHQpe1xyXG4gICAgICAgIHJldHVybiB0XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICB2aWV3Qm91bmRPYmoob2JqaW5kZXgpe1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKHRoaXMuYm91bmRzTGlzdFtvYmppbmRleF0pO1xyXG4gIH1cclxuXHJcbiAgdmlld0V4dHJhQm91bmRPYmoob2JqaW5kZXgsIGtleU5hbWUsIGR1cmF0aW9uKXtcclxuICAgIGxldCBleHRyYUJvdW5kcyA9IHRoaXMuZXh0cmFCb3VuZHNbb2JqaW5kZXhdO1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKGV4dHJhQm91bmRzW2tleU5hbWVdKTtcclxuICB9XHJcblxyXG4gIHZpZXdJbml0Qm91bmRzKGR1cmF0aW9uKXtcclxuICAgIHRoaXMudXBkYXRlQ29vcmRzQW5kWm9vbSh0aGlzLm1heEJvdW5kcyk7XHJcbiAgfVxyXG4gIHNob3dTb3VyY2VYSXRlbVkoc291cmNlSW5kZXgsIGl0ZW1JbmRleCkge1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKHRoaXMuZGF0YUxpc3Rbc291cmNlSW5kZXhdW2l0ZW1JbmRleF0pXHJcbiAgfVxyXG5cclxuICBpbml0TWFwU291cmNlc0FuZExheWVycygpIHtcclxuICAgIGlmICh0aGlzLmluaXRpYWxpc2VkKSByZXR1cm47XHJcbiAgICB0aGlzLmluaXRpYWxpc2VkID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgdGhpcy5kYXRhU291cmNlT2JqZWN0cy5tYXAoZGF0YVNvdXJjZSA9PiB7XHJcbiAgICAgIHRoaXMubWFwLmFkZFNvdXJjZShkYXRhU291cmNlWydzb3VyY2VOYW1lJ10sIHtcclxuICAgICAgICB0eXBlOiBkYXRhU291cmNlWydzb3VyY2VUeXBlJ10sXHJcbiAgICAgICAgZGF0YTogZGF0YVNvdXJjZVsnc291cmNlRGF0YSddXHJcbiAgICAgIH0pO1xyXG4gICAgICBpZihkYXRhU291cmNlWydsYXllclR5cGUnXSA9PT0gJ2ZpbGwnKXtcclxuICAgICAgICB0aGlzLm1hcC5hZGRMYXllcih7XHJcbiAgICAgICAgICBpZDogZGF0YVNvdXJjZVsnc291cmNlTmFtZSddLFxyXG4gICAgICAgICAgdHlwZTogZGF0YVNvdXJjZVsnbGF5ZXJUeXBlJ10sXHJcbiAgICAgICAgICBzb3VyY2U6IGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSxcclxuICAgICAgICAgIHBhaW50OiB7XHJcbiAgICAgICAgICAgICdmaWxsLWNvbG9yJzogZGF0YVNvdXJjZVsnY29sb3InXSxcclxuICAgICAgICAgICAgJ2ZpbGwtb3BhY2l0eSc6IGRhdGFTb3VyY2VbJ29wYWNpdHknXVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGRhdGFTb3VyY2VbJ2xheWVyVHlwZSddID09PSAnY2lyY2xlJyl7XHJcbiAgICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIoe1xyXG4gICAgICAgICAgaWQ6IGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSxcclxuICAgICAgICAgIHR5cGU6IGRhdGFTb3VyY2VbJ2xheWVyVHlwZSddLFxyXG4gICAgICAgICAgc291cmNlOiBkYXRhU291cmNlWydzb3VyY2VOYW1lJ10sXHJcbiAgICAgICAgICBwYWludDoge1xyXG4gICAgICAgICAgICAnY2lyY2xlLWNvbG9yJzogWydtYXRjaCcsIFtcImdldFwiLCBcInN0YXR1dFwiXSwgJ1JlY2hlcmNoZXMgZWZmZWN0dcOpZXMgb3UgZW4gY291cnMnLCAnI2ZmNTYxYycsICdQaGFzZSBwcsOpbGltaW5haXJlJywgJyNmZmM3MzQnLCAnI2I3YjdiNyddLFxyXG4gICAgICAgICAgICAnY2lyY2xlLXJhZGl1cyc6IDVcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICBjaGFuZ2VMYXllclBhaW50KGlkLCBwcm9wZXJ0eSwgdmFsdWUpe1xyXG4gICAgdGhpcy5tYXAuc2V0UGFpbnRQcm9wZXJ0eShpZCwgcHJvcGVydHksIHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHNldHVwSGFuZGxlcnMoKXtcclxuICAgIFxyXG4gICAgdGhpcy5tYXAub24oXCJtb3VzZW92ZXJcIiwgXCJwZW5zaW9ubmF0c1NvdXJjZVwiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLm1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcclxuICAgICAgdGhpcy5kcmF3UG9wdXAoZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubWFwLm9uKFwibW91c2VvdXRcIiwgXCJwZW5zaW9ubmF0c1NvdXJjZVwiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLm1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubWFwLm9uKFwiY2xpY2tcIiwgXCJwZW5zaW9ubmF0c1NvdXJjZVwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMubWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgICB0aGlzLmRyYXdQb3B1cChlKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gIH1cclxuXHJcbiAgZHJhd1BvcHVwKGUpe1xyXG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSBlLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnNsaWNlKCk7XHJcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gZS5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzO1xyXG4gICAgbGV0IFtvcGVuZGF5c3RyLCBvcGVubW9udGhzdHIsIG9wZW55ZWFyc3RyXSA9IHByb3BlcnRpZXNbJ291dmVydHVyZSddLnNwbGl0KCcvJyk7XHJcbiAgICBsZXQgW2Zlcm1kYXlzdHIsIGZlcm1tb250aHN0ciwgZmVybXllYXJzdHJdID0gcHJvcGVydGllc1snZmVybWV0dXJlJ10uc3BsaXQoJy8nKTtcclxuICAgIGxldCBbZGF0ZV9vdXZlcnR1cmUsZGF0ZV9mZXJtZXR1cmVdID0gW1xyXG4gICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImZyLUNBXCIsIHtkYXRlU3R5bGU6XCJsb25nXCJ9KS5mb3JtYXQobmV3IERhdGUoRGF0ZS5VVEMob3BlbnllYXJzdHIsIG9wZW5tb250aHN0ciwgb3BlbmRheXN0cikpKSxcclxuICAgICAgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJmci1DQVwiLCB7ZGF0ZVN0eWxlOlwibG9uZ1wifSkuZm9ybWF0KG5ldyBEYXRlKERhdGUuVVRDKGZlcm15ZWFyc3RyLCBmZXJtbW9udGhzdHIsIGZlcm1kYXlzdHIpKSlcclxuICAgIF07XHJcbiAgICBsZXQgaHRtbF9wb3B1cF9jb250ZW50ID0gYFxyXG4gICAgICA8aDM+JHtwcm9wZXJ0aWVzWyduYW1lJ119PC9oMz5cclxuICAgICAgPGg0PiR7cHJvcGVydGllc1sndmlsbGUnXX0sICR7cHJvcGVydGllc1sncHJvdmluY2UnXX08L2g0PlxyXG4gICAgICA8cD4ke2RhdGVfb3V2ZXJ0dXJlfSAtICR7ZGF0ZV9mZXJtZXR1cmV9PC9wPlxyXG4gICAgICA8cD4ke3Byb3BlcnRpZXNbJ3N0YXR1dCddfTwvcD5cclxuICAgIGA7XHJcbiAgICB3aGlsZSAoTWF0aC5hYnMoZS5sbmdMYXQubG5nIC0gY29vcmRpbmF0ZXNbMF0pID4gMTgwKSB7XHJcbiAgICAgIGNvb3JkaW5hdGVzWzBdICs9IGUubG5nTGF0LmxuZyA+IGNvb3JkaW5hdGVzWzBdID8gMzYwIDogLTM2MDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnBvcHVwID0gbmV3IG1hcGJveGdsLlBvcHVwKClcclxuICAgICAgLnNldExuZ0xhdChjb29yZGluYXRlcylcclxuICAgICAgLnNldEhUTUwoaHRtbF9wb3B1cF9jb250ZW50KVxyXG4gICAgICAuYWRkVG8odGhpcy5tYXApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIGlmICh0aGlzLnBvcHVwKSB7XHJcbiAgICAgIHRoaXMucG9wdXAucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVEYXRhKGRhdGFTb3VyY2VOYW1lLCBkYXRhKSB7XHJcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGlzZWQpIHRoaXMuaW5pdE1hcFNvdXJjZXNBbmRMYXllcnMoKTtcclxuICAgIHRoaXMubWFwLmdldFNvdXJjZShkYXRhU291cmNlTmFtZSkuc2V0RGF0YShkYXRhKTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcclxuXHJcbmNvbnN0IHBvc2l0aXZlT3JkZXJEaWN0ID0ge1xyXG4gICAgXCJsYW5kX3NpbmtcIjowLFxyXG4gICAgXCJmb3NzaWxfZW1pc3Npb25zXCI6MSxcclxuICAgIFwibGFuZF91c2VfY2hhbmdlXCI6Mn07XHJcblxyXG5jb25zdCBuZWdhdGl2ZU9yZGVyRGljdCA9IHtcIm9jZWFuX3NpbmtcIjowLFxyXG4gICAgXCJhdG1vc19zaW5rXCI6MSxcclxuICAgIFwibGFuZF9zaW5rXCI6Mn07XHJcblxyXG5jb25zdCBjb2xvckRpY3QgPSB7XHJcblxyXG4gICAgZm9zc2lsX2VtaXNzaW9uczogXCIjYjdjM2MzXCIsXHJcbiAgICBsYW5kX3VzZV9jaGFuZ2U6IFwiI0VGRTY2RlwiLFxyXG4gICAgbGFuZF9zaW5rOiBcIiNhNWRhYThcIixcclxuICAgIG9jZWFuX3Npbms6IFwiIzc1YTNiMVwiLFxyXG4gICAgYXRtb3Nfc2luazogXCIjODljZmYwXCIsXHJcbiAgICBjZW1lbnRfc2luazogXCIjYTJhMTk4XCJcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIHN0YWNrZWRBcmVhQ2hhcnR7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3Znb2JqLCByYXdkYXRhKXtcclxuXHJcbiAgICAgICAgdGhpcy5zdmdPYmogPSBzdmdvYmo7XHJcbiAgICAgICAgdGhpcy5zdmdXaWR0aCA9IHRoaXMuc3ZnT2JqLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICAgICAgICB0aGlzLnN2Z0hlaWdodCA9IHRoaXMuc3ZnT2JqLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5jaGFydFdpZHRoID0gdGhpcy5zdmdXaWR0aCAqIDAuOTtcclxuICAgICAgICB0aGlzLmNoYXJ0SGVpZ2h0ID0gdGhpcy5zdmdIZWlnaHQgKiAwLjk7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5jbGVhbkRhdGEocmF3ZGF0YSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NzdkRhdGE6JywgdGhpcy5kYXRhKTtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdGhpcy5tYWluR3JvdXAgPSB0aGlzLnN2Z09iai5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLmNoYXJ0V2lkdGgpXHJcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLmNoYXJ0SGVpZ2h0KVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkeyh0aGlzLnN2Z1dpZHRoLXRoaXMuY2hhcnRXaWR0aCkvMn0sJHsodGhpcy5zdmdIZWlnaHQtdGhpcy5jaGFydEhlaWdodCkvMn0pYCk7XHJcbiAgICAgICAgdGhpcy5pbml0Q2hhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhbkRhdGEoZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEubWFwKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHllYXI6IHllYXJEYXRhW1wiQW5uw6llXCJdLFxyXG4gICAgICAgICAgICAgICAgZm9zc2lsX2VtaXNzaW9uczogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCLDiW1pc3Npb25zIGlzc3VlcyBkZXMgw6luZXJnaWVzIGZvc3NpbGVzXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgbGFuZF91c2VfY2hhbmdlOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIkNoYW5nZW1lbnQgZCdhZmZlY3RhdGlvbiBkZXMgdGVycmVzXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgbGFuZF9zaW5rOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIlB1aXRzIHRlcnJlc3RyZVwiXSkucmVwbGFjZSgnLCcsXCIuXCIpKSxcclxuICAgICAgICAgICAgICAgIG9jZWFuX3Npbms6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiT2PDqWFuXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgYXRtb3Nfc2luazogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCJBdG1vc3Bow6hyZVwiXSkucmVwbGFjZSgnLCcsXCIuXCIpKSxcclxuICAgICAgICAgICAgICAgIGNlbWVudF9zaW5rOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIlB1aXRzIGRlIGNpbWVudFwiXSkucmVwbGFjZSgnLCcsXCIuXCIpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdENoYXJ0KCl7XHJcblxyXG4gICAgICAgIGxldCBsZWdlbmREYXRhID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogXCLDiW1pc3Npb25zIGlzc3VlcyBkZXMgw6luZXJnaWVzIGZvc3NpbGVzXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJmb3NzaWxfZW1pc3Npb25zXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiQ2hhbmdlbWVudCBkJ2FmZmVjdGF0aW9uIGRlcyB0ZXJyZXNcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcImxhbmRfdXNlX2NoYW5nZVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIlB1aXRzIHRlcnJlc3RyZVwiLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwibGFuZF9zaW5rXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiT2PDqWFuXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJvY2Vhbl9zaW5rXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiQXRtb3NwaMOocmVcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcImF0bW9zX3NpbmtcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc3QgeEF4aXMgPSB0aGlzLmRyYXdYQXhpcyh0aGlzLm1haW5Hcm91cCwgdGhpcy5jaGFydFdpZHRoLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgIGNvbnN0IHlBeGlzID0gdGhpcy5kcmF3WUF4aXModGhpcy5tYWluR3JvdXAsIHRoaXMuY2hhcnRIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuZHJhd0FyZWFzKHRoaXMubWFpbkdyb3VwLCB4QXhpcywgeUF4aXMpO1xyXG4gICAgICAgIC8vdGhpcy5kcmF3UmVjdGFuZ2xlcyh0aGlzLm1haW5Hcm91cCwgeEF4aXMsIHlBeGlzKTtcclxuICAgICAgICB0aGlzLmRyYXdUaXRsZSh0aGlzLm1haW5Hcm91cCk7XHJcbiAgICAgICAgdGhpcy5kcmF3Qm90dG9tQm94KHRoaXMubWFpbkdyb3VwLCB0aGlzLmNoYXJ0V2lkdGgpXHJcbiAgICAgICAgdGhpcy5kcmF3RGV0YWlscyh0aGlzLm1haW5Hcm91cCwgbGVnZW5kRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2QzLlNlbGVjdGlvbn0gY29udGFpbmVyIGQzIHNlbGVjdGlvblxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIHdpZHRoIG9mIHRoZSBjaGFydFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgZGF0YSBPYmogY29udGFpbmluZyBzZXJpZXMgYW5kIGRvbWFpbnNcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBheGlzVGl0bGUgeCBheGlzIHRpdGxlXHJcbiAgICAgKi9cclxuICAgICBkcmF3WEF4aXMoY29udGFpbmVyLCB3aWR0aCwgZGF0YSwgYXhpc1RpdGxlKXtcclxuXHJcbiAgICAgICAgY29uc3QgeEF4aXNHcm91cCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAneEF4aXNHcm91cCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7MH0sJHt0aGlzLmNoYXJ0SGVpZ2h0KjAuOTB9KWApO1xyXG5cclxuICAgICAgICBjb25zdCBzY2FsZSA9IGQzLnNjYWxlQmFuZCgpXHJcbiAgICAgICAgICAgIC5kb21haW4oZGF0YS5tYXAoZWxlbSA9PiBlbGVtLnllYXIpKVxyXG4gICAgICAgICAgICAucmFuZ2UoW3RoaXMuY2hhcnRXaWR0aCowLjA1LCB3aWR0aF0pO1xyXG5cclxuICAgICAgICBjb25zdCBheGlzID0gZDMuYXhpc0JvdHRvbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZShzY2FsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tWYWx1ZXMoc2NhbGUuZG9tYWluKCkuZmlsdGVyKChkLGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaSsxMCklMjAgPT09IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGlja0Zvcm1hdCgoZCxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zcGxpdCgnLScpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB4QXhpc0dyb3VwLmNhbGwoYXhpcylcclxuICAgICAgICAgICAgLmNhbGwoZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aWNrR3JvdXBzID0gZy5zZWxlY3RBbGwoXCIudGlja1wiKTtcclxuICAgICAgICAgICAgICAgIHRpY2tHcm91cHMuc2VsZWN0KCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTRwdCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgKGQsaSkgPT4gaSA9PT0gdGlja0dyb3Vwcy5ub2RlcygpLmxlbmd0aC0xID8gXCJlbmRcIiA6IFwibWlkZGxlXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4gc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2QzLlNlbGVjdGlvbn0gY29udGFpbmVyIGQzIHNlbGVjdGlvblxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIHdpZHRoIG9mIHRoZSBjaGFydFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgZGF0YSBPYmogY29udGFpbmluZyBzZXJpZXMgYW5kIGRvbWFpbnNcclxuICAgICAqL1xyXG4gICAgIGRyYXdZQXhpcyhjb250YWluZXIsIGhlaWdodCl7XHJcblxyXG4gICAgICAgIGNvbnN0IHlBeGlzR3JvdXAgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3lBeGlzR3JvdXAnKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3RoaXMuY2hhcnRXaWR0aCowLjA1fSwkezB9KWApO1xyXG5cclxuICAgICAgICBjb25zdCBzY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgICAgLmRvbWFpbihbMTIsLTEyXSlcclxuICAgICAgICAgICAgLnJhbmdlKFswLGhlaWdodCowLjkwXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGF4aXMgPSBkMy5heGlzTGVmdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZShzY2FsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMCk7XHJcbiAgICAgICAgeUF4aXNHcm91cC5jYWxsKGF4aXMpXHJcbiAgICAgICAgICAgIC5jYWxsKGcgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGlja0dyb3VwcyA9IGcuc2VsZWN0QWxsKFwiLnRpY2tcIik7XHJcbiAgICAgICAgICAgICAgICB0aWNrR3JvdXBzLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDQwMClcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgJ2dyYXBoaWsnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzEycHQnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAncm90YXRlKC05MCknKVxyXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgMClcclxuICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIC1zY2FsZSgwKSlcclxuICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi0zZW1cIilcclxuICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxMnB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LWZhbWlseScsICdncmFwaGlrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsICc2MDAnKVxyXG4gICAgICAgICAgICAudGV4dChcIkZsdXggZGUgQ08yIChHdEMgLyBhbm7DqWUpXCIpO1xyXG4gICAgICAgIHJldHVybiBzY2FsZTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3QXJlYXMoY29udGFpbmVyLCB4U2NhbGUsIHlTY2FsZSl7XHJcblxyXG4gICAgICAgIGxldCBwb3NpdGl2ZV9wYXRoc19hcnJheSA9IHt9O1xyXG4gICAgICAgIGxldCBuZWdhdGl2ZV9wYXRoc19hcnJheSA9IHt9O1xyXG5cclxuICAgICAgICBjb25zdCBwb3NEYXRhID0gdGhpcy5kYXRhLm1hcCh5ZWFyRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBwb3NFbGVtcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgY3VyVG90YWwgPSAwO1xyXG4gICAgICAgICAgICBsZXQgY3VyWWVhciA9IHllYXJEYXRhLnllYXI7XHJcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHllYXJEYXRhKS5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgIGlmKGN1ckVsZW0+MCAmJiBlbnRyeVswXSAhPT0gXCJ5ZWFyXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc0VsZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVudHJ5WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IGN1clRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyVG90YWwgKz0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKGVudHJ5WzBdID09PSBcImNlbWVudF9zaW5rXCIpeyAvLyBBZGQgY2VtZW50IHNpbmsgdG8gcmVtb3ZlIGl0IGFmdGVyd2FyZHMgKGluIGZvc3NpbCBmdWVsKSAgXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW50cnlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4gcG9zRWxlbXMuc29ydCgoYSxiKSA9PiBwb3NpdGl2ZU9yZGVyRGljdFthLnR5cGVdIC0gcG9zaXRpdmVPcmRlckRpY3RbYi50eXBlXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5lZ0RhdGEgPSB0aGlzLmRhdGEubWFwKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgbGV0IG5lZ0VsZW1zID0gW107XHJcbiAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBjdXJZZWFyID0geWVhckRhdGEueWVhcjtcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoeWVhckRhdGEpLnNvcnQoKGEsYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5lZ2F0aXZlT3JkZXJEaWN0W2FbMF1dIC0gbmVnYXRpdmVPcmRlckRpY3RbYlswXV07XHJcbiAgICAgICAgICAgIH0pLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgaWYoY3VyRWxlbTwwICYmIGVudHJ5WzBdICE9PSBcInllYXJcIiAmJiBlbnRyeVswXSAhPT0gXCJjZW1lbnRfc2lua1wiICl7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVnRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW50cnlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuIG5lZ0VsZW1zOy8vLnNvcnQoKGEsYikgPT4gbmVnYXRpdmVPcmRlckRpY3RbYS50eXBlXSAtIG5lZ2F0aXZlT3JkZXJEaWN0W2IudHlwZV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnZ290IG5lZ0RhdGE6ICcsIG5lZ0RhdGEpO1xyXG5cclxuICAgICAgICBsZXQgYXJlYUdlbiA9IGQzLmFyZWEoKVxyXG4gICAgICAgICAgICAueChkID0+IHhTY2FsZShkLmN1clllYXIpKVxyXG4gICAgICAgICAgICAueTAoZCA9PiB5U2NhbGUoZC5jdXJUb3QpKVxyXG4gICAgICAgICAgICAueTEoZCA9PiB5U2NhbGUoZC5jdXJUb3QrZC52YWx1ZSkpO1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHBvc2l0aXZlT3JkZXJEaWN0KS5mb3JFYWNoKG9yZGVyT2JqID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBjdXJLZXkgPSBvcmRlck9ialswXTtcclxuICAgICAgICAgICAgbGV0IGN1ck9yZGVyVmFsdWUgPSBvcmRlck9ialsxXTtcclxuICAgICAgICAgICAgbGV0IGN1clBhdGhBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICBwb3NEYXRhLmZvckVhY2goeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSB5ZWFyRGF0YVswXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJZZWFyID0gY3VyRWxlbVsnY3VyWWVhciddO1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleU9iaiA9IHllYXJEYXRhLmZpbHRlcihlbGVtID0+IGN1cktleSA9PT0gZWxlbS50eXBlKTtcclxuICAgICAgICAgICAgICAgIGxldCBjZW1lbnRPYmogPSB5ZWFyRGF0YS5maWx0ZXIoZWxlbSA9PiAnY2VtZW50X3NpbmsnID09PSBlbGVtLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihrZXlPYmoubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICBpZihjdXJLZXkgPT09IFwiZm9zc2lsX2VtaXNzaW9uc1wiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY3VyS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDoga2V5T2JqWzBdLmN1clRvdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBrZXlPYmpbMF0udmFsdWUgLSBNYXRoLmFicyhjZW1lbnRPYmpbMF0udmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY3VyS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDoga2V5T2JqWzBdLmN1clRvdC0gTWF0aC5hYnMoY2VtZW50T2JqWzBdLnZhbHVlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBrZXlPYmpbMF0udmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAvL0FkZCB6ZXJvXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjdXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBvc2l0aXZlX3BhdGhzX2FycmF5W2N1cktleV0gPSBjdXJQYXRoQXJyYXk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY29uc3QgcG9zaXRpdmVQYXRocyA9IHRoaXMubWFpbkdyb3VwLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdwb3NpdGl2ZVBhdGhzJyk7XHJcblxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHBvc2l0aXZlX3BhdGhzX2FycmF5KS5mb3JFYWNoKGNhdGVnb3J5T2JqID0+IHtcclxuICAgICAgICAgICAgbGV0IGN1cktleSA9IGNhdGVnb3J5T2JqWzBdO1xyXG4gICAgICAgICAgICBsZXQgY3VyQXJyYXkgPSBjYXRlZ29yeU9ialsxXTtcclxuXHJcbiAgICAgICAgICAgIHBvc2l0aXZlUGF0aHMuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGN1cktleSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgLmRhdHVtKGN1ckFycmF5KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBjb2xvckRpY3RbY3VyS2V5XSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDApXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIGQgPT4gYXJlYUdlbihkKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG5lZ2F0aXZlT3JkZXJEaWN0KS5zb3J0KChhLGIpID0+IGJbMV0gLSBhWzFdKS5mb3JFYWNoKG9yZGVyT2JqID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBjdXJLZXkgPSBvcmRlck9ialswXTtcclxuICAgICAgICAgICAgbGV0IGN1ck9yZGVyVmFsdWUgPSBvcmRlck9ialsxXTtcclxuICAgICAgICAgICAgbGV0IGN1clBhdGhBcnJheSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgbmVnRGF0YS5mb3JFYWNoKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0geWVhckRhdGFbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyWWVhciA9IGN1ckVsZW1bJ2N1clllYXInXTtcclxuICAgICAgICAgICAgICAgIGxldCBrZXlPYmogPSB5ZWFyRGF0YS5maWx0ZXIoZWxlbSA9PiBjdXJLZXkgPT09IGVsZW0udHlwZSk7XHJcbiAgICAgICAgICAgICAgICBpZihrZXlPYmoubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaChrZXlPYmpbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAvL0FkZCB6ZXJvXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjdXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5lZ2F0aXZlX3BhdGhzX2FycmF5W2N1cktleV0gPSBjdXJQYXRoQXJyYXk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY29uc3QgbmVnYXRpdmVQYXRocyA9IHRoaXMubWFpbkdyb3VwLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICduZWdhdGl2ZXBhdGhzJyk7XHJcblxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG5lZ2F0aXZlX3BhdGhzX2FycmF5KS5mb3JFYWNoKGNhdGVnb3J5T2JqID0+IHtcclxuICAgICAgICAgICAgbGV0IGN1cktleSA9IGNhdGVnb3J5T2JqWzBdO1xyXG4gICAgICAgICAgICBsZXQgY3VyQXJyYXkgPSBjYXRlZ29yeU9ialsxXTtcclxuXHJcbiAgICAgICAgICAgIG5lZ2F0aXZlUGF0aHMuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGN1cktleSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgLmRhdHVtKGN1ckFycmF5KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBjb2xvckRpY3RbY3VyS2V5XSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDApXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIGQgPT4gYXJlYUdlbihkKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIERyYXcgbGluZVxyXG4gICAgICAgIGNvbnN0IGxpbmVHZW4gPSBkMy5saW5lKCkueChkID0+IHhTY2FsZShkLnllYXIpKS55KGQgPT4geVNjYWxlKGQudmFsdWUpKTtcclxuXHJcbiAgICAgICAgbGV0IG5lZ1llYXJUb3RhbCA9IFtdO1xyXG4gICAgICAgIGxldCBwb3NZZWFyVG90YWwgPSBbXTtcclxuICAgICAgICBwb3NEYXRhLmZvckVhY2goeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW5pdFZhbHVlID0gMDtcclxuICAgICAgICAgICAgbGV0IGN1clZhbHVlID0geWVhckRhdGEucmVkdWNlKChwcmV2VmFsLGN1clZhbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlZHVjaW5nLi4uJywgcHJldlZhbCAsIGN1clZhbCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldlZhbCArIGN1clZhbC52YWx1ZTtcclxuICAgICAgICAgICAgfSwgaW5pdFZhbHVlKTtcclxuICAgICAgICAgICAgbmVnWWVhclRvdGFsLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgeWVhcjogeWVhckRhdGFbMF0uY3VyWWVhcixcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAtY3VyVmFsdWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBvc1llYXJUb3RhbC5wdXNoKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXI6IHllYXJEYXRhWzBdLmN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGN1clZhbHVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZygneWVhciB0b3RhbDonLCApO1xyXG5cclxuICAgICAgICB2YXIgcG9zbGluZSA9IGQzLnNlbGVjdCgnc3ZnJylcclxuICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgIC5kYXR1bShwb3NZZWFyVG90YWwpXHJcbiAgICAgICAgICAgIC5hdHRyKCdkJywgbGluZUdlbilcclxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJ25vbmUnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5jaGFydFdpZHRoKjAuMDUgKyB4U2NhbGUuYmFuZHdpZHRoKCl9LCR7TWF0aC5hYnMoeVNjYWxlKDIqMC43NCkteVNjYWxlKDApKX0pYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIG5lZ2xpbmUgPSBkMy5zZWxlY3QoJ3N2ZycpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAuZGF0dW0obmVnWWVhclRvdGFsKVxyXG4gICAgICAgICAgICAuYXR0cignZCcsIGxpbmVHZW4pXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICdub25lJylcclxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJzdHJva2UtZGFzaGFycmF5XCIsIChcIjMsIDNcIikpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5jaGFydFdpZHRoKjAuMDUgKyB4U2NhbGUuYmFuZHdpZHRoKCl9LCR7TWF0aC5hYnMoeVNjYWxlKDIqMC43NCkteVNjYWxlKDApKX0pYCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdUaXRsZShjb250YWluZXIpe1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsICh0aGlzLnN2Z1dpZHRoIC0gdGhpcy5jaGFydFdpZHRoKSAvIDIgKyB0aGlzLmNoYXJ0V2lkdGgqMC4wNSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCAodGhpcy5zdmdIZWlnaHQgLSB0aGlzLmNoYXJ0SGVpZ2h0KS8yIC0gNTApXHJcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTdwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnNjAwJylcclxuICAgICAgICAgICAgLnRleHQoXCJMZSB0aXRyZSBkdSBncmFwaGlxdWVcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywodGhpcy5zdmdXaWR0aCAtIHRoaXMuY2hhcnRXaWR0aCkgLyAyICsgdGhpcy5jaGFydFdpZHRoKjAuMDUpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgKHRoaXMuc3ZnSGVpZ2h0IC0gdGhpcy5jaGFydEhlaWdodCkvMiAtIDI1KVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzEzcHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgJ2dyYXBoaWsnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgJzQwMCcpXHJcbiAgICAgICAgICAgIC50ZXh0KFwiTGUgc291cy10aXRyZSBkdSBncmFwaGlxdWVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0JvdHRvbUJveChjb250YWluZXIsIHdpZHRoKXtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdzdG9rZS13aWR0aCcsIDEpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDAuMylcclxuICAgICAgICAgICAgLmF0dHIoXCJ4MVwiLCB0aGlzLmNoYXJ0V2lkdGgqMC4wNSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ5MVwiLCB0aGlzLmNoYXJ0SGVpZ2h0LTMwKVxyXG4gICAgICAgICAgICAuYXR0cihcIngyXCIsIHRoaXMuY2hhcnRXaWR0aClcclxuICAgICAgICAgICAgLmF0dHIoXCJ5MlwiLCB0aGlzLmNoYXJ0SGVpZ2h0LTMwKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jaGFydFdpZHRoKjAuMDUpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgdGhpcy5jaGFydEhlaWdodC0xNylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDYwMClcclxuICAgICAgICAgICAgLnRleHQoJ0dyYXBoaXF1ZSA6JylcclxuICAgICAgICAgICAgLmFwcGVuZCgndHNwYW4nKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIHRoaXMuY2hhcnRXaWR0aCowLjA1KyA2NSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmNoYXJ0SGVpZ2h0LTE3KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgICAgICAudGV4dCgnTGUgRGV2b2lyIC0gJyk7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jaGFydFdpZHRoKjAuMDUgKyAxMjIpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgdGhpcy5jaGFydEhlaWdodC0xNylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDYwMClcclxuICAgICAgICAgICAgLnRleHQoJ1NvdXJjZSA6JylcclxuICAgICAgICAgICAgLmFwcGVuZCgndHNwYW4nKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIHRoaXMuY2hhcnRXaWR0aCowLjA1ICsgMTY5KVxyXG4gICAgICAgICAgICAuYXR0cigneScsIHRoaXMuY2hhcnRIZWlnaHQtMTcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA0MDApXHJcbiAgICAgICAgICAgIC50ZXh0KCcgLi4uICcpO1xyXG5cclxuICAgICAgICAvLyBjb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3gnLCB0aGlzLnN2Z1dpZHRoKjAuMSlcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3knLCB0aGlzLnN2Z0hlaWdodCowLjk1MSlcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDYwMClcclxuICAgICAgICAvLyAgICAgLnRleHQoJ05vdGUgOicpXHJcbiAgICAgICAgLy8gICAgIC5hcHBlbmQoJ3RzcGFuJylcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3gnLCB0aGlzLnN2Z1dpZHRoKjAuMSszNSlcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3knLCB0aGlzLnN2Z0hlaWdodCowLjk1MSlcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDQwMClcclxuICAgICAgICAvLyAgICAgLnRleHQoJ0Rvbm7DqWVzIGNvbGxlY3TDqWVzIGRlcHVpcyBodHRwczovL2Rvbm5lZXMubW9udHJlYWwuY2EvdmlsbGUtZGUtbW9udHJlYWwvY29tcHRhZ2UtdmVoaWN1bGVzLXBpZXRvbnMnKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3RGV0YWlscyhjb250YWluZXIsIGxlZ2VuZERhdGEpe1xyXG5cclxuICAgICAgICBjb25zdCBsZWdlbmRDb250YWluZXIgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xlZ2VuZENvbnRhaW5lcicpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7KHRoaXMuc3ZnV2lkdGggLSB0aGlzLmNoYXJ0V2lkdGgpIC8gMiArICh0aGlzLmNoYXJ0V2lkdGgqMC4wNSArIDEwKX0sJHt0aGlzLnN2Z0hlaWdodCowLjA3fSlgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgcm93cyA9IGxlZ2VuZENvbnRhaW5lci5zZWxlY3RBbGwoJ2cnKVxyXG4gICAgICAgICAgICAuZGF0YShsZWdlbmREYXRhKVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xlZ2VuZFJvdycpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCxpKSA9PiBgdHJhbnNsYXRlKDAsJHtpKjIwfSlgKTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcm93cy5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjeCcsIDApXHJcbiAgICAgICAgICAgIC5hdHRyKCdjeScsIDApXHJcbiAgICAgICAgICAgIC5hdHRyKCdyJywgOClcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGNvbG9yRGljdFtkLmNvbG9yXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIHJvd3MuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCAxOClcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCA0KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNTAwKVxyXG4gICAgICAgICAgICAudGV4dCggZCA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5sYWJlbDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdSZWN0YW5nbGVzKGNvbnRhaW5lciwgeFNjYWxlLCB5U2NhbGUpeyAvLyBub3QgdXNlZFxyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGl2ZUFyZWFHcm91cCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgIC5hdHRyKCdpZCcsICdwb3NBcmVhZ3JvdXAnKVxyXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsJHswfSlgKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVnYXRpdmVBcmVhR3JvdXAgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAuYXR0cignaWQnLCAnbmVnQXJlYWdyb3VwJylcclxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgwLCR7MH0pYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBvc1llYXJHcm91cHMgPSBwb3NpdGl2ZUFyZWFHcm91cC5zZWxlY3RBbGwoJ2cnKVxyXG4gICAgICAgICAgICAuZGF0YSh0aGlzLmRhdGEpXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBkID0+IGB5ZWFyXyR7ZC55ZWFyfWApO1xyXG4gICAgICAgIGNvbnN0IHBvc1JlY3RzID0gcG9zWWVhckdyb3Vwcy5zZWxlY3RBbGwoJ3JlY3QnKVxyXG4gICAgICAgICAgICAuZGF0YShkID0+IHsgXHJcbiAgICAgICAgICAgICAgICBsZXQgcG9zRWxlbXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyWWVhciA9IGQueWVhcjtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQpLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjdXJFbGVtPjAgJiYgZW50cnlbMF0gIT09IFwieWVhclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvc0VsZW1zLnNvcnQoKGEsYikgPT4gcG9zaXRpdmVPcmRlckRpY3RbYS50eXBlXSAtIHBvc2l0aXZlT3JkZXJEaWN0W2IudHlwZV0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgZCA9PiBgJHtkLnR5cGV9XyR7ZC52YWx1ZX1gKVxyXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB4U2NhbGUuYmFuZHdpZHRoKCkpXHJcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAoZCxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoeVNjYWxlKDApIC0geVNjYWxlKGQudmFsdWUpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCBkID0+IHhTY2FsZShkLmN1clllYXIpKVxyXG4gICAgICAgICAgICAuYXR0cigneScsIGQgPT4gKHlTY2FsZSgwKSAtIChNYXRoLmFicyh5U2NhbGUoMCkgLSB5U2NhbGUoZC52YWx1ZSkpKSAtIChNYXRoLmFicyh5U2NhbGUoMCkgLSB5U2NhbGUoZC5jdXJUb3QpKSkpKVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsIGQgPT4gY29sb3JEaWN0W2QudHlwZV0pO1xyXG5cclxuICAgICAgICBjb25zdCBuZWdhdGl2ZVllYXJHcm91cHMgPSBuZWdhdGl2ZUFyZWFHcm91cC5zZWxlY3RBbGwoJ2cnKVxyXG4gICAgICAgICAgICAuZGF0YSh0aGlzLmRhdGEpXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBkID0+IGB5ZWFyXyR7ZC55ZWFyfWApO1xyXG5cclxuICAgICAgICBjb25zdCBuZWdSZWN0cyA9IG5lZ2F0aXZlWWVhckdyb3Vwcy5zZWxlY3RBbGwoJ3JlY3QnKVxyXG4gICAgICAgICAgICAuZGF0YShkID0+IHsgXHJcbiAgICAgICAgICAgICAgICBsZXQgbmVnRWxlbXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyWWVhciA9IGQueWVhcjtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQpLmZpbHRlcihlbGVtID0+IGVsZW1bMV08MCkuc29ydCgoYSxiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYVZhbCA9IG5lZ2F0aXZlT3JkZXJEaWN0W2FbMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJWYWwgPSBuZWdhdGl2ZU9yZGVyRGljdFtiWzBdXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYVZhbCAtIGJWYWw7XHJcbiAgICAgICAgICAgICAgICB9KS5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZW50cnlbMF0gIT09IFwieWVhclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVnRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5lZ0VsZW1zO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgZCA9PiBgJHtkLnR5cGV9XyR7ZC52YWx1ZX1gKVxyXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB4U2NhbGUuYmFuZHdpZHRoKCkpXHJcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAoZCxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoeVNjYWxlKDApIC0geVNjYWxlKE1hdGguYWJzKGQudmFsdWUpKSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgZCA9PiB4U2NhbGUoZC5jdXJZZWFyKSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCBkID0+ICh5U2NhbGUoZC5jdXJUb3QpKSlcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGNvbG9yRGljdFtkLnR5cGVdKTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIEdhdWdlcyhwcm9wcyl7XG5cbiAgY29uc3QgY2FsY3VsYXRlR2F1Z2VXaWR0aCA9ICgpID0+IHtcbiAgICBjb25zdCBnYXVnZXNFbGVtcyA9IGQzLnNlbGVjdCgnLmdhdWdlcycpLnNlbGVjdEFsbCgnLmdhdWdlJyk7XG4gICAgY29uc3QgbWF4V2lkdGhWYWx1ZSA9IE1hdGgubWF4KDUwLCBNYXRoLm1heChwYXJzZUludChwcm9wcy5kb2xsYXJzKSwgcGFyc2VJbnQocHJvcHMucGVyZm9ybWFuY2UpKSk7XG4gICAgZ2F1Z2VzRWxlbXMubm9kZXMoKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICBsZXQgY3VyV2lkdGggPSBtYXhXaWR0aFZhbHVlO1xuICAgICAgY29uc29sZS5sb2coJ2dhdWdlOiAnLCBub2RlKTtcbiAgICAgIGlmKGQzLnNlbGVjdChub2RlKS5hdHRyKCdpZCcpID09PSBcImRvbGxhcnNcIil7XG4gICAgICAgIGN1cldpZHRoID0gcHJvcHMuZG9sbGFycztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYoZDMuc2VsZWN0KG5vZGUpLmF0dHIoJ2lkJykgPT09ICdwZXJmb3JtYW5jZScpe1xuICAgICAgICBjdXJXaWR0aCA9IHByb3BzLnBlcmZvcm1hbmNlO1xuICAgICAgfVxuICAgICAgZDMuc2VsZWN0KG5vZGUpLnNlbGVjdCgnLmdhdWdlQ29sb3InKS5zdHlsZSgnd2lkdGgnLCBgJHtNYXRoLnJvdW5kKGN1cldpZHRoL21heFdpZHRoVmFsdWUqMTAwKX0lYCk7XG4gICAgfSk7XG4gIH07XG5cbiAgdXNlRWZmZWN0KCAoKSA9PiB7XG4gICAgY2FsY3VsYXRlR2F1Z2VXaWR0aCgpO1xuICB9KTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2F1Z2VzXCI+XG4gICAgICA8ZGl2IGlkPVwiZG9sbGFyc1wiIGNsYXNzTmFtZT1cImdhdWdlIGRvbGxhckdhdWdlXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dEJveFwiPlxuICAgICAgICAgIDxoNT5KZXRvbnM8L2g1PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYXVnZUNvbG9ySG9sZGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYXVnZUNvbG9yIGJsdWVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmFsdWVcIj5cbiAgICAgICAgICAgICAgPHA+e3Byb3BzLmRvbGxhcnN9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGlkPVwicGVyZm9ybWFuY2VcIiBjbGFzc05hbWU9XCJnYXVnZSBwZXJmb3JtYW5jZUdhdWdlXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dEJveFwiPlxuICAgICAgICAgIDxoNT5QZXJmb3JtYW5jZTwvaDU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdhdWdlQ29sb3JIb2xkZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdhdWdlQ29sb3IgZ3JlZW5cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmFsdWVcIj5cbiAgICAgICAgICAgICAgPHA+e3Byb3BzLnBlcmZvcm1hbmNlfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG5cbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIEludHJvQm94KHByb3BzKXtcblxuICBjb25zdCBzdGFydEdhbWUgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdzdGFydGluZyBnYW1lJyk7XG4gICAgcHJvcHMuZ2FtZVN0YXJ0KCk7XG4gIH0pO1xuXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWVCb3ggdHJhbnNwYXJlbnRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW50cm9Cb3hcIj5cbiAgICAgICAge3Byb3BzLmludHJvRWxlbX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyQm94XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RhcnRidXR0b25cIiBvbkNsaWNrPXtzdGFydEdhbWV9PlxuICAgICAgICAgIDxwPkNvbW1lbmNlciBsZSBqZXU8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgKVxuXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBHYXVnZXMgfSBmcm9tIFwiLi4vZ2F1Z2VzL0dhdWdlc1wiO1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBDaG9pY2UocHJvcHMpe1xuXG5cbiAgY29uc3QgW3NlbGVjdGlvbiwgc2V0U2VsZWN0aW9uXSA9IHVzZVN0YXRlKG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG5cbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0aW9uYnV0dG9ucyA9IGQzLnNlbGVjdEFsbCgnLmNob2ljZWJ1dHRvbicpO1xuICAgIHNlbGVjdGlvbmJ1dHRvbnMuc2VsZWN0KCcuYnV0bicpLmNsYXNzZWQoJ3NlbGVjdGVkJywgZmFsc2UpO1xuICAgIGlmKHNlbGVjdGlvbil7XG4gICAgICBkMy5zZWxlY3Qoc2VsZWN0aW9uLm9iaikuc2VsZWN0KCcuYnV0bicpLmNsYXNzZWQoJ3NlbGVjdGVkJywgdHJ1ZSk7XG4gICAgfVxuICB9LFtzZWxlY3Rpb25dKVxuXG4gIGNvbnN0IG5leHRQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKGNvc3QsIHVzZSkgPT4ge1xuICAgIGxldCB0cmlnZ2VyTmV4dCA9IHByb3BzLmN1clByb21wdFsnVHJpZ2dlcl9uZXh0J107XG4gICAgaWYoTnVtYmVyLmlzSW50ZWdlcihwYXJzZUludCh0cmlnZ2VyTmV4dCkpKXtcbiAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgdHJpZ2dlciBuZXh0OiAnLCBwYXJzZUludCh0cmlnZ2VyTmV4dCkpO1xuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHBhcnNlSW50KHRyaWdnZXJOZXh0KSk7XG4gICAgfVxuICAgIHByb3BzLnVwZGF0ZURvbGxhcnMoLXBhcnNlSW50KGNvc3QpKTtcbiAgICBwcm9wcy51cGRhdGVQZXJmb3JtYW5jZShwYXJzZUludCh1c2UpKTtcbiAgICBzZXRTZWxlY3Rpb24obnVsbCk7XG4gIH0pO1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgY29uc29sZS5sb2coJ3ByZXZpb3VzIHByb21wdCEnLCBwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgfVxuICAgIHNldFNlbGVjdGlvbihudWxsKTtcbiAgfSk7XG5cbiAgY29uc3QgdXBkYXRlU2VsZWN0ZWQgPSAoZXZlbnQsIGNvc3QsIHVzZSkgPT4ge1xuICAgIHNldFNlbGVjdGlvbih7XG4gICAgICBvYmo6IGV2ZW50LnRhcmdldCxcbiAgICAgIGNvc3Q6IGNvc3QsXG4gICAgICB1c2U6IHVzZVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hvaWNlc1wiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAge1xuICAgICAgICAgIHByb3BzLmNob2ljZXMubWFwKChjaG9pY2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBsZXQgY29zdCA9IHByb3BzLmNob2ljZXNfdmFsdWVzW2luZGV4XS5zcGxpdCgnXycpWzBdO1xuICAgICAgICAgICAgbGV0IHVzZSA9IHByb3BzLmNob2ljZXNfdmFsdWVzW2luZGV4XS5zcGxpdCgnXycpWzFdO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaG9pY2VidXR0b25cIiBrZXk9e2luZGV4fSBvbkNsaWNrPXsoZSkgPT4ge3VwZGF0ZVNlbGVjdGVkKGUsIGNvc3QsIHVzZSl9fT5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPXtpbmRleH0gY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgICAgICAgPHA+e2Nob2ljZX0gKGNvw7t0OiB7Y29zdH0gOyBlZmZldDoge3VzZX0pPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX2hlYWRlclwiPlxuICAgICAgICAgICAgPGg1PlLDqXBhcnRpdGlvbiBkZSB2b3MgamV0b25zPC9oNT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vbml0b3JpbmdfdmFsdWVcIj5cbiAgICAgICAgICAgIDxHYXVnZXMgZG9sbGFycz17KHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24uaGFzT3duUHJvcGVydHkoXCJjb3N0XCIpKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycyAtIHNlbGVjdGlvbi5jb3N0IDogcHJvcHMuZ2F1Z2VzLnByb3BzLmRvbGxhcnN9XG4gICAgICAgICAgICAgIHBlcmZvcm1hbmNlPXtwcm9wcy5nYXVnZXMucHJvcHMucGVyZm9ybWFuY2V9Lz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAge3Byb3BzLmN1ckluZGV4ID4gMCA/XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBwcmV2XCIgb25DbGljaz17cHJldmlvdXNQcm9tcHR9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2x1bW5cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGFjdGlvbmJ1dHRvbiBuZXh0ICR7c2VsZWN0aW9uID8gJycgOiAnZGlzYWJsZWQnfWB9IG9uQ2xpY2s9eygpID0+IHtzZWxlY3Rpb24gPyBuZXh0UHJvbXB0KHNlbGVjdGlvbi5jb3N0LCBzZWxlY3Rpb24udXNlKSA6IGNvbnNvbGUubG9nKCdEaXNhYmxlZC4nKX19PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgIDxwPk5leHQ8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxuXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBHYXVnZXMgfSBmcm9tIFwiLi4vZ2F1Z2VzL0dhdWdlc1wiO1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBNdWx0aVNlbGVjdGlvbihwcm9wcyl7XG5cbiAgY29uc3QgW3NlbGVjdGlvbiwgc2V0U2VsZWN0aW9uXSA9IHVzZVN0YXRlKFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlc2V0U2VsZWN0aW9uKCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vY29uc29sZS5sb2coJ2N1ciBzZWxlY3Rpb246ICcsIHNlbGVjdGlvbik7XG4gIH0sIFtzZWxlY3Rpb25dKTtcblxuICBjb25zdCByZXNldFNlbGVjdGlvbiA9ICgpID0+IHtcbiAgICBzZXRTZWxlY3Rpb24ocHJvcHMuY2hvaWNlcy5tYXAoZWxlbSA9PiBudWxsKSk7XG4gIH1cblxuICBjb25zdCBjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbiA9IChzZWxlY3Rpb24pID0+IHtcbiAgICBjb25zdCBhY2NDb3N0ID0gc2VsZWN0aW9uLnJlZHVjZSgoYWNjLCBjdXIpID0+IHtcbiAgICAgIGlmKGN1cil7XG4gICAgICAgIGFjYyArPSBjdXIuY29zdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgMCk7XG4gICAgY29uc3QgYWNjUGVyZm9ybWFuY2UgPSBzZWxlY3Rpb24ucmVkdWNlKChhY2MsIGN1cikgPT4ge1xuICAgICAgaWYoY3VyKXtcbiAgICAgICAgYWNjICs9IGN1ci51c2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIDApO1xuXG4gICAgcmV0dXJuIFthY2NDb3N0LCBhY2NQZXJmb3JtYW5jZV07XG4gIH07XG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoc2VsZWN0aW9uKSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXTtcbiAgICBpZihOdW1iZXIuaXNJbnRlZ2VyKHBhcnNlSW50KHRyaWdnZXJOZXh0KSkpe1xuICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyB0cmlnZ2VyIG5leHQ6ICcsIHBhcnNlSW50KHRyaWdnZXJOZXh0KSk7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocGFyc2VJbnQodHJpZ2dlck5leHQpKTtcbiAgICB9XG4gICAgY29uc3QgW2FjY0Nvc3QsIGFjY1BlcmZvcm1hbmNlXSA9IGNhbGN1bGF0ZVRvdGFsU2VsZWN0aW9uKHNlbGVjdGlvbik7XG5cbiAgICBwcm9wcy51cGRhdGVEb2xsYXJzKC1wYXJzZUludChhY2NDb3N0KSk7XG4gICAgcHJvcHMudXBkYXRlUGVyZm9ybWFuY2UocGFyc2VJbnQoYWNjUGVyZm9ybWFuY2UpKTtcbiAgICByZXNldFNlbGVjdGlvbigpO1xuICB9KTtcblxuICBjb25zdCBwcmV2aW91c1Byb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgaWYocHJvcHMuY3VySW5kZXggPiAwKXtcbiAgICAgIGNvbnNvbGUubG9nKCdwcmV2aW91cyBwcm9tcHQhJywgcHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgIH1cbiAgICByZXNldFNlbGVjdGlvbigpO1xuICB9KTtcblxuICBjb25zdCB1cGRhdGVTZWxlY3RlZCA9IChldmVudCwgaW5kZXgsIGNvc3QsIHVzZSkgPT4ge1xuICAgIGxldCBuZXdBcnJheSA9IFsuLi5zZWxlY3Rpb25dO1xuICAgIGlmKHNlbGVjdGlvbltpbmRleF0pe1xuICAgICAgLy8gVW5zZWxlY3RcbiAgICAgIG5ld0FycmF5W2luZGV4XSA9IG51bGw7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAvLyBTZWxlY3RcbiAgICAgIG5ld0FycmF5W2luZGV4XSA9IHtcbiAgICAgICAgb2JqOiBldmVudC50YXJnZXQsXG4gICAgICAgIGNvc3Q6IHBhcnNlSW50KGNvc3QpLFxuICAgICAgICB1c2U6IHBhcnNlSW50KHVzZSlcbiAgICAgIH07XG4gICAgfVxuICAgIHNldFNlbGVjdGlvbihuZXdBcnJheSk7XG4gIH1cblxuICByZXR1cm4oXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjaG9pY2VzXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICB7XG4gICAgICAgICAgcHJvcHMuY2hvaWNlcy5tYXAoKGNob2ljZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBjb3N0ID0gcHJvcHMuY2hvaWNlc192YWx1ZXNbaW5kZXhdLnNwbGl0KCdfJylbMF07XG4gICAgICAgICAgICBsZXQgdXNlID0gcHJvcHMuY2hvaWNlc192YWx1ZXNbaW5kZXhdLnNwbGl0KCdfJylbMV07XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdGlvbmJ1dHRvblwiIGtleT17aW5kZXh9IG9uQ2xpY2s9eyhlKSA9PiB7dXBkYXRlU2VsZWN0ZWQoZSwgaW5kZXgsIGNvc3QsIHVzZSl9fT5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPXtpbmRleH0gY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3Rpb25Cb3hcIj5cbiAgICAgICAgICAgICAgICAgICAge3NlbGVjdGlvbltpbmRleF0gPyAnWCcgOiAnJ31cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPHA+e2Nob2ljZX0gKGNvw7t0OiB7Y29zdH0gOyBlZmZldDoge3VzZX0pPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX2hlYWRlclwiPlxuICAgICAgICAgICAgPGg1PlLDqXBhcnRpdGlvbiBkZSB2b3MgamV0b25zPC9oNT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vbml0b3JpbmdfdmFsdWVcIj5cbiAgICAgICAgICAgIDxHYXVnZXMgZG9sbGFycz17KHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24ubGVuZ3RoID4gMCkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuZ2F1Z2VzLnByb3BzLmRvbGxhcnMgLSBjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbihzZWxlY3Rpb24pWzBdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLmdhdWdlcy5wcm9wcy5kb2xsYXJzfVxuICAgICAgICAgICAgICBwZXJmb3JtYW5jZT17cHJvcHMuZ2F1Z2VzLnByb3BzLnBlcmZvcm1hbmNlfS8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxuICAgICAgICAgIHtwcm9wcy5jdXJJbmRleCA+IDAgP1xuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gcHJldlwiIG9uQ2xpY2s9e3ByZXZpb3VzUHJvbXB0fT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgICAgPHA+UHJldmlvdXM8L3A+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA6XG4gICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BhY3Rpb25idXR0b24gbmV4dCAke3NlbGVjdGlvbiA/ICcnIDogJ2Rpc2FibGVkJ31gfSBvbkNsaWNrPXsoKSA9PiB7c2VsZWN0aW9uID8gbmV4dFByb21wdChzZWxlY3Rpb24pIDogY29uc29sZS5sb2coJ0Rpc2FibGVkLicpfX0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgPHA+TmV4dDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBQcmludFByb21wdChwcm9wcyl7XG5cbiAgY29uc3QgcHJldmlvdXNQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XG4gICAgICBjb25zb2xlLmxvZygncHJldiBwcm9tcHQhJywgcHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXTtcbiAgICBpZihOdW1iZXIuaXNJbnRlZ2VyKHBhcnNlSW50KHRyaWdnZXJOZXh0KSkpe1xuICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyB0cmlnZ2VyIG5leHQ6ICcsIHBhcnNlSW50KHRyaWdnZXJOZXh0KSk7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocGFyc2VJbnQodHJpZ2dlck5leHQpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwcmludHByb21wdFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXNzYWdlXCI+XG4gICAgICAgIDxwPlxuICAgICAgICAgIHtwcm9wcy5tZXNzYWdlfVxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIHByZXZcIiBvbkNsaWNrPXtwcmV2aW91c1Byb21wdH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgIDxwPlByZXZpb3VzPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gbmV4dFwiIG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5TdWl2YW50PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuKVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgR2F1Z2VzIH0gZnJvbSBcIi4uL2dhdWdlcy9HYXVnZXNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIFJlcGFydGl0aW9uKHByb3BzKXtcblxuICBjb25zdCBbamV0b25zLCBzZXRKZXRvbnNdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFt0ZXJhd2F0dHMsIHNldFRlcmF3YXR0c10gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3VuaXRzLCBzZXRVbml0c10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt0b2tlbnNQZXJVbml0LCBzZXRUb2tlbnNQZXJVbml0XSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgbWF4VG9rZW5zID0gMTA7XG5cbiAgdXNlRWZmZWN0KCAoKSA9PiB7XG5cbiAgICBjb25zdCBvcHRpb25zID0gZ2V0T3B0aW9uUGFyYW1zKCk7XG4gICAgY29uc3QgbmV3VW5pdHMgPSBvcHRpb25zLm1hcCgoKSA9PiAwKTtcbiAgICBjb25zdCB0b2tlbnNQZXJVbml0ID0gb3B0aW9ucy5tYXAoZWxlbSA9PiBlbGVtLnVuaXRWYWx1ZSk7XG4gICAgc2V0VW5pdHMobmV3VW5pdHMpO1xuICAgIHNldFRva2Vuc1BlclVuaXQodG9rZW5zUGVyVW5pdCk7XG4gICAgY29uc29sZS5sb2coJ29wdGlvblBhcmFtczonLCBnZXRPcHRpb25QYXJhbXMoKSk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoICgpID0+IHtcbiAgICBsZXQgbmV3SmV0b25zID0gdW5pdHMucmVkdWNlKFxuICAgICAgKGFjYywgY3VyVmFsLCBpbmRleCkgPT4ge1xuICAgICAgICBsZXQgY3VyT3B0aW9uUGFyYW1zID0gZ2V0T3B0aW9uUGFyYW1zKClbaW5kZXhdO1xuICAgICAgICByZXR1cm4gYWNjICsgY3VyVmFsKmN1ck9wdGlvblBhcmFtc1tcInVuaXRWYWx1ZVwiXVxuICAgICAgfSwwKTtcbiAgICBsZXQgbmV3TVcgPSB1bml0cy5yZWR1Y2UoXG4gICAgICAoYWNjLCBjdXJWYWwsIGluZGV4KSA9PiB7XG4gICAgICAgIGxldCBjdXJPcHRpb25QYXJhbXMgPSBnZXRPcHRpb25QYXJhbXMoKVtpbmRleF07XG4gICAgICAgIHJldHVybiBhY2MgKyBjdXJWYWwqY3VyT3B0aW9uUGFyYW1zW1widW5pdFRXaHZhbHVlXCJdXG4gICAgICB9LDApO1xuICAgIHNldEpldG9ucyhuZXdKZXRvbnMpO1xuICAgIHNldFRlcmF3YXR0cyhuZXdNVyk7XG4gIH0sIFt1bml0c10pO1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgY29uc29sZS5sb2coJ3ByZXYgcHJvbXB0IScsIHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IG5leHRQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGxldCBzcGxpdHRlZFRyaWdnZXJOZXh0ID0gU3RyaW5nKHByb3BzLmN1clByb21wdFsnVHJpZ2dlcl9uZXh0J10pLnNwbGl0KFwiX1wiKTtcbiAgICBsZXQgdHJpZ2dlck5leHQgPSBTdHJpbmcoc3BsaXR0ZWRUcmlnZ2VyTmV4dFswXSkuc3BsaXQoXCI7XCIpO1xuICAgIGlmKHRyaWdnZXJOZXh0Lmxlbmd0aCA9PSAxICYmIE51bWJlci5pc0ludGVnZXIocGFyc2VJbnQodHJpZ2dlck5leHRbMF0pKSl7XG4gICAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgdHJpZ2dlciBuZXh0OiAnLHRyaWdnZXJOZXh0KTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwYXJzZUludCh0cmlnZ2VyTmV4dCkpO1xuICAgIH1cbiAgICBlbHNlIGlmKHRyaWdnZXJOZXh0Lmxlbmd0aCA+IDEpe1xuICAgICAgaWYoIXVuaXRzLmV2ZXJ5KHZhbCA9PiB2YWwgPT09IHVuaXRzWzBdKSl7XG4gICAgICAgIGxldCBpbmRleE9mTWF4VmFsdWUgPSB1bml0cy5yZWR1Y2UoKGlNYXgsIHgsIGksIGFycikgPT4geCA+IGFycltpTWF4XSA/IGkgOiBpTWF4LCAwKTtcbiAgICAgICAgaWYoTnVtYmVyLmlzSW50ZWdlcihwYXJzZUludCh0cmlnZ2VyTmV4dFtpbmRleE9mTWF4VmFsdWVdKSkpe1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyB0cmlnZ2VyIG5leHQ6ICcsdHJpZ2dlck5leHRbaW5kZXhPZk1heFZhbHVlXSk7XG4gICAgICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHBhcnNlSW50KHRyaWdnZXJOZXh0W2luZGV4T2ZNYXhWYWx1ZV0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgbGV0IGRlZmF1bHROZXh0ID0gc3BsaXR0ZWRUcmlnZ2VyTmV4dFsxXTtcbiAgICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHBhcnNlSW50KGRlZmF1bHROZXh0KSk7XG4gICAgICB9XG4gICAgfVxuICAgIHByb3BzLnVwZGF0ZURvbGxhcnMoLWpldG9ucyk7XG4gIH0pO1xuXG4gIGNvbnN0IHByb2Nlc3NDaG9pY2VzID0gKGNob2ljZSwgY2hvaWNlc192YWx1ZXMpID0+IHtcbiAgICBjb25zdCBzcGxpdHRlZENob2ljZXMgPSBjaG9pY2VzX3ZhbHVlcy5zcGxpdCgnXycpO1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBjaG9pY2UsXG4gICAgICB1bml0VmFsdWU6IHBhcnNlSW50KHNwbGl0dGVkQ2hvaWNlc1swXSksXG4gICAgICB1bml0VFdodmFsdWU6IHBhcnNlSW50KHNwbGl0dGVkQ2hvaWNlc1syXSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBnZXRPcHRpb25QYXJhbXMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHByb3BzLmNob2ljZXMubWFwKChjaG9pY2UsIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gcHJvY2Vzc0Nob2ljZXMoY2hvaWNlLCBwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0pO1xuICAgIH0pXG4gIH1cblxuICBjb25zdCBjaGVja0lmRnVsbCA9IChuZXdBZGRpdGlvbikgPT4ge1xuICAgIGxldCB0b3RhbCA9IDA7XG4gICAgdW5pdHMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICB0b3RhbCArPSB2YWx1ZSp0b2tlbnNQZXJVbml0W2luZGV4XTtcbiAgICB9KTtcbiAgICBpZih0b3RhbCtuZXdBZGRpdGlvbiA+IG1heFRva2Vucyl7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgbW9kaWZ5T25DbGljayA9IChlLCBpbmRleCwgZGlmZiwgZWxlbSkgPT4ge1xuICAgIGxldCBuZXdBcnJheSA9IFsuLi51bml0c107XG4gICAgaWYoKG5ld0FycmF5W2luZGV4XStkaWZmKSA+PSAwKXtcbiAgICAgIGlmKGRpZmYgPiAwKVxuICAgICAge1xuICAgICAgICBpZighY2hlY2tJZkZ1bGwoZGlmZip0b2tlbnNQZXJVbml0W2luZGV4XSkpe1xuICAgICAgICAgIG5ld0FycmF5W2luZGV4XSA9IG5ld0FycmF5W2luZGV4XSArIGRpZmY7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIG5ld0FycmF5W2luZGV4XSA9IG5ld0FycmF5W2luZGV4XSArIGRpZmY7XG4gICAgICB9XG4gICAgICBzZXRVbml0cyhuZXdBcnJheSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZ2VuZXJhdGVUb2tlbnMgPSAoKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRVc2VkVG9rZW5zID0gdW5pdHMubWFwKChlbGVtLCBpbmRleCkgPT4ge1xuICAgICAgbGV0IGN1ck9wdGlvblBhcmFtcyA9IGdldE9wdGlvblBhcmFtcygpW2luZGV4XTtcbiAgICAgIHJldHVybiBBcnJheShlbGVtKmN1ck9wdGlvblBhcmFtc1tcInVuaXRWYWx1ZVwiXSkuZmlsbChjdXJPcHRpb25QYXJhbXNbXCJuYW1lXCJdWzBdKTtcbiAgICB9KTtcbiAgICBsZXQgY29uY2F0VG9rZW5zID0gW10uY29uY2F0LmFwcGx5KFtdLCBjdXJyZW50VXNlZFRva2Vucyk7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IG1heFRva2VucyB9KS5tYXAoKGVsZW0sIGluZGV4KSA9PiB7XG4gICAgICBsZXQgY3VyTGV0dGVyID0gY29uY2F0VG9rZW5zW2luZGV4XSA/IFN0cmluZyhjb25jYXRUb2tlbnNbaW5kZXhdKSA6IFwiXCI7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRva2VuQ29udGFpbmVyXCIga2V5PXtpbmRleH0+XG4gICAgICAgICAgPHA+e2N1ckxldHRlcn08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgcmVuZGVyUm93cyA9IChjaG9pY2VzKSA9PiB7XG4gICAgcmV0dXJuIGNob2ljZXMubWFwKCAoZWxlbSxpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcHRpb25Vbml0XCIga2V5PXtpbmRleH0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3RvclpvbmVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aXNpb24gbWludXNab25lXCIgb25DbGljaz17KGUpID0+IG1vZGlmeU9uQ2xpY2soZSwgaW5kZXgsIC0xLCBlbGVtKX0+XG4gICAgICAgICAgICAgIDxoMz4tPC9oMz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpc2lvbiBjZW50cmFsWm9uZVwiPlxuICAgICAgICAgICAgICA8aDM+e3VuaXRzW2luZGV4XX08L2gzPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdmlzaW9uIHBsdXNab25lXCIgb25DbGljaz17KGUpID0+IG1vZGlmeU9uQ2xpY2soZSwgaW5kZXgsIDEsIGVsZW0pfT5cbiAgICAgICAgICAgICAgPGgzPis8L2gzPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0Wm9uZVwiPlxuICAgICAgICAgICAgPGgzPntlbGVtLm5hbWV9PC9oMz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5saW5ldGV4dFwiPlxuICAgICAgICAgICAgICA8aDU+e2VsZW0udW5pdFZhbHVlfSBqZXRvbnMgcGFyIHVuaXTDqSZuYnNwOyYjODIyNjsmbmJzcDt7ZWxlbS51bml0VFdodmFsdWV9IFRXaCBwYXIgdW5pdMOpPC9oNT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicmVwYXJ0aXRpb25cIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3B0aW9uWm9uZVwiPlxuICAgICAgICB7XG4gICAgICAgICAgcmVuZGVyUm93cyhwcm9wcy5jaG9pY2VzLm1hcCgoZSwgaW5kZXgpID0+IHByb2Nlc3NDaG9pY2VzKGUsIHByb3BzLmNob2ljZXNfdmFsdWVzW2luZGV4XSkpKVxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ19oZWFkZXJcIj5cbiAgICAgICAgICAgIDxoNT5Sw6lwYXJ0aXRpb24gZGUgdm9zIGpldG9uczwvaDU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX3ZhbHVlXCI+XG4gICAgICAgICAgICA8R2F1Z2VzIGRvbGxhcnM9e3Byb3BzLmdhdWdlcy5wcm9wcy5kb2xsYXJzLWpldG9uc30gY29tbWl0dGVkPXtqZXRvbnN9IHBlcmZvcm1hbmNlPXtwcm9wcy5nYXVnZXMucHJvcHMucGVyZm9ybWFuY2V9Lz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ19oZWFkZXJcIj5cbiAgICAgICAgICAgIDxoNT7DiWxlY3RyaWNpdMOpIHByb2R1aXRlPC9oNT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vbml0b3JpbmdfdmFsdWVcIj5cbiAgICAgICAgICAgIDxoMz57dGVyYXdhdHRzfSBUV2g8L2gzPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAge3Byb3BzLmN1ckluZGV4ID4gMCA/XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIHByZXZcIiBvbkNsaWNrPXtwcmV2aW91c1Byb21wdH0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDpcbiAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgIH1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIG5leHRcIiBvbkNsaWNrPXtuZXh0UHJvbXB0fT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgPHA+U3VpdmFudDwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxuXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDaG9pY2UgfSBmcm9tIFwiLi9wcm9tcHRmaWxsL0Nob2ljZVwiO1xuaW1wb3J0IHsgTXVsdGlTZWxlY3Rpb24gfSBmcm9tIFwiLi9wcm9tcHRmaWxsL011bHRpU2VsZWN0aW9uXCI7XG5pbXBvcnQgeyBQcmludFByb21wdCB9IGZyb20gXCIuL3Byb21wdGZpbGwvUHJpbnRQcm9tcHRcIjtcbmltcG9ydCB7IFJlcGFydGl0aW9uIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9SZXBhcnRpdGlvblwiO1xuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gUHJvbXB0Qm94KHByb3BzKXtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuXG4gIH0sIFtdKTtcblxuICBjb25zdCBjaGFuZ2VQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKG5ld1ZhbHVlKSA9PiB7XG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KG5ld1ZhbHVlKTtcbiAgfSk7XG5cbiAgY29uc3QgdXBkYXRlRG9sbGFycyA9IHVzZUNhbGxiYWNrKCBhc3luYyAoZGlmZlZhbHVlKSA9PiB7XG4gICAgaWYoTnVtYmVyLmlzSW50ZWdlcihkaWZmVmFsdWUpKXtcbiAgICAgIHByb3BzLnVwZGF0ZURvbGxhcnMoZGlmZlZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHVwZGF0ZVBlcmZvcm1hbmNlID0gdXNlQ2FsbGJhY2soIGFzeW5jIChkaWZmVmFsdWUpID0+IHtcbiAgICBpZihOdW1iZXIuaXNJbnRlZ2VyKGRpZmZWYWx1ZSkpe1xuICAgICAgcHJvcHMudXBkYXRlUGVyZm9ybWFuY2UoZGlmZlZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHJlbmRlclN3aXRjaCA9IChwYXJhbSkgPT4ge1xuICAgIHN3aXRjaChwYXJhbSl7XG4gICAgICBjYXNlICdSZXBhcnRpdGlvbicgOlxuICAgICAgICByZXR1cm4gPFJlcGFydGl0aW9uIGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4J10pLnNwbGl0KCc7Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlc192YWx1ZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4X1ZhbGV1cnMnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRG9sbGFycz17dXBkYXRlRG9sbGFyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXVnZXM9e3Byb3BzLmdhdWdlc30vPjtcbiAgICAgIGNhc2UgJ0NhcnRlJzpcbiAgICAgICAgcmV0dXJuIDxDaG9pY2UgY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9IGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4J10pLnNwbGl0KCc7Jyl9IGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fSBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9Lz47XG4gICAgICBjYXNlICdTdWl2aSc6XG4gICAgICAgIHJldHVybiA8Q2hvaWNlIGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fSBjaG9pY2VzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peCddKS5zcGxpdCgnOycpfSBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH0gY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fS8+O1xuICAgICAgY2FzZSAnUHJpbnQnOlxuICAgICAgICByZXR1cm4gPFByaW50UHJvbXB0IGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ1RleHRlX1N1cHAnXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fS8+O1xuICAgICAgY2FzZSAnY2hvaXhSZXBvbnNlJzpcbiAgICAgICAgcmV0dXJuIDxDaG9pY2UgY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXgnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzX3ZhbHVlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXhfVmFsZXVycyddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgIGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cbiAgICAgICAgICAgICAgICAgICAgICBnYXVnZXM9e3Byb3BzLmdhdWdlc30vPjtcbiAgICAgIGNhc2UgJ0NhdGFzdHJvcGhlJzpcbiAgICAgICAgcmV0dXJuIDxDaG9pY2UgY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXgnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzX3ZhbHVlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXhfVmFsZXVycyddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgIGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cbiAgICAgICAgICAgICAgICAgICAgICBnYXVnZXM9e3Byb3BzLmdhdWdlc30vPjtcbiAgICAgIGNhc2UgJ0NvY2hlcic6XG4gICAgICAgIHJldHVybiA8TXVsdGlTZWxlY3Rpb24gY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peCddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlc192YWx1ZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4X1ZhbGV1cnMnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRG9sbGFycz17dXBkYXRlRG9sbGFyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhdWdlcz17cHJvcHMuZ2F1Z2VzfS8+O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDxDaG9pY2UgY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9IGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4J10pLnNwbGl0KCc7Jyl9IGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fSBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9Lz47XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWVCb3hcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvbXB0Qm94XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdXJ0aXRyZVwiPlxuICAgICAgICAgICAgPGg0PntwYXJzZShwcm9wcy5jdXJQcm9tcHRbJ1N1amV0J10pfTwvaDQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJxdWVzdGlvblwiPlxuICAgICAgICAgICAgPHA+e3BhcnNlKHByb3BzLmN1clByb21wdFsnUXVlc3Rpb24nXSl9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge1xuICAgICAgICAgIHJlbmRlclN3aXRjaChwcm9wcy5jdXJQcm9tcHRbJ1R5cGUnXSlcbiAgICAgICAgfVxuXG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxuXG5cbn1cbiIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBHYXVnZXMgfSBmcm9tIFwiLi9nYXVnZXMvR2F1Z2VzXCI7XG5pbXBvcnQgeyBJbnRyb0JveCB9IGZyb20gXCIuL2ludHJvQm94XCI7XG5pbXBvcnQgeyBQcm9tcHRCb3ggfSBmcm9tIFwiLi9Qcm9tcHRCb3hcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIE1haW5GcmFtZShwcm9wcyl7XG5cbiAgY29uc3QgW2dhbWVTdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZSgnSURMRScpO1xuICBjb25zdCBbZ2FtZUluZGV4LCBzZXRHYW1lSW5kZXhdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtkb2xsYXJzLCBzZXREb2xsYXJzXSA9IHVzZVN0YXRlKDUwKTtcbiAgY29uc3QgW3BlcmZvcm1hbmNlLCBzZXRQZXJmb3JtYW5jZV0gPSB1c2VTdGF0ZSg1MCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnY2hlY2tpbmcgcHJvcHMgbWFwT2JqOicsIHByb3BzLm1hcE9iaik7XG4gIH0sW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2dhbWUgJywgZ2FtZVN0YXR1cyk7XG5cbiAgfSwgW2dhbWVTdGF0dXNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGdldEdhbWVQcm9tcHQoZ2FtZUluZGV4KTtcbiAgfSwgW2dhbWVJbmRleF0pO1xuXG4gIGNvbnN0IGdhbWVTdGFydCA9ICgpID0+IHtcbiAgICBzZXRTdGF0dXMoJ1NUQVJURUQnKTtcbiAgICBzZXRHYW1lSW5kZXgoMCk7XG4gIH1cblxuICBjb25zdCBnYW1lRW5kID0gKCkgPT4ge1xuICAgIHNldFN0YXR1cygnRU5EJyk7XG4gIH1cblxuICBjb25zdCBnZXRHYW1lUHJvbXB0ID0gKGdhbWVJbmRleCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdjdXJyZW50IGdhbWUgcHJvbXB0OicsIHByb3BzLmdhbWVEYXRhLmZpbHRlcihlbGVtID0+IHtyZXR1cm4gU3RyaW5nKGVsZW1bXCJJbmRleFwiXSkgPT09IFN0cmluZyhnYW1lSW5kZXgpO30pKTtcbiAgfVxuXG4gIGNvbnN0IHVwZGF0ZURvbGxhcnMgPSAoZGlmZikgPT4ge1xuICAgIGlmKGRvbGxhcnMgKyBkaWZmID49IDApe1xuICAgICAgc2V0RG9sbGFycyhkb2xsYXJzID0+IGRvbGxhcnMgKyBkaWZmKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGdhbWVFbmQoKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCB1cGRhdGVQZXJmb3JtYW5jZSA9IChkaWZmKSA9PiB7XG4gICAgaWYocGVyZm9ybWFuY2UgKyBkaWZmID49IDApe1xuICAgICAgc2V0UGVyZm9ybWFuY2UocGVyZm9ybWFuY2UgPT4gcGVyZm9ybWFuY2UgKyBkaWZmKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGdhbWVFbmQoKTtcbiAgICB9XG5cbiAgfVxuXG4gIGNvbnN0IGRvbUVsZW1lbnQgPSBnYW1lU3RhdHVzID09PSBcIklETEVcIiA/XG4gICAgKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYW1lU2NyZWVuXCI+XG4gICAgICAgIDxJbnRyb0JveCBpbnRyb0VsZW09e3Byb3BzLmludHJvRWxlbX0gbWFwT2JqPXtwcm9wcy5tYXBPYmp9IGdhbWVTdGFydD17Z2FtZVN0YXJ0fSAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICAgIDpcbiAgICBnYW1lU3RhdHVzID09PSBcIkVORFwiID9cbiAgICAgICg8ZGl2PjwvZGl2PilcbiAgICAgIDpcbiAgICAgIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYW1lU2NyZWVuXCI+XG4gICAgICAgICAgPFByb21wdEJveCBjdXJJbmRleD17Z2FtZUluZGV4fVxuICAgICAgICAgICAgY3VyUHJvbXB0PXtwcm9wcy5nYW1lRGF0YVtnYW1lSW5kZXhdfVxuICAgICAgICAgICAgY2hhbmdlUHJvbXB0PXtzZXRHYW1lSW5kZXh9XG4gICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxuICAgICAgICAgICAgdXBkYXRlUGVyZm9ybWFuY2U9e3VwZGF0ZVBlcmZvcm1hbmNlfVxuICAgICAgICAgICAgZ2F1Z2VzPXs8R2F1Z2VzIGRvbGxhcnM9e2RvbGxhcnN9IHBlcmZvcm1hbmNlPXtwZXJmb3JtYW5jZX0vPn0vPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gIHJldHVybiBkb21FbGVtZW50O1xufVxuIiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb20vY2xpZW50XCI7XG5pbXBvcnQgeyByZW5kZXJUb1N0YXRpY01hcmt1cCB9IGZyb20gJ3JlYWN0LWRvbS9zZXJ2ZXInO1xuaW1wb3J0IHsgTWFpbkZyYW1lIH0gZnJvbSAnLi9jb21wb25lbnRzL21haW5mcmFtZSc7XG5pbXBvcnQgeyBvcHRpb25zRHJvcGRvd25Db25zdGFudHMsIGNvbnRlbnRIZWFkZXJDb25zdGFudHMgfSBmcm9tIFwiLi4vZ2VuZXJhdG9yL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgSW50cm9TZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9JbnRyb1NlY3Rpb24nO1xuXG5leHBvcnQgY2xhc3MgRW5naW5lIHtcblxuICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIG9wdGlvbkRhdGEsIGludHJvT2JqLCBnYW1lRGF0YSl7XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgY29uc3Qgcm9vdEVsZW0gPSB0aGlzLmNvbnRhaW5lci5hcHBlbmQoJ2RpdicpXG4gICAgICAuY2xhc3NlZCgncm9vdEVsZW0nLCB0cnVlKTtcbiAgICB0aGlzLmVuZ2luZVJvb3QgPSBSZWFjdERPTS5jcmVhdGVSb290KHJvb3RFbGVtLm5vZGUoKSk7XG4gICAgdGhpcy5vcHRpb25EYXRhID0gb3B0aW9uRGF0YTtcbiAgICB0aGlzLmFtb3JjZSA9IGludHJvT2JqW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdO1xuICAgIHRoaXMuZ2FtZURhdGEgPSBnYW1lRGF0YTtcbiAgICBjb25zb2xlLmxvZygnZ2FtZSBEYXRhIGlzIDogJywgdGhpcy5nYW1lRGF0YSk7XG4gICAgdGhpcy5pbml0RW5naW5lKCk7XG4gIH1cblxuICBpbml0RW5naW5lKCl7XG4gICAgY29uc3QgaW50cm9FbGVtID0gKDxJbnRyb1NlY3Rpb25cbiAgICAgIGtleT17XCJnYW1lSW50cm9cIn1cbiAgICAgIHNlY3Rpb25UeXBlPXtvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLmludHJvdGl0cmV9XG4gICAgICBvcHRpb25EYXRhPXt0aGlzLm9wdGlvbkRhdGF9XG4gICAgICBhbW9yY2U9e3RoaXMuYW1vcmNlfVxuICAgICAgYmFja2dyb3VuZD17bnVsbH1cbiAgICAgIGNsYXNzZXM9e1wiXCJ9XG4gICAgICAvPik7XG5cbiAgICB0aGlzLmVuZ2luZVJvb3QucmVuZGVyKDxNYWluRnJhbWUgaW50cm9FbGVtPXtpbnRyb0VsZW19IGdhbWVTdGF0dXM9e3RoaXMuZ2FtZVN0YXR1c30gZ2FtZURhdGE9e3RoaXMuZ2FtZURhdGF9Lz4pO1xuICB9XG5cbn1cbiIsIi8qKlxuICogdml6LmpzXG4gKiA9PT09PT09XG4gKiBGaWxlIHVzZWQgdG8gZGVmaW5lIHRoZSB2aXN1YWxpemF0aW9uIHNlY3Rpb24uXG4gKi9cblxuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IHsgZ2V0U3RydWN0dXJlLCBnZW5lcmF0ZUNhbGxiYWNrcywgZ2V0T3B0aW9ucyB9IGZyb20gJy4vZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvci5qcyc7XG5pbXBvcnQgeyBjYWxsYmFja3MgfSBmcm9tICcuLi9kYXRhL3N0cnVjdHVyZS9jYWxsYmFja3MuanMnO1xuXG5pbXBvcnQgeyBNYXAgfSBmcm9tICdsZWRldm9pci1kYXRhdml6JztcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gJy4vZ2FtZS9lbmdpbmUuanMnO1xuXG5jb25zdCBjb25maWcgPSB7XG4gIHdpZHRoOiA1MDAsXG4gIGhlaWdodDogNTAwLFxuICBtYXJnaW46IHtcbiAgICB0b3A6IDEwMCxcbiAgICByaWdodDogMTAwLFxuICAgIGJvdHRvbTogMTAwLFxuICAgIGxlZnQ6IDEwMFxuICB9XG59XG5jb25zdCBmdWxsV2lkdGggPSBjb25maWcubWFyZ2luLmxlZnQgKyBjb25maWcud2lkdGggKyBjb25maWcubWFyZ2luLnJpZ2h0O1xuY29uc3QgZnVsbEhlaWdodCA9IGNvbmZpZy5tYXJnaW4udG9wICsgY29uZmlnLmhlaWdodCArIGNvbmZpZy5tYXJnaW4uYm90dG9tO1xuY29uc3QgbWFwQm94U3R5bGUgPSBcIm1hcGJveDovL3N0eWxlcy9sZWRldm9pci9jbGFsOXpsZmswMDRhMTVxb2hocjdyNDk1XCI7XG5cbmNvbnN0IGN1c3RvbUNhbGxiYWNrc05lZWRlZCA9IHRydWU7IC8vIFNldCB0byB0cnVlIGlmIGN1c3RvbSBjYWxsYmFja3MgYXJlIG5lZWRlZFxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZShjb250ZW50RGF0YSwgb3B0aW9ucykge1xuXG4gIHJldHVybiBkMy5jc3YoXCJodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2UVFaM3N6MHExdm5abW9ZWVI1SXJDZnVPTmhIY053NTBpRHRiZzFIMm1JWDhsSERMMUJRNHNBTWk3aUFwU0UxRzlXUVRXMmpIY1d2NEtXL3B1Yj9naWQ9MCZzaW5nbGU9dHJ1ZSZvdXRwdXQ9Y3N2XCIpXG4gICAgLnRoZW4oIGdhbWVEYXRhID0+IHtcblxuICAgICAgY29uc3QgbWFwQ29udGFpbmVyID0gZDMuc2VsZWN0KFwiLmdhbWUtYXJlYVwiKTtcblxuICAgICAgY29uc3QgZW5naW5lID0gbmV3IEVuZ2luZShtYXBDb250YWluZXIsIGdldE9wdGlvbnMob3B0aW9ucyksIGNvbnRlbnREYXRhWzBdLCBnYW1lRGF0YSk7XG5cbiAgICAgIGxldCBhdXRvQ2FsbGJhY2tzO1xuICAgICAgc2V0dXBWaXooY29udGVudERhdGEsb3B0aW9ucyk7XG4gICAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgYXV0b0NhbGxiYWNrcyA9IGdlbmVyYXRlQ2FsbGJhY2tzKGNvbnRlbnREYXRhLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIGF1dG9DYWxsYmFja3MgPSBjYWxsYmFja3M7XG4gICAgICB9XG5cbiAgICAgIGlmKGN1c3RvbUNhbGxiYWNrc05lZWRlZCl7XG4gICAgICAgIC8vaWYgY3VzdG9tIGNhbGxiYWNrcyBhcmUgbmVlZGVkLCBzdWNoIGFzIFZpc3VhbGl6YXRpb24gdHJhbnNmb3JtYXRpb25zLCBpbmNsdWRlIHRoZW0gaGVyZS5cbiAgICAgICAgLy8gVGhpcyBhbGxvd3MgdG8gdXNlIGFueSBvYmplY3QgY3JlYXRlZCBpbiB2aXouanMgKGdyYXBocywgdG9vbHMsIGV0YykgaW4gdGhlIGNhbGxiYWNrcy5cbiAgICAgICAgLy8gWW91IHdpbGwgbmVlZCB0byBtYW51YWxseSBjcmVhdGUgdGhlIGNvcnJlY3QgbnVtYmVyIG9mIGNhbGxiYWNrcyB0byBtYXRjaCB0aGUgdml6IHNlY3Rpb25zXG5cbiAgICAgICAgbGV0IGN1c3RvbUNhbGxiYWNrcyA9IFtcbiAgICAgICAgICBbXG4gICAgICAgICAgICAoKSA9PiB7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIF1cbiAgICAgICAgcmV0dXJuIGN1c3RvbUNhbGxiYWNrcztcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdXRvQ2FsbGJhY2tzO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBzZXR1cFZpeihjb250ZW50RGF0YSwgb3B0aW9ucyl7XG5cbiAgY29uc3QgZnVsbFN0cnVjdHVyZSA9IGdldFN0cnVjdHVyZShjb250ZW50RGF0YSwgb3B0aW9ucyk7XG4gIGNvbnNvbGUubG9nKCdjaGVja2luZyBzdHJ1Y3R1cmU6JywgZnVsbFN0cnVjdHVyZSk7XG4gIGZ1bGxTdHJ1Y3R1cmUubWFwKHNlY3Rpb25PYmogPT4ge1xuXG4gICAgaWYoc2VjdGlvbk9iai5zZWN0aW9uVHlwZSA9PT0gXCJ2aXotc2VjdGlvblwiKXtcbiAgICAgIHNlY3Rpb25PYmouc3RlcHMubWFwKChzdGVwLGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYoc3RlcC52aXN1YWwgIT09IFwiXCIpe1xuICAgICAgICAgICAgaWYoaW5kZXggPT09IDApe1xuICAgICAgICAgICAgICBkMy5zZWxlY3QoYCMke3NlY3Rpb25PYmoua2V5fV8ke2luZGV4fWApLnN0eWxlKCdvcGFjaXR5JywgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICBkMy5zZWxlY3QoYCMke3NlY3Rpb25PYmoua2V5fV8ke2luZGV4fWApLnN0eWxlKCdvcGFjaXR5JywgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxufSk7XG59XG5cbmZ1bmN0aW9uIHNldHVwVmlkZW9zKCl7XG4gIGxldCB2aWRlb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidmlkZW9cIik7XG4gICAgdmlkZW9zLmZvckVhY2goKHZpZGVvKSA9PiB7XG4gICAgICAvLyBXZSBjYW4gb25seSBjb250cm9sIHBsYXliYWNrIHdpdGhvdXQgaW5zdGVyYWN0aW9uIGlmIHZpZGVvIGlzIG11dGVcbiAgICAgIHZpZGVvLm11dGVkID0gdHJ1ZTtcbiAgICAgIHZpZGVvLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgIC8vIFBsYXkgaXMgYSBwcm9taXNlIHNvIHdlIG5lZWQgdG8gY2hlY2sgd2UgaGF2ZSBpdFxuICAgICAgbGV0IHBsYXlQcm9taXNlID0gdmlkZW8ucGxheSgpO1xuICAgICAgaWYgKHBsYXlQcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKChfKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICAgICAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyAhPT0gMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXZpZGVvLnBhdXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5jdXJyZW50VGltZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlkZW8ucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7IHRocmVzaG9sZDogMC4yIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh2aWRlbyk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG59XG4iLCIvKipcclxuICogc2Nyb2xsZXIuanNcclxuICogPT09PT09PT09PT1cclxuICogRGVmaW5lcyB0aGUgbG9naWMgdXNlZCBieSB0aGUgc2Nyb2xsZXIuIFRoaXMgc2NyaXB0IGRvZXMgbm90IG5lZWQgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzIGFuZCB1c2VzIG5hdGl2ZSBmdW5jdGlvbnNcclxuICogb2YgdGhlIGJyb3dzZXIuXHJcbiAqXHJcbiAqIC8hXFwgUExFQVNFLCBETyBOT1QgTU9ESUZZIFRISVMgRklMRS5cclxuICpcclxuICogQGF1dGhvciBBbnRvaW5lIELDqWxhbmQgPGFiZWxhbmRAbGVkZXZvaXIuY29tPlxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBEZWZpbmVzIGEgc3RlcCBhc3NvY2lhdGVkIHdpdGggYSBzcGVjaWZpYyB2aXN1YWxpemF0aW9uLiBBIHN0ZXAgaXMgYWN0aXZhdGVkIG9yIGRlYWN0aXZhdGVkIGJhc2VkIG9uIHRoZSBzY3JvbGxcclxuICogcG9zaXRpb24uIFRoaXMgY2xhc3MgaXMgdXNlZCBieSB0aGUgc2Nyb2xsZXIgZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBTY3JvbGxlclN0ZXAge1xyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIFNjcm9sbGVyU3RlcC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBlbCAgICAgICAgICBUaGUgbmF0aXZlIGVsZW1lbnQgdGhhdCByZXByZXNlbnRzIHRoZSBzdGVwIGluIHRoZSBIVE1MIGRvY3VtZW50LlxyXG4gICAqIEBwYXJhbSBpbmRleCAgICAgICBUaGUgaW5kZXggb2YgdGhlIHN0ZXAuXHJcbiAgICogQHBhcmFtIGNhbGxiYWNrICAgIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIHN0ZXAgaXMgYWN0aXZhdGUuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoZWwsIGluZGV4LCBjYWxsYmFjaykge1xyXG4gICAgdGhpcy5lbCA9IGVsO1xyXG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5faXNBY3RpdmF0ZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWN0aXZhdGVzIHRoZSBjdXJyZW50IHN0ZXAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gc2Nyb2xsRGlyZWN0aW9uICAgVGhlIGN1cnJlbnQgc2Nyb2xsIGRpcmVjdGlvbi5cclxuICAgKi9cclxuICBhY3RpdmF0ZShzY3JvbGxEaXJlY3Rpb24pIHtcclxuICAgIGlmICh0aGlzLl9pc0FjdGl2YXRlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX2lzQWN0aXZhdGUgPSB0cnVlO1xyXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIHRoaXMuY2FsbGJhY2soc2Nyb2xsRGlyZWN0aW9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlYWN0aXZhdGVzIHRoZSBjdXJyZW50IHN0ZXAuXHJcbiAgICovXHJcbiAgZGVhY3RpdmF0ZSgpIHtcclxuICAgIGlmICghdGhpcy5faXNBY3RpdmF0ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9pc0FjdGl2YXRlID0gZmFsc2U7XHJcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERlZmluZXMgdGhlIHNjcm9sbCBkaXJlY3Rpb25zLlxyXG4gKlxyXG4gKiBAdHlwZSB7e3VwOiBzdHJpbmcsIGRvd246IHN0cmluZ319XHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgc2Nyb2xsRGlyZWN0aW9ucyA9IHtcclxuICB1cDogJ3VwJyxcclxuICBkb3duOiAnZG93bidcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZWZpbmVzIHRoZSBzY3JvbGxlciB0byB1c2Ugd2l0aCB0aGUgTGUgRGV2b2lyJ3Mgc2Nyb2xseXRlbGxpbmcgYXJ0aWNsZXMuIFBsZWFzZSBzZWUgXCJSRUFETUUubWRcIlxyXG4gKiB0byBrbm93IGhvdyB0byB1c2UgaXQuXHJcbiAqXHJcbiAqIC8hXFwgQmUgc3VyZSB0byB1c2UgdGhlIGdvb2QgQ1NTIGNsYXNzIG5hbWVzIGluIHlvdXIgSFRNTCBmaWxlIGJlZm9yZSB0byB1c2UgdGhlIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gY2FsbGJhY2tzICAgQSBtdWx0aS1kaW1lbnNpb25hbCBhcnJheSBvZiBjYWxsYmFja3MgdG8gdXNlIHdpdGggZWFjaCBzdGVwLlxyXG4gKiBAcmV0dXJucyB7Kn0gICAgICAgVGhlIGluc3RhbmNlIG9mIHRoZSBzY3JvbGxlci5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzY3JvbGxlcihjYWxsYmFja3MpIHtcclxuICBsZXQgX29mZnNldFRvcCA9IDA7XHJcbiAgbGV0IF9vZmZzZXRCb3R0b20gPSAwO1xyXG5cclxuICBsZXQgaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgbGV0IGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICBsZXQgbGFzdFNjcm9sbCA9IDA7XHJcbiAgbGV0IHN0ZXBzID0gW107XHJcbiAgbGV0IHZpeiA9IFtdO1xyXG4gIGxldCB2aXNpYmxlU3RlcHMgPSBbXTtcclxuICBcclxuICBjb25zdCBhcnRpY2xlUmVtaW5kZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZS1yZW1pbmRlcicpO1xyXG4gIGNvbnN0IHNjcm9sbFByb2dyZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyID4gLnByb2dyZXNzJyk7XHJcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50cm8tc2VjdGlvbiBoMScpO1xyXG5cclxuICBjb25zdCB2aXpTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52aXotc2VjdGlvbicpO1xyXG4gIGlmICh2aXpTZWN0aW9ucy5sZW5ndGggIT09IGNhbGxiYWNrcy5sZW5ndGgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIG51bWJlciBvZiB2aXogc2VjdGlvbnMgKCR7dml6U2VjdGlvbnMubGVuZ3RofSkgbWlzbWF0Y2ggd2l0aCB0aGUgbGVuZ3RoIG9mIHRoZSBmaXJzdCBgICtcclxuICAgICAgYGRpbWVuc2lvbiBvZiB0aGUgY2FsbGJhY2tzIGFycmF5ICgke2NhbGxiYWNrcy5sZW5ndGh9KS4gUGxlYXNlLCBiZSBzdXJlIHRoYXQgdGhlIHR3byBlbGVtZW50cyBgICtcclxuICAgICAgYGhhdmUgdGhlIHNhbWUgc2l6ZS5gKTtcclxuICB9XHJcbiAgdml6U2VjdGlvbnMuZm9yRWFjaCgodml6U2VjdGlvbiwgaSkgPT4ge1xyXG4gICAgY29uc3Qgc2VjdGlvbnMgPSBbLi4udml6U2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCdzZWN0aW9uJyldO1xyXG4gICAgaWYgKHNlY3Rpb25zLmxlbmd0aCAhPT0gY2FsbGJhY2tzW2ldLmxlbmd0aCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBudW1iZXIgb2Ygc3RlcHMgKCR7c2VjdGlvbnMubGVuZ3RofSkgaW4gdGhlIHZpeiBzZWN0aW9uICMke2kgKyAxfSBtaXNtYXRjaCB3aXRoIHRoZSBgICtcclxuICAgICAgICBgbnVtYmVyIG9mIGNhbGxiYWNrcyBzcGVjaWZpZWQgKCR7Y2FsbGJhY2tzW2ldLmxlbmd0aH0pIGF0IHRoZSBpbmRleCBcIiR7aX1cIi4gUGxlYXNlLCBiZSBzdXJlIHRoYXQgdGhlIHR3byBgICtcclxuICAgICAgICBgZWxlbWVudHMgaGF2ZSB0aGUgc2FtZSBzaXplLmApO1xyXG4gICAgfVxyXG4gICAgc3RlcHMgPSBzdGVwcy5jb25jYXQoc2VjdGlvbnMubWFwKChlLCBqKSA9PiBuZXcgU2Nyb2xsZXJTdGVwKGUsIGAke2l9LSR7an1gLCBjYWxsYmFja3NbaV1bal0pKSk7XHJcbiAgICB2aXogPSB2aXouY29uY2F0KHZpeiwgdml6U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcudml6ID4gKicpKTtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgZGlzcGxheSBiYXNlZCBvbiBzY3JvbGxiYXIgcG9zaXRpb24uXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdCBfdXBkYXRlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFNjcm9sbCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgc3RlcHMuZm9yRWFjaChzdGVwID0+IHtcclxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgc3RlcCBpcyBpbiB0aGUgdmlld3BvcnQuXHJcbiAgICAgIGNvbnN0IGJvdW5kaW5nUmVjdCA9IHN0ZXAuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGlmIChpbm5lckhlaWdodCAtIGJvdW5kaW5nUmVjdC50b3AgLSBfb2Zmc2V0Qm90dG9tID4gMFxyXG4gICAgICAgICYmIGJvdW5kaW5nUmVjdC50b3AgKyBib3VuZGluZ1JlY3QuaGVpZ2h0IC0gX29mZnNldFRvcCA+IDApIHtcclxuICAgICAgICB2aXNpYmxlU3RlcHMucHVzaChzdGVwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdGVwLmRlYWN0aXZhdGUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRGlzcGxheSB0aGUgdGl0bGUgYXMgYSByZW1pbmRlciB3aGVuIHRoZSBtYWluIGFydGljbGUgdGl0bGUgaXMgaGlkZGVuLlxyXG4gICAgY29uc3QgaXNBcnRpY2xlUmVtaW5kZXJEaXNwbGF5ZWQgPSB0aXRsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPD0gMDtcclxuICAgIGNvbnN0IGlzQXJ0aWNsZVJlbWluZGVySXNWaXNpYmxlID0gYXJ0aWNsZVJlbWluZGVyLmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpO1xyXG4gICAgaWYgKGlzQXJ0aWNsZVJlbWluZGVyRGlzcGxheWVkICYmICFpc0FydGljbGVSZW1pbmRlcklzVmlzaWJsZSkge1xyXG4gICAgICBhcnRpY2xlUmVtaW5kZXIuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpXHJcbiAgICB9IGVsc2UgaWYgKCFpc0FydGljbGVSZW1pbmRlckRpc3BsYXllZCAmJiBpc0FydGljbGVSZW1pbmRlcklzVmlzaWJsZSkge1xyXG4gICAgICBhcnRpY2xlUmVtaW5kZXIuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9yIHRoZSB2aXNpYmxlIHN0ZXBzLCBjaG9vc2UgdGhlIGdvb2Qgb25lIGJhc2VkIG9uIHRoZSBzY3JvbGwgZGlyZWN0aW9uLlxyXG4gICAgdmlzaWJsZVN0ZXBzLmZvckVhY2goKHNlY3Rpb24sIGkpID0+IHtcclxuICAgICAgaWYgKGN1cnJlbnRTY3JvbGwgPj0gbGFzdFNjcm9sbCkgeyAvLyBTY3JvbGwgZG93biAo4oaTKVxyXG4gICAgICAgIGlmIChpID09PSB2aXNpYmxlU3RlcHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgc2VjdGlvbi5hY3RpdmF0ZShzY3JvbGxEaXJlY3Rpb25zLmRvd24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWN0aW9uLmRlYWN0aXZhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7IC8vIFNjcm9sbCB1cCAo4oaRKVxyXG4gICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICBzZWN0aW9uLmFjdGl2YXRlKHNjcm9sbERpcmVjdGlvbnMudXApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWN0aW9uLmRlYWN0aXZhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgX3VwZGF0ZVNjcm9sbFByb2dyZXNzKCk7XHJcblxyXG4gICAgLy8gUmVzZXQgdGhlIHZhcmlhYmxlcyBmb3IgdGhlIG5leHQgZnVuY3Rpb24gY2FsbC5cclxuICAgIHZpc2libGVTdGVwcyA9IFtdO1xyXG4gICAgbGFzdFNjcm9sbCA9IGN1cnJlbnRTY3JvbGw7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgc2Nyb2xsIHByb2dyZXNzaW9uIGluZGljYXRvci5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNvbnN0IF91cGRhdGVTY3JvbGxQcm9ncmVzcyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHdpblNjcm9sbCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgIGNvbnN0IHNjcm9sbGVkID0gKHdpblNjcm9sbCAvIGhlaWdodCkgKiAxMDA7XHJcbiAgICBzY3JvbGxQcm9ncmVzcy5zdHlsZS53aWR0aCA9IHNjcm9sbGVkICsgJyUnO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHB1YmxpY0ludGVyZmFjZSA9IHtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIHNjcm9sbGVyLiBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gY2FuIGJlIG9ubHkgY2FsbGVkIG9uY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSBpbnN0YW5jZSBvZiB0aGUgc2Nyb2xsZXIuXHJcbiAgICAgKi9cclxuICAgIGluaXRpYWxpemU6ICgpID0+IHtcclxuICAgICAgaWYgKGlzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzY3JvbGxlciBpcyBhbHJlYWR5IGluaXRpYWxpemVkLicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX3VwZGF0ZSk7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgX3VwZGF0ZVNjcm9sbFByb2dyZXNzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoKHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSA+IDApIHtcclxuICAgICAgICBfdXBkYXRlKCk7XHJcbiAgICAgIH1cclxuICAgICAgX3VwZGF0ZVNjcm9sbFByb2dyZXNzKCk7XHJcbiAgICAgIHJldHVybiBwdWJsaWNJbnRlcmZhY2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBvciBzZXRzIHRoZSB0b3Agb2Zmc2V0IHRvIHVzZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0VG9wXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIGluc3RhbmNlIG9mIHRoZSBzY3JvbGxlci5cclxuICAgICAqL1xyXG4gICAgb2Zmc2V0VG9wOiBvZmZzZXRUb3AgPT4ge1xyXG4gICAgICBpZiAob2Zmc2V0VG9wID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gX29mZnNldFRvcDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIob2Zmc2V0VG9wKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIG9mZnNldCBtdXN0IGJlIGFuIGludGVnZXIgbnVtYmVyLicpO1xyXG4gICAgICB9XHJcbiAgICAgIF9vZmZzZXRUb3AgPSBvZmZzZXRUb3A7XHJcbiAgICAgIHJldHVybiBwdWJsaWNJbnRlcmZhY2U7XHJcbiAgICB9ICxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgb3Igc2V0cyB0aGUgYm90dG9tIG9mZnNldCB0byB1c2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9mZnNldEJvdHRvbVxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSBpbnN0YW5jZSBvZiB0aGUgc2Nyb2xsZXIuXHJcbiAgICAgKi9cclxuICAgIG9mZnNldEJvdHRvbTogb2Zmc2V0Qm90dG9tID0+IHtcclxuICAgICAgaWYgKG9mZnNldEJvdHRvbSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIF9vZmZzZXRCb3R0b207XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKG9mZnNldEJvdHRvbSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBvZmZzZXQgbXVzdCBiZSBhbiBpbnRlZ2VyIG51bWJlci4nKTtcclxuICAgICAgfVxyXG4gICAgICBfb2Zmc2V0Qm90dG9tID0gb2Zmc2V0Qm90dG9tO1xyXG4gICAgICByZXR1cm4gcHVibGljSW50ZXJmYWNlO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgcmV0dXJuIHB1YmxpY0ludGVyZmFjZTtcclxufVxyXG4iLCJcclxuaW1wb3J0IHsgaW5pdGlhbGl6ZSBhcyB2MSB9IGZyb20gJy4uL3Zpeic7XHJcbmltcG9ydCB7IHNjcm9sbGVyIH0gZnJvbSAnLi4vc2Nyb2xsZXInO1xyXG5pbXBvcnQgTGF6eUxvYWQgZnJvbSBcInZhbmlsbGEtbGF6eWxvYWRcIjtcclxuY29uc3QgaGVhZGVySGVpZ2h0ID0gNDA7XHJcbmltcG9ydCBzdGlja3lCaXRzIGZyb20gJ3N0aWNreWJpdHMnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdFNjcm9sbGVyKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKXtcclxuXHJcbiAgICBsZXQgZWxlbWVudHMgPSBbXTtcclxuICAgIFsnLnZpeicsICcuZnVsbC1wYWdlLXNlY3Rpb24gPiBpbWcnLCAnLmZ1bGwtcGFnZS1zZWN0aW9uID4gdmlkZW8nXS5mb3JFYWNoKHNlbGVjdG9yID0+IHtcclxuICAgICAgZWxlbWVudHMgPSBlbGVtZW50cy5jb25jYXQoQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkpO1xyXG4gICAgfSk7XHJcbiAgICBzdGlja3lCaXRzKGVsZW1lbnRzLCB7IHN0aWNreUJpdFN0aWNreU9mZnNldDogaGVhZGVySGVpZ2h0IH0pO1xyXG4gIFxyXG4gICAgY29uc3QgbGwgPSBuZXcgTGF6eUxvYWQoe1xyXG4gICAgICBlbGVtZW50c19zZWxlY3RvcjogXCIubGF6eVwiLFxyXG4gICAgICB0aHJlc2hvbGQ6IDUwMFxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBQcm9taXNlLmFsbChbdjEoY29udGVudERhdGEsIHBhcmFtc0RhdGEpXSkudGhlbigoW2NhbGxiYWNrc1YxXSkgPT4gIHtcclxuICAgICAgc2Nyb2xsZXIoY2FsbGJhY2tzVjEpXHJcbiAgICAgICAgLm9mZnNldFRvcChoZWFkZXJIZWlnaHQpXHJcbiAgICAgICAgLm9mZnNldEJvdHRvbSgwKVxyXG4gICAgICAgIC5pbml0aWFsaXplKCk7XHJcbiAgICB9KTtcclxuICB9IiwiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSW50cm9TZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvSW50cm9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBUZXh0U2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1RleHRTZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBWaXpTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVml6U2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgRnVsbFBhZ2VTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRnVsbFBhZ2VTZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBvcHRpb25zRHJvcGRvd25Db25zdGFudHMgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcbmltcG9ydCB7IGdldFN0cnVjdHVyZSB9IGZyb20gXCIuL3N0cnVjdHVyZUdlbmVyYXRvci5qc1wiO1xuaW1wb3J0IHsgaW5pdFNjcm9sbGVyIH0gZnJvbSBcIi4vaW5pdFNjcm9sbGVyLmpzXCI7XG5cblxuLyoqXG4gKiBUYWtlIHByb3BzIChhcnRpY2xlIHN0cnVjdHVyZSBhcyBDU1YgYW5kIHBhcmFtcykgYW5kIHRyYW5zZm9ybSBpdCBhcyBIVE1MIGFyY2hpdGVjdHVyZVxuICogQHBhcmFtICB7T2JqZWN0fSBjb250ZW50RGF0YSBBcnRpY2xlJ3MgQ1NWIHN0cnVjdHVyZVxuICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc0RhdGEgQXJ0aWNsZSBwYXJhbWV0ZXJzXG4gKiBAcmV0dXJuIHtPYmplY3R9IE9iaiBIVE1MIGNvZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFJlbmRlclN0cnVjdHVyZShwcm9wcyl7XG4gICAgaWYocHJvcHMucmVuZGVyZWQpe1xuICAgICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuXG4gICAgICAgICAgICBpbml0U2Nyb2xsZXIocHJvcHMuY29udGVudERhdGEsIHByb3BzLnBhcmFtc0RhdGEpO1xuXG4gICAgICAgIH0sIFtdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyRGF0YShnZXRTdHJ1Y3R1cmUocHJvcHMuY29udGVudERhdGEsIHByb3BzLnBhcmFtc0RhdGEpKTtcblxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyRGF0YShzdHJ1Y3R1cmVEYXRhKXtcblxuICAgIGxldCByZW5kZXJlZERhdGEgPSB7fTtcblxuICAgIE9iamVjdC5rZXlzKHN0cnVjdHVyZURhdGEpLm1hcCgoc2VjdGlvbktleSxpbmRleCkgPT4ge1xuICAgICAgICBsZXQgY3VyU2VjdGlvbiA9IHN0cnVjdHVyZURhdGFbc2VjdGlvbktleV07XG4gICAgICAgIGlmKGN1clNlY3Rpb24uc2VjdGlvblR5cGUgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMuaW50cm90aXRyZSl7XG4gICAgICAgICAgICByZW5kZXJlZERhdGFbc2VjdGlvbktleV0gPSAoKDxJbnRyb1NlY3Rpb24ga2V5PXtjdXJTZWN0aW9uLmtleX0gc2VjdGlvblR5cGU9e2N1clNlY3Rpb24uc2VjdGlvblR5cGV9IG9wdGlvbkRhdGE9e2N1clNlY3Rpb24ub3B0aW9uRGF0YX0gYW1vcmNlPXtwYXJzZShjdXJTZWN0aW9uLmFtb3JjZSl9IGJhY2tncm91bmQ9e2N1clNlY3Rpb24uYmFja2dyb3VuZH0gY2xhc3Nlcz17Y3VyU2VjdGlvbi5jbGFzc2VzfSAvPikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoY3VyU2VjdGlvbi5zZWN0aW9uVHlwZSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy50ZXh0ZWNsYXNzaXF1ZSl7XG5cbiAgICAgICAgICAgIHJlbmRlcmVkRGF0YVtzZWN0aW9uS2V5XSA9ICgoPFRleHRTZWN0aW9uIGtleT17Y3VyU2VjdGlvbi5rZXl9IGlkPXtjdXJTZWN0aW9uLmtleX0gc2VjdGlvblR5cGU9e2N1clNlY3Rpb24uc2VjdGlvblR5cGV9IHRleHRzPXtjdXJTZWN0aW9uLnRleHRzfSBiYWNrZ3JvdW5kPXtjdXJTZWN0aW9uLmJhY2tncm91bmR9IGNsYXNzZXM9e2N1clNlY3Rpb24uY2xhc3Nlc30gdmlzdWVsY2xhc3Nlcz17Y3VyU2VjdGlvbi52aXN1ZWxjbGFzc2VzfSB2aXN1YWw9e2N1clNlY3Rpb24udmlzdWFsfSBmaWxlbmFtZT17Y3VyU2VjdGlvbi5maWxlbmFtZX0vPikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoY3VyU2VjdGlvbi5zZWN0aW9uVHlwZSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5wbGVpbmVwYWdldGl0cmUpe1xuICAgICAgICAgICAgcmVuZGVyZWREYXRhW3NlY3Rpb25LZXldID0gKCg8RnVsbFBhZ2VTZWN0aW9uIGtleT17Y3VyU2VjdGlvbi5rZXl9IGlkPXtjdXJTZWN0aW9uLmtleX0gc2VjdGlvblR5cGU9e2N1clNlY3Rpb24uc2VjdGlvblR5cGV9IGJhY2tncm91bmQ9e2N1clNlY3Rpb24uYmFja2dyb3VuZH0gY2xhc3Nlcz17Y3VyU2VjdGlvbi5jbGFzc2VzfSB2aXN1ZWxjbGFzc2VzPXtjdXJTZWN0aW9uLnZpc3VlbGNsYXNzZXN9IHZpc3VhbD17Y3VyU2VjdGlvbi52aXN1YWx9IG1haW5UaXRsZT17Y3VyU2VjdGlvbi50ZXh0cy5tYWluVGl0bGV9IHN1YlRpdGxlPXtjdXJTZWN0aW9uLnRleHRzLnN1YlRpdGxlfSBmaWxlbmFtZT17Y3VyU2VjdGlvbi5maWxlbmFtZX0gLz4pKVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoY3VyU2VjdGlvbi5zZWN0aW9uVHlwZSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy52aXpzZWN0aW9uKXtcbiAgICAgICAgICAgIHJlbmRlcmVkRGF0YVtzZWN0aW9uS2V5XSA9ICg8Vml6U2VjdGlvbiBrZXk9e2N1clNlY3Rpb24ua2V5fSBsaXN0SUQ9e2N1clNlY3Rpb24ubGlzdElEfSBzdGVwcz17Y3VyU2VjdGlvbi5zdGVwc30gY2xhc3NlZD17Y3VyU2VjdGlvbi5jbGFzc2VkfSBtZWRpYUluZm89e2N1clNlY3Rpb24ubWVkaWFJbmZvfSBiYWNrZ3JvdW5kPXtjdXJTZWN0aW9uLmJhY2tncm91bmR9Lz4pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMocmVuZGVyZWREYXRhKTtcbn1cbiIsIi8qKlxuICogYXBwLmpzXG4gKiA9PT09PT1cbiAqIE1haW4gZmlsZSBvZiB0aGUgYXBwbGljYXRpb24uIFRoaXMgZmlsZSBpcyB1c2VkIHRvIGluaXRpYWxpemUgdGhlIHNjcm9sbGVyIGFuZCBpbXBvcnRzIHRoZSB2aXN1YWxpemF0aW9ucyB1c2VkLlxuICovXG5cbid1c2Ugc3RyaWN0JztcbmltcG9ydCBzdHJ1Y3R1cmUgZnJvbSAnLi4vZGF0YS9zdHJ1Y3R1cmUvc3RydWN0dXJlLmpzb24nO1xuXG5pZighRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjKXtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jvb3QnKS5pbm5lckhUTUwgPSAoc3RydWN0dXJlLmh0bWxzdHJ1Yyk7XG59XG5cbmltcG9ydCAnLi4vYXNzZXRzL3N0eWxlcy9zdHlsZS5zY3NzJztcbmltcG9ydCB7Z29vZ2xlX2NvbmZpZ30gZnJvbSBcIi4uL2RhdGEvZ29vZ2xlX2NvbmZpZ1wiO1xuaW1wb3J0IHsgUmVuZGVyU3RydWN0dXJlIH0gZnJvbSAnLi9nZW5lcmF0b3IvUmVuZGVyU3RydWN0dXJlJztcbmltcG9ydCB7IGluaXRTY3JvbGxlciB9IGZyb20gJy4vZ2VuZXJhdG9yL2luaXRTY3JvbGxlcic7XG5pbXBvcnQgeyBnZW5lcmF0ZUNhbGxiYWNrcyB9IGZyb20gJy4vZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvcic7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJztcblxuaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjKXtcbiAgUHJvbWlzZS5hbGwoW2ltcG9ydChcInJlYWN0LWRvbS9jbGllbnRcIiksIGltcG9ydChcInJlYWN0LWRvbS9zZXJ2ZXJcIiksIGltcG9ydChcInJlYWN0XCIpXSlcbiAgICAudGhlbihwYWNrYWdlcyA9PiB7XG4gICAgICBjb25zdCBSZWFjdERPTSA9IHBhY2thZ2VzWzBdO1xuICAgICAgY29uc3QgUmVhY3RET01TZXJ2ZXIgPSBwYWNrYWdlc1sxXTtcbiAgICAgIGNvbnN0IFJlYWN0ID0gcGFja2FnZXNbMl07XG4gICAgICBhZGROb3RQdWJsaXNoZWQoKTtcbiAgICAgIGlmKEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmNvbnRlbnRVUkwpLnRoZW4oIGNvbnRlbnREYXRhID0+IHtcbiAgICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5wYXJhbXNVUkwpLnRoZW4oIHBhcmFtc0RhdGEgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm9vdCA9IFJlYWN0RE9NLmNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb290XCIpKTtcbiAgICAgICAgICAgIHJvb3QucmVuZGVyKFxuICAgICAgICAgICAgICA8UmVuZGVyU3RydWN0dXJlIGNvbnRlbnREYXRhPXtjb250ZW50RGF0YX0gcGFyYW1zRGF0YT17cGFyYW1zRGF0YX0gcmVuZGVyZWQ9e3RydWV9Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBhZGRGb290ZXIoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5jb250ZW50VVJMKS50aGVuKCBjb250ZW50RGF0YSA9PiB7XG4gICAgICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcucGFyYW1zVVJMKS50aGVuKCBwYXJhbXNEYXRhID0+IHtcbiAgICAgICAgICAgIGQzLmJsb2IoZ29vZ2xlX2NvbmZpZy5jb250ZW50VVJMKS50aGVuKGNvbnRlbnRCbG9iID0+IHtcbiAgICAgICAgICAgICAgZDMuYmxvYihnb29nbGVfY29uZmlnLnBhcmFtc1VSTCkudGhlbihwYXJhbXNCbG9iID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBnZW5lcmF0ZWRTdHJ1YyA9IFJlbmRlclN0cnVjdHVyZSh7Y29udGVudERhdGE6IGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhOiBwYXJhbXNEYXRhLCByZW5kZXI6IGZhbHNlfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaHRtbFN0cnVjID0gUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdGF0aWNNYXJrdXAoZ2VuZXJhdGVkU3RydWMpO1xuICAgICAgICAgICAgICAgIHdyaXRlSFRNTGZpbGUoaHRtbFN0cnVjLCBjb250ZW50QmxvYiwgcGFyYW1zQmxvYik7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVDYWxsYmFja3MoY29udGVudERhdGEscGFyYW1zRGF0YSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbn1cbmVsc2V7XG4gIGlmKEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgUHJvbWlzZS5hbGwoW2ltcG9ydChcInJlYWN0LWRvbS9jbGllbnRcIiksIGltcG9ydChcInJlYWN0XCIpXSlcbiAgICAudGhlbihwYWNrYWdlcyA9PiB7XG4gICAgICBjb25zdCBSZWFjdERPTSA9IHBhY2thZ2VzWzBdO1xuICAgICAgY29uc3QgUmVhY3QgPSBwYWNrYWdlc1sxXTtcbiAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmNvbnRlbnRVUkwpLnRoZW4oIGNvbnRlbnREYXRhID0+IHtcbiAgICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcucGFyYW1zVVJMKS50aGVuKCBwYXJhbXNEYXRhID0+IHtcbiAgICAgICAgICBjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJvb3RcIikpO1xuICAgICAgICAgIHJvb3QucmVuZGVyKFxuICAgICAgICAgICAgPFJlbmRlclN0cnVjdHVyZSBjb250ZW50RGF0YT17Y29udGVudERhdGF9IHBhcmFtc0RhdGE9e3BhcmFtc0RhdGF9IHJlbmRlcmVkPXt0cnVlfS8+XG4gICAgICAgICAgKTtcbiAgICAgICAgICBhZGRGb290ZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBlbHNle1xuICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmxvY2FsQ29udGVudFVSTCkudGhlbiggY29udGVudERhdGEgPT4ge1xuICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcubG9jYWxQYXJhbXNVUkwpLnRoZW4oIHBhcmFtc0RhdGEgPT4ge1xuICAgICAgICBpbml0U2Nyb2xsZXIoY29udGVudERhdGEsIHBhcmFtc0RhdGEpO1xuICAgICAgICBhZGRGb290ZXIoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyaXRlSFRNTGZpbGUoSFRNTFN0cnVjdCwgY29udGVudERhdGEsIHBhcmFtc0RhdGEpe1xuICBsZXQgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeSh7aHRtbHN0cnVjOiBgJHtIVE1MU3RydWN0fWB9LCBudWxsLCAyKV0sIHt0eXBlOiBcInRleHQvcGxhaW47Y2hhcnNldD11dGYtOFwifSk7XG4gIGxldCBjb250ZW50Q1NWID0gbmV3IEJsb2IoW2NvbnRlbnREYXRhXSwge3R5cGU6IFwidGV4dC9jc3Y7Y2hhcnNldD11dGYtOFwifSk7XG4gIGxldCBwYXJhbXNDU1YgPSBuZXcgQmxvYihbcGFyYW1zRGF0YV0sIHt0eXBlOiBcInRleHQvY3N2O2NoYXJzZXQ9dXRmLThcIn0pO1xuXG4gIHNhdmVBcyhjb250ZW50Q1NWLCBcImNvbnRlbnREYXRhLmNzdlwiKTtcbiAgc2F2ZUFzKHBhcmFtc0NTViwgXCJwYXJhbXNEYXRhLmNzdlwiKTtcbiAgc2F2ZUFzKGJsb2IsIFwic3RydWN0dXJlLmpzb25cIik7XG59XG5cbmZ1bmN0aW9uIGFkZE5vdFB1Ymxpc2hlZCgpe1xuICBjb25zdCBkaXYgPSBkMy5zZWxlY3QoJy5wdWxsLXJpZ2h0JykuaW5zZXJ0KFwibGlcIiwnbGknKTtcbiAgZGl2Lmh0bWwoYDxwIGNsYXNzPSdub3QtcHVibGlzaGVkJz5OZSBwYXMgcHVibGllcjwvcD5gKTtcbn1cblxuZnVuY3Rpb24gYWRkRm9vdGVyKCl7XG4gIC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvb3RlckNvbnRhaW5lcicpLnJlbW92ZSgpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9vdGVyQ29udGFpbmVyJykuaW5uZXJIVE1MID0gZDMuc2VsZWN0KGAjZm9vdGVyQ29udGVudGApLm5vZGUoKS5pbm5lckhUTUw7XG59XG4iLCJjb25zdCBnb29nbGVfY29uZmlnID0ge1xuICAgIFwiY29udGVudFVSTFwiOiBcImh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZTRXl3SkUwVlVneTNOc3EzVGdfb2gtVnM2MzNUU2ltZElIZmtYVHl6OUJiRXRXTlZndXJkMVRvdS1RNWFudmRPaXczY29DRmtEQ2lTWXEvcHViP2dpZD0wJnNpbmdsZT10cnVlJm91dHB1dD1jc3ZcIixcbiAgICBcInBhcmFtc1VSTFwiOiBcImh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZTRXl3SkUwVlVneTNOc3EzVGdfb2gtVnM2MzNUU2ltZElIZmtYVHl6OUJiRXRXTlZndXJkMVRvdS1RNWFudmRPaXczY29DRmtEQ2lTWXEvcHViP2dpZD00MDk5NTAyMzcmc2luZ2xlPXRydWUmb3V0cHV0PWNzdlwiLFxuICAgIFwibG9jYWxDb250ZW50VVJMXCI6IFwiLi9kYXRhL3N0cnVjdHVyZS9jb250ZW50RGF0YS5jc3ZcIixcbiAgICBcImxvY2FsUGFyYW1zVVJMXCI6IFwiLi9kYXRhL3N0cnVjdHVyZS9wYXJhbXNEYXRhLmNzdlwiXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtnb29nbGVfY29uZmlnfTtcbiJdLCJuYW1lcyI6WyJJbnRyb1NlY3Rpb24iLCJwcm9wcyIsImludHJvU2VjdGlvbk9iaiIsImNsYXNzTmFtZSIsImNsYXNzZXMiLCJhbW9yY2UiLCJvcHRpb25EYXRhIiwidGl0bGUiLCJiYWNrZ3JvdW5kIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJUZXh0U2VjdGlvbiIsInF1b3RlT2JqIiwiaXNRdW90ZSIsIlN0cmluZyIsImluY2x1ZGVzIiwidGV4dCIsInRleHRzIiwic3BsaXQiLCJhdXRob3IiLCJiaWdOdW1iZXJPYmoiLCJpc0JpZ051bWJlciIsIm51bWJlciIsInVuZGVyVGV4dCIsImlzVmlzdWFsIiwidmlzdWFsIiwidmlzdWFsT2JqIiwia2V5IiwiaWQiLCJzcmMiLCJmaWxlbmFtZSIsInZpc3VlbGNsYXNzZXMiLCJwYWRkaW5nQm90dG9tIiwiYXV0b1BsYXkiLCJsb29wIiwibXV0ZWQiLCJwbGF5c0lubGluZSIsInByZWxvYWQiLCJ0ZXh0U2VjdGlvbk9iaiIsInBhcnNlIiwic3RhcnRzV2l0aCIsIkRXQ2hhcnQiLCJpZnJhbWVSZWYiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsImhlaWdodCIsInNldFN0YXRlIiwib25NZXNzYWdlIiwidXNlQ2FsbGJhY2siLCJkYXRhIiwic291cmNlIiwiY3VycmVudCIsImNvbnRlbnRXaW5kb3ciLCJ1c2VFZmZlY3QiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlZiIsInNjcm9sbGluZyIsImZyYW1lQm9yZGVyIiwid2lkdGgiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJsb2FkaW5nIiwib3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzIiwicGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cyIsInRpdHJlIiwiYXV0ZXVycyIsImRhdGUiLCJWaXpTZWN0aW9uIiwic3RlcHMiLCJjdXJTdGVwQ2xhc3NlcyIsImN1ckNvbW1vbkNsYXNzIiwidml6U2VjdGlvbk9iaiIsImxpc3RJRCIsImNsYXNzZWQiLCJtYXAiLCJzdGVwIiwiaW5kZXgiLCJzdGVwY2xhc3NlcyIsIkFycmF5IiwibGVuZ3RoIiwiZm9yRWFjaCIsInN0ZXBFbGVtIiwiaWR4IiwiaXNBcnJheSIsImVsZW0iLCJpIiwicmVkdWNlIiwiYSIsImIiLCJGdWxsUGFnZVNlY3Rpb24iLCJmdWxscGFnZVNlY3Rpb25PYmoiLCJtYWluVGl0bGUiLCJjbGFzcyIsInN1YlRpdGxlIiwiZ2V0U3RydWN0dXJlIiwiY29udGVudERhdGEiLCJwYXJhbXNEYXRhIiwic3RydWN0dXJlRGF0YSIsInZpelNlY3Rpb25JRHMiLCJvcHRpb25zIiwiZ2V0T3B0aW9ucyIsImNvbnNvbGUiLCJsb2ciLCJyb3dEYXRhIiwiY3VyQW1vcmNlIiwic2VjdGlvbkJhY2tncm91bmQiLCJzZWN0aW9uVHlwZSIsInBhcnNlQ2xhc3NlcyIsImdhbWVpZCIsInRpdGxlT2JqIiwiaXNKc29uIiwiSlNPTiIsImN1ckRhdGEiLCJhdHRyaWJ1dHMiLCJzY3JvbGxUeXBlIiwiaGFzT3duUHJvcGVydHkiLCJjdXJWaXpTZWN0aW9uIiwicHVzaCIsImN1clNlY3Rpb24iLCJzZWN0aW9uQXR0ciIsIm1lZGlhSW5mbyIsIk9iamVjdCIsInZhbHVlcyIsInN0ciIsImUiLCJmcm9tIiwiam9pbiIsImF1dGhvcnMiLCJ1cmxzIiwibWFwYm94Z2wiLCJHYXVnZXMiLCJnYXVnZXNFbGVtcyIsIm1heFdpZHRoVmFsdWUiLCJkMyIsInNlbGVjdEFsbCIsIk1hdGgiLCJtYXgiLCJwYXJzZUludCIsImRvbGxhcnMiLCJwZXJmb3JtYW5jZSIsIm5vZGVzIiwibm9kZSIsImN1cldpZHRoIiwiYXR0ciIsInNlbGVjdCIsInJvdW5kIiwiSW50cm9Cb3giLCJzdGFydEdhbWUiLCJnYW1lU3RhcnQiLCJpbnRyb0VsZW0iLCJvbkNsaWNrIiwiQ2hvaWNlIiwic2VsZWN0aW9uIiwic2V0U2VsZWN0aW9uIiwib2JqIiwibmV4dFByb21wdCIsImNvc3QiLCJ1c2UiLCJ0cmlnZ2VyTmV4dCIsImN1clByb21wdCIsIk51bWJlciIsImlzSW50ZWdlciIsImNoYW5nZVByb21wdCIsInVwZGF0ZURvbGxhcnMiLCJ1cGRhdGVQZXJmb3JtYW5jZSIsInByZXZpb3VzUHJvbXB0IiwiY3VySW5kZXgiLCJjaG9pY2VzIiwiY2hvaWNlIiwiY2hvaWNlc192YWx1ZXMiLCJldmVudCIsInRhcmdldCIsInVwZGF0ZVNlbGVjdGVkIiwiZ2F1Z2VzIiwiTXVsdGlTZWxlY3Rpb24iLCJyZXNldFNlbGVjdGlvbiIsImNhbGN1bGF0ZVRvdGFsU2VsZWN0aW9uIiwiYWNjIiwiY3VyIiwiYWNjQ29zdCIsImFjY1BlcmZvcm1hbmNlIiwibmV3QXJyYXkiLCJQcmludFByb21wdCIsIm1lc3NhZ2UiLCJSZXBhcnRpdGlvbiIsImpldG9ucyIsInNldEpldG9ucyIsInRlcmF3YXR0cyIsInNldFRlcmF3YXR0cyIsInVuaXRzIiwic2V0VW5pdHMiLCJ0b2tlbnNQZXJVbml0Iiwic2V0VG9rZW5zUGVyVW5pdCIsImdldE9wdGlvblBhcmFtcyIsIm5ld1VuaXRzIiwidW5pdFZhbHVlIiwibmV3SmV0b25zIiwiY3VyVmFsIiwibmV3TVciLCJzcGxpdHRlZFRyaWdnZXJOZXh0IiwiZXZlcnkiLCJ2YWwiLCJkZWZhdWx0TmV4dCIsImluZGV4T2ZNYXhWYWx1ZSIsImlNYXgiLCJ4IiwiYXJyIiwicHJvY2Vzc0Nob2ljZXMiLCJzcGxpdHRlZENob2ljZXMiLCJuYW1lIiwidW5pdFRXaHZhbHVlIiwibW9kaWZ5T25DbGljayIsImRpZmYiLCJuZXdBZGRpdGlvbiIsInRvdGFsIiwidmFsdWUiLCJjb21taXR0ZWQiLCJQcm9tcHRCb3giLCJuZXdWYWx1ZSIsImRpZmZWYWx1ZSIsInBhcmFtIiwicmVuZGVyU3dpdGNoIiwiTWFpbkZyYW1lIiwiZ2FtZVN0YXR1cyIsInNldFN0YXR1cyIsImdhbWVJbmRleCIsInNldEdhbWVJbmRleCIsInNldERvbGxhcnMiLCJzZXRQZXJmb3JtYW5jZSIsIm1hcE9iaiIsImdldEdhbWVQcm9tcHQiLCJnYW1lRW5kIiwiZ2FtZURhdGEiLCJmaWx0ZXIiLCJFbmdpbmUiLCJjb250YWluZXIiLCJpbnRyb09iaiIsInRoaXMiLCJyb290RWxlbSIsImFwcGVuZCIsImVuZ2luZVJvb3QiLCJSZWFjdERPTSIsImluaXRFbmdpbmUiLCJyZW5kZXIiLCJpbml0aWFsaXplIiwidGhlbiIsIm1hcENvbnRhaW5lciIsInNldHVwVml6IiwiZnVsbFN0cnVjdHVyZSIsInNlY3Rpb25PYmoiLCJTY3JvbGxlclN0ZXAiLCJlbCIsImNhbGxiYWNrIiwiX2lzQWN0aXZhdGUiLCJzY3JvbGxEaXJlY3Rpb24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJpbml0U2Nyb2xsZXIiLCJlbGVtZW50cyIsInNlbGVjdG9yIiwiY29uY2F0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3RpY2t5Qml0cyIsInN0aWNreUJpdFN0aWNreU9mZnNldCIsIkxhenlMb2FkIiwiZWxlbWVudHNfc2VsZWN0b3IiLCJ0aHJlc2hvbGQiLCJQcm9taXNlIiwiYWxsIiwidjEiLCJjYWxsYmFja3MiLCJfb2Zmc2V0VG9wIiwiX29mZnNldEJvdHRvbSIsImlubmVySGVpZ2h0IiwiaXNJbml0aWFsaXplZCIsImxhc3RTY3JvbGwiLCJ2aXoiLCJ2aXNpYmxlU3RlcHMiLCJhcnRpY2xlUmVtaW5kZXIiLCJxdWVyeVNlbGVjdG9yIiwic2Nyb2xsUHJvZ3Jlc3MiLCJ2aXpTZWN0aW9ucyIsIkVycm9yIiwidml6U2VjdGlvbiIsInNlY3Rpb25zIiwiaiIsIl91cGRhdGUiLCJjdXJyZW50U2Nyb2xsIiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJib3VuZGluZ1JlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJkZWFjdGl2YXRlIiwiaXNBcnRpY2xlUmVtaW5kZXJEaXNwbGF5ZWQiLCJib3R0b20iLCJpc0FydGljbGVSZW1pbmRlcklzVmlzaWJsZSIsImNvbnRhaW5zIiwic2VjdGlvbiIsImFjdGl2YXRlIiwiX3VwZGF0ZVNjcm9sbFByb2dyZXNzIiwic2Nyb2xsZWQiLCJib2R5Iiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwicHVibGljSW50ZXJmYWNlIiwib2Zmc2V0VG9wIiwidW5kZWZpbmVkIiwib2Zmc2V0Qm90dG9tIiwic2Nyb2xsZXIiLCJSZW5kZXJTdHJ1Y3R1cmUiLCJyZW5kZXJlZCIsInJlbmRlcmVkRGF0YSIsImtleXMiLCJzZWN0aW9uS2V5IiwiaW5uZXJIVE1MIiwic3RydWN0dXJlIiwicGFja2FnZXMiLCJSZWFjdCIsImdvb2dsZV9jb25maWciLCJjcmVhdGVSb290IiwiZ2V0RWxlbWVudEJ5SWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==