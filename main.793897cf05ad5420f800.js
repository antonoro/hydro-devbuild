(self.webpackChunkscrollytelling_template=self.webpackChunkscrollytelling_template||[]).push([[179],{74854:(e,t,n)=>{"use strict";var r=n(40207),a=n(67294),o=n(25935);function c(e){var t=a.createElement("section",{className:"intro-section ".concat(e.classes)},a.createElement("h5",{className:"overTitle"},e.amorce),a.createElement("h1",null,(0,o.ZP)(e.optionData.title)),a.createElement("address",null,a.createElement("div",{className:"date"})));return e.background?a.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},t):t}function i(e){var t,n=String(e.classes).includes("citation");n&&(t={text:String(e.texts).split("/")[0],author:String(e.texts).split("/")[1]});var r,c=String(e.classes).includes("bigNumber");c&&(r={number:String(e.texts).split("/")[0],underText:String(e.texts).split("/")[1]});var i=e.visual,l=""!==i?"Photo"===e.visual?a.createElement("img",{key:"photoTextSection_".concat(e.id),id:"photoTextSection_".concat(e.id),src:"assets/img/675/".concat(e.filename),"data-srcset":"assets/img/2048/".concat(e.filename," 2048w, assets/img/990/").concat(e.filename," 990w, assets/img/675/").concat(e.filename," 675w, assets/img/1350/").concat(e.filename," 1350w, assets/img/100/").concat(e.filename," 100w, assets/img/495/").concat(e.filename," 495w, assets/img/1024/").concat(e.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(e.visuelclasses),style:{paddingBottom:"1rem"}}):"Video"===e.visual?a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(e.visuelclasses),preload:"metadata",key:"videoTextSection_".concat(e.id),id:"videoTextSection_".concat(e.id)},a.createElement("source",{src:"assets/videos/".concat(e.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):a.createElement("div",null):a.createElement("div",null),s=a.createElement("section",{className:"text-section ".concat(e.classes)},n?a.createElement("blockquote",{className:"small"},a.createElement("div",null,a.createElement("p",null,a.createElement("b",null,(0,o.ZP)(t.text))),a.createElement("p",{className:"author"},t.author),a.createElement("div",{className:"symbol"}))):c?a.createElement("div",{className:"container-number"},a.createElement("div",{className:"numbers"},a.createElement("h2",null,r.number),a.createElement("small",null,r.underText))):a.createElement("div",null,i?l:a.createElement("div",null),String(e.texts).startsWith("<")?(0,o.ZP)(e.texts):a.createElement("p",null,(0,o.ZP)(e.texts))));return e.background?a.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},s):s}var l,s=n(45697),u=n.n(s),m=["title","src"];function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t,n,r=e.title,o=e.src,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,m),i=(0,a.useRef)(),l=(t=(0,a.useState)(500),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=l[0],u=l[1],f=(0,a.useCallback)((function(e){var t=e.data,n=void 0===t?{}:t;e.source===i.current.contentWindow&&"string"!=typeof n&&n["datawrapper-height"]}),[u,i]);return(0,a.useEffect)((function(){return window.addEventListener("message",f),function(){return window.removeEventListener("message",f)}}),[s,u,f]),a.createElement("iframe",p({ref:i,scrolling:"no",frameBorder:"0",width:"100%"},c,{title:r,src:o,height:s}))}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}f.propTypes={title:u().string.isRequired,src:u().string.isRequired,loading:u().oneOf(["eager","lazy"])};var g="intro-titre",h="pleine-page-titre",y="texte-classique",E="viz-section",b="centré",x="Photo",w="Video",S="Visualisation",k="iframe",N=(v(l={titre:"Titre",auteurs:"Auteurs",date:"Date"},"date","Date"),v(l,"urls","LienAuteurs"),v(l,"lienfichiersource","LienFichierSource"),l);function P(e){var t,n,r,c=a.createElement("section",{id:e.listID,className:e.classed},a.createElement("div",{className:"steps ".concat((t=e.steps,n=t.map((function(e,t){return e.stepclasses})),r=new Array(n.length),n.forEach((function(e,t){if(Array.isArray(e))e.forEach((function(e){for(var a=t;a<n.length;a++)n[a].includes(e)&&(r[a]=e)}));else if("string"==typeof e)for(var a=t;a<n.length;a++)n[a].includes(e)&&(r[a]=e)})),r.reduce((function(e,t){return e===t&&""!==e&&""!==t?e:""}))))},e.steps.map((function(e,t){var n,r=String(e.stepclasses).includes("citation");return r&&(n={text:String(e.text).split("/")[0],author:String(e.text).split("/")[1]}),a.createElement("section",{key:t,className:e.stepclasses},r?a.createElement("blockquote",{className:"small"},a.createElement("div",null,a.createElement("p",null,a.createElement("b",null,(0,o.ZP)(n.text))),a.createElement("p",{className:"author"},n.author),a.createElement("div",{className:"symbol"}))):String(e.text).startsWith("<")?(0,o.ZP)(e.text):a.createElement("p",null,e.text?(0,o.ZP)(e.text):""))}))),a.createElement("div",{className:"viz",id:"viz"},e.steps.map((function(t,n){return t.visual===x?a.createElement("img",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),src:"assets/img/675/".concat(t.filename),"data-srcset":"assets/img/2048/".concat(t.filename," 2048w, assets/img/990/").concat(t.filename," 990w, assets/img/675/").concat(t.filename," 675w, assets/img/1350/").concat(t.filename," 1350w, assets/img/100/").concat(t.filename," 100w, assets/img/495/").concat(t.filename," 495w, assets/img/1024/").concat(t.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(t.visuelclasses)}):t.visual===w?a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(t.visuelclasses),preload:"metadata",key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n)},a.createElement("source",{src:"assets/videos/".concat(t.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):t.visual===k?a.createElement("div",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),className:"iframeContainer"},a.createElement(f,{title:"Mesures d'arsenic",src:"".concat(t.filename)})):t.visual===S?a.createElement("div",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),className:"iframeContainer ".concat(t.visuelclasses)}):void 0}))));return e.background?a.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},c):c}function I(e){var t=a.createElement("section",{className:"full-page-section ".concat(e.classes)},a.createElement("div",{className:"titleImage"},e.filename?"Photo"===e.visual?a.createElement("img",{key:"".concat(e.id),id:"".concat(e.id),src:"assets/img/675/".concat(e.filename),"data-srcset":"assets/img/2048/".concat(e.filename," 2048w, assets/img/990/").concat(e.filename," 990w, assets/img/675/").concat(e.filename," 675w, assets/img/1350/").concat(e.filename," 1350w, assets/img/100/").concat(e.filename," 100w, assets/img/495/").concat(e.filename," 495w, assets/img/1024/").concat(e.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(e.visuelclasses)}):"Video"===e.visual?a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(e.visuelclasses),preload:"metadata",key:"".concat(e.id),id:"".concat(e.id)},a.createElement("source",{src:"assets/videos/".concat(e.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):a.createElement("div",null):a.createElement("div",null),e.filename?a.createElement("div",{className:"filter"}):a.createElement("div",null)),a.createElement("div",{className:"captionholder"},a.createElement("h2",{className:"caption ".concat(e.mainTitle.class)},e.mainTitle.text),e.subTitle?a.createElement("h3",{className:"caption ".concat(e.subTitle.class)},e.subTitle.text):a.createElement("div",null)));return e.background?a.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},t):t}n(93162);var T=n(38682);function C(e,t){var n={},r=[],a=j(t);return console.log("content Data",e),e.map((function(e,t){if(e.Section===g){var o=e.StepClasses,c=e.TEXTE,i=e.StyleFond;n[e.SectionID]={key:t,sectionType:g,optionData:a,amorce:c,background:i,classes:D(o),gameid:e.GameID}}else if(e.Section===y){var l=e.TEXTE,s=e.StepClasses,u=e.StyleFond;n[e.SectionID]={key:t,sectionType:y,texts:l,visual:e.VISUEL,filename:e.NomFichierSource,background:u,classes:D(s),visuelclasses:D(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===h){var m=e.TEXTE;A(e.TEXTE)&&(m=JSON.parse(e.TEXTE)),n[e.SectionID]={key:t,sectionType:h,texts:A(e.TEXTE)?m:{mainTitle:{class:"",text:m},subTitle:null},visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,classes:D(e.StepClasses),visuelclasses:D(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===E){var p={attributs:e.Attributs,scrollType:e.Step,text:e.TEXTE,visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,visuelclasses:D(e.VisuelClasses),stepclasses:D(e.StepClasses),gameid:e.GameID};if(n.hasOwnProperty(e.SectionID)){var d=n[e.SectionID];d.push(p),n[e.SectionID]=d}else n[e.SectionID]=[p],r.push(e.SectionID)}})),r.map((function(e){var t=n[e],r=t[0].attributs===b?" full-page":"",a=t[0].background;n[e]={key:e,sectionType:E,listID:e,steps:t,classed:"viz-section".concat(r),mediaInfo:0,background:a}})),Object.values(n)}function _(e,t){var n=C(e,t),r=[];return n.map((function(e){if("viz-section"===e.sectionType){var t=[];e.steps.map((function(n,r){var a=function(){};if(""!==n.visual){var o=Array(e.steps.length).fill(null).map((function(e,t){return t})).filter((function(e){return e!==r})).map((function(t){return"#".concat(e.key,"_").concat(t)})).join(",");a=function(){T.Ys("#".concat(e.key,"_").concat(r)).transition().style("opacity",1).style("display",null),""!==o&&T.td_("".concat(o)).transition().style("opacity",0).style("display","none")}}else if(String(n.filename).startsWith("TAGID")){var c=String(n.filename).split("=")[1],i=parseInt(c.split("_")[1]),l=Array(e.steps.length).fill(null).map((function(e,t){return t})).filter((function(e){return e!==i})).map((function(t){return"#".concat(e.key,"_").concat(t)})).join(",");a=function(){T.Ys("#".concat(c)).transition().style("opacity",1).style("display",null),""!==l&&T.td_("".concat(l)).transition().style("opacity",0).style("display","none")}}t.push(a)})),r.push(t)}})),r}function A(e){try{JSON.parse(e)}catch(e){return!1}return!0}function D(e){return Array.from(e.split(";")).join(" ")}function j(e){return{title:e[0][N.titre],authors:e[0][N.auteurs],urls:e[0][N.urls],date:e[0][N.date]}}n(9208);n(83731).accessToken="pk.eyJ1IjoibGVkZXZvaXIiLCJhIjoiY2p2bW81dHU2MWV1cTRhcXIzaXZqMGYxciJ9.WrIF8o69aR_TstDFu6Qyag",n(6899);var O=n(20745);function R(e){return(0,a.useEffect)((function(){T.Ys(".gauges").selectAll(".gauge").nodes().forEach((function(t){var n=50;"dollars"===T.Ys(t).attr("id")&&(n=e.dollars),T.Ys(t).select(".gaugeColorHolder").select(".committed").style("width","".concat(Math.round(e.committed/50*100),"%")),T.Ys(t).select(".gaugeColor").style("width","".concat(Math.round(n/50*100),"%"))}))})),a.createElement("div",{className:"gauges"},a.createElement("div",{id:"dollars",className:"gauge dollarGauge"},a.createElement("div",{className:"gaugeColorHolder"},a.createElement("div",{className:"gaugeColor blue"}),0!=e.committed?a.createElement("div",{className:"committed"}):"",a.createElement("div",{className:"value"},a.createElement("p",null,"Budget • ",e.dollars," jetons")))))}function z(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function V(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){z(o,r,a,c,i,"next",e)}function i(e){z(o,r,a,c,i,"throw",e)}c(void 0)}))}}function Y(e){var t=(0,a.useCallback)(V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("starting game"),e.gameStart();case 2:case"end":return t.stop()}}),t)}))));return a.createElement("div",{className:"gameBox transparent"},a.createElement("div",{className:"introBox"},e.introElem),a.createElement("div",{className:"userBox"},a.createElement("div",{className:"startbutton",onClick:t},a.createElement("p",null,"Commencer le jeu"))))}function L(e){return a.createElement("div",{className:"monitoring"},a.createElement("div",{className:"monitoring_content"},a.createElement("div",{className:"column"},a.createElement("div",{className:"monitoring_value"},a.createElement(R,{dollars:e.dollars,committed:e.committed})))),e.terawatts||0===e.terawatts?a.createElement("div",{className:"monitoring_content"},a.createElement("div",{className:"column"},a.createElement("div",{className:"monitoring_header"},a.createElement("h5",null,"Électricité produite • ",e.terawatts," TWh")))):a.createElement("div",null))}function B(e){return e.split("_").slice(1).map((function(e){return parseInt(e)}))}function U(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){U(o,r,a,c,i,"next",e)}function i(e){U(o,r,a,c,i,"throw",e)}c(void 0)}))}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e){var t,n,r=(t=(0,a.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],c=r[1];(0,a.useEffect)((function(){}),[]),(0,a.useEffect)((function(){T.td_(".choicebutton").select(".butn").classed("selected",!1),o&&T.Ys(o.obj).select(".butn").classed("selected",!0)}),[o]);var i=(0,a.useCallback)(function(){var t=Z(regeneratorRuntime.mark((function t(n,r,a){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(o=String(e.curPrompt.Trigger_next).split(";")).length>1?(console.log("checking next: ",o," index:",a," result:",String(o[a]).replace(/(\r\n|\n|\r)/gm,"")),e.changePrompt(String(o[a]).replace(/(\r\n|\n|\r)/gm,""))):e.changePrompt(String(o[0]).replace(/(\r\n|\n|\r)/gm,"")),e.updateDollars(-parseInt(n)),e.updatePerformance(r),c(null);case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),l=(0,a.useCallback)(Z(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("previous prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1)),c(null);case 2:case"end":return t.stop()}}),t)}))));return a.createElement("div",{className:"choices"},a.createElement("div",{className:"row"},e.choices.map((function(t,n){var r=e.choices_values[n].split("_")[0],i=B(e.choices_values[n]);return a.createElement("div",{className:"choicebutton",key:n,onClick:function(e){!function(e,t,n,r){c({obj:e.target,cost:t,performance:n,index:r})}(e,r,i,n)}},a.createElement("div",{id:n,className:"butn"},a.createElement("div",{className:"holder icon"},a.createElement("img",{src:o&&o.index===n?"./assets/img/Off.svg":"./assets/img/On.svg"})),a.createElement("div",{className:"holder label"},a.createElement("h4",null,t),a.createElement("p",null,r," JETONS"))))}))),a.createElement(L,{showTWh:!1,dollars:o&&o.hasOwnProperty("cost")?e.gauges.props.dollars-o.cost:e.gauges.props.dollars,committed:o&&o.hasOwnProperty("cost")?o.cost:0,performance:e.gauges.props.performance}),a.createElement("div",{className:"row"},a.createElement("div",{className:"column"},e.curIndex>0?a.createElement("div",{className:"actionbutton prev",onClick:l},a.createElement("div",{className:"butn"},a.createElement("p",null,"Previous"))):a.createElement("div",null)),a.createElement("div",{className:"column"},a.createElement("div",{className:"actionbutton next ".concat(o?"":"disabled"),onClick:function(){o?i(o.cost,o.performance,o.index):console.log("Disabled.")}},a.createElement("div",{className:"butn"},a.createElement("p",null,"Poursuivre"))))))}function H(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){H(o,r,a,c,i,"next",e)}function i(e){H(o,r,a,c,i,"throw",e)}c(void 0)}))}}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e){var t=X((0,a.useState)([]),2),n=t[0],r=t[1];(0,a.useEffect)((function(){o()}),[]),(0,a.useEffect)((function(){}),[n]);var o=function(){r(e.choices.map((function(e){return null})))},c=function(e){var t=e.reduce((function(e,t){return t&&(e+=t.cost),e}),0),n=[0,0,0];return e.forEach((function(e,t){e&&(n=n.map((function(t,n){return parseInt(t)+parseInt(e.performance[n])})))})),[t,n]},i=(0,a.useCallback)(function(){var t=M(regeneratorRuntime.mark((function t(n){var r,a,i,l,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.curPrompt.Trigger_next,e.changePrompt(r),a=c(n),i=X(a,2),l=i[0],s=i[1],e.updateDollars(-parseInt(l)),e.updatePerformance(s),o();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),l=(0,a.useCallback)(M(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("previous prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1)),o();case 2:case"end":return t.stop()}}),t)}))));return a.createElement("div",{className:"choices"},a.createElement("div",{className:"row"},e.choices.map((function(t,o){var c=e.choices_values[o].split("_")[0],i=B(e.choices_values[o]);return a.createElement("div",{className:"selectionbutton",key:o,onClick:function(e){!function(e,t,a,o){var c,i=function(e){if(Array.isArray(e))return G(e)}(c=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||F(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n[t]?i[t]=null:i[t]={obj:e.target,cost:parseInt(a),performance:o},r(i)}(e,o,c,i)}},a.createElement("div",{id:o,className:"butn"},a.createElement("div",{className:"holder selectionBox ".concat(n[o]?"selected":"")},a.createElement("div",null,a.createElement("p",null,"+"))),a.createElement("div",{className:"holder label"},a.createElement("h4",null,t),a.createElement("p",null,c," JETONS"))))}))),a.createElement(L,{showTWh:!1,dollars:n&&n.length>0?e.gauges.props.dollars-c(n)[0]:e.gauges.props.dollars,committed:n&&n.length>0?c(n)[0]:0}),a.createElement("div",{className:"row"},a.createElement("div",{className:"column"},e.curIndex>0?a.createElement("div",{className:"actionbutton prev",onClick:l},a.createElement("div",{className:"butn"},a.createElement("p",null,"Previous"))):a.createElement("div",null)),a.createElement("div",{className:"column"},a.createElement("div",{className:"actionbutton next ".concat(n?"":"disabled"),onClick:function(){n?i(n):console.log("Disabled.")}},a.createElement("div",{className:"butn"},a.createElement("p",null,"Poursuivre"))))))}function Q(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Q(o,r,a,c,i,"next",e)}function i(e){Q(o,r,a,c,i,"throw",e)}c(void 0)}))}}function K(e){var t=(0,a.useCallback)($(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("prev prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1));case 1:case"end":return t.stop()}}),t)})))),n=(0,a.useCallback)($(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,console.log("Checking trigger next: ",n),e.changePrompt(n);case 3:case"end":return t.stop()}}),t)}))));return a.createElement("div",{className:"printprompt"},a.createElement("div",{className:"message"},a.createElement("p",null,e.message)),a.createElement("div",{className:"actionbutton prev",onClick:t},a.createElement("div",{className:"butn"},a.createElement("p",null,"Previous"))),a.createElement("div",{className:"actionbutton next",onClick:n},a.createElement("div",{className:"butn"},a.createElement("p",null,"Poursuivre"))))}function ee(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function te(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ee(o,r,a,c,i,"next",e)}function i(e){ee(o,r,a,c,i,"throw",e)}c(void 0)}))}}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e){var t=ne((0,a.useState)(0),2),n=t[0],r=t[1],o=ne((0,a.useState)(0),2),c=o[0],i=o[1],l=ne((0,a.useState)([0,0]),2),s=l[0],u=l[1],m=ne((0,a.useState)([]),2),p=m[0],d=m[1],f=ne((0,a.useState)([]),2),v=f[0],g=f[1];(0,a.useEffect)((function(){var e=b(),t=e.map((function(){return 0})),n=e.map((function(e){return e.unitValue}));d(t),g(n)}),[]),(0,a.useEffect)((function(){var e=p.reduce((function(e,t,n){return b()[n],e+t}),0),t=p.reduce((function(e,t,n){var r=b()[n];return e+Math.round(t/r.unitValue*r.unitTWhvalue)}),0),n=[0,0];p.forEach((function(e,t){var r=b()[t];n=n.map((function(t,n){return 0===n?t+e/r.unitValue*r.unitEnvirovalue:1===n?t+e/r.unitValue*r.unitPopuvalue:void 0}))})),r(e),i(t),u(n)}),[p]);var h=(0,a.useCallback)(te(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("prev prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1));case 1:case"end":return t.stop()}}),t)})))),y=(0,a.useCallback)(te(regeneratorRuntime.mark((function t(){var r,a,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=String(e.curPrompt.Trigger_next).split("_"),1==(a=String(r[0]).split(";")).length?e.changePrompt(String(a).replace(/(\r\n|\n|\r)/gm,"")):a.length>1&&(p.every((function(e){return e===p[0]}))?(i=String(r[1]).replace(/(\r\n|\n|\r)/gm,""),e.changePrompt(i)):(o=p.reduce((function(e,t,n,r){return t>r[e]?n:e}),0),e.changePrompt(String(a[o]).replace(/(\r\n|\n|\r)/gm,"")))),e.updateDollars(-n),e.updatePerformance([c].concat(s));case 5:case"end":return t.stop()}}),t)})))),E=function(e,t){var n=t.split("_");return{name:e,unitValue:parseInt(n[0]),unitTWhvalue:parseInt(n[1]),unitEnvirovalue:parseInt(n[2]),unitPopuvalue:parseInt(n[3])}},b=function(){return e.choices.map((function(t,n){return E(t,e.choices_values[n])}))},x=function(e,t,n,r){var a,o,c,i=function(e){if(Array.isArray(e))return ae(e)}(c=p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||re(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();i[t]+n*v[t]>=0&&(n>0?(a=n*v[t],o=0,p.forEach((function(e,t){o+=e})),o+a>25||(i[t]=i[t]+n*v[t])):i[t]=i[t]+n*v[t],d(i))};return a.createElement("div",{className:"repartition"},a.createElement("div",{className:"optionZone"},e.choices.map((function(t,n){return E(t,e.choices_values[n])})).map((function(e,t){return a.createElement("div",{className:"optionUnit",key:t},a.createElement("div",{className:"selectorZone"},a.createElement("div",{className:"division minusZone",onClick:function(e){return x(0,t,-1)}},a.createElement("h3",null,"-")),a.createElement("div",{className:"division centralZone"},a.createElement("h3",null,p[t])),a.createElement("div",{className:"division plusZone",onClick:function(e){return x(0,t,1)}},a.createElement("h3",null,"+"))),a.createElement("div",{className:"textZone"},a.createElement("h3",null,e.name),a.createElement("div",{className:"inlinetext"},a.createElement("p",null,e.unitValue," jetons • ",e.unitTWhvalue," TWh"))))}))),a.createElement(L,{showTWh:!0,dollars:e.gauges.props.dollars-n,committed:n,terawatts:c}),e.curIndex>0?a.createElement("div",{className:"actionbutton prev",onClick:h},a.createElement("div",{className:"butn"},a.createElement("p",null,"Previous"))):a.createElement("div",null),a.createElement("div",{className:"actionbutton next",onClick:y},a.createElement("div",{className:"butn"},a.createElement("p",null,"Poursuivre"))))}n(97762);var ce=n(83290);function ie(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function le(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ie(o,r,a,c,i,"next",e)}function i(e){ie(o,r,a,c,i,"throw",e)}c(void 0)}))}}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e){var t=se((0,a.useState)(null),2),n=t[0],r=t[1];(0,a.useEffect)((function(){c()}),[]),(0,a.useEffect)((function(){n?T.Ys(".popUp-bg").style("display","unset"):T.Ys(".popUp-bg").style("display","none")}),[n]);var o=(0,ce.Z)().attr("class","d3-tip adjusted").direction("n").html((function(e){return console.log("got d: ",e),"\n                  <h4>".concat(e.title,"</h4>\n                  <p>").concat(e.supp_text,"</p>\n                  ")})),c=function(){Promise.all([T.LsS(e.map[0]),T.LsS(e.map[1])]).then((function(t){var n=se(t,2),r=n[0],a=n[1];T.Ys("#bg-map").node().append(r.documentElement),T.Ys("#on-icons").node().append(a.documentElement);var c=T.Ys("#on-icons").select("svg");c.call(o),T.Ys(".gameScreen").node().appendChild(T.Ys(".d3-tip").node());var l=c.select("#Icone-On").selectAll("g"),s=String(e.curPrompt.Choix).split(";"),u=String(e.message).split(";");l.nodes().reverse().map((function(e,t){var n={title:s[t],supp_text:u[t]};T.Ys(e).on("click",(function(t,r,a){t.stopPropagation(),o.show(n,e),i(t.target.parentElement,!1)})).on("mouseover",(function(t,r,a){console.log("checking d: ",t.target.parentElement),t.stopPropagation(),o.show(n,e),i(t.target.parentElement,!1)})).on("mouseout",(function(t,n,r){o.hide(e),i(t.target.parentElement,!0)}))})),T.Ys(".gameBox").on("click",(function(){o.hide()}))}))},i=function(e,t){!1===t?T.Ys(e).style("opacity",0):T.Ys(e).style("opacity",1)},l=(0,a.useCallback)(le(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("prev prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1));case 1:case"end":return t.stop()}}),t)})))),s=(0,a.useCallback)(le(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,console.log("Checking trigger next: ",n),e.changePrompt(n);case 3:case"end":return t.stop()}}),t)}))));return a.createElement("div",{className:"printprompt mapnavigator"},a.createElement("div",{className:"popUp-bg"},n?a.createElement("div",{className:"popUp-box"},a.createElement("h4",null,n.title),a.createElement("p",null,n.supp_text),a.createElement("div",{className:"actionbutton",onClick:function(){return r(null)}},a.createElement("div",{className:"butn"},a.createElement("p",null,"Fermer")))):a.createElement("div",null)),a.createElement("div",{className:"mapHolder"},a.createElement("div",{className:"superposedMap"},a.createElement("div",{id:"bg-map",className:"map noClick"}),a.createElement("div",{id:"on-icons",className:"map"}))),a.createElement("div",{className:"actionbutton prev",onClick:l},a.createElement("div",{className:"butn"},a.createElement("p",null,"Previous"))),a.createElement("div",{className:"actionbutton next",onClick:s},a.createElement("div",{className:"butn"},a.createElement("p",null,"Suivant"))))}function pe(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){pe(o,r,a,c,i,"next",e)}function i(e){pe(o,r,a,c,i,"throw",e)}c(void 0)}))}}function fe(e){(0,a.useEffect)((function(){console.log("got bilan : ",e.curPrompt)}),[]);var t,n,r,c,i=(0,a.useCallback)(de(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,console.log("Checking trigger next: ",n),e.changePrompt(n);case 3:case"end":return t.stop()}}),t)}))));return a.createElement("div",{className:"bilanContent"},a.createElement("div",{className:"updatableText"},(t=e.curPrompt.Texte.split(";"),n=e.curPrompt.Texte_Supp.split(";"),r=[],c=t[0].replace("*newProd*",e.performance[0]),r.push(c),n[0],n[1],n[2],n[3],r).map((function(e,t){return a.createElement("p",{key:t},(0,o.ZP)(e))}))),a.createElement("div",{className:"actionbutton next",onClick:i},a.createElement("div",{className:"butn"},a.createElement("p",null,"Poursuivre"))))}function ve(e){return a.createElement("div",{className:"promptBox"},a.createElement("p",null,"Fin du jeu."),a.createElement("p",null,"(reformuler) Le jeu a pris fin à cause de : ","".concat(e.raison)))}function ge(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function he(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ge(o,r,a,c,i,"next",e)}function i(e){ge(o,r,a,c,i,"throw",e)}c(void 0)}))}}function ye(e){(0,a.useEffect)((function(){}),[]);var t,n=(0,a.useCallback)(function(){var t=he(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Changing prompt for : ",n),e.changePrompt(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r=(0,a.useCallback)(function(){var t=he(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Number.isInteger(n)&&e.updateDollars(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),c=(0,a.useCallback)(function(){var t=he(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.updatePerformance(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i=function(t){switch(t){case"Repartition":return a.createElement(oe,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:n,curIndex:e.curIndex,updateDollars:r,updatePerformance:c,gauges:e.gauges});case"Carte":return a.createElement(me,{curPrompt:e.curPrompt,message:String(e.curPrompt.Texte_Supp),changePrompt:n,curIndex:e.curIndex,map:"Q1-1"===e.curIndex?["assets/img/Carte-Hydro.svg","assets/img/Carte-Hydro-icone-on.svg"]:["assets/img/Carte-Eolien.svg","assets/img/Carte-Eolien-icone-on.svg"]});case"texteBoutonSimple":return a.createElement(K,{curPrompt:e.curPrompt,message:String(e.curPrompt.Texte_Supp),changePrompt:n,curIndex:e.curIndex});case"ChoixReponse":case"Catastrophe":return a.createElement(q,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:n,curIndex:e.curIndex,updateDollars:r,updatePerformance:c,gauges:e.gauges});case"MultiSelection":return a.createElement(J,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),choices_values:String(e.curPrompt.Cout_Elec_Env_Popu).split(";"),changePrompt:n,curIndex:e.curIndex,updateDollars:r,updatePerformance:c,gauges:e.gauges});case"Bilan":return a.createElement(fe,{curPrompt:e.curPrompt,curIndex:e.curIndex,changePrompt:n,updateDollars:r,updatePerformance:c,performance:e.performance});default:return a.createElement(q,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),changePrompt:n,curIndex:e.curIndex})}};return!0===e.endGame?a.createElement("div",{className:"gameBox"},a.createElement(ve,{raison:(t=[],console.log("checking reason processing:",e.gauges.props.dollars,e.performance),e.gauges.props.dollars<0&&t.push("Vous n'avez plus d'argent."),e.performance[0]<0&&t.push("Vous avez gâché le parc de production électrique d'Hydro-Québec."),e.performance[1]<0&&t.push("Votre bilan environnemental est excécrable."),e.performance[2]<0&&t.push("La fureur populaire a eu raison de votre poste."),t)})):a.createElement("div",{className:"gameBox"},"Bilan"===e.curPrompt.Type?a.createElement("div",{className:"promptBox bilan"},a.createElement("div",{className:"header"},a.createElement("div",{className:"massiveTitle"},a.createElement("h2",null,(0,o.ZP)(e.curPrompt.Sujet)))),a.createElement("div",{className:"separator"}),i(e.curPrompt.Type)):a.createElement("div",{className:"promptBox"},a.createElement("div",{className:"header"},a.createElement("div",{className:"surtitre"},a.createElement("h4",null,(0,o.ZP)(e.curPrompt.Sujet))),a.createElement("div",{className:"question"},a.createElement("p",null,(0,o.ZP)(e.curPrompt.Texte)))),i(e.curPrompt.Type)))}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(e){var t=Ee((0,a.useState)("IDLE"),2),n=t[0],r=t[1],o=Ee((0,a.useState)(0),2),c=o[0],i=o[1],l=Ee((0,a.useState)(50),2),s=l[0],u=l[1],m=Ee((0,a.useState)([0,0,0]),2),p=m[0],d=m[1],f=Ee((0,a.useState)("normal"),2),v=f[0],g=f[1];(0,a.useEffect)((function(){console.log("game ",n)}),[n]),(0,a.useEffect)((function(){y(c),"END"===c&&h()}),[c]);var h=function(){r("END")},y=function(t){console.log("current game prompt:",e.gameData.filter((function(e){return String(e.ID)===String(t)})))},E=function(t){return e.gameData.findIndex((function(e){return String(t)===String(e.ID)}))};(0,a.useEffect)((function(){var t=e.gameData[E(c)];t&&t.hasOwnProperty("Type")&&("Catastrophe"===t.Type?g("redpink"):"normal"!==v&&g("normal"))}));var b=function(){var t="END"===n||"END"===c||"redpink"===v?"gameOver":"",r=e.gameData[E(c)];return{gameScreenClass:t,backgroundImage:r?"pylone"===r.Background?"Illus_Section-01_Pylone_V01-14.svg":"ampoule"===r.Background?"Illus_Section-02_Ampoule_V02.svg":"centrale"===r.Background?"Illus_Section-00_Centrale_V01.svg":null:null}};return"IDLE"===n?a.createElement("div",{className:"gameScreen"},a.createElement("div",{className:"background-image"},a.createElement("img",{src:"assets/img/Illus_Section-00_Centrale_V01.svg"})),a.createElement(Y,{introElem:e.introElem,mapObj:e.mapObj,gameStart:function(){r("STARTED"),i(0)}})):a.createElement("div",{className:"gameScreen ".concat(b().gameScreenClass)},null!==b().backgroundImage?a.createElement("div",{className:"background-image"},a.createElement("img",{src:"assets/img/".concat(b().backgroundImage),className:"no-mobile"})):"",a.createElement("div",{className:"temporaryInfo"},a.createElement("p",null,"Performance (temporaire)"),a.createElement("p",null,"Dollars: ","".concat(s," $")),a.createElement("p",null,"Elec: ","".concat(p[0]," TWh")),a.createElement("p",null,"Enviro: ","".concat(p[1]," pts")),a.createElement("p",null,"Popu: ","".concat(p[2]," pts"))),a.createElement(ye,{curIndex:c,curPrompt:"END"===c?"":e.gameData[E(c)],changePrompt:i,updateDollars:function(e){s+e>=0?u((function(t){return t+e})):h()},updatePerformance:function(e){var t=Array.apply(null,Array(e.length)).map((function(){}));p.forEach((function(n,r){e[r],t[r]=n+e[r]})),console.log("Setting performance to : ",t),d(t)},gauges:a.createElement(R,{dollars:s}),performance:p,endGame:"END"===c||"END"===n}))}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Se=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t;var o=this.container.append("div").classed("rootElem",!0);this.engineRoot=O.createRoot(o.node()),this.optionData=n,this.amorce=r.TEXTE,this.gameData=a,console.log("game Data is : ",this.gameData),this.initEngine()}var t,n;return t=e,(n=[{key:"initEngine",value:function(){var e=a.createElement(c,{key:"gameIntro",sectionType:g,optionData:this.optionData,amorce:this.amorce,background:null,classes:""});this.engineRoot.render(a.createElement(xe,{introElem:e,gameStatus:this.gameStatus,gameData:this.gameData}))}}])&&we(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ke(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ke(o,r,a,c,i,"next",e)}function i(e){ke(o,r,a,c,i,"throw",e)}c(void 0)}))}}function Pe(e,t){return Ie.apply(this,arguments)}function Ie(){return(Ie=Ne(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.gyn("https://docs.google.com/spreadsheets/d/e/2PACX-1vQQZ3sz0q1vnZmoYYR5IrCfuONhHcNw50iDtbg1H2mIX8lHDL1BQ4sAMi7iApSE1G9WQTW2jHcWv4KW/pub?gid=1497861017&single=true&output=csv").then((function(e){var r=T.Ys(".game-area");return new Se(r,j(n),t[0],e),Te(t,n),_(t,n),[[function(){}]]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t){var n=C(e,t);console.log("checking structure:",n),n.map((function(e){"viz-section"===e.sectionType&&e.steps.map((function(t,n){""!==t.visual&&(0===n?T.Ys("#".concat(e.key,"_").concat(n)).style("opacity",1):T.Ys("#".concat(e.key,"_").concat(n)).style("opacity",0))}))}))}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ae=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.index=n,this.callback=r,this._isActivate=!1}var t,n;return t=e,(n=[{key:"activate",value:function(e){this._isActivate||(this._isActivate=!0,this.el.classList.add("active"),this.callback(e))}},{key:"deactivate",value:function(){this._isActivate&&(this._isActivate=!1,this.el.classList.remove("active"))}}])&&_e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),De=n(52732),je=n.n(De),Oe=n(89438);function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){var n=[];[".viz",".full-page-section > img",".full-page-section > video"].forEach((function(e){n=n.concat(Array.from(document.querySelectorAll(e)))})),(0,Oe.Z)(n,{stickyBitStickyOffset:40}),new(je())({elements_selector:".lazy",threshold:500}),Promise.all([Pe(e,t)]).then((function(e){var t,n;(function(e){var t=0,n=0,r=window.innerHeight,a=!1,o=0,c=[],i=[],l=[],s=document.querySelector(".article-reminder"),u=document.querySelector("header > .progress"),m=document.querySelector(".intro-section h1"),p=document.querySelectorAll(".viz-section");if(p.length!==e.length)throw new Error("The number of viz sections (".concat(p.length,") mismatch with the length of the first ")+"dimension of the callbacks array (".concat(e.length,"). Please, be sure that the two elements ")+"have the same size.");p.forEach((function(t,n){var r,a=function(e){if(Array.isArray(e))return Ce(e)}(r=t.querySelectorAll("section"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(a.length!==e[n].length)throw new Error("The number of steps (".concat(a.length,") in the viz section #").concat(n+1," mismatch with the ")+"number of callbacks specified (".concat(e[n].length,') at the index "').concat(n,'". Please, be sure that the two ')+"elements have the same size.");c=c.concat(a.map((function(t,r){return new Ae(t,"".concat(n,"-").concat(r),e[n][r])}))),i=i.concat(i,t.querySelector(".viz > *"))}));var d=function(){var e=window.pageYOffset||document.documentElement.scrollTop;c.forEach((function(e){var a=e.el.getBoundingClientRect();r-a.top-n>0&&a.top+a.height-t>0?l.push(e):e.deactivate()}));var a=m.getBoundingClientRect().bottom<=0,i=s.classList.contains("visible");a&&!i?s.classList.add("visible"):!a&&i&&s.classList.remove("visible"),l.forEach((function(t,n){e>=o?n===l.length-1?t.activate("down"):t.deactivate():0===n?t.activate("up"):t.deactivate()})),f(),l=[],o=e},f=function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;u.style.width=e+"%"},v={initialize:function(){if(a)throw new Error("The scroller is already initialized.");return a=!0,window.addEventListener("scroll",d),window.addEventListener("resize",(function(){r=window.innerHeight,f()})),(window.pageYOffset||document.documentElement.scrollTop)>0&&d(),f(),v},offsetTop:function(e){if(void 0===e)return t;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return t=e,v},offsetBottom:function(e){if(void 0===e)return n;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return n=e,v}};return v})((t=e,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]).offsetTop(40).offsetBottom(0).initialize()}))}function Ve(e){return e.rendered&&(0,a.useEffect)((function(){ze(e.contentData,e.paramsData)}),[]),t=C(e.contentData,e.paramsData),n={},Object.keys(t).map((function(e,r){var l=t[e];l.sectionType===g?n[e]=a.createElement(c,{key:l.key,sectionType:l.sectionType,optionData:l.optionData,amorce:(0,o.ZP)(l.amorce),background:l.background,classes:l.classes}):l.sectionType===y?n[e]=a.createElement(i,{key:l.key,id:l.key,sectionType:l.sectionType,texts:l.texts,background:l.background,classes:l.classes,visuelclasses:l.visuelclasses,visual:l.visual,filename:l.filename}):l.sectionType===h?n[e]=a.createElement(I,{key:l.key,id:l.key,sectionType:l.sectionType,background:l.background,classes:l.classes,visuelclasses:l.visuelclasses,visual:l.visual,mainTitle:l.texts.mainTitle,subTitle:l.texts.subTitle,filename:l.filename}):l.sectionType===E&&(n[e]=a.createElement(P,{key:l.key,listID:l.listID,steps:l.steps,classed:l.classed,mediaInfo:l.mediaInfo,background:l.background}))})),Object.values(n);var t,n}Promise.all([Promise.resolve().then(n.t.bind(n,20745,19)),Promise.resolve().then(n.t.bind(n,97762,19)),Promise.resolve().then(n.t.bind(n,67294,19))]).then((function(e){var t=e[0],n=(e[1],e[2]);T.Ys(".pull-right").insert("li","li").html("<p class='not-published'>Ne pas publier</p>"),T.gyn(r.google_config.contentURL).then((function(e){T.gyn(r.google_config.paramsURL).then((function(r){t.createRoot(document.getElementById("root")).render(n.createElement(Ve,{contentData:e,paramsData:r,rendered:!0})),document.querySelector("#footerContainer").innerHTML=T.Ys("#footerContent").node().innerHTML}))}))}))},40207:e=>{e.exports={google_config:{contentURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=0&single=true&output=csv",paramsURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=409950237&single=true&output=csv",localContentURL:"./data/structure/contentData.csv",localParamsURL:"./data/structure/paramsData.csv"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[216],(()=>(t(28594),t(35666),t(74854)))),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZUFBa0Isc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvY29tcG9uZW50cy9JbnRyb1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dFNlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2NvbXBvbmVudHMvRFdDaGFydC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvY29tcG9uZW50cy9WaXpTZWN0aW9uLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9jb21wb25lbnRzL0Z1bGxQYWdlU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uLi9sZWRldm9pci1kYXRhdml6L3NyYy9tYXBzL2ludGVyYWN0aXZlLW1hcC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uLi9sZWRldm9pci1kYXRhdml6L3NyYy9ncmFwaHMvc3RhY2tlZEFyZWFDaGFydC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL2dhdWdlcy9HYXVnZXMuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9pbnRyb0JveC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL2dhdWdlcy9Nb25pdG9yaW5nLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC91dGlscy5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL3Byb21wdGZpbGwvQ2hvaWNlLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9NdWx0aVNlbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL3Byb21wdGZpbGwvUHJpbnRQcm9tcHQuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL1JlcGFydGl0aW9uLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9NYXBOYXZpZ2F0b3IuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL0JpbGFuLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9FbmRHYW1lLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvUHJvbXB0Qm94LmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvbWFpbmZyYW1lLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2VuZ2luZS5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvdml6LmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9zY3JvbGxlci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL2luaXRTY3JvbGxlci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL1JlbmRlclN0cnVjdHVyZS5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvYXBwLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2RhdGEvZ29vZ2xlX2NvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgcGFyc2UgZnJvbSBcImh0bWwtcmVhY3QtcGFyc2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnRyb1NlY3Rpb24ocHJvcHMpe1xuXG5cbiAgICBsZXQgaW50cm9TZWN0aW9uT2JqID0gKFxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9e2BpbnRyby1zZWN0aW9uICR7cHJvcHMuY2xhc3Nlc31gfT5cbiAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJvdmVyVGl0bGVcIj5cbiAgICAgICAgICAgICAge3Byb3BzLmFtb3JjZX1cbiAgICAgICAgICAgIDwvaDU+XG4gICAgICAgICAgICA8aDE+e3BhcnNlKHByb3BzLm9wdGlvbkRhdGEudGl0bGUpfTwvaDE+XG4gICAgICAgICAgICA8YWRkcmVzcz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRhdGVcIj48L2Rpdj5cbiAgICAgICAgICAgIDwvYWRkcmVzcz5cbiAgICAgICAgPC9zZWN0aW9uPlxuICAgICk7XG4gICAgbGV0IGNvbnRhaW5lZE9iaiA9IHByb3BzLmJhY2tncm91bmQgP1xuICAgICAgICAoXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBgJHtwcm9wcy5iYWNrZ3JvdW5kfWB9fSBjbGFzc05hbWU9e1wic2VjdGlvbkNvbnRhaW5lclwifT5cbiAgICAgICAgICAgICAgICB7aW50cm9TZWN0aW9uT2JqfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIClcbiAgICAgICAgOlxuICAgICAgICAoXG4gICAgICAgICAgICBpbnRyb1NlY3Rpb25PYmpcbiAgICAgICAgKVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgY29udGFpbmVkT2JqXG4gICAgKVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgcGFyc2UgZnJvbSBcImh0bWwtcmVhY3QtcGFyc2VyXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gVGV4dFNlY3Rpb24ocHJvcHMpe1xyXG5cclxuICAgIGxldCBpc1F1b3RlID0gU3RyaW5nKHByb3BzLmNsYXNzZXMpLmluY2x1ZGVzKCdjaXRhdGlvbicpO1xyXG4gICAgbGV0IHF1b3RlT2JqO1xyXG4gICAgaWYoaXNRdW90ZSl7XHJcbiAgICAgICAgcXVvdGVPYmogPSB7XHJcbiAgICAgICAgICAgIHRleHQ6U3RyaW5nKHByb3BzLnRleHRzKS5zcGxpdCgnLycpWzBdLFxyXG4gICAgICAgICAgICBhdXRob3I6U3RyaW5nKHByb3BzLnRleHRzKS5zcGxpdCgnLycpWzFdXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaXNCaWdOdW1iZXIgPSBTdHJpbmcocHJvcHMuY2xhc3NlcykuaW5jbHVkZXMoJ2JpZ051bWJlcicpO1xyXG4gICAgbGV0IGJpZ051bWJlck9iajtcclxuICAgIGlmKGlzQmlnTnVtYmVyKXtcclxuICAgICAgICBiaWdOdW1iZXJPYmogPSB7XHJcbiAgICAgICAgICAgIG51bWJlcjpTdHJpbmcocHJvcHMudGV4dHMpLnNwbGl0KCcvJylbMF0sXHJcbiAgICAgICAgICAgIHVuZGVyVGV4dDpTdHJpbmcocHJvcHMudGV4dHMpLnNwbGl0KCcvJylbMV1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc1Zpc3VhbCA9IHByb3BzLnZpc3VhbDtcclxuICAgIGxldCB2aXN1YWxPYmogPSAoXHJcbiAgICAgICAgKGlzVmlzdWFsICE9PSBcIlwiKSA/IFxyXG4gICAgICAgICAgICBwcm9wcy52aXN1YWwgPT09IFwiUGhvdG9cIiA/IFxyXG4gICAgICAgICAgICAgICAgPGltZyBcclxuICAgICAgICAgICAgICAgICAgICBrZXk9e2BwaG90b1RleHRTZWN0aW9uXyR7cHJvcHMuaWR9YH1cclxuICAgICAgICAgICAgICAgICAgICBpZD17YHBob3RvVGV4dFNlY3Rpb25fJHtwcm9wcy5pZH1gfVxyXG4gICAgICAgICAgICAgICAgICAgIHNyYz17YGFzc2V0cy9pbWcvNjc1LyR7cHJvcHMuZmlsZW5hbWV9YH1cclxuICAgICAgICAgICAgICAgICAgICBkYXRhLXNyY3NldD17YGFzc2V0cy9pbWcvMjA0OC8ke3Byb3BzLmZpbGVuYW1lfSAyMDQ4dywgYXNzZXRzL2ltZy85OTAvJHtwcm9wcy5maWxlbmFtZX0gOTkwdywgYXNzZXRzL2ltZy82NzUvJHtwcm9wcy5maWxlbmFtZX0gNjc1dywgYXNzZXRzL2ltZy8xMzUwLyR7cHJvcHMuZmlsZW5hbWV9IDEzNTB3LCBhc3NldHMvaW1nLzEwMC8ke3Byb3BzLmZpbGVuYW1lfSAxMDB3LCBhc3NldHMvaW1nLzQ5NS8ke3Byb3BzLmZpbGVuYW1lfSA0OTV3LCBhc3NldHMvaW1nLzEwMjQvJHtwcm9wcy5maWxlbmFtZX0gMTAyNHdgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtc2l6ZXM9XCIobWF4LXdpZHRoOiAxMDBweCkgMTAwcHgsIChtYXgtd2lkdGg6IDQ5NXB4KSA0OTVweCwgKG1heC13aWR0aDogNjc1cHgpIDY3NXB4LCAobWF4LXdpZHRoOiA5OTBweCkgOTkwcHgsIChtYXgtd2lkdGg6ICAxMDI0cHgpIDEwMjRweCwgKG1heC13aWR0aDogIDEzNTBweCkgMTM1MHB4LCAobWF4LXdpZHRoOiAgMjA0OHB4KSAyMDQ4cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGxhenkgJHtwcm9wcy52aXN1ZWxjbGFzc2VzfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiAnMXJlbSd9fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICBwcm9wcy52aXN1YWwgPT09IFwiVmlkZW9cIiA/IFxyXG4gICAgICAgICAgICAgICAgPHZpZGVvIGF1dG9QbGF5IGxvb3AgbXV0ZWQgcGxheXNJbmxpbmUgY2xhc3NOYW1lPXtgdmlkZW8gJHtwcm9wcy52aXN1ZWxjbGFzc2VzfWB9IHByZWxvYWQ9XCJtZXRhZGF0YVwiIGtleT17YHZpZGVvVGV4dFNlY3Rpb25fJHtwcm9wcy5pZH1gfSBpZD17YHZpZGVvVGV4dFNlY3Rpb25fJHtwcm9wcy5pZH1gfT5cclxuICAgICAgICAgICAgICAgICAgICA8c291cmNlIHNyYz17YGFzc2V0cy92aWRlb3MvJHtwcm9wcy5maWxlbmFtZX1gfS8+XHJcbiAgICAgICAgICAgICAgICAgICAgVmlkw6lvIG5vbiBzdXBwb3J0w6llLiBSw6ktZXNzYXlleiBzdXIgdW4gYXV0cmUgYXBwYXJlaWwgb3UgZnVyZXRldXIuXHJcbiAgICAgICAgICAgICAgICA8L3ZpZGVvPlxyXG4gICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICA6XHJcbiAgICAgICAgPGRpdj48L2Rpdj5cclxuICAgIClcclxuXHJcbiAgICBsZXQgdGV4dFNlY3Rpb25PYmogPSAoXHJcbiAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPXtgdGV4dC1zZWN0aW9uICR7cHJvcHMuY2xhc3Nlc31gfT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlzUXVvdGUgPyBcclxuICAgICAgICAgICAgPGJsb2NrcXVvdGUgY2xhc3NOYW1lPVwic21hbGxcIj5cclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICA8Yj5cclxuICAgICAgICAgICAgICAgICAgICB7cGFyc2UocXVvdGVPYmoudGV4dCl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9iPlxyXG4gICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiYXV0aG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge3F1b3RlT2JqLmF1dGhvcn1cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3ltYm9sXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9ibG9ja3F1b3RlPlxyXG4gICAgICAgICAgICA6XHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIGlzQmlnTnVtYmVyID9cclxuICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lci1udW1iZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJudW1iZXJzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDI+e2JpZ051bWJlck9iai5udW1iZXJ9PC9oMj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzbWFsbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YmlnTnVtYmVyT2JqLnVuZGVyVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc21hbGw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmlzdWFsID8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzdWFsT2JqXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcocHJvcHMudGV4dHMpLnN0YXJ0c1dpdGgoJzwnKSA/ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlKHByb3BzLnRleHRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3BhcnNlKHByb3BzLnRleHRzKX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgKTtcclxuICAgIGxldCBjb250YWluZWRPYmogPSBwcm9wcy5iYWNrZ3JvdW5kID8gXHJcbiAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogYCR7cHJvcHMuYmFja2dyb3VuZH1gfX0gY2xhc3NOYW1lPXtcInNlY3Rpb25Db250YWluZXJcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0ZXh0U2VjdGlvbk9ian1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0U2VjdGlvbk9ialxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgY29udGFpbmVkT2JqXHJcbiAgICApXHJcbn0iLCJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEV0NoYXJ0KHsgdGl0bGUsIHNyYywgLi4ucHJvcHMgfSkge1xyXG4gIGNvbnN0IGlmcmFtZVJlZiA9IHVzZVJlZigpXHJcbiAgY29uc3QgW2hlaWdodCwgc2V0U3RhdGVdID0gdXNlU3RhdGUoNTAwKVxyXG5cclxuICBjb25zdCBvbk1lc3NhZ2UgPSB1c2VDYWxsYmFjayhcclxuICAgICh7IGRhdGEgPSB7fSwgc291cmNlIH0pID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHNvdXJjZSAhPT0gaWZyYW1lUmVmLmN1cnJlbnQuY29udGVudFdpbmRvdyB8fFxyXG4gICAgICAgIHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyB8fFxyXG4gICAgICAgICFkYXRhWydkYXRhd3JhcHBlci1oZWlnaHQnXVxyXG4gICAgICApXHJcbiAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAvL3NldFN0YXRlKE9iamVjdC52YWx1ZXMoZGF0YVsnZGF0YXdyYXBwZXItaGVpZ2h0J10pWzBdKVxyXG4gICAgfSxcclxuICAgIFtzZXRTdGF0ZSwgaWZyYW1lUmVmXVxyXG4gIClcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25NZXNzYWdlKVxyXG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25NZXNzYWdlKVxyXG4gIH0sIFtoZWlnaHQsIHNldFN0YXRlLCBvbk1lc3NhZ2VdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGlmcmFtZVxyXG4gICAgICByZWY9e2lmcmFtZVJlZn1cclxuICAgICAgc2Nyb2xsaW5nPVwibm9cIlxyXG4gICAgICBmcmFtZUJvcmRlcj1cIjBcIlxyXG4gICAgICB3aWR0aD1cIjEwMCVcIlxyXG4gICAgICB7Li4ucHJvcHN9XHJcbiAgICAgIHRpdGxlPXt0aXRsZX1cclxuICAgICAgc3JjPXtzcmN9XHJcbiAgICAgIGhlaWdodD17aGVpZ2h0fVxyXG4gICAgLz5cclxuICApXHJcbn1cclxuXHJcbkRXQ2hhcnQucHJvcFR5cGVzID0ge1xyXG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgc3JjOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgbG9hZGluZzogUHJvcFR5cGVzLm9uZU9mKFsnZWFnZXInLCAnbGF6eSddKSxcclxufSIsImV4cG9ydCBjb25zdCBjb250ZW50SGVhZGVyQ29uc3RhbnRzID0ge1xuICAgIHNlY3Rpb246IFwiU2VjdGlvblwiLFxuICAgIHNlY3Rpb25JRDogXCJTZWN0aW9uSURcIixcbiAgICBhdHRyaWJ1dHM6IFwiQXR0cmlidXRzXCIsXG4gICAgc291c3NlY3Rpb246IFwiU3RlcFwiLFxuICAgIHRleHRlOiBcIlRFWFRFXCIsXG4gICAgdmlzdWVsOiBcIlZJU1VFTFwiLFxuICAgIG5vbWZpY2hpZXJzb3VyY2U6IFwiTm9tRmljaGllclNvdXJjZVwiLFxuICAgIHN0eWxlZm9uZDogXCJTdHlsZUZvbmRcIixcbiAgICBzdGVwY2xhc3NlczogXCJTdGVwQ2xhc3Nlc1wiLFxuICAgIHZpc3VlbGNsYXNzZXM6IFwiVmlzdWVsQ2xhc3Nlc1wiLFxuICAgIG5vdGVzOiBcIk5vdGVzXCIsXG4gICAgZ2FtZWlkOiBcIkdhbWVJRFwiXG59O1xuXG5leHBvcnQgY29uc3Qgb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzID0ge1xuICAgIHNlY3Rpb250eXBlczoge1xuICAgICAgICBpbnRyb3RpdHJlOiBcImludHJvLXRpdHJlXCIsXG4gICAgICAgIHBsZWluZXBhZ2V0aXRyZTogXCJwbGVpbmUtcGFnZS10aXRyZVwiLFxuICAgICAgICB0ZXh0ZWNsYXNzaXF1ZTogXCJ0ZXh0ZS1jbGFzc2lxdWVcIixcbiAgICAgICAgdml6c2VjdGlvbjogXCJ2aXotc2VjdGlvblwiXG4gICAgfSxcbiAgICBzZWN0aW9uYXR0cmlidXRlczp7XG4gICAgICAgIHBsZWluZXBhZ2U6IFwicGxlaW5lLXBhZ2VcIixcbiAgICAgICAgZm9uZG5vaXI6IFwiZm9uZC1ub2lyXCIsXG4gICAgICAgIGNlbnRyZTogXCJjZW50csOpXCIsXG4gICAgICAgIGNvdGVjb3RlOiBcImPDtHTDqS1jw7R0w6lcIlxuICAgIH0sXG4gICAgdmlzdWVsdHlwZXM6e1xuICAgICAgICBwaG90bzogXCJQaG90b1wiLFxuICAgICAgICB2aWRlbzogXCJWaWRlb1wiLFxuICAgICAgICBhdWRpbzogXCJBdWRpb1wiLFxuICAgICAgICB2aXN1YWxpc2F0aW9uOiBcIlZpc3VhbGlzYXRpb25cIixcbiAgICAgICAgaWZyYW1lOiBcImlmcmFtZVwiXG4gICAgfSxcbiAgICBzb3Vzc2VjdGlvbnR5cGVzOntcbiAgICAgICAgc2Nyb2xsbm9ybWFsOiBcInNjcm9sbC1ub3JtYWxcIixcbiAgICAgICAgc2Nyb2xsaW52aXNpYmxlOiBcInNjcm9sbC1pbnZpc2libGVcIixcbiAgICAgICAgc2Nyb2xsbG9uZzogXCJzY3JvbGwtbG9uZ1wiXG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHBhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMgPSB7XG4gICAgdGl0cmU6IFwiVGl0cmVcIixcbiAgICBhdXRldXJzOiBcIkF1dGV1cnNcIixcbiAgICBkYXRlOiBcIkRhdGVcIixcbiAgICBkYXRlOiBcIkRhdGVcIixcbiAgICB1cmxzOiBcIkxpZW5BdXRldXJzXCIsXG4gICAgbGllbmZpY2hpZXJzb3VyY2U6IFwiTGllbkZpY2hpZXJTb3VyY2VcIlxufTtcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xuaW1wb3J0IERXQ2hhcnQgZnJvbSBcIi4vRFdDaGFydFwiO1xuaW1wb3J0IHsgb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzIH0gZnJvbSBcIi4uL2dlbmVyYXRvci9jb25zdGFudHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIFZpelNlY3Rpb24ocHJvcHMpe1xuXG4gICAgbGV0IHZpelNlY3Rpb25PYmogPSAoXG4gICAgICAgIDxzZWN0aW9uIGlkPXtwcm9wcy5saXN0SUR9IGNsYXNzTmFtZT17cHJvcHMuY2xhc3NlZH0+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgc3RlcHMgJHtnZXRTdGVwQ29tbW9uQ2xhc3MocHJvcHMuc3RlcHMpfWB9PlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm9wcy5zdGVwcy5tYXAoKHN0ZXAsaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3N0ZXAgaXMgJywgc3RlcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNRdW90ZSA9IFN0cmluZyhzdGVwLnN0ZXBjbGFzc2VzKS5pbmNsdWRlcygnY2l0YXRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBxdW90ZU9iajtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlzUXVvdGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlT2JqID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OlN0cmluZyhzdGVwLnRleHQpLnNwbGl0KCcvJylbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcjpTdHJpbmcoc3RlcC50ZXh0KS5zcGxpdCgnLycpWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24ga2V5PXtpbmRleH0gY2xhc3NOYW1lPXtzdGVwLnN0ZXBjbGFzc2VzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNRdW90ZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YmxvY2txdW90ZSBjbGFzc05hbWU9XCJzbWFsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cGFyc2UocXVvdGVPYmoudGV4dCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiYXV0aG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtxdW90ZU9iai5hdXRob3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3ltYm9sXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Jsb2NrcXVvdGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcoc3RlcC50ZXh0KS5zdGFydHNXaXRoKCc8JykgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlKHN0ZXAudGV4dClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPntzdGVwLnRleHQgPyBwYXJzZShzdGVwLnRleHQpIDogXCJcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpelwiIGlkPVwidml6XCI+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm9wcy5zdGVwcy5tYXAoKHN0ZXAsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzdGVwLnZpc3VhbCA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnZpc3VlbHR5cGVzLnBob3RvKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake3Byb3BzLmxpc3RJRH1fJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Ake3Byb3BzLmxpc3RJRH1fJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtgYXNzZXRzL2ltZy82NzUvJHtzdGVwLmZpbGVuYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXNyY3NldD17YGFzc2V0cy9pbWcvMjA0OC8ke3N0ZXAuZmlsZW5hbWV9IDIwNDh3LCBhc3NldHMvaW1nLzk5MC8ke3N0ZXAuZmlsZW5hbWV9IDk5MHcsIGFzc2V0cy9pbWcvNjc1LyR7c3RlcC5maWxlbmFtZX0gNjc1dywgYXNzZXRzL2ltZy8xMzUwLyR7c3RlcC5maWxlbmFtZX0gMTM1MHcsIGFzc2V0cy9pbWcvMTAwLyR7c3RlcC5maWxlbmFtZX0gMTAwdywgYXNzZXRzL2ltZy80OTUvJHtzdGVwLmZpbGVuYW1lfSA0OTV3LCBhc3NldHMvaW1nLzEwMjQvJHtzdGVwLmZpbGVuYW1lfSAxMDI0d2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXNpemVzPVwiKG1heC13aWR0aDogMTAwcHgpIDEwMHB4LCAobWF4LXdpZHRoOiA0OTVweCkgNDk1cHgsIChtYXgtd2lkdGg6IDY3NXB4KSA2NzVweCwgKG1heC13aWR0aDogOTkwcHgpIDk5MHB4LCAobWF4LXdpZHRoOiAgMTAyNHB4KSAxMDI0cHgsIChtYXgtd2lkdGg6ICAxMzUwcHgpIDEzNTBweCwgKG1heC13aWR0aDogIDIwNDhweCkgMjA0OHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGxhenkgJHtzdGVwLnZpc3VlbGNsYXNzZXN9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHN0ZXAudmlzdWFsID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMudmlzdWVsdHlwZXMudmlkZW8pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx2aWRlbyBhdXRvUGxheSBsb29wIG11dGVkIHBsYXlzSW5saW5lIGNsYXNzTmFtZT17YHZpZGVvICR7c3RlcC52aXN1ZWxjbGFzc2VzfWB9IHByZWxvYWQ9XCJtZXRhZGF0YVwiIGtleT17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9IGlkPXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c291cmNlIHNyYz17YGFzc2V0cy92aWRlb3MvJHtzdGVwLmZpbGVuYW1lfWB9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpZMOpbyBub24gc3VwcG9ydMOpZS4gUsOpLWVzc2F5ZXogc3VyIHVuIGF1dHJlIGFwcGFyZWlsIG91IGZ1cmV0ZXVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3ZpZGVvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihzdGVwLnZpc3VhbCA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnZpc3VlbHR5cGVzLmlmcmFtZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2Ake3Byb3BzLmxpc3RJRH1fJHtpbmRleH1gfSBpZD17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9IGNsYXNzTmFtZT1cImlmcmFtZUNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERXQ2hhcnQgdGl0bGU9XCJNZXN1cmVzIGQnYXJzZW5pY1wiIHNyYz17YCR7c3RlcC5maWxlbmFtZX1gfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoc3RlcC52aXN1YWwgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy52aXN1ZWx0eXBlcy52aXN1YWxpc2F0aW9uKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9IGlkPXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH0gY2xhc3NOYW1lPXtgaWZyYW1lQ29udGFpbmVyICR7c3RlcC52aXN1ZWxjbGFzc2VzfWB9PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3NlY3Rpb24+XG4gICAgKTtcbiAgICBsZXQgY29udGFpbmVkT2JqID0gcHJvcHMuYmFja2dyb3VuZCA/XG4gICAgICAgIChcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6IGAke3Byb3BzLmJhY2tncm91bmR9YH19IGNsYXNzTmFtZT17XCJzZWN0aW9uQ29udGFpbmVyXCJ9PlxuICAgICAgICAgICAgICAgIHt2aXpTZWN0aW9uT2JqfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIClcbiAgICAgICAgOlxuICAgICAgICAoXG4gICAgICAgICAgICB2aXpTZWN0aW9uT2JqXG4gICAgICAgIClcblxuICAgIHJldHVybiAoXG4gICAgICAgIGNvbnRhaW5lZE9ialxuICAgIClcbn1cblxuZnVuY3Rpb24gZ2V0U3RlcENvbW1vbkNsYXNzKHN0ZXBzKXtcbiAgICBsZXQgY3VyU3RlcENsYXNzZXMgPSBzdGVwcy5tYXAoKHN0ZXAsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiBzdGVwLnN0ZXBjbGFzc2VzO1xuICAgIH0pO1xuICAgIGxldCBjdXJDb21tb25DbGFzcyA9IG5ldyBBcnJheShjdXJTdGVwQ2xhc3Nlcy5sZW5ndGgpO1xuICAgIGN1clN0ZXBDbGFzc2VzLmZvckVhY2goKHN0ZXBFbGVtLCBpZHgpID0+IHtcbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShzdGVwRWxlbSkpe1xuICAgICAgICAgICAgc3RlcEVsZW0uZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgICAgICBmb3IoIGxldCBpID0gaWR4OyBpIDwgY3VyU3RlcENsYXNzZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBpZihjdXJTdGVwQ2xhc3Nlc1tpXS5pbmNsdWRlcyhlbGVtKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tb25DbGFzc1tpXSA9IChlbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mKHN0ZXBFbGVtKSA9PT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICBmb3IoIGxldCBpID0gaWR4OyBpIDwgY3VyU3RlcENsYXNzZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGlmKGN1clN0ZXBDbGFzc2VzW2ldLmluY2x1ZGVzKHN0ZXBFbGVtKSl7XG4gICAgICAgICAgICAgICAgICAgIGN1ckNvbW1vbkNsYXNzW2ldID0gKHN0ZXBFbGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY3VyQ29tbW9uQ2xhc3MucmVkdWNlKGZ1bmN0aW9uKGEsIGIpeyByZXR1cm4gKGEgPT09IGIgJiYgYSAhPT0gXCJcIiAmJiBiICE9PSBcIlwiKSA/IGEgOiBcIlwiOyB9KTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIEZ1bGxQYWdlU2VjdGlvbihwcm9wcyl7XG5cbiAgICBsZXQgZnVsbHBhZ2VTZWN0aW9uT2JqID0gKFxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9e2BmdWxsLXBhZ2Utc2VjdGlvbiAke3Byb3BzLmNsYXNzZXN9YH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRpdGxlSW1hZ2VcIj5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzLmZpbGVuYW1lID9cbiAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMudmlzdWFsID09PSBcIlBob3RvXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtwcm9wcy5pZH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17YCR7cHJvcHMuaWR9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtgYXNzZXRzL2ltZy82NzUvJHtwcm9wcy5maWxlbmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXNyY3NldD17YGFzc2V0cy9pbWcvMjA0OC8ke3Byb3BzLmZpbGVuYW1lfSAyMDQ4dywgYXNzZXRzL2ltZy85OTAvJHtwcm9wcy5maWxlbmFtZX0gOTkwdywgYXNzZXRzL2ltZy82NzUvJHtwcm9wcy5maWxlbmFtZX0gNjc1dywgYXNzZXRzL2ltZy8xMzUwLyR7cHJvcHMuZmlsZW5hbWV9IDEzNTB3LCBhc3NldHMvaW1nLzEwMC8ke3Byb3BzLmZpbGVuYW1lfSAxMDB3LCBhc3NldHMvaW1nLzQ5NS8ke3Byb3BzLmZpbGVuYW1lfSA0OTV3LCBhc3NldHMvaW1nLzEwMjQvJHtwcm9wcy5maWxlbmFtZX0gMTAyNHdgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXNpemVzPVwiKG1heC13aWR0aDogMTAwcHgpIDEwMHB4LCAobWF4LXdpZHRoOiA0OTVweCkgNDk1cHgsIChtYXgtd2lkdGg6IDY3NXB4KSA2NzVweCwgKG1heC13aWR0aDogOTkwcHgpIDk5MHB4LCAobWF4LXdpZHRoOiAgMTAyNHB4KSAxMDI0cHgsIChtYXgtd2lkdGg6ICAxMzUwcHgpIDEzNTBweCwgKG1heC13aWR0aDogIDIwNDhweCkgMjA0OHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbGF6eSAke3Byb3BzLnZpc3VlbGNsYXNzZXN9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnZpc3VhbCA9PT0gXCJWaWRlb1wiID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx2aWRlbyBhdXRvUGxheSBsb29wIG11dGVkIHBsYXlzSW5saW5lIGNsYXNzTmFtZT17YHZpZGVvICR7cHJvcHMudmlzdWVsY2xhc3Nlc31gfSBwcmVsb2FkPVwibWV0YWRhdGFcIiBrZXk9e2Ake3Byb3BzLmlkfWB9IGlkPXtgJHtwcm9wcy5pZH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzb3VyY2Ugc3JjPXtgYXNzZXRzL3ZpZGVvcy8ke3Byb3BzLmZpbGVuYW1lfWB9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpZMOpbyBub24gc3VwcG9ydMOpZS4gUsOpLWVzc2F5ZXogc3VyIHVuIGF1dHJlIGFwcGFyZWlsIG91IGZ1cmV0ZXVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3ZpZGVvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxkaXY+PC9kaXY+KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgKDxkaXY+PC9kaXY+KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzLmZpbGVuYW1lID9cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWx0ZXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXB0aW9uaG9sZGVyXCI+XG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT17YGNhcHRpb24gJHtwcm9wcy5tYWluVGl0bGUuY2xhc3N9YH0+e3Byb3BzLm1haW5UaXRsZS50ZXh0fTwvaDI+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm9wcy5zdWJUaXRsZSA/XG4gICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9e2BjYXB0aW9uICR7cHJvcHMuc3ViVGl0bGUuY2xhc3N9YH0+e3Byb3BzLnN1YlRpdGxlLnRleHR9PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICApO1xuICAgIGxldCBjb250YWluZWRPYmogPSBwcm9wcy5iYWNrZ3JvdW5kID9cbiAgICAgICAgKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogYCR7cHJvcHMuYmFja2dyb3VuZH1gfX0gY2xhc3NOYW1lPXtcInNlY3Rpb25Db250YWluZXJcIn0+XG4gICAgICAgICAgICAgICAge2Z1bGxwYWdlU2VjdGlvbk9ian1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgICAgIDpcbiAgICAgICAgKFxuICAgICAgICAgICAgZnVsbHBhZ2VTZWN0aW9uT2JqXG4gICAgICAgIClcblxuICAgIHJldHVybiBjb250YWluZWRPYmo7XG5cbn1cbiIsIlxuaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgeyBjb250ZW50SGVhZGVyQ29uc3RhbnRzLCBvcHRpb25zRHJvcGRvd25Db25zdGFudHMsIHBhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0cnVjdHVyZShjb250ZW50RGF0YSwgcGFyYW1zRGF0YSl7XG5cbiAgICBsZXQgc3RydWN0dXJlRGF0YSA9IHt9OyAvLyBXaG9sZSBzY3JvbGx5IHN0cnVjdHVyZVxuICAgIGxldCB2aXpTZWN0aW9uSURzID0gW107IC8vIExpc3Qgb2Ygc2VjdGlvbklEc1xuXG4gICAgbGV0IG9wdGlvbnMgPSBnZXRPcHRpb25zKHBhcmFtc0RhdGEpO1xuXG4gICAgY29uc29sZS5sb2coJ2NvbnRlbnQgRGF0YScsIGNvbnRlbnREYXRhKTtcbiAgICBjb250ZW50RGF0YS5tYXAoKHJvd0RhdGEsaW5kZXgpID0+IHtcblxuICAgICAgICBpZihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbl0gPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMuaW50cm90aXRyZSl7XG4gICAgICAgICAgICBsZXQgY2xhc3NlcyA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc107XG4gICAgICAgICAgICBsZXQgY3VyQW1vcmNlID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXTtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uQmFja2dyb3VuZCA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdHlsZWZvbmRdO1xuICAgICAgICAgICAgc3RydWN0dXJlRGF0YVtyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXV0gPSB7XG4gICAgICAgICAgICAgICAga2V5OiBpbmRleCxcbiAgICAgICAgICAgICAgICBzZWN0aW9uVHlwZTogb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5pbnRyb3RpdHJlLFxuICAgICAgICAgICAgICAgIG9wdGlvbkRhdGE6IG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYW1vcmNlOiBjdXJBbW9yY2UsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogc2VjdGlvbkJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgY2xhc3NlczogcGFyc2VDbGFzc2VzKGNsYXNzZXMpLFxuICAgICAgICAgICAgICAgIGdhbWVpZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmdhbWVpZF1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbl0gPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudGV4dGVjbGFzc2lxdWUpe1xuICAgICAgICAgICAgbGV0IHRleHRzID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXTtcbiAgICAgICAgICAgIGxldCBjbGFzc2VzID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0ZXBjbGFzc2VzXTtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uQmFja2dyb3VuZCA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdHlsZWZvbmRdO1xuICAgICAgICAgICAgc3RydWN0dXJlRGF0YVtyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXV0gPSB7XG4gICAgICAgICAgICAgICAga2V5OiBpbmRleCxcbiAgICAgICAgICAgICAgICBzZWN0aW9uVHlwZTogb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy50ZXh0ZWNsYXNzaXF1ZSxcbiAgICAgICAgICAgICAgICB0ZXh0czogdGV4dHMsXG4gICAgICAgICAgICAgICAgdmlzdWFsOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsXSxcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLm5vbWZpY2hpZXJzb3VyY2VdLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHNlY3Rpb25CYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgIGNsYXNzZXM6IHBhcnNlQ2xhc3NlcyhjbGFzc2VzKSxcbiAgICAgICAgICAgICAgICB2aXN1ZWxjbGFzc2VzOiBwYXJzZUNsYXNzZXMocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbGNsYXNzZXNdKSxcbiAgICAgICAgICAgICAgICBnYW1laWQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5nYW1laWRdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25dID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnBsZWluZXBhZ2V0aXRyZSl7XG4gICAgICAgICAgICBsZXQgdGl0bGVPYmogPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdO1xuICAgICAgICAgICAgaWYgKGlzSnNvbihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdKSl7XG4gICAgICAgICAgICAgICAgbGV0IHRleHRPYmogPSBKU09OLnBhcnNlKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV0pO1xuICAgICAgICAgICAgICAgIHRpdGxlT2JqID0gdGV4dE9iajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0ge1xuICAgICAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICAgICAgc2VjdGlvblR5cGU6IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMucGxlaW5lcGFnZXRpdHJlLFxuICAgICAgICAgICAgICAgIHRleHRzOiBpc0pzb24ocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXSkgPyB0aXRsZU9ialxuICAgICAgICAgICAgICAgIDp7XG4gICAgICAgICAgICAgICAgICAgIG1haW5UaXRsZTp7Y2xhc3M6IFwiXCIsIHRleHQ6IHRpdGxlT2JqfSxcbiAgICAgICAgICAgICAgICAgICAgc3ViVGl0bGU6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZpc3VhbDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbF0sXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5ub21maWNoaWVyc291cmNlXSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXSxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiBwYXJzZUNsYXNzZXMocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0ZXBjbGFzc2VzXSksXG4gICAgICAgICAgICAgICAgdmlzdWVsY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxjbGFzc2VzXSksXG4gICAgICAgICAgICAgICAgZ2FtZWlkOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuZ2FtZWlkXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uXSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy52aXpzZWN0aW9uKXtcblxuICAgICAgICAgICAgbGV0IGN1ckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRzOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuYXR0cmlidXRzXSxcbiAgICAgICAgICAgICAgICBzY3JvbGxUeXBlOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc291c3NlY3Rpb25dLFxuICAgICAgICAgICAgICAgIHRleHQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV0sXG4gICAgICAgICAgICAgICAgdmlzdWFsOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsXSxcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLm5vbWZpY2hpZXJzb3VyY2VdLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdHlsZWZvbmRdLFxuICAgICAgICAgICAgICAgIHZpc3VlbGNsYXNzZXM6IHBhcnNlQ2xhc3Nlcyhyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIHN0ZXBjbGFzc2VzOiBwYXJzZUNsYXNzZXMocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0ZXBjbGFzc2VzXSksXG4gICAgICAgICAgICAgICAgZ2FtZWlkOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuZ2FtZWlkXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmKHN0cnVjdHVyZURhdGEuaGFzT3duUHJvcGVydHkocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF0pKXtcbiAgICAgICAgICAgICAgICAvLyBBZGQgc3RlcCB0byBleGlzdGluZ1xuICAgICAgICAgICAgICAgIGxldCBjdXJWaXpTZWN0aW9uID0gc3RydWN0dXJlRGF0YVtyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXV07XG4gICAgICAgICAgICAgICAgY3VyVml6U2VjdGlvbi5wdXNoKGN1ckRhdGEpO1xuICAgICAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0gY3VyVml6U2VjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgc3RydWN0dXJlRGF0YVtyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXV0gPSBbY3VyRGF0YV07XG4gICAgICAgICAgICAgICAgdml6U2VjdGlvbklEcy5wdXNoKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZpelNlY3Rpb25JRHMubWFwKChrZXkpID0+IHtcbiAgICAgICAgbGV0IGN1clNlY3Rpb24gPSBzdHJ1Y3R1cmVEYXRhW2tleV07XG4gICAgICAgIGxldCBzZWN0aW9uQXR0ciA9IGN1clNlY3Rpb25bMF0uYXR0cmlidXRzID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbmF0dHJpYnV0ZXMuY2VudHJlID8gXCIgZnVsbC1wYWdlXCIgOiBcIlwiO1xuICAgICAgICBsZXQgc2VjdGlvbkJhY2tncm91bmQgPSBjdXJTZWN0aW9uWzBdLmJhY2tncm91bmQ7XG4gICAgICAgIHN0cnVjdHVyZURhdGFba2V5XSA9IHtcbiAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgc2VjdGlvblR5cGU6IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudml6c2VjdGlvbixcbiAgICAgICAgICAgIGxpc3RJRDoga2V5LFxuICAgICAgICAgICAgc3RlcHM6IGN1clNlY3Rpb24sXG4gICAgICAgICAgICBjbGFzc2VkOiBgdml6LXNlY3Rpb24ke3NlY3Rpb25BdHRyfWAsXG4gICAgICAgICAgICBtZWRpYUluZm86IDAsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBzZWN0aW9uQmFja2dyb3VuZFxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoc3RydWN0dXJlRGF0YSk7XG59XG5cbi8qKlxuICogVGFrZSBhcnRpY2xlIHN0cnVjdHVyZSBhcyBDU1YgYW5kIHRyYW5zZm9ybSBpdCBhcyBjYWxsYmFja0FycmF5XG4gKiBAcGFyYW0gIHtPYmplY3R9IGNvbnRlbnREYXRhIGFydGljbGUgc3RydWN0dXJlXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnMgYXJ0aWNsZSBvcHRpb25zXG4gKiBAcmV0dXJuIHtBcnJheX0gU2Nyb2xsZXIgY2FsbGJhY2sgYXJyYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ2FsbGJhY2tzKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKXtcblxuICAgIGxldCBmdWxsU3RydWN0dXJlID0gZ2V0U3RydWN0dXJlKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKTtcbiAgICBsZXQgY2FsbGJhY2tzQXJyYXkgPSBbXTtcbiAgICBmdWxsU3RydWN0dXJlLm1hcChjYWxsYmFjayA9PiB7XG4gICAgICAgIGlmKGNhbGxiYWNrLnNlY3Rpb25UeXBlID09PSBcInZpei1zZWN0aW9uXCIpe1xuICAgICAgICAgICAgbGV0IGN1clN0ZXBzID0gW107XG4gICAgICAgICAgICBjYWxsYmFjay5zdGVwcy5tYXAoKHN0ZXAsaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY3VyQ29tbWFuZCA9IChFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKSA/ICgoKT0+e30pIDogXCJcIjtcbiAgICAgICAgICAgICAgICBpZihzdGVwLnZpc3VhbCAhPT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJOdW1iZXJBcnJheSA9IEFycmF5KGNhbGxiYWNrLnN0ZXBzLmxlbmd0aCkuZmlsbChudWxsKS5tYXAoKF8sIGkpID0+IGkpLmZpbHRlcihkID0+IGQgIT09IGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wYWNpdHlTZWxlY3RvciA9IGN1ck51bWJlckFycmF5Lm1hcChpbmQgPT4gYCMke2NhbGxiYWNrLmtleX1fJHtpbmR9YCkuam9pbignLCcpO1xuICAgICAgICAgICAgICAgICAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvbW1hbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KGAjJHtjYWxsYmFjay5rZXl9XyR7aW5kZXh9YCkudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcGFjaXR5U2VsZWN0b3IgIT09IFwiXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoYCR7b3BhY2l0eVNlbGVjdG9yfWApLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDApLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvbW1hbmQgPSBgZDMuc2VsZWN0KCcjJHtjYWxsYmFjay5rZXl9XyR7aW5kZXh9JykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTske29wYWNpdHlTZWxlY3RvciAhPT0gXCJcIiA/IGBkMy5zZWxlY3RBbGwoJyR7b3BhY2l0eVNlbGVjdG9yfScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDApLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtgIDogXCJcIn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYoU3RyaW5nKHN0ZXAuZmlsZW5hbWUpLnN0YXJ0c1dpdGgoXCJUQUdJRFwiKSl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJUYWdJRCA9IFN0cmluZyhzdGVwLmZpbGVuYW1lKS5zcGxpdCgnPScpWzFdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyVGFnSURfaW5kZXggPSBwYXJzZUludChjdXJUYWdJRC5zcGxpdChcIl9cIilbMV0pO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyTnVtYmVyQXJyYXkgPSBBcnJheShjYWxsYmFjay5zdGVwcy5sZW5ndGgpLmZpbGwobnVsbCkubWFwKChfLCBpKSA9PiBpKS5maWx0ZXIoZCA9PiBkICE9PSBjdXJUYWdJRF9pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvcGFjaXR5U2VsZWN0b3IgPSBjdXJOdW1iZXJBcnJheS5tYXAoaW5kID0+IGAjJHtjYWxsYmFjay5rZXl9XyR7aW5kfWApLmpvaW4oJywnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoYCMke2N1clRhZ0lEfWApLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9wYWNpdHlTZWxlY3RvciAhPT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoYCR7b3BhY2l0eVNlbGVjdG9yfWApLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDApLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvbW1hbmQgPSBgZDMuc2VsZWN0KCcjJHtjdXJUYWdJRH0nKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAxKS5zdHlsZSgnZGlzcGxheScsIG51bGwpOyR7b3BhY2l0eVNlbGVjdG9yICE9PSBcIlwiID8gYGQzLnNlbGVjdEFsbCgnJHtvcGFjaXR5U2VsZWN0b3J9JykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMCkuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO2AgOiBcIlwifWA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICBjdXJTdGVwcy5wdXNoKGN1ckNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBjdXJTdGVwcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgYCgpID0+IHske2N1ckNvbW1hbmR9fWBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FsbGJhY2tzQXJyYXkucHVzaChjdXJTdGVwcyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmKEVOVl9DT05GSUcuZG93bmxvYWRTdHJ1YyAmJiBFTlZfQ09ORklHLmF1dG9yZW5kZXIpe1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdHT1QgQ0FMTEJBQ0tTIEFSUkFZOiAnLCBjYWxsYmFja3NBcnJheSk7XG4gICAgICAgIHJldHVybiBjYWxsYmFja3NBcnJheTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgY29uc29sZS5sb2coJ1NhdmluZyBjYWxsYmFja3MgdG8gZmlsZS4uLicpO1xuICAgICAgICBjb25zdCB0ZXh0ID0gYGltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcXG5leHBvcnQgY29uc3QgY2FsbGJhY2tzID0gJHtKU09OLnN0cmluZ2lmeShjYWxsYmFja3NBcnJheSwgbnVsbCwgMil9YDtcbiAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihbdGV4dC5yZXBsYWNlQWxsKCdcIicsICcnKV0sIHt0eXBlOiBcInRleHQvcGxhaW47Y2hhcnNldD11dGYtOFwifSk7XG4gICAgICAgIHNhdmVBcyhibG9iLCBcImNhbGxiYWNrcy5qc1wiKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGlzSnNvbihzdHIpIHtcbiAgICB0cnkge1xuICAgICAgICBKU09OLnBhcnNlKHN0cik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNsYXNzZXMoc3RyKXtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShzdHIuc3BsaXQoJzsnKSkuam9pbignICcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3B0aW9ucyhwYXJhbXNEYXRhKXtcblxuICByZXR1cm4ge1xuICAgIHRpdGxlOiBwYXJhbXNEYXRhWzBdW3BhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMudGl0cmVdLFxuICAgIGF1dGhvcnM6IHBhcmFtc0RhdGFbMF1bcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cy5hdXRldXJzXSxcbiAgICB1cmxzOiBwYXJhbXNEYXRhWzBdW3BhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMudXJsc10sXG4gICAgZGF0ZTogcGFyYW1zRGF0YVswXVtwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzLmRhdGVdXG4gIH07XG59XG4iLCJpbXBvcnQgeyBjb25zdGFudCB9IGZyb20gXCJsb2Rhc2hcIjtcclxuaW1wb3J0IG1hcGJveGdsIGZyb20gXCJtYXBib3gtZ2xcIjtcclxuaW1wb3J0ICogYXMgc2NyZWVuIGZyb20gXCIuL3NjcmVlbi5qc1wiO1xyXG5cclxuY29uc3QgY29uc3RhbnRzID0ge1xyXG4gIHRva2VuOlxyXG4gICAgXCJway5leUoxSWpvaWJHVmtaWFp2YVhJaUxDSmhJam9pWTJwMmJXODFkSFUyTVdWMWNUUmhjWEl6YVhacU1HWXhjaUo5LldySUY4bzY5YVJfVHN0REZ1NlF5YWdcIixcclxuICBtYXBCb3VuZHM6IHtcclxuICAgIG1heDogWy0xNjUsIDMwLjcyODMzMCwgLTI1LjIzNjM2LCA4Mi4yMjk0MzRdLFxyXG4gIH0sXHJcbiAgY29sb3JzOiBbXHJcbiAgICBcIiNGNENCQzZcIixcclxuICAgIFwiI0Y0QTM5QVwiLFxyXG4gICAgXCIjRUU2QTVFXCIsXHJcbiAgICBcIiNDRTM3MjdcIixcclxuICAgIFwiI0EyMjgyM1wiLFxyXG4gICAgXCIjNzUxQTFBXCIsXHJcbiAgICBcIiM0MTAwMDBcIixcclxuICBdLFxyXG4gIGNsdXN0ZXJNYXhab29tOiAxMSxcclxuICBjbHVzdGVyUmFkaXVzOiAzMCxcclxuICBjbHVzdGVyTWluUG9pbnRzOiA1XHJcbn07XHJcblxyXG5tYXBib3hnbC5hY2Nlc3NUb2tlbiA9IGNvbnN0YW50cy50b2tlbjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNYXAge1xyXG4gIGNvbnN0cnVjdG9yKGRpdiwgY2xhc3NOYW1lLCBkYXRhU291cmNlQXJyYXksIHN0eWxlVXJsLCBpbml0Q29vcmRzLCBkaXNhYmxlQ29udHJvbHM9dHJ1ZSwgd2l0aEhhbmRsZXJzPWZhbHNlLCBtYXhCb3VuZHMgPSBudWxsKSB7XHJcblxyXG4gICAgdGhpcy5kYXRhU291cmNlT2JqZWN0cyA9IGRhdGFTb3VyY2VBcnJheTtcclxuICAgIHRoaXMuY29uc3RhbnRzID0gY29uc3RhbnRzO1xyXG4gICAgdGhpcy5tYXAgPSBuZXcgbWFwYm94Z2wuTWFwKHtcclxuICAgICAgY29udGFpbmVyOiBjbGFzc05hbWUsXHJcbiAgICAgIHN0eWxlOiBzdHlsZVVybCxcclxuICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlLFxyXG4gICAgICBjZW50ZXI6IGluaXRDb29yZHMuY2VudGVyLFxyXG4gICAgICB6b29tOiBpbml0Q29vcmRzLnpvb21cclxuICAgIH0pO1xyXG4gICAgdGhpcy5tYXhCb3VuZHMgPSBpbml0Q29vcmRzO1xyXG4gICAgdGhpcy5ib3VuZHNMaXN0ID0gdGhpcy5kYXRhU291cmNlT2JqZWN0cy5tYXAoZGF0YVNvdXJjZSA9PiBkYXRhU291cmNlWydjb29yZHMnXSk7XHJcbiAgICB0aGlzLmV4dHJhQm91bmRzID0gdGhpcy5kYXRhU291cmNlT2JqZWN0cy5tYXAoZGF0YVNvdXJjZSA9PiBkYXRhU291cmNlWydleHRyYUNvb3JkcyddKTtcclxuICAgIGlmKGRpc2FibGVDb250cm9scyl7XHJcbiAgICAgIHRoaXMubWFwLnNjcm9sbFpvb20uZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLm1hcC5kcmFnUGFuLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5tYXAuZHJhZ1JvdGF0ZS5kaXNhYmxlKCk7XHJcbiAgICAgIHRoaXMubWFwLmJveFpvb20uZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLm1hcC5kb3VibGVDbGlja1pvb20uZGlzYWJsZSgpO1xyXG4gICAgfVxyXG4gICAgaWYod2l0aEhhbmRsZXJzKXtcclxuICAgICAgdGhpcy5zZXR1cEhhbmRsZXJzKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmRhdGFMaXN0ID0gdGhpcy5kYXRhU291cmNlT2JqZWN0cy5tYXAoZGF0YVNvdXJjZSA9PiBkYXRhU291cmNlWydkYXRhJ10pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQm91bmRzKFxyXG4gICAgYm91bmRzID0gdGhpcy5tYXhCb3VuZHMsXHJcbiAgICBwYWRkaW5nID0gc2NyZWVuLmlzWFMoKSA/IDUgOiBzY3JlZW4uaXNTbSgpID8gMTUgOiAyMCxcclxuICAgIGR1cmF0aW9uID0gMTAwXHJcbiAgKSB7XHJcbiAgICB0aGlzLm1hcCA9IHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMsIHtcclxuICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxyXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVDb29yZHNBbmRab29tKGRhdGFQYWlyKXtcclxuICAgIHRoaXMubWFwLmZseVRvKHtcclxuICAgICAgY2VudGVyOiBkYXRhUGFpci5jZW50ZXIsXHJcbiAgICAgIHpvb206IGRhdGFQYWlyLnpvb20sXHJcbiAgICAgIHNwZWVkOiAwLjcsXHJcbiAgICAgIGN1cnZlOiAxLFxyXG4gICAgICBlYXNpbmcodCl7XHJcbiAgICAgICAgcmV0dXJuIHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHZpZXdCb3VuZE9iaihvYmppbmRleCl7XHJcbiAgICB0aGlzLnVwZGF0ZUNvb3Jkc0FuZFpvb20odGhpcy5ib3VuZHNMaXN0W29iamluZGV4XSk7XHJcbiAgfVxyXG5cclxuICB2aWV3RXh0cmFCb3VuZE9iaihvYmppbmRleCwga2V5TmFtZSwgZHVyYXRpb24pe1xyXG4gICAgbGV0IGV4dHJhQm91bmRzID0gdGhpcy5leHRyYUJvdW5kc1tvYmppbmRleF07XHJcbiAgICB0aGlzLnVwZGF0ZUNvb3Jkc0FuZFpvb20oZXh0cmFCb3VuZHNba2V5TmFtZV0pO1xyXG4gIH1cclxuXHJcbiAgdmlld0luaXRCb3VuZHMoZHVyYXRpb24pe1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKHRoaXMubWF4Qm91bmRzKTtcclxuICB9XHJcbiAgc2hvd1NvdXJjZVhJdGVtWShzb3VyY2VJbmRleCwgaXRlbUluZGV4KSB7XHJcbiAgICB0aGlzLnVwZGF0ZUNvb3Jkc0FuZFpvb20odGhpcy5kYXRhTGlzdFtzb3VyY2VJbmRleF1baXRlbUluZGV4XSlcclxuICB9XHJcblxyXG4gIGluaXRNYXBTb3VyY2VzQW5kTGF5ZXJzKCkge1xyXG4gICAgaWYgKHRoaXMuaW5pdGlhbGlzZWQpIHJldHVybjtcclxuICAgIHRoaXMuaW5pdGlhbGlzZWQgPSB0cnVlO1xyXG4gICAgXHJcbiAgICB0aGlzLmRhdGFTb3VyY2VPYmplY3RzLm1hcChkYXRhU291cmNlID0+IHtcclxuICAgICAgdGhpcy5tYXAuYWRkU291cmNlKGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSwge1xyXG4gICAgICAgIHR5cGU6IGRhdGFTb3VyY2VbJ3NvdXJjZVR5cGUnXSxcclxuICAgICAgICBkYXRhOiBkYXRhU291cmNlWydzb3VyY2VEYXRhJ11cclxuICAgICAgfSk7XHJcbiAgICAgIGlmKGRhdGFTb3VyY2VbJ2xheWVyVHlwZSddID09PSAnZmlsbCcpe1xyXG4gICAgICAgIHRoaXMubWFwLmFkZExheWVyKHtcclxuICAgICAgICAgIGlkOiBkYXRhU291cmNlWydzb3VyY2VOYW1lJ10sXHJcbiAgICAgICAgICB0eXBlOiBkYXRhU291cmNlWydsYXllclR5cGUnXSxcclxuICAgICAgICAgIHNvdXJjZTogZGF0YVNvdXJjZVsnc291cmNlTmFtZSddLFxyXG4gICAgICAgICAgcGFpbnQ6IHtcclxuICAgICAgICAgICAgJ2ZpbGwtY29sb3InOiBkYXRhU291cmNlWydjb2xvciddLFxyXG4gICAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogZGF0YVNvdXJjZVsnb3BhY2l0eSddXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoZGF0YVNvdXJjZVsnbGF5ZXJUeXBlJ10gPT09ICdjaXJjbGUnKXtcclxuICAgICAgICB0aGlzLm1hcC5hZGRMYXllcih7XHJcbiAgICAgICAgICBpZDogZGF0YVNvdXJjZVsnc291cmNlTmFtZSddLFxyXG4gICAgICAgICAgdHlwZTogZGF0YVNvdXJjZVsnbGF5ZXJUeXBlJ10sXHJcbiAgICAgICAgICBzb3VyY2U6IGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSxcclxuICAgICAgICAgIHBhaW50OiB7XHJcbiAgICAgICAgICAgICdjaXJjbGUtY29sb3InOiBbJ21hdGNoJywgW1wiZ2V0XCIsIFwic3RhdHV0XCJdLCAnUmVjaGVyY2hlcyBlZmZlY3R1w6llcyBvdSBlbiBjb3VycycsICcjZmY1NjFjJywgJ1BoYXNlIHByw6lsaW1pbmFpcmUnLCAnI2ZmYzczNCcsICcjYjdiN2I3J10sXHJcbiAgICAgICAgICAgICdjaXJjbGUtcmFkaXVzJzogNVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIGNoYW5nZUxheWVyUGFpbnQoaWQsIHByb3BlcnR5LCB2YWx1ZSl7XHJcbiAgICB0aGlzLm1hcC5zZXRQYWludFByb3BlcnR5KGlkLCBwcm9wZXJ0eSwgdmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBIYW5kbGVycygpe1xyXG4gICAgXHJcbiAgICB0aGlzLm1hcC5vbihcIm1vdXNlb3ZlclwiLCBcInBlbnNpb25uYXRzU291cmNlXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMubWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgICB0aGlzLmRyYXdQb3B1cChlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5tYXAub24oXCJtb3VzZW91dFwiLCBcInBlbnNpb25uYXRzU291cmNlXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMubWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5tYXAub24oXCJjbGlja1wiLCBcInBlbnNpb25uYXRzU291cmNlXCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5tYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XHJcbiAgICAgIHRoaXMuZHJhd1BvcHVwKGUpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgfVxyXG5cclxuICBkcmF3UG9wdXAoZSl7XHJcbiAgICBjb25zdCBjb29yZGluYXRlcyA9IGUuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXMuc2xpY2UoKTtcclxuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBlLmZlYXR1cmVzWzBdLnByb3BlcnRpZXM7XHJcbiAgICBsZXQgW29wZW5kYXlzdHIsIG9wZW5tb250aHN0ciwgb3BlbnllYXJzdHJdID0gcHJvcGVydGllc1snb3V2ZXJ0dXJlJ10uc3BsaXQoJy8nKTtcclxuICAgIGxldCBbZmVybWRheXN0ciwgZmVybW1vbnRoc3RyLCBmZXJteWVhcnN0cl0gPSBwcm9wZXJ0aWVzWydmZXJtZXR1cmUnXS5zcGxpdCgnLycpO1xyXG4gICAgbGV0IFtkYXRlX291dmVydHVyZSxkYXRlX2Zlcm1ldHVyZV0gPSBbXHJcbiAgICAgIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZnItQ0FcIiwge2RhdGVTdHlsZTpcImxvbmdcIn0pLmZvcm1hdChuZXcgRGF0ZShEYXRlLlVUQyhvcGVueWVhcnN0ciwgb3Blbm1vbnRoc3RyLCBvcGVuZGF5c3RyKSkpLFxyXG4gICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImZyLUNBXCIsIHtkYXRlU3R5bGU6XCJsb25nXCJ9KS5mb3JtYXQobmV3IERhdGUoRGF0ZS5VVEMoZmVybXllYXJzdHIsIGZlcm1tb250aHN0ciwgZmVybWRheXN0cikpKVxyXG4gICAgXTtcclxuICAgIGxldCBodG1sX3BvcHVwX2NvbnRlbnQgPSBgXHJcbiAgICAgIDxoMz4ke3Byb3BlcnRpZXNbJ25hbWUnXX08L2gzPlxyXG4gICAgICA8aDQ+JHtwcm9wZXJ0aWVzWyd2aWxsZSddfSwgJHtwcm9wZXJ0aWVzWydwcm92aW5jZSddfTwvaDQ+XHJcbiAgICAgIDxwPiR7ZGF0ZV9vdXZlcnR1cmV9IC0gJHtkYXRlX2Zlcm1ldHVyZX08L3A+XHJcbiAgICAgIDxwPiR7cHJvcGVydGllc1snc3RhdHV0J119PC9wPlxyXG4gICAgYDtcclxuICAgIHdoaWxlIChNYXRoLmFicyhlLmxuZ0xhdC5sbmcgLSBjb29yZGluYXRlc1swXSkgPiAxODApIHtcclxuICAgICAgY29vcmRpbmF0ZXNbMF0gKz0gZS5sbmdMYXQubG5nID4gY29vcmRpbmF0ZXNbMF0gPyAzNjAgOiAtMzYwO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucG9wdXAgPSBuZXcgbWFwYm94Z2wuUG9wdXAoKVxyXG4gICAgICAuc2V0TG5nTGF0KGNvb3JkaW5hdGVzKVxyXG4gICAgICAuc2V0SFRNTChodG1sX3BvcHVwX2NvbnRlbnQpXHJcbiAgICAgIC5hZGRUbyh0aGlzLm1hcCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZVBvcHVwKCkge1xyXG4gICAgaWYgKHRoaXMucG9wdXApIHtcclxuICAgICAgdGhpcy5wb3B1cC5yZW1vdmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZURhdGEoZGF0YVNvdXJjZU5hbWUsIGRhdGEpIHtcclxuICAgIGlmICghdGhpcy5pbml0aWFsaXNlZCkgdGhpcy5pbml0TWFwU291cmNlc0FuZExheWVycygpO1xyXG4gICAgdGhpcy5tYXAuZ2V0U291cmNlKGRhdGFTb3VyY2VOYW1lKS5zZXREYXRhKGRhdGEpO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xyXG5cclxuY29uc3QgcG9zaXRpdmVPcmRlckRpY3QgPSB7XHJcbiAgICBcImxhbmRfc2lua1wiOjAsXHJcbiAgICBcImZvc3NpbF9lbWlzc2lvbnNcIjoxLFxyXG4gICAgXCJsYW5kX3VzZV9jaGFuZ2VcIjoyfTtcclxuXHJcbmNvbnN0IG5lZ2F0aXZlT3JkZXJEaWN0ID0ge1wib2NlYW5fc2lua1wiOjAsXHJcbiAgICBcImF0bW9zX3NpbmtcIjoxLFxyXG4gICAgXCJsYW5kX3NpbmtcIjoyfTtcclxuXHJcbmNvbnN0IGNvbG9yRGljdCA9IHtcclxuXHJcbiAgICBmb3NzaWxfZW1pc3Npb25zOiBcIiNiN2MzYzNcIixcclxuICAgIGxhbmRfdXNlX2NoYW5nZTogXCIjRUZFNjZGXCIsXHJcbiAgICBsYW5kX3Npbms6IFwiI2E1ZGFhOFwiLFxyXG4gICAgb2NlYW5fc2luazogXCIjNzVhM2IxXCIsXHJcbiAgICBhdG1vc19zaW5rOiBcIiM4OWNmZjBcIixcclxuICAgIGNlbWVudF9zaW5rOiBcIiNhMmExOThcIlxyXG59XHJcblxyXG5leHBvcnQgY2xhc3Mgc3RhY2tlZEFyZWFDaGFydHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzdmdvYmosIHJhd2RhdGEpe1xyXG5cclxuICAgICAgICB0aGlzLnN2Z09iaiA9IHN2Z29iajtcclxuICAgICAgICB0aGlzLnN2Z1dpZHRoID0gdGhpcy5zdmdPYmoubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgICAgIHRoaXMuc3ZnSGVpZ2h0ID0gdGhpcy5zdmdPYmoubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgICAgICB0aGlzLmNoYXJ0V2lkdGggPSB0aGlzLnN2Z1dpZHRoICogMC45O1xyXG4gICAgICAgIHRoaXMuY2hhcnRIZWlnaHQgPSB0aGlzLnN2Z0hlaWdodCAqIDAuOTtcclxuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmNsZWFuRGF0YShyYXdkYXRhKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnY3N2RGF0YTonLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB0aGlzLm1haW5Hcm91cCA9IHRoaXMuc3ZnT2JqLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMuY2hhcnRXaWR0aClcclxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHRoaXMuY2hhcnRIZWlnaHQpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7KHRoaXMuc3ZnV2lkdGgtdGhpcy5jaGFydFdpZHRoKS8yfSwkeyh0aGlzLnN2Z0hlaWdodC10aGlzLmNoYXJ0SGVpZ2h0KS8yfSlgKTtcclxuICAgICAgICB0aGlzLmluaXRDaGFydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFuRGF0YShkYXRhKXtcclxuICAgICAgICByZXR1cm4gZGF0YS5tYXAoeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgeWVhcjogeWVhckRhdGFbXCJBbm7DqWVcIl0sXHJcbiAgICAgICAgICAgICAgICBmb3NzaWxfZW1pc3Npb25zOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIsOJbWlzc2lvbnMgaXNzdWVzIGRlcyDDqW5lcmdpZXMgZm9zc2lsZXNcIl0pLnJlcGxhY2UoJywnLFwiLlwiKSksXHJcbiAgICAgICAgICAgICAgICBsYW5kX3VzZV9jaGFuZ2U6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiQ2hhbmdlbWVudCBkJ2FmZmVjdGF0aW9uIGRlcyB0ZXJyZXNcIl0pLnJlcGxhY2UoJywnLFwiLlwiKSksXHJcbiAgICAgICAgICAgICAgICBsYW5kX3Npbms6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiUHVpdHMgdGVycmVzdHJlXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgb2NlYW5fc2luazogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCJPY8OpYW5cIl0pLnJlcGxhY2UoJywnLFwiLlwiKSksXHJcbiAgICAgICAgICAgICAgICBhdG1vc19zaW5rOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIkF0bW9zcGjDqHJlXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgY2VtZW50X3Npbms6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiUHVpdHMgZGUgY2ltZW50XCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0Q2hhcnQoKXtcclxuXHJcbiAgICAgICAgbGV0IGxlZ2VuZERhdGEgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIsOJbWlzc2lvbnMgaXNzdWVzIGRlcyDDqW5lcmdpZXMgZm9zc2lsZXNcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcImZvc3NpbF9lbWlzc2lvbnNcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJDaGFuZ2VtZW50IGQnYWZmZWN0YXRpb24gZGVzIHRlcnJlc1wiLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwibGFuZF91c2VfY2hhbmdlXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiUHVpdHMgdGVycmVzdHJlXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJsYW5kX3NpbmtcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJPY8OpYW5cIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIm9jZWFuX3NpbmtcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJBdG1vc3Bow6hyZVwiLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiYXRtb3Nfc2lua1wiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBjb25zdCB4QXhpcyA9IHRoaXMuZHJhd1hBeGlzKHRoaXMubWFpbkdyb3VwLCB0aGlzLmNoYXJ0V2lkdGgsIHRoaXMuZGF0YSk7XHJcbiAgICAgICAgY29uc3QgeUF4aXMgPSB0aGlzLmRyYXdZQXhpcyh0aGlzLm1haW5Hcm91cCwgdGhpcy5jaGFydEhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5kcmF3QXJlYXModGhpcy5tYWluR3JvdXAsIHhBeGlzLCB5QXhpcyk7XHJcbiAgICAgICAgLy90aGlzLmRyYXdSZWN0YW5nbGVzKHRoaXMubWFpbkdyb3VwLCB4QXhpcywgeUF4aXMpO1xyXG4gICAgICAgIHRoaXMuZHJhd1RpdGxlKHRoaXMubWFpbkdyb3VwKTtcclxuICAgICAgICB0aGlzLmRyYXdCb3R0b21Cb3godGhpcy5tYWluR3JvdXAsIHRoaXMuY2hhcnRXaWR0aClcclxuICAgICAgICB0aGlzLmRyYXdEZXRhaWxzKHRoaXMubWFpbkdyb3VwLCBsZWdlbmREYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7ZDMuU2VsZWN0aW9ufSBjb250YWluZXIgZDMgc2VsZWN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGggd2lkdGggb2YgdGhlIGNoYXJ0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBkYXRhIE9iaiBjb250YWluaW5nIHNlcmllcyBhbmQgZG9tYWluc1xyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGF4aXNUaXRsZSB4IGF4aXMgdGl0bGVcclxuICAgICAqL1xyXG4gICAgIGRyYXdYQXhpcyhjb250YWluZXIsIHdpZHRoLCBkYXRhLCBheGlzVGl0bGUpe1xyXG5cclxuICAgICAgICBjb25zdCB4QXhpc0dyb3VwID0gY29udGFpbmVyLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICd4QXhpc0dyb3VwJylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHswfSwke3RoaXMuY2hhcnRIZWlnaHQqMC45MH0pYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gZDMuc2NhbGVCYW5kKClcclxuICAgICAgICAgICAgLmRvbWFpbihkYXRhLm1hcChlbGVtID0+IGVsZW0ueWVhcikpXHJcbiAgICAgICAgICAgIC5yYW5nZShbdGhpcy5jaGFydFdpZHRoKjAuMDUsIHdpZHRoXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGF4aXMgPSBkMy5heGlzQm90dG9tKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlKHNjYWxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGlja1NpemVPdXRlcigwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGlja1ZhbHVlcyhzY2FsZS5kb21haW4oKS5maWx0ZXIoKGQsaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpKzEwKSUyMCA9PT0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aWNrRm9ybWF0KChkLGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNwbGl0KCctJylbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHhBeGlzR3JvdXAuY2FsbChheGlzKVxyXG4gICAgICAgICAgICAuY2FsbChnID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpY2tHcm91cHMgPSBnLnNlbGVjdEFsbChcIi50aWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgdGlja0dyb3Vwcy5zZWxlY3QoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA0MDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LWZhbWlseScsICdncmFwaGlrJylcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxNHB0JylcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCAoZCxpKSA9PiBpID09PSB0aWNrR3JvdXBzLm5vZGVzKCkubGVuZ3RoLTEgPyBcImVuZFwiIDogXCJtaWRkbGVcIik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzY2FsZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7ZDMuU2VsZWN0aW9ufSBjb250YWluZXIgZDMgc2VsZWN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGggd2lkdGggb2YgdGhlIGNoYXJ0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBkYXRhIE9iaiBjb250YWluaW5nIHNlcmllcyBhbmQgZG9tYWluc1xyXG4gICAgICovXHJcbiAgICAgZHJhd1lBeGlzKGNvbnRhaW5lciwgaGVpZ2h0KXtcclxuXHJcbiAgICAgICAgY29uc3QgeUF4aXNHcm91cCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAneUF4aXNHcm91cCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5jaGFydFdpZHRoKjAuMDV9LCR7MH0pYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgICAuZG9tYWluKFsxMiwtMTJdKVxyXG4gICAgICAgICAgICAucmFuZ2UoWzAsaGVpZ2h0KjAuOTBdKTtcclxuXHJcbiAgICAgICAgY29uc3QgYXhpcyA9IGQzLmF4aXNMZWZ0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlKHNjYWxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGlja1NpemVPdXRlcigwKTtcclxuICAgICAgICB5QXhpc0dyb3VwLmNhbGwoYXhpcylcclxuICAgICAgICAgICAgLmNhbGwoZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aWNrR3JvdXBzID0gZy5zZWxlY3RBbGwoXCIudGlja1wiKTtcclxuICAgICAgICAgICAgICAgIHRpY2tHcm91cHMuc2VsZWN0KCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTJwdCcpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICdyb3RhdGUoLTkwKScpXHJcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLCAwKVxyXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgLXNjYWxlKDApKVxyXG4gICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLTNlbVwiKVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzEycHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgJ2dyYXBoaWsnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgJzYwMCcpXHJcbiAgICAgICAgICAgIC50ZXh0KFwiRmx1eCBkZSBDTzIgKEd0QyAvIGFubsOpZSlcIik7XHJcbiAgICAgICAgcmV0dXJuIHNjYWxlO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdBcmVhcyhjb250YWluZXIsIHhTY2FsZSwgeVNjYWxlKXtcclxuXHJcbiAgICAgICAgbGV0IHBvc2l0aXZlX3BhdGhzX2FycmF5ID0ge307XHJcbiAgICAgICAgbGV0IG5lZ2F0aXZlX3BhdGhzX2FycmF5ID0ge307XHJcblxyXG4gICAgICAgIGNvbnN0IHBvc0RhdGEgPSB0aGlzLmRhdGEubWFwKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgbGV0IHBvc0VsZW1zID0gW107XHJcbiAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBjdXJZZWFyID0geWVhckRhdGEueWVhcjtcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoeWVhckRhdGEpLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgaWYoY3VyRWxlbT4wICYmIGVudHJ5WzBdICE9PSBcInllYXJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW50cnlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoZW50cnlbMF0gPT09IFwiY2VtZW50X3NpbmtcIil7IC8vIEFkZCBjZW1lbnQgc2luayB0byByZW1vdmUgaXQgYWZ0ZXJ3YXJkcyAoaW4gZm9zc2lsIGZ1ZWwpICBcclxuICAgICAgICAgICAgICAgICAgICBwb3NFbGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZW50cnlbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHJldHVybiBwb3NFbGVtcy5zb3J0KChhLGIpID0+IHBvc2l0aXZlT3JkZXJEaWN0W2EudHlwZV0gLSBwb3NpdGl2ZU9yZGVyRGljdFtiLnR5cGVdKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVnRGF0YSA9IHRoaXMuZGF0YS5tYXAoeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmVnRWxlbXMgPSBbXTtcclxuICAgICAgICAgICAgbGV0IGN1clRvdGFsID0gMDtcclxuICAgICAgICAgICAgbGV0IGN1clllYXIgPSB5ZWFyRGF0YS55ZWFyO1xyXG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyh5ZWFyRGF0YSkuc29ydCgoYSxiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmVnYXRpdmVPcmRlckRpY3RbYVswXV0gLSBuZWdhdGl2ZU9yZGVyRGljdFtiWzBdXTtcclxuICAgICAgICAgICAgfSkuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICBpZihjdXJFbGVtPDAgJiYgZW50cnlbMF0gIT09IFwieWVhclwiICYmIGVudHJ5WzBdICE9PSBcImNlbWVudF9zaW5rXCIgKXtcclxuICAgICAgICAgICAgICAgICAgICBuZWdFbGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZW50cnlbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBjdXJUb3RhbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1clRvdGFsICs9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4gbmVnRWxlbXM7Ly8uc29ydCgoYSxiKSA9PiBuZWdhdGl2ZU9yZGVyRGljdFthLnR5cGVdIC0gbmVnYXRpdmVPcmRlckRpY3RbYi50eXBlXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdnb3QgbmVnRGF0YTogJywgbmVnRGF0YSk7XHJcblxyXG4gICAgICAgIGxldCBhcmVhR2VuID0gZDMuYXJlYSgpXHJcbiAgICAgICAgICAgIC54KGQgPT4geFNjYWxlKGQuY3VyWWVhcikpXHJcbiAgICAgICAgICAgIC55MChkID0+IHlTY2FsZShkLmN1clRvdCkpXHJcbiAgICAgICAgICAgIC55MShkID0+IHlTY2FsZShkLmN1clRvdCtkLnZhbHVlKSk7XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMocG9zaXRpdmVPcmRlckRpY3QpLmZvckVhY2gob3JkZXJPYmogPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGN1cktleSA9IG9yZGVyT2JqWzBdO1xyXG4gICAgICAgICAgICBsZXQgY3VyT3JkZXJWYWx1ZSA9IG9yZGVyT2JqWzFdO1xyXG4gICAgICAgICAgICBsZXQgY3VyUGF0aEFycmF5ID0gW107XHJcbiAgICAgICAgICAgIHBvc0RhdGEuZm9yRWFjaCh5ZWFyRGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IHllYXJEYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1clllYXIgPSBjdXJFbGVtWydjdXJZZWFyJ107XHJcbiAgICAgICAgICAgICAgICBsZXQga2V5T2JqID0geWVhckRhdGEuZmlsdGVyKGVsZW0gPT4gY3VyS2V5ID09PSBlbGVtLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNlbWVudE9iaiA9IHllYXJEYXRhLmZpbHRlcihlbGVtID0+ICdjZW1lbnRfc2luaycgPT09IGVsZW0udHlwZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKGtleU9iai5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAvL0FkZCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGN1cktleSA9PT0gXCJmb3NzaWxfZW1pc3Npb25zXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjdXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBrZXlPYmpbMF0uY3VyVG90LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGtleU9ialswXS52YWx1ZSAtIE1hdGguYWJzKGNlbWVudE9ialswXS52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjdXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBrZXlPYmpbMF0uY3VyVG90LSBNYXRoLmFicyhjZW1lbnRPYmpbMF0udmFsdWUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGtleU9ialswXS52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQWRkIHplcm9cclxuICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGN1cktleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcG9zaXRpdmVfcGF0aHNfYXJyYXlbY3VyS2V5XSA9IGN1clBhdGhBcnJheTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGl2ZVBhdGhzID0gdGhpcy5tYWluR3JvdXAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3Bvc2l0aXZlUGF0aHMnKTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMocG9zaXRpdmVfcGF0aHNfYXJyYXkpLmZvckVhY2goY2F0ZWdvcnlPYmogPT4ge1xyXG4gICAgICAgICAgICBsZXQgY3VyS2V5ID0gY2F0ZWdvcnlPYmpbMF07XHJcbiAgICAgICAgICAgIGxldCBjdXJBcnJheSA9IGNhdGVnb3J5T2JqWzFdO1xyXG5cclxuICAgICAgICAgICAgcG9zaXRpdmVQYXRocy5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgY3VyS2V5KVxyXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAuZGF0dW0oY3VyQXJyYXkpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsIGNvbG9yRGljdFtjdXJLZXldKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICdibGFjaycpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMClcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgZCA9PiBhcmVhR2VuKGQpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMobmVnYXRpdmVPcmRlckRpY3QpLnNvcnQoKGEsYikgPT4gYlsxXSAtIGFbMV0pLmZvckVhY2gob3JkZXJPYmogPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGN1cktleSA9IG9yZGVyT2JqWzBdO1xyXG4gICAgICAgICAgICBsZXQgY3VyT3JkZXJWYWx1ZSA9IG9yZGVyT2JqWzFdO1xyXG4gICAgICAgICAgICBsZXQgY3VyUGF0aEFycmF5ID0gW107XHJcblxyXG4gICAgICAgICAgICBuZWdEYXRhLmZvckVhY2goeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSB5ZWFyRGF0YVswXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJZZWFyID0gY3VyRWxlbVsnY3VyWWVhciddO1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleU9iaiA9IHllYXJEYXRhLmZpbHRlcihlbGVtID0+IGN1cktleSA9PT0gZWxlbS50eXBlKTtcclxuICAgICAgICAgICAgICAgIGlmKGtleU9iai5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAvL0FkZCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGN1clBhdGhBcnJheS5wdXNoKGtleU9ialswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQWRkIHplcm9cclxuICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGN1cktleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmVnYXRpdmVfcGF0aHNfYXJyYXlbY3VyS2V5XSA9IGN1clBhdGhBcnJheTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCBuZWdhdGl2ZVBhdGhzID0gdGhpcy5tYWluR3JvdXAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ25lZ2F0aXZlcGF0aHMnKTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMobmVnYXRpdmVfcGF0aHNfYXJyYXkpLmZvckVhY2goY2F0ZWdvcnlPYmogPT4ge1xyXG4gICAgICAgICAgICBsZXQgY3VyS2V5ID0gY2F0ZWdvcnlPYmpbMF07XHJcbiAgICAgICAgICAgIGxldCBjdXJBcnJheSA9IGNhdGVnb3J5T2JqWzFdO1xyXG5cclxuICAgICAgICAgICAgbmVnYXRpdmVQYXRocy5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgY3VyS2V5KVxyXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAuZGF0dW0oY3VyQXJyYXkpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsIGNvbG9yRGljdFtjdXJLZXldKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICdibGFjaycpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMClcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgZCA9PiBhcmVhR2VuKGQpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gRHJhdyBsaW5lXHJcbiAgICAgICAgY29uc3QgbGluZUdlbiA9IGQzLmxpbmUoKS54KGQgPT4geFNjYWxlKGQueWVhcikpLnkoZCA9PiB5U2NhbGUoZC52YWx1ZSkpO1xyXG5cclxuICAgICAgICBsZXQgbmVnWWVhclRvdGFsID0gW107XHJcbiAgICAgICAgbGV0IHBvc1llYXJUb3RhbCA9IFtdO1xyXG4gICAgICAgIHBvc0RhdGEuZm9yRWFjaCh5ZWFyRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpbml0VmFsdWUgPSAwO1xyXG4gICAgICAgICAgICBsZXQgY3VyVmFsdWUgPSB5ZWFyRGF0YS5yZWR1Y2UoKHByZXZWYWwsY3VyVmFsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVkdWNpbmcuLi4nLCBwcmV2VmFsICwgY3VyVmFsKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2VmFsICsgY3VyVmFsLnZhbHVlO1xyXG4gICAgICAgICAgICB9LCBpbml0VmFsdWUpO1xyXG4gICAgICAgICAgICBuZWdZZWFyVG90YWwucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB5ZWFyOiB5ZWFyRGF0YVswXS5jdXJZZWFyLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IC1jdXJWYWx1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcG9zWWVhclRvdGFsLnB1c2goXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhcjogeWVhckRhdGFbMF0uY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY3VyVmFsdWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd5ZWFyIHRvdGFsOicsICk7XHJcblxyXG4gICAgICAgIHZhciBwb3NsaW5lID0gZDMuc2VsZWN0KCdzdmcnKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgLmRhdHVtKHBvc1llYXJUb3RhbClcclxuICAgICAgICAgICAgLmF0dHIoJ2QnLCBsaW5lR2VuKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnbm9uZScpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt0aGlzLmNoYXJ0V2lkdGgqMC4wNSArIHhTY2FsZS5iYW5kd2lkdGgoKX0sJHtNYXRoLmFicyh5U2NhbGUoMiowLjc0KS15U2NhbGUoMCkpfSlgKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbmVnbGluZSA9IGQzLnNlbGVjdCgnc3ZnJylcclxuICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgIC5kYXR1bShuZWdZZWFyVG90YWwpXHJcbiAgICAgICAgICAgIC5hdHRyKCdkJywgbGluZUdlbilcclxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJ25vbmUnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5zdHlsZShcInN0cm9rZS1kYXNoYXJyYXlcIiwgKFwiMywgM1wiKSlcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt0aGlzLmNoYXJ0V2lkdGgqMC4wNSArIHhTY2FsZS5iYW5kd2lkdGgoKX0sJHtNYXRoLmFicyh5U2NhbGUoMiowLjc0KS15U2NhbGUoMCkpfSlgKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1RpdGxlKGNvbnRhaW5lcil7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgKHRoaXMuc3ZnV2lkdGggLSB0aGlzLmNoYXJ0V2lkdGgpIC8gMiArIHRoaXMuY2hhcnRXaWR0aCowLjA1KVxyXG4gICAgICAgICAgICAuYXR0cigneScsICh0aGlzLnN2Z0hlaWdodCAtIHRoaXMuY2hhcnRIZWlnaHQpLzIgLSA1MClcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxN3B0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LWZhbWlseScsICdncmFwaGlrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsICc2MDAnKVxyXG4gICAgICAgICAgICAudGV4dChcIkxlIHRpdHJlIGR1IGdyYXBoaXF1ZVwiKTtcclxuICAgICAgICBcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCh0aGlzLnN2Z1dpZHRoIC0gdGhpcy5jaGFydFdpZHRoKSAvIDIgKyB0aGlzLmNoYXJ0V2lkdGgqMC4wNSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCAodGhpcy5zdmdIZWlnaHQgLSB0aGlzLmNoYXJ0SGVpZ2h0KS8yIC0gMjUpXHJcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTNwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnNDAwJylcclxuICAgICAgICAgICAgLnRleHQoXCJMZSBzb3VzLXRpdHJlIGR1IGdyYXBoaXF1ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3Qm90dG9tQm94KGNvbnRhaW5lciwgd2lkdGgpe1xyXG5cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ3N0b2tlLXdpZHRoJywgMSlcclxuICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMC4zKVxyXG4gICAgICAgICAgICAuYXR0cihcIngxXCIsIHRoaXMuY2hhcnRXaWR0aCowLjA1KVxyXG4gICAgICAgICAgICAuYXR0cihcInkxXCIsIHRoaXMuY2hhcnRIZWlnaHQtMzApXHJcbiAgICAgICAgICAgIC5hdHRyKFwieDJcIiwgdGhpcy5jaGFydFdpZHRoKVxyXG4gICAgICAgICAgICAuYXR0cihcInkyXCIsIHRoaXMuY2hhcnRIZWlnaHQtMzApO1xyXG5cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCB0aGlzLmNoYXJ0V2lkdGgqMC4wNSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmNoYXJ0SGVpZ2h0LTE3KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNjAwKVxyXG4gICAgICAgICAgICAudGV4dCgnR3JhcGhpcXVlIDonKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCd0c3BhbicpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jaGFydFdpZHRoKjAuMDUrIDY1KVxyXG4gICAgICAgICAgICAuYXR0cigneScsIHRoaXMuY2hhcnRIZWlnaHQtMTcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA0MDApXHJcbiAgICAgICAgICAgIC50ZXh0KCdMZSBEZXZvaXIgLSAnKTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCB0aGlzLmNoYXJ0V2lkdGgqMC4wNSArIDEyMilcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmNoYXJ0SGVpZ2h0LTE3KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNjAwKVxyXG4gICAgICAgICAgICAudGV4dCgnU291cmNlIDonKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCd0c3BhbicpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jaGFydFdpZHRoKjAuMDUgKyAxNjkpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgdGhpcy5jaGFydEhlaWdodC0xNylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDQwMClcclxuICAgICAgICAgICAgLnRleHQoJyAuLi4gJyk7XHJcblxyXG4gICAgICAgIC8vIGNvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgIC8vICAgICAuYXR0cigneCcsIHRoaXMuc3ZnV2lkdGgqMC4xKVxyXG4gICAgICAgIC8vICAgICAuYXR0cigneScsIHRoaXMuc3ZnSGVpZ2h0KjAuOTUxKVxyXG4gICAgICAgIC8vICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgIC8vICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNjAwKVxyXG4gICAgICAgIC8vICAgICAudGV4dCgnTm90ZSA6JylcclxuICAgICAgICAvLyAgICAgLmFwcGVuZCgndHNwYW4nKVxyXG4gICAgICAgIC8vICAgICAuYXR0cigneCcsIHRoaXMuc3ZnV2lkdGgqMC4xKzM1KVxyXG4gICAgICAgIC8vICAgICAuYXR0cigneScsIHRoaXMuc3ZnSGVpZ2h0KjAuOTUxKVxyXG4gICAgICAgIC8vICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgIC8vICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgIC8vICAgICAudGV4dCgnRG9ubsOpZXMgY29sbGVjdMOpZXMgZGVwdWlzIGh0dHBzOi8vZG9ubmVlcy5tb250cmVhbC5jYS92aWxsZS1kZS1tb250cmVhbC9jb21wdGFnZS12ZWhpY3VsZXMtcGlldG9ucycpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdEZXRhaWxzKGNvbnRhaW5lciwgbGVnZW5kRGF0YSl7XHJcblxyXG4gICAgICAgIGNvbnN0IGxlZ2VuZENvbnRhaW5lciA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAnbGVnZW5kQ29udGFpbmVyJylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHsodGhpcy5zdmdXaWR0aCAtIHRoaXMuY2hhcnRXaWR0aCkgLyAyICsgKHRoaXMuY2hhcnRXaWR0aCowLjA1ICsgMTApfSwke3RoaXMuc3ZnSGVpZ2h0KjAuMDd9KWApO1xyXG5cclxuICAgICAgICBjb25zdCByb3dzID0gbGVnZW5kQ29udGFpbmVyLnNlbGVjdEFsbCgnZycpXHJcbiAgICAgICAgICAgIC5kYXRhKGxlZ2VuZERhdGEpXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAnbGVnZW5kUm93JylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIChkLGkpID0+IGB0cmFuc2xhdGUoMCwke2kqMjB9KWApO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICByb3dzLmFwcGVuZCgnY2lyY2xlJylcclxuICAgICAgICAgICAgLmF0dHIoJ2N4JywgMClcclxuICAgICAgICAgICAgLmF0dHIoJ2N5JywgMClcclxuICAgICAgICAgICAgLmF0dHIoJ3InLCA4KVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsIGQgPT4gY29sb3JEaWN0W2QuY29sb3JdKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgcm93cy5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIDE4KVxyXG4gICAgICAgICAgICAuYXR0cigneScsIDQpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA1MDApXHJcbiAgICAgICAgICAgIC50ZXh0KCBkID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkLmxhYmVsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1JlY3RhbmdsZXMoY29udGFpbmVyLCB4U2NhbGUsIHlTY2FsZSl7IC8vIG5vdCB1c2VkXHJcblxyXG4gICAgICAgIGNvbnN0IHBvc2l0aXZlQXJlYUdyb3VwID0gY29udGFpbmVyLmFwcGVuZCgnZycpXHJcbiAgICAgICAgLmF0dHIoJ2lkJywgJ3Bvc0FyZWFncm91cCcpXHJcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoMCwkezB9KWApO1xyXG5cclxuICAgICAgICBjb25zdCBuZWdhdGl2ZUFyZWFHcm91cCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgIC5hdHRyKCdpZCcsICduZWdBcmVhZ3JvdXAnKVxyXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsJHswfSlgKTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9zWWVhckdyb3VwcyA9IHBvc2l0aXZlQXJlYUdyb3VwLnNlbGVjdEFsbCgnZycpXHJcbiAgICAgICAgICAgIC5kYXRhKHRoaXMuZGF0YSlcclxuICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQgPT4gYHllYXJfJHtkLnllYXJ9YCk7XHJcbiAgICAgICAgY29uc3QgcG9zUmVjdHMgPSBwb3NZZWFyR3JvdXBzLnNlbGVjdEFsbCgncmVjdCcpXHJcbiAgICAgICAgICAgIC5kYXRhKGQgPT4geyBcclxuICAgICAgICAgICAgICAgIGxldCBwb3NFbGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1clRvdGFsID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJZZWFyID0gZC55ZWFyO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZCkuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGN1ckVsZW0+MCAmJiBlbnRyeVswXSAhPT0gXCJ5ZWFyXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NFbGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVudHJ5WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBjdXJUb3RhbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdGFsICs9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zRWxlbXMuc29ydCgoYSxiKSA9PiBwb3NpdGl2ZU9yZGVyRGljdFthLnR5cGVdIC0gcG9zaXRpdmVPcmRlckRpY3RbYi50eXBlXSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBkID0+IGAke2QudHlwZX1fJHtkLnZhbHVlfWApXHJcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHhTY2FsZS5iYW5kd2lkdGgoKSlcclxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIChkLGkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyh5U2NhbGUoMCkgLSB5U2NhbGUoZC52YWx1ZSkpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIGQgPT4geFNjYWxlKGQuY3VyWWVhcikpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgZCA9PiAoeVNjYWxlKDApIC0gKE1hdGguYWJzKHlTY2FsZSgwKSAtIHlTY2FsZShkLnZhbHVlKSkpIC0gKE1hdGguYWJzKHlTY2FsZSgwKSAtIHlTY2FsZShkLmN1clRvdCkpKSkpXHJcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgZCA9PiBjb2xvckRpY3RbZC50eXBlXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5lZ2F0aXZlWWVhckdyb3VwcyA9IG5lZ2F0aXZlQXJlYUdyb3VwLnNlbGVjdEFsbCgnZycpXHJcbiAgICAgICAgICAgIC5kYXRhKHRoaXMuZGF0YSlcclxuICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQgPT4gYHllYXJfJHtkLnllYXJ9YCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5lZ1JlY3RzID0gbmVnYXRpdmVZZWFyR3JvdXBzLnNlbGVjdEFsbCgncmVjdCcpXHJcbiAgICAgICAgICAgIC5kYXRhKGQgPT4geyBcclxuICAgICAgICAgICAgICAgIGxldCBuZWdFbGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1clRvdGFsID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJZZWFyID0gZC55ZWFyO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZCkuZmlsdGVyKGVsZW0gPT4gZWxlbVsxXTwwKS5zb3J0KChhLGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhVmFsID0gbmVnYXRpdmVPcmRlckRpY3RbYVswXV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYlZhbCA9IG5lZ2F0aXZlT3JkZXJEaWN0W2JbMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhVmFsIC0gYlZhbDtcclxuICAgICAgICAgICAgICAgIH0pLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihlbnRyeVswXSAhPT0gXCJ5ZWFyXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWdFbGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVudHJ5WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBjdXJUb3RhbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdGFsICs9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmVnRWxlbXM7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBkID0+IGAke2QudHlwZX1fJHtkLnZhbHVlfWApXHJcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHhTY2FsZS5iYW5kd2lkdGgoKSlcclxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIChkLGkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyh5U2NhbGUoMCkgLSB5U2NhbGUoTWF0aC5hYnMoZC52YWx1ZSkpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCBkID0+IHhTY2FsZShkLmN1clllYXIpKVxyXG4gICAgICAgICAgICAuYXR0cigneScsIGQgPT4gKHlTY2FsZShkLmN1clRvdCkpKVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsIGQgPT4gY29sb3JEaWN0W2QudHlwZV0pO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gR2F1Z2VzKHByb3BzKXtcbiAgY29uc3QgbWF4V2lkdGhWYWx1ZSA9IDUwO1xuICBjb25zdCBjYWxjdWxhdGVHYXVnZVdpZHRoID0gKCkgPT4ge1xuICAgIGNvbnN0IGdhdWdlc0VsZW1zID0gZDMuc2VsZWN0KCcuZ2F1Z2VzJykuc2VsZWN0QWxsKCcuZ2F1Z2UnKTtcbiAgICBnYXVnZXNFbGVtcy5ub2RlcygpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgIGxldCBjdXJXaWR0aCA9IG1heFdpZHRoVmFsdWU7XG4gICAgICBpZihkMy5zZWxlY3Qobm9kZSkuYXR0cignaWQnKSA9PT0gXCJkb2xsYXJzXCIpe1xuICAgICAgICBjdXJXaWR0aCA9IHByb3BzLmRvbGxhcnM7XG4gICAgICB9XG4gICAgICBkMy5zZWxlY3Qobm9kZSkuc2VsZWN0KCcuZ2F1Z2VDb2xvckhvbGRlcicpLnNlbGVjdCgnLmNvbW1pdHRlZCcpLnN0eWxlKCd3aWR0aCcsIGAke01hdGgucm91bmQocHJvcHMuY29tbWl0dGVkL21heFdpZHRoVmFsdWUqMTAwKX0lYCk7XG4gICAgICBkMy5zZWxlY3Qobm9kZSkuc2VsZWN0KCcuZ2F1Z2VDb2xvcicpLnN0eWxlKCd3aWR0aCcsIGAke01hdGgucm91bmQoY3VyV2lkdGgvbWF4V2lkdGhWYWx1ZSoxMDApfSVgKTtcbiAgICB9KTtcbiAgfTtcblxuICB1c2VFZmZlY3QoICgpID0+IHtcbiAgICBjYWxjdWxhdGVHYXVnZVdpZHRoKCk7XG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJnYXVnZXNcIj5cbiAgICAgIDxkaXYgaWQ9XCJkb2xsYXJzXCIgY2xhc3NOYW1lPVwiZ2F1Z2UgZG9sbGFyR2F1Z2VcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYXVnZUNvbG9ySG9sZGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYXVnZUNvbG9yIGJsdWVcIj5cblxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtwcm9wcy5jb21taXR0ZWQgIT0gMCA/XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21taXR0ZWRcIj5cbiAgICAgICAgICAgICAgey8qIDxwPntwcm9wcy5jb21taXR0ZWR9PC9wPiAqL31cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA6XCJcIlxuICAgICAgICAgIH1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZhbHVlXCI+XG4gICAgICAgICAgICA8cD5CdWRnZXQmbmJzcDsmIzgyMjY7Jm5ic3A7e3Byb3BzLmRvbGxhcnN9Jm5ic3A7amV0b25zPC9wPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcblxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2t9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gSW50cm9Cb3gocHJvcHMpe1xuXG4gIGNvbnN0IHN0YXJ0R2FtZSA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3N0YXJ0aW5nIGdhbWUnKTtcbiAgICBwcm9wcy5nYW1lU3RhcnQoKTtcbiAgfSk7XG5cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2FtZUJveCB0cmFuc3BhcmVudFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnRyb0JveFwiPlxuICAgICAgICB7cHJvcHMuaW50cm9FbGVtfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXJCb3hcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdGFydGJ1dHRvblwiIG9uQ2xpY2s9e3N0YXJ0R2FtZX0+XG4gICAgICAgICAgPHA+Q29tbWVuY2VyIGxlIGpldTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICApXG5cbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUVmZmVjdH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBHYXVnZXMgfSBmcm9tIFwiLi9HYXVnZXNcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gTW9uaXRvcmluZyhwcm9wcyl7XG5cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ1wiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX2NvbnRlbnRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2x1bW5cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vbml0b3JpbmdfdmFsdWVcIj5cbiAgICAgICAgICAgIDxHYXVnZXMgZG9sbGFycz17cHJvcHMuZG9sbGFyc30gY29tbWl0dGVkPXtwcm9wcy5jb21taXR0ZWR9Lz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgeyBwcm9wcy50ZXJhd2F0dHMgfHwgcHJvcHMudGVyYXdhdHRzID09PSAwID9cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX2NvbnRlbnRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX2hlYWRlclwiPlxuICAgICAgICAgICAgICA8aDU+w4lsZWN0cmljaXTDqSBwcm9kdWl0ZSZuYnNwOyYjODIyNjsmbmJzcDt7cHJvcHMudGVyYXdhdHRzfSZuYnNwO1RXaDwvaDU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDpcbiAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgIH1cbiAgICA8L2Rpdj5cblxuICApXG59XG4iLCJcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVBlcmZvcm1hbmNlKGNob2ljZXNfdmFsdWVzKXtcbiAgcmV0dXJuIGNob2ljZXNfdmFsdWVzLnNwbGl0KCdfJykuc2xpY2UoMSkubWFwKGVsZW0gPT4gcGFyc2VJbnQoZWxlbSkpO1xufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgTW9uaXRvcmluZyB9IGZyb20gXCIuLi9nYXVnZXMvTW9uaXRvcmluZ1wiO1xuaW1wb3J0IHsgY2FsY3VsYXRlUGVyZm9ybWFuY2UgfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBDaG9pY2UocHJvcHMpe1xuXG5cbiAgY29uc3QgW3NlbGVjdGlvbiwgc2V0U2VsZWN0aW9uXSA9IHVzZVN0YXRlKG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG5cbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0aW9uYnV0dG9ucyA9IGQzLnNlbGVjdEFsbCgnLmNob2ljZWJ1dHRvbicpO1xuICAgIHNlbGVjdGlvbmJ1dHRvbnMuc2VsZWN0KCcuYnV0bicpLmNsYXNzZWQoJ3NlbGVjdGVkJywgZmFsc2UpO1xuICAgIGlmKHNlbGVjdGlvbil7XG4gICAgICBkMy5zZWxlY3Qoc2VsZWN0aW9uLm9iaikuc2VsZWN0KCcuYnV0bicpLmNsYXNzZWQoJ3NlbGVjdGVkJywgdHJ1ZSk7XG4gICAgfVxuICB9LFtzZWxlY3Rpb25dKVxuXG4gIGNvbnN0IG5leHRQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKGNvc3QsIHBlcmZvcm1hbmNlLCBpbmRleCkgPT4ge1xuICAgIGxldCB0cmlnZ2VyTmV4dCA9IFN0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddKS5zcGxpdChcIjtcIik7XG4gICAgaWYodHJpZ2dlck5leHQubGVuZ3RoID4gMSl7XG4gICAgICBjb25zb2xlLmxvZygnY2hlY2tpbmcgbmV4dDogJywgdHJpZ2dlck5leHQsICcgaW5kZXg6JywgaW5kZXgsICcgcmVzdWx0OicsIFN0cmluZyh0cmlnZ2VyTmV4dFtpbmRleF0pLnJlcGxhY2UoLyhcXHJcXG58XFxufFxccikvZ20sIFwiXCIpKTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChTdHJpbmcodHJpZ2dlck5leHRbaW5kZXhdKS5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKSk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQoU3RyaW5nKHRyaWdnZXJOZXh0WzBdKS5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKSk7XG4gICAgfVxuXG5cbiAgICBwcm9wcy51cGRhdGVEb2xsYXJzKC1wYXJzZUludChjb3N0KSk7XG4gICAgcHJvcHMudXBkYXRlUGVyZm9ybWFuY2UocGVyZm9ybWFuY2UpO1xuICAgIHNldFNlbGVjdGlvbihudWxsKTtcbiAgfSk7XG5cbiAgY29uc3QgcHJldmlvdXNQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XG4gICAgICBjb25zb2xlLmxvZygncHJldmlvdXMgcHJvbXB0IScsIHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uKG51bGwpO1xuICB9KTtcblxuICBjb25zdCB1cGRhdGVTZWxlY3RlZCA9IChldmVudCwgY29zdCwgcGVyZm9ybWFuY2UsIGluZGV4KSA9PiB7XG4gICAgc2V0U2VsZWN0aW9uKHtcbiAgICAgIG9iajogZXZlbnQudGFyZ2V0LFxuICAgICAgY29zdDogY29zdCxcbiAgICAgIHBlcmZvcm1hbmNlOiBwZXJmb3JtYW5jZSxcbiAgICAgIGluZGV4OiBpbmRleFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hvaWNlc1wiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAge1xuICAgICAgICAgIHByb3BzLmNob2ljZXMubWFwKChjaG9pY2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBsZXQgY29zdCA9IHByb3BzLmNob2ljZXNfdmFsdWVzW2luZGV4XS5zcGxpdCgnXycpWzBdO1xuICAgICAgICAgICAgbGV0IHBlcmZvcm1hbmNlID0gY2FsY3VsYXRlUGVyZm9ybWFuY2UocHJvcHMuY2hvaWNlc192YWx1ZXNbaW5kZXhdKTtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hvaWNlYnV0dG9uXCIga2V5PXtpbmRleH0gb25DbGljaz17KGUpID0+IHt1cGRhdGVTZWxlY3RlZChlLCBjb3N0LCBwZXJmb3JtYW5jZSwgaW5kZXgpfX0+XG4gICAgICAgICAgICAgICAgPGRpdiBpZD17aW5kZXh9IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob2xkZXIgaWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtzZWxlY3Rpb24gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5pbmRleCA9PT0gaW5kZXggP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIuL2Fzc2V0cy9pbWcvT2ZmLnN2Z1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi4vYXNzZXRzL2ltZy9Pbi5zdmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLi9hc3NldHMvaW1nL09uLnN2Z1wifT48L2ltZz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9sZGVyIGxhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGg0PntjaG9pY2V9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICA8cD57Y29zdH0gSkVUT05TPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb25pdG9yaW5nIHNob3dUV2g9e2ZhbHNlfSBkb2xsYXJzPXsoc2VsZWN0aW9uICYmIHNlbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShcImNvc3RcIikpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLmdhdWdlcy5wcm9wcy5kb2xsYXJzIC0gc2VsZWN0aW9uLmNvc3QgOiBwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZD17KHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24uaGFzT3duUHJvcGVydHkoXCJjb3N0XCIpKSA/IHNlbGVjdGlvbi5jb3N0IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlPXtwcm9wcy5nYXVnZXMucHJvcHMucGVyZm9ybWFuY2V9Lz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAge3Byb3BzLmN1ckluZGV4ID4gMCA/XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBwcmV2XCIgb25DbGljaz17cHJldmlvdXNQcm9tcHR9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2x1bW5cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGFjdGlvbmJ1dHRvbiBuZXh0ICR7c2VsZWN0aW9uID8gJycgOiAnZGlzYWJsZWQnfWB9IG9uQ2xpY2s9eygpID0+IHtzZWxlY3Rpb24gPyBuZXh0UHJvbXB0KHNlbGVjdGlvbi5jb3N0LCBzZWxlY3Rpb24ucGVyZm9ybWFuY2UsIHNlbGVjdGlvbi5pbmRleCkgOiBjb25zb2xlLmxvZygnRGlzYWJsZWQuJyl9fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgICA8cD5Qb3Vyc3VpdnJlPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcblxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgTW9uaXRvcmluZyB9IGZyb20gXCIuLi9nYXVnZXMvTW9uaXRvcmluZ1wiO1xuaW1wb3J0IHsgY2FsY3VsYXRlUGVyZm9ybWFuY2UgfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBNdWx0aVNlbGVjdGlvbihwcm9wcyl7XG5cbiAgY29uc3QgW3NlbGVjdGlvbiwgc2V0U2VsZWN0aW9uXSA9IHVzZVN0YXRlKFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlc2V0U2VsZWN0aW9uKCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vY29uc29sZS5sb2coJ2N1ciBzZWxlY3Rpb246ICcsIHNlbGVjdGlvbik7XG4gIH0sIFtzZWxlY3Rpb25dKTtcblxuICBjb25zdCByZXNldFNlbGVjdGlvbiA9ICgpID0+IHtcbiAgICBzZXRTZWxlY3Rpb24ocHJvcHMuY2hvaWNlcy5tYXAoZWxlbSA9PiBudWxsKSk7XG4gIH1cblxuICBjb25zdCBjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbiA9IChzZWxlY3Rpb24pID0+IHtcbiAgICBjb25zdCBhY2NDb3N0ID0gc2VsZWN0aW9uLnJlZHVjZSgoYWNjLCBjdXIpID0+IHtcbiAgICAgIGlmKGN1cil7XG4gICAgICAgIGFjYyArPSBjdXIuY29zdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgMCk7XG4gICAgbGV0IGFjY1BlcmZvcm1hbmNlID0gWzAsMCwwXTtcbiAgICBzZWxlY3Rpb24uZm9yRWFjaCgoY3VyLCBjb3VudCkgPT4ge1xuICAgICAgaWYoY3VyKXtcbiAgICAgICAgYWNjUGVyZm9ybWFuY2UgPSBhY2NQZXJmb3JtYW5jZS5tYXAoKGVsZW0sIGlkeCkgPT4ge1xuICAgICAgICAgIHJldHVybiBwYXJzZUludChlbGVtKSArIHBhcnNlSW50KGN1ci5wZXJmb3JtYW5jZVtpZHhdKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFthY2NDb3N0LCBhY2NQZXJmb3JtYW5jZV07XG4gIH07XG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoc2VsZWN0aW9uKSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXTtcbiAgICBwcm9wcy5jaGFuZ2VQcm9tcHQodHJpZ2dlck5leHQpO1xuICAgIGNvbnN0IFthY2NDb3N0LCBhY2NQZXJmb3JtYW5jZV0gPSBjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbihzZWxlY3Rpb24pO1xuXG4gICAgcHJvcHMudXBkYXRlRG9sbGFycygtcGFyc2VJbnQoYWNjQ29zdCkpO1xuICAgIHByb3BzLnVwZGF0ZVBlcmZvcm1hbmNlKGFjY1BlcmZvcm1hbmNlKTtcbiAgICByZXNldFNlbGVjdGlvbigpO1xuICB9KTtcblxuICBjb25zdCBwcmV2aW91c1Byb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgaWYocHJvcHMuY3VySW5kZXggPiAwKXtcbiAgICAgIGNvbnNvbGUubG9nKCdwcmV2aW91cyBwcm9tcHQhJywgcHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgIH1cbiAgICByZXNldFNlbGVjdGlvbigpO1xuICB9KTtcblxuICBjb25zdCB1cGRhdGVTZWxlY3RlZCA9IChldmVudCwgaW5kZXgsIGNvc3QsIHBlcmZvcm1hbmNlKSA9PiB7XG4gICAgbGV0IG5ld0FycmF5ID0gWy4uLnNlbGVjdGlvbl07XG4gICAgaWYoc2VsZWN0aW9uW2luZGV4XSl7XG4gICAgICAvLyBVbnNlbGVjdFxuICAgICAgbmV3QXJyYXlbaW5kZXhdID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIC8vIFNlbGVjdFxuICAgICAgbmV3QXJyYXlbaW5kZXhdID0ge1xuICAgICAgICBvYmo6IGV2ZW50LnRhcmdldCxcbiAgICAgICAgY29zdDogcGFyc2VJbnQoY29zdCksXG4gICAgICAgIHBlcmZvcm1hbmNlOiBwZXJmb3JtYW5jZVxuICAgICAgfTtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uKG5ld0FycmF5KTtcbiAgfVxuXG4gIHJldHVybihcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImNob2ljZXNcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgIHtcbiAgICAgICAgICBwcm9wcy5jaG9pY2VzLm1hcCgoY2hvaWNlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgbGV0IGNvc3QgPSBwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0uc3BsaXQoJ18nKVswXTtcbiAgICAgICAgICAgIGxldCBwZXJmb3JtYW5jZSA9IGNhbGN1bGF0ZVBlcmZvcm1hbmNlKHByb3BzLmNob2ljZXNfdmFsdWVzW2luZGV4XSk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdGlvbmJ1dHRvblwiIGtleT17aW5kZXh9IG9uQ2xpY2s9eyhlKSA9PiB7dXBkYXRlU2VsZWN0ZWQoZSwgaW5kZXgsIGNvc3QsIHBlcmZvcm1hbmNlKX19PlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9e2luZGV4fSBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGhvbGRlciBzZWxlY3Rpb25Cb3ggJHtzZWxlY3Rpb25baW5kZXhdID8gJ3NlbGVjdGVkJyA6ICcnfWB9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxwPis8L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvbGRlciBsYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoND57Y2hvaWNlfTwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgPHA+e2Nvc3R9IEpFVE9OUzwvcD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgICAgPE1vbml0b3Jpbmcgc2hvd1RXaD17ZmFsc2V9IGRvbGxhcnM9eyhzZWxlY3Rpb24gJiYgc2VsZWN0aW9uLmxlbmd0aCA+IDApID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLmdhdWdlcy5wcm9wcy5kb2xsYXJzIC0gY2FsY3VsYXRlVG90YWxTZWxlY3Rpb24oc2VsZWN0aW9uKVswXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZD17KHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24ubGVuZ3RoID4gMCkgPyBjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbihzZWxlY3Rpb24pWzBdIDogMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxuICAgICAgICAgIHtwcm9wcy5jdXJJbmRleCA+IDAgP1xuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gcHJldlwiIG9uQ2xpY2s9e3ByZXZpb3VzUHJvbXB0fT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgICAgPHA+UHJldmlvdXM8L3A+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA6XG4gICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BhY3Rpb25idXR0b24gbmV4dCAke3NlbGVjdGlvbiA/ICcnIDogJ2Rpc2FibGVkJ31gfSBvbkNsaWNrPXsoKSA9PiB7c2VsZWN0aW9uID8gbmV4dFByb21wdChzZWxlY3Rpb24pIDogY29uc29sZS5sb2coJ0Rpc2FibGVkLicpfX0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgPHA+UG91cnN1aXZyZTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBQcmludFByb21wdChwcm9wcyl7XG5cbiAgY29uc3QgcHJldmlvdXNQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XG4gICAgICBjb25zb2xlLmxvZygncHJldiBwcm9tcHQhJywgcHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXTtcblxuICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyB0cmlnZ2VyIG5leHQ6ICcsIHRyaWdnZXJOZXh0KTtcbiAgICBwcm9wcy5jaGFuZ2VQcm9tcHQodHJpZ2dlck5leHQpO1xuXG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwcmludHByb21wdFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXNzYWdlXCI+XG4gICAgICAgIDxwPlxuICAgICAgICAgIHtwcm9wcy5tZXNzYWdlfVxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIHByZXZcIiBvbkNsaWNrPXtwcmV2aW91c1Byb21wdH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgIDxwPlByZXZpb3VzPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gbmV4dFwiIG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5Qb3Vyc3VpdnJlPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuKVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgR2F1Z2VzIH0gZnJvbSBcIi4uL2dhdWdlcy9HYXVnZXNcIjtcbmltcG9ydCB7IE1vbml0b3JpbmcgfSBmcm9tIFwiLi4vZ2F1Z2VzL01vbml0b3JpbmdcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIFJlcGFydGl0aW9uKHByb3BzKXtcblxuICBjb25zdCBbamV0b25zLCBzZXRKZXRvbnNdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFt0ZXJhd2F0dHMsIHNldFRlcmF3YXR0c10gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW290aGVyUGVyZm9NZXRyaWNzLCBzZXRPdGhlclBlcmZvTWV0cmljc10gPSB1c2VTdGF0ZShbMCwwXSk7XG4gIGNvbnN0IFt1bml0cywgc2V0VW5pdHNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbdG9rZW5zUGVyVW5pdCwgc2V0VG9rZW5zUGVyVW5pdF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IG1heFRva2VucyA9IDI1O1xuXG4gIHVzZUVmZmVjdCggKCkgPT4ge1xuXG4gICAgY29uc3Qgb3B0aW9ucyA9IGdldE9wdGlvblBhcmFtcygpO1xuICAgIGNvbnN0IG5ld1VuaXRzID0gb3B0aW9ucy5tYXAoKCkgPT4gMCk7XG4gICAgY29uc3QgdG9rZW5zUGVyVW5pdCA9IG9wdGlvbnMubWFwKGVsZW0gPT4gZWxlbS51bml0VmFsdWUpO1xuICAgIHNldFVuaXRzKG5ld1VuaXRzKTtcbiAgICBzZXRUb2tlbnNQZXJVbml0KHRva2Vuc1BlclVuaXQpO1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCAoKSA9PiB7XG4gICAgbGV0IG5ld0pldG9ucyA9IHVuaXRzLnJlZHVjZShcbiAgICAgIChhY2MsIGN1clZhbCwgaW5kZXgpID0+IHtcbiAgICAgICAgbGV0IGN1ck9wdGlvblBhcmFtcyA9IGdldE9wdGlvblBhcmFtcygpW2luZGV4XTtcbiAgICAgICAgcmV0dXJuIGFjYyArIGN1clZhbDtcbiAgICAgIH0sMCk7XG4gICAgbGV0IG5ld01XID0gdW5pdHMucmVkdWNlKFxuICAgICAgKGFjYywgY3VyVmFsLCBpbmRleCkgPT4ge1xuICAgICAgICBsZXQgY3VyT3B0aW9uUGFyYW1zID0gZ2V0T3B0aW9uUGFyYW1zKClbaW5kZXhdO1xuICAgICAgICByZXR1cm4gYWNjICsgTWF0aC5yb3VuZChjdXJWYWwvY3VyT3B0aW9uUGFyYW1zW1widW5pdFZhbHVlXCJdKmN1ck9wdGlvblBhcmFtc1tcInVuaXRUV2h2YWx1ZVwiXSk7XG4gICAgICB9LDApO1xuICAgICAgLy9jYWxjdWxhdGUgb3RoZXIgcGVyZm9ybWFuY2UgbWV0cmljcyBhZ2dyZWdhdGlvblxuICAgIGxldCBuZXdPdGhlclBlcmZvTWV0cmljcyA9IFswLDBdO1xuICAgIHVuaXRzLmZvckVhY2goKGN1clZhbCwgY291bnQpID0+IHtcbiAgICAgIGxldCBjdXJPcHRpb25QYXJhbXMgPSBnZXRPcHRpb25QYXJhbXMoKVtjb3VudF07XG4gICAgICBuZXdPdGhlclBlcmZvTWV0cmljcyA9IG5ld090aGVyUGVyZm9NZXRyaWNzLm1hcCgoZWxlbSwgaWR4KSA9PiB7XG4gICAgICAgIGlmKGlkeCA9PT0gMCl7XG4gICAgICAgICAgcmV0dXJuIGVsZW0gKyBjdXJWYWwvY3VyT3B0aW9uUGFyYW1zW1widW5pdFZhbHVlXCJdKmN1ck9wdGlvblBhcmFtc1tcInVuaXRFbnZpcm92YWx1ZVwiXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGlkeCA9PT0gMSl7XG4gICAgICAgICAgcmV0dXJuIGVsZW0gKyBjdXJWYWwvY3VyT3B0aW9uUGFyYW1zW1widW5pdFZhbHVlXCJdKmN1ck9wdGlvblBhcmFtc1tcInVuaXRQb3B1dmFsdWVcIl07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHNldEpldG9ucyhuZXdKZXRvbnMpO1xuICAgIHNldFRlcmF3YXR0cyhuZXdNVyk7XG4gICAgc2V0T3RoZXJQZXJmb01ldHJpY3MobmV3T3RoZXJQZXJmb01ldHJpY3MpO1xuICB9LCBbdW5pdHNdKTtcblxuICBjb25zdCBwcmV2aW91c1Byb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgaWYocHJvcHMuY3VySW5kZXggPiAwKXtcbiAgICAgIGNvbnNvbGUubG9nKCdwcmV2IHByb21wdCEnLCBwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBuZXh0UHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBsZXQgc3BsaXR0ZWRUcmlnZ2VyTmV4dCA9IFN0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddKS5zcGxpdChcIl9cIik7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gU3RyaW5nKHNwbGl0dGVkVHJpZ2dlck5leHRbMF0pLnNwbGl0KFwiO1wiKTtcbiAgICBpZih0cmlnZ2VyTmV4dC5sZW5ndGggPT0gMSl7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQoU3RyaW5nKHRyaWdnZXJOZXh0KS5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKSk7XG4gICAgfVxuICAgIGVsc2UgaWYodHJpZ2dlck5leHQubGVuZ3RoID4gMSl7XG4gICAgICBpZighdW5pdHMuZXZlcnkodmFsID0+IHZhbCA9PT0gdW5pdHNbMF0pKXtcbiAgICAgICAgbGV0IGluZGV4T2ZNYXhWYWx1ZSA9IHVuaXRzLnJlZHVjZSgoaU1heCwgeCwgaSwgYXJyKSA9PiB4ID4gYXJyW2lNYXhdID8gaSA6IGlNYXgsIDApO1xuICAgICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQoU3RyaW5nKHRyaWdnZXJOZXh0W2luZGV4T2ZNYXhWYWx1ZV0pLnJlcGxhY2UoLyhcXHJcXG58XFxufFxccikvZ20sIFwiXCIpKTtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIGxldCBkZWZhdWx0TmV4dCA9IFN0cmluZyhzcGxpdHRlZFRyaWdnZXJOZXh0WzFdKS5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKTtcbiAgICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KGRlZmF1bHROZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcHJvcHMudXBkYXRlRG9sbGFycygtamV0b25zKTtcbiAgICBwcm9wcy51cGRhdGVQZXJmb3JtYW5jZShbdGVyYXdhdHRzXS5jb25jYXQob3RoZXJQZXJmb01ldHJpY3MpKTtcbiAgfSk7XG5cbiAgY29uc3QgcHJvY2Vzc0Nob2ljZXMgPSAoY2hvaWNlLCBjaG9pY2VzX3ZhbHVlcykgPT4ge1xuICAgIGNvbnN0IHNwbGl0dGVkQ2hvaWNlcyA9IGNob2ljZXNfdmFsdWVzLnNwbGl0KCdfJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGNob2ljZSxcbiAgICAgIHVuaXRWYWx1ZTogcGFyc2VJbnQoc3BsaXR0ZWRDaG9pY2VzWzBdKSxcbiAgICAgIHVuaXRUV2h2YWx1ZTogcGFyc2VJbnQoc3BsaXR0ZWRDaG9pY2VzWzFdKSxcbiAgICAgIHVuaXRFbnZpcm92YWx1ZTogcGFyc2VJbnQoc3BsaXR0ZWRDaG9pY2VzWzJdKSxcbiAgICAgIHVuaXRQb3B1dmFsdWU6IHBhcnNlSW50KHNwbGl0dGVkQ2hvaWNlc1szXSksXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZ2V0T3B0aW9uUGFyYW1zID0gKCkgPT4ge1xuICAgIHJldHVybiBwcm9wcy5jaG9pY2VzLm1hcCgoY2hvaWNlLCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIHByb2Nlc3NDaG9pY2VzKGNob2ljZSwgcHJvcHMuY2hvaWNlc192YWx1ZXNbaW5kZXhdKTtcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgY2hlY2tJZkZ1bGwgPSAobmV3QWRkaXRpb24pID0+IHtcbiAgICBsZXQgdG90YWwgPSAwO1xuICAgIHVuaXRzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgdG90YWwgKz0gdmFsdWU7XG4gICAgfSk7XG4gICAgaWYodG90YWwrbmV3QWRkaXRpb24gPiBtYXhUb2tlbnMpe1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IG1vZGlmeU9uQ2xpY2sgPSAoZSwgaW5kZXgsIGRpZmYsIGVsZW0pID0+IHtcbiAgICBsZXQgbmV3QXJyYXkgPSBbLi4udW5pdHNdO1xuICAgIGlmKChuZXdBcnJheVtpbmRleF0rZGlmZip0b2tlbnNQZXJVbml0W2luZGV4XSkgPj0gMCl7XG4gICAgICBpZihkaWZmID4gMClcbiAgICAgIHtcbiAgICAgICAgaWYoIWNoZWNrSWZGdWxsKGRpZmYqdG9rZW5zUGVyVW5pdFtpbmRleF0pKXtcbiAgICAgICAgICBuZXdBcnJheVtpbmRleF0gPSBuZXdBcnJheVtpbmRleF0gKyBkaWZmKnRva2Vuc1BlclVuaXRbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBuZXdBcnJheVtpbmRleF0gPSBuZXdBcnJheVtpbmRleF0gKyBkaWZmKnRva2Vuc1BlclVuaXRbaW5kZXhdO1xuICAgICAgfVxuICAgICAgc2V0VW5pdHMobmV3QXJyYXkpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGdlbmVyYXRlVG9rZW5zID0gKCkgPT4ge1xuICAgIGxldCBjdXJyZW50VXNlZFRva2VucyA9IHVuaXRzLm1hcCgoZWxlbSwgaW5kZXgpID0+IHtcbiAgICAgIGxldCBjdXJPcHRpb25QYXJhbXMgPSBnZXRPcHRpb25QYXJhbXMoKVtpbmRleF07XG4gICAgICByZXR1cm4gQXJyYXkoZWxlbSpjdXJPcHRpb25QYXJhbXNbXCJ1bml0VmFsdWVcIl0pLmZpbGwoY3VyT3B0aW9uUGFyYW1zW1wibmFtZVwiXVswXSk7XG4gICAgfSk7XG4gICAgbGV0IGNvbmNhdFRva2VucyA9IFtdLmNvbmNhdC5hcHBseShbXSwgY3VycmVudFVzZWRUb2tlbnMpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiBtYXhUb2tlbnMgfSkubWFwKChlbGVtLCBpbmRleCkgPT4ge1xuICAgICAgbGV0IGN1ckxldHRlciA9IGNvbmNhdFRva2Vuc1tpbmRleF0gPyBTdHJpbmcoY29uY2F0VG9rZW5zW2luZGV4XSkgOiBcIlwiO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b2tlbkNvbnRhaW5lclwiIGtleT17aW5kZXh9PlxuICAgICAgICAgIDxwPntjdXJMZXR0ZXJ9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHJlbmRlclJvd3MgPSAoY2hvaWNlcykgPT4ge1xuICAgIHJldHVybiBjaG9pY2VzLm1hcCggKGVsZW0saW5kZXgpID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3B0aW9uVW5pdFwiIGtleT17aW5kZXh9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VsZWN0b3Jab25lXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdmlzaW9uIG1pbnVzWm9uZVwiIG9uQ2xpY2s9eyhlKSA9PiBtb2RpZnlPbkNsaWNrKGUsIGluZGV4LCAtMSwgZWxlbSl9PlxuICAgICAgICAgICAgICA8aDM+LTwvaDM+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aXNpb24gY2VudHJhbFpvbmVcIj5cbiAgICAgICAgICAgICAgPGgzPnt1bml0c1tpbmRleF19PC9oMz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpc2lvbiBwbHVzWm9uZVwiIG9uQ2xpY2s9eyhlKSA9PiBtb2RpZnlPbkNsaWNrKGUsIGluZGV4LCAxLCBlbGVtKX0+XG4gICAgICAgICAgICAgIDxoMz4rPC9oMz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dFpvbmVcIj5cbiAgICAgICAgICAgIDxoMz57ZWxlbS5uYW1lfTwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubGluZXRleHRcIj5cbiAgICAgICAgICAgICAgPHA+e2VsZW0udW5pdFZhbHVlfSBqZXRvbnMmbmJzcDsmIzgyMjY7Jm5ic3A7e2VsZW0udW5pdFRXaHZhbHVlfSBUV2g8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybihcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJlcGFydGl0aW9uXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wdGlvblpvbmVcIj5cbiAgICAgICAge1xuICAgICAgICAgIHJlbmRlclJvd3MocHJvcHMuY2hvaWNlcy5tYXAoKGUsIGluZGV4KSA9PiBwcm9jZXNzQ2hvaWNlcyhlLCBwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0pKSlcbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgICA8TW9uaXRvcmluZyBzaG93VFdoPXt0cnVlfSBkb2xsYXJzPXtwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycy1qZXRvbnN9IGNvbW1pdHRlZD17amV0b25zfSB0ZXJhd2F0dHM9e3RlcmF3YXR0c30vPlxuICAgICAge3Byb3BzLmN1ckluZGV4ID4gMCA/XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIHByZXZcIiBvbkNsaWNrPXtwcmV2aW91c1Byb21wdH0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDpcbiAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgIH1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIG5leHRcIiBvbkNsaWNrPXtuZXh0UHJvbXB0fT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgPHA+UG91cnN1aXZyZTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxuXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgZDNUaXAgZnJvbSAnZDMtdGlwJztcblxuZXhwb3J0IGZ1bmN0aW9uIE1hcE5hdmlnYXRvcihwcm9wcyl7XG5cbiAgY29uc3QgW3NlbGVjdGlvbiwgc2V0U2VsZWN0aW9uXSA9IHVzZVN0YXRlKG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0dXBPbkNsaWNrKCk7XG4gIH0sW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYoc2VsZWN0aW9uKXtcbiAgICAgIGQzLnNlbGVjdCgnLnBvcFVwLWJnJykuc3R5bGUoJ2Rpc3BsYXknLCAndW5zZXQnKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGQzLnNlbGVjdCgnLnBvcFVwLWJnJykuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgIH1cbiAgfSwgW3NlbGVjdGlvbl0pO1xuXG4gIGNvbnN0IHRpcCA9IGQzVGlwKClcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZDMtdGlwIGFkanVzdGVkJylcbiAgICAgICAgICAgICAgICAuZGlyZWN0aW9uKCduJylcbiAgICAgICAgICAgICAgICAuaHRtbCgoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dvdCBkOiAnLCBkKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgICAgICA8aDQ+JHtkLnRpdGxlfTwvaDQ+XG4gICAgICAgICAgICAgICAgICA8cD4ke2Quc3VwcF90ZXh0fTwvcD5cbiAgICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgY29uc3Qgc2V0dXBPbkNsaWNrID0gKCkgPT4ge1xuICAgIFByb21pc2UuYWxsKFtcbiAgICAgIGQzLnhtbChwcm9wcy5tYXBbMF0pLFxuICAgICAgZDMueG1sKHByb3BzLm1hcFsxXSlcbiAgICBdKS50aGVuKChbYmdNYXAsIGljb25PTk1hcF0pID0+IHtcbiAgICAgIGQzLnNlbGVjdCgnI2JnLW1hcCcpLm5vZGUoKVxuICAgICAgICAuYXBwZW5kKGJnTWFwLmRvY3VtZW50RWxlbWVudCk7XG4gICAgICBkMy5zZWxlY3QoJyNvbi1pY29ucycpLm5vZGUoKVxuICAgICAgICAuYXBwZW5kKGljb25PTk1hcC5kb2N1bWVudEVsZW1lbnQpO1xuICAgICAgY29uc3QgT25JY29uc1NWRyA9IGQzLnNlbGVjdCgnI29uLWljb25zJykuc2VsZWN0KCdzdmcnKTtcbiAgICAgIE9uSWNvbnNTVkcuY2FsbCh0aXApO1xuICAgICAgZDMuc2VsZWN0KCcuZ2FtZVNjcmVlbicpLm5vZGUoKS5hcHBlbmRDaGlsZChcbiAgICAgICAgZDMuc2VsZWN0KCcuZDMtdGlwJykubm9kZSgpXG4gICAgICApO1xuICAgICAgY29uc3QgZ0J1dHRvbnMgPSBPbkljb25zU1ZHLnNlbGVjdCgnI0ljb25lLU9uJykuc2VsZWN0QWxsKCdnJyk7XG4gICAgICBjb25zdCB0aXRsZXMgPSBTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peCddKS5zcGxpdCgnOycpO1xuICAgICAgY29uc3Qgc3VwcF90ZXh0cyA9IFN0cmluZyhwcm9wcy5tZXNzYWdlKS5zcGxpdCgnOycpO1xuICAgICAgZ0J1dHRvbnMubm9kZXMoKS5yZXZlcnNlKCkubWFwKChub2RlLGNvdW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1clRpcERhdGEgPSB7XG4gICAgICAgICAgICB0aXRsZTogdGl0bGVzW2NvdW50XSxcbiAgICAgICAgICAgIHN1cHBfdGV4dDogc3VwcF90ZXh0c1tjb3VudF1cbiAgICAgICAgICB9XG4gICAgICAgIGQzLnNlbGVjdChub2RlKVxuICAgICAgICAub24oJ2NsaWNrJywgKGQsaSxub2RlcykgPT4ge1xuICAgICAgICAgIGQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgdGlwLnNob3coY3VyVGlwRGF0YSwgbm9kZSk7XG4gICAgICAgICAgdG9nZ2xlSWNvbihkLnRhcmdldC5wYXJlbnRFbGVtZW50LCBmYWxzZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignbW91c2VvdmVyJywgKGQsaSxub2RlcykgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGVja2luZyBkOiAnLCBkLnRhcmdldC5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgICBkLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHRpcC5zaG93KGN1clRpcERhdGEsbm9kZSk7XG4gICAgICAgICAgdG9nZ2xlSWNvbihkLnRhcmdldC5wYXJlbnRFbGVtZW50LCBmYWxzZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignbW91c2VvdXQnLCAoZCxpLG5vZGVzKSA9PiB7XG4gICAgICAgICAgdGlwLmhpZGUobm9kZSk7XG4gICAgICAgICAgdG9nZ2xlSWNvbihkLnRhcmdldC5wYXJlbnRFbGVtZW50LCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGQzLnNlbGVjdChcIi5nYW1lQm94XCIpLm9uKCdjbGljaycsICgpID0+IHt0aXAuaGlkZSgpfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlSWNvbiA9IChpY29uT2JqLCBzdGF0dXMpID0+IHtcbiAgICBpZihzdGF0dXMgPT09IGZhbHNlKXtcbiAgICAgIGQzLnNlbGVjdChpY29uT2JqKS5zdHlsZSgnb3BhY2l0eScsIDApO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgZDMuc2VsZWN0KGljb25PYmopLnN0eWxlKCdvcGFjaXR5JywgMSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgY29uc29sZS5sb2coJ3ByZXYgcHJvbXB0IScsIHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IG5leHRQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGxldCB0cmlnZ2VyTmV4dCA9IHByb3BzLmN1clByb21wdFsnVHJpZ2dlcl9uZXh0J107XG5cbiAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgdHJpZ2dlciBuZXh0OiAnLCB0cmlnZ2VyTmV4dCk7XG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KHRyaWdnZXJOZXh0KTtcblxuICB9KTtcblxuICByZXR1cm4gKFxuICA8ZGl2IGNsYXNzTmFtZT1cInByaW50cHJvbXB0IG1hcG5hdmlnYXRvclwiPlxuICAgIDxkaXYgY2xhc3NOYW1lPVwicG9wVXAtYmdcIj5cbiAgICAgIHsgc2VsZWN0aW9uID9cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicG9wVXAtYm94XCI+XG4gICAgICAgIDxoND57c2VsZWN0aW9uLnRpdGxlfTwvaDQ+XG4gICAgICAgIDxwPntzZWxlY3Rpb24uc3VwcF90ZXh0fTwvcD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b25cIiBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3Rpb24obnVsbCl9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgPHA+RmVybWVyPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgOlxuICAgICAgPGRpdj48L2Rpdj5cbiAgICAgIH1cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1hcEhvbGRlclwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdXBlcnBvc2VkTWFwXCI+XG4gICAgICAgIDxkaXYgaWQ9XCJiZy1tYXBcIiBjbGFzc05hbWU9XCJtYXAgbm9DbGlja1wiPjwvZGl2PlxuICAgICAgICA8ZGl2IGlkPVwib24taWNvbnNcIiBjbGFzc05hbWU9XCJtYXBcIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIHByZXZcIiBvbkNsaWNrPXtwcmV2aW91c1Byb21wdH0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgPHA+UHJldmlvdXM8L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBuZXh0XCIgb25DbGljaz17bmV4dFByb21wdH0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgPHA+U3VpdmFudDwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gQmlsYW4ocHJvcHMpe1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2dvdCBiaWxhbiA6ICcsIHByb3BzLmN1clByb21wdCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBuZXh0UHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBsZXQgdHJpZ2dlck5leHQgPSBwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddO1xuXG4gICAgY29uc29sZS5sb2coJ0NoZWNraW5nIHRyaWdnZXIgbmV4dDogJywgdHJpZ2dlck5leHQpO1xuICAgIHByb3BzLmNoYW5nZVByb21wdCh0cmlnZ2VyTmV4dCk7XG5cbiAgfSk7XG5cbiAgY29uc3QgcHJvY2Vzc0JpbGFuID0gKCkgPT4ge1xuICAgIGxldCB0ZXh0Q29udGVudEFycmF5ID0gcHJvcHMuY3VyUHJvbXB0W1wiVGV4dGVcIl0uc3BsaXQoJzsnKTtcbiAgICBsZXQgdGV4dFN1cHBBcnJheSA9IHByb3BzLmN1clByb21wdFtcIlRleHRlX1N1cHBcIl0uc3BsaXQoJzsnKTtcbiAgICBsZXQgcHJvY2Vzc2VkQ29udGVudCA9IFtdO1xuICAgIC8vIGdlbmVyaWMgdGV4dFxuICAgIGxldCBnZW5lcmljVGV4dCA9IHRleHRDb250ZW50QXJyYXlbMF0ucmVwbGFjZSgnKm5ld1Byb2QqJywgcHJvcHMucGVyZm9ybWFuY2VbMF0pO1xuICAgIHByb2Nlc3NlZENvbnRlbnQucHVzaChnZW5lcmljVGV4dCk7XG4gICAgbGV0IGJhcnJhZ2VUZXh0ID0gdGV4dFN1cHBBcnJheVswXTtcbiAgICBsZXQgbG93Q2FzaFRleHQgPSB0ZXh0U3VwcEFycmF5WzFdO1xuICAgIGxldCBsb3dFbnZUZXh0ID0gdGV4dFN1cHBBcnJheVsyXTtcbiAgICBsZXQgbG93UG9wVGV4dCA9IHRleHRTdXBwQXJyYXlbM107XG5cbiAgICByZXR1cm4gcHJvY2Vzc2VkQ29udGVudDtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYmlsYW5Db250ZW50XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInVwZGF0YWJsZVRleHRcIj5cbiAgICAgICAge1xuICAgICAgICBwcm9jZXNzQmlsYW4oKS5tYXAoKGVsZW0sIGNvdW50KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8cCBrZXk9e2NvdW50fT5cbiAgICAgICAgICAgIHtwYXJzZShlbGVtKX1cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gbmV4dFwiIG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5Qb3Vyc3VpdnJlPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG5cbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIEVuZEdhbWUocHJvcHMpe1xuXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInByb21wdEJveFwiPlxuICAgICAgPHA+RmluIGR1IGpldS48L3A+XG4gICAgICA8cD4ocmVmb3JtdWxlcikgTGUgamV1IGEgcHJpcyBmaW4gw6AgY2F1c2UgZGUgOiB7YCR7cHJvcHMucmFpc29ufWB9PC9wPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDaG9pY2UgfSBmcm9tIFwiLi9wcm9tcHRmaWxsL0Nob2ljZVwiO1xuaW1wb3J0IHsgTXVsdGlTZWxlY3Rpb24gfSBmcm9tIFwiLi9wcm9tcHRmaWxsL011bHRpU2VsZWN0aW9uXCI7XG5pbXBvcnQgeyBQcmludFByb21wdCB9IGZyb20gXCIuL3Byb21wdGZpbGwvUHJpbnRQcm9tcHRcIjtcbmltcG9ydCB7IFJlcGFydGl0aW9uIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9SZXBhcnRpdGlvblwiO1xuaW1wb3J0IHsgTWFwTmF2aWdhdG9yIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9NYXBOYXZpZ2F0b3JcIjtcbmltcG9ydCB7IEJpbGFuIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9CaWxhblwiO1xuaW1wb3J0IHsgRW5kR2FtZSB9IGZyb20gXCIuL3Byb21wdGZpbGwvRW5kR2FtZVwiO1xuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gUHJvbXB0Qm94KHByb3BzKXtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuXG4gIH0sIFtdKTtcblxuICBjb25zdCBjaGFuZ2VQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKG5ld1ZhbHVlKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0NoYW5naW5nIHByb21wdCBmb3IgOiAnLCBuZXdWYWx1ZSk7XG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KG5ld1ZhbHVlKTtcbiAgfSk7XG5cbiAgY29uc3QgdXBkYXRlRG9sbGFycyA9IHVzZUNhbGxiYWNrKCBhc3luYyAoZGlmZlZhbHVlKSA9PiB7XG4gICAgaWYoTnVtYmVyLmlzSW50ZWdlcihkaWZmVmFsdWUpKXtcbiAgICAgIHByb3BzLnVwZGF0ZURvbGxhcnMoZGlmZlZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHVwZGF0ZVBlcmZvcm1hbmNlID0gdXNlQ2FsbGJhY2soIGFzeW5jIChkaWZmQXJyYXkpID0+IHtcbiAgICBwcm9wcy51cGRhdGVQZXJmb3JtYW5jZShkaWZmQXJyYXkpO1xuICB9KTtcblxuICBjb25zdCBwcm9jZXNzUmVhc29uRW5kR2FtZSA9ICgpID0+IHtcbiAgICBsZXQgcmVhc29ucyA9IFtdO1xuICAgIGNvbnNvbGUubG9nKCdjaGVja2luZyByZWFzb24gcHJvY2Vzc2luZzonLCBwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycywgcHJvcHMucGVyZm9ybWFuY2UpO1xuICAgIGlmKHByb3BzLmdhdWdlcy5wcm9wcy5kb2xsYXJzIDwgMCl7XG4gICAgICByZWFzb25zLnB1c2goXCJWb3VzIG4nYXZleiBwbHVzIGQnYXJnZW50LlwiKTtcbiAgICB9XG4gICAgaWYocHJvcHMucGVyZm9ybWFuY2VbMF0gPCAwKXtcbiAgICAgIHJlYXNvbnMucHVzaChcIlZvdXMgYXZleiBnw6JjaMOpIGxlIHBhcmMgZGUgcHJvZHVjdGlvbiDDqWxlY3RyaXF1ZSBkJ0h5ZHJvLVF1w6liZWMuXCIpO1xuICAgIH1cbiAgICBpZihwcm9wcy5wZXJmb3JtYW5jZVsxXSA8IDApe1xuICAgICAgcmVhc29ucy5wdXNoKFwiVm90cmUgYmlsYW4gZW52aXJvbm5lbWVudGFsIGVzdCBleGPDqWNyYWJsZS5cIik7XG4gICAgfVxuICAgIGlmKHByb3BzLnBlcmZvcm1hbmNlWzJdIDwgMCl7XG4gICAgICByZWFzb25zLnB1c2goXCJMYSBmdXJldXIgcG9wdWxhaXJlIGEgZXUgcmFpc29uIGRlIHZvdHJlIHBvc3RlLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlYXNvbnM7XG4gIH1cblxuXG4gIGNvbnN0IHJlbmRlclN3aXRjaCA9IChwYXJhbSkgPT4ge1xuICAgIHN3aXRjaChwYXJhbSl7XG4gICAgICBjYXNlICdSZXBhcnRpdGlvbicgOlxuICAgICAgICByZXR1cm4gPFJlcGFydGl0aW9uIGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4J10pLnNwbGl0KCc7Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlc192YWx1ZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0NvdXRfRWxlY19FbnZfUG9wdSddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXVnZXM9e3Byb3BzLmdhdWdlc30vPjtcbiAgICAgIGNhc2UgJ0NhcnRlJzpcbiAgICAgICAgcmV0dXJuIDxNYXBOYXZpZ2F0b3IgY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17U3RyaW5nKHByb3BzLmN1clByb21wdFsnVGV4dGVfU3VwcCddKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLmN1ckluZGV4ID09PSBcIlExLTFcIiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcImFzc2V0cy9pbWcvQ2FydGUtSHlkcm8uc3ZnXCIsXCJhc3NldHMvaW1nL0NhcnRlLUh5ZHJvLWljb25lLW9uLnN2Z1wiXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcImFzc2V0cy9pbWcvQ2FydGUtRW9saWVuLnN2Z1wiLFwiYXNzZXRzL2ltZy9DYXJ0ZS1Fb2xpZW4taWNvbmUtb24uc3ZnXCJdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfS8+O1xuICAgICAgY2FzZSAndGV4dGVCb3V0b25TaW1wbGUnOlxuICAgICAgICByZXR1cm4gPFByaW50UHJvbXB0IGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ1RleHRlX1N1cHAnXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fS8+O1xuICAgICAgY2FzZSAnQ2hvaXhSZXBvbnNlJzpcbiAgICAgICAgcmV0dXJuIDxDaG9pY2UgY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXgnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzX3ZhbHVlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ291dF9FbGVjX0Vudl9Qb3B1J10pLnNwbGl0KCc7Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZURvbGxhcnM9e3VwZGF0ZURvbGxhcnN9XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGVyZm9ybWFuY2U9e3VwZGF0ZVBlcmZvcm1hbmNlfVxuICAgICAgICAgICAgICAgICAgICAgIGdhdWdlcz17cHJvcHMuZ2F1Z2VzfS8+O1xuICAgICAgY2FzZSAnQ2F0YXN0cm9waGUnOlxuICAgICAgICByZXR1cm4gPENob2ljZSBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peCddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXNfdmFsdWVzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDb3V0X0VsZWNfRW52X1BvcHUnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRG9sbGFycz17dXBkYXRlRG9sbGFyc31cbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQZXJmb3JtYW5jZT17dXBkYXRlUGVyZm9ybWFuY2V9XG4gICAgICAgICAgICAgICAgICAgICAgZ2F1Z2VzPXtwcm9wcy5nYXVnZXN9Lz47XG4gICAgICBjYXNlICdNdWx0aVNlbGVjdGlvbic6XG4gICAgICAgIHJldHVybiA8TXVsdGlTZWxlY3Rpb24gY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peCddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlc192YWx1ZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0NvdXRfRWxlY19FbnZfUG9wdSddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGVyZm9ybWFuY2U9e3VwZGF0ZVBlcmZvcm1hbmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F1Z2VzPXtwcm9wcy5nYXVnZXN9Lz47XG4gICAgICBjYXNlICdCaWxhbic6XG4gICAgICAgIHJldHVybiA8QmlsYW4gY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fVxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZURvbGxhcnM9e3VwZGF0ZURvbGxhcnN9XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGVyZm9ybWFuY2U9e3VwZGF0ZVBlcmZvcm1hbmNlfVxuICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlPXtwcm9wcy5wZXJmb3JtYW5jZX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gPENob2ljZSBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH0gY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXgnXSkuc3BsaXQoJzsnKX0gY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9IGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH0vPjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgICAgcHJvcHMuZW5kR2FtZSA9PT0gdHJ1ZSA/XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2FtZUJveFwiPlxuICAgICAgICAgIDxFbmRHYW1lXG4gICAgICAgICAgICByYWlzb249e3Byb2Nlc3NSZWFzb25FbmRHYW1lKCl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA6XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2FtZUJveFwiPlxuXG4gICAgICAgICAge3Byb3BzLmN1clByb21wdFsnVHlwZSddID09PSBcIkJpbGFuXCIgP1xuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9tcHRCb3ggYmlsYW5cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1hc3NpdmVUaXRsZVwiPlxuICAgICAgICAgICAgICAgICAgPGgyPntwYXJzZShwcm9wcy5jdXJQcm9tcHRbJ1N1amV0J10pfTwvaDI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlcGFyYXRvclwiPjwvZGl2PlxuICAgICAgICAgICAgICB7cmVuZGVyU3dpdGNoKHByb3BzLmN1clByb21wdFsnVHlwZSddKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDpcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvbXB0Qm94XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdXJ0aXRyZVwiPlxuICAgICAgICAgICAgICAgICAgPGg0PntwYXJzZShwcm9wcy5jdXJQcm9tcHRbJ1N1amV0J10pfTwvaDQ+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJxdWVzdGlvblwiPlxuICAgICAgICAgICAgICAgICAgPHA+e3BhcnNlKHByb3BzLmN1clByb21wdFsnVGV4dGUnXSl9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge3JlbmRlclN3aXRjaChwcm9wcy5jdXJQcm9tcHRbJ1R5cGUnXSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB9XG4gICAgICAgIDwvZGl2PlxuICApXG5cblxufVxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEdhdWdlcyB9IGZyb20gXCIuL2dhdWdlcy9HYXVnZXNcIjtcbmltcG9ydCB7IEludHJvQm94IH0gZnJvbSBcIi4vaW50cm9Cb3hcIjtcbmltcG9ydCB7IFByb21wdEJveCB9IGZyb20gXCIuL1Byb21wdEJveFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gTWFpbkZyYW1lKHByb3BzKXtcblxuICBjb25zdCBbZ2FtZVN0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlKCdJRExFJyk7XG4gIGNvbnN0IFtnYW1lSW5kZXgsIHNldEdhbWVJbmRleF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2RvbGxhcnMsIHNldERvbGxhcnNdID0gdXNlU3RhdGUoNTApO1xuICBjb25zdCBbcGVyZm9ybWFuY2UsIHNldFBlcmZvcm1hbmNlXSA9IHVzZVN0YXRlKFswLDAsMF0pO1xuICBjb25zdCBbYmcsIHNldEJHXSA9IHVzZVN0YXRlKCdub3JtYWwnKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdnYW1lICcsIGdhbWVTdGF0dXMpO1xuICB9LCBbZ2FtZVN0YXR1c10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZ2V0R2FtZVByb21wdChnYW1lSW5kZXgpO1xuICAgIGlmKGdhbWVJbmRleCA9PT0gXCJFTkRcIil7XG4gICAgICBnYW1lRW5kKCk7XG4gICAgfVxuICB9LCBbZ2FtZUluZGV4XSk7XG5cbiAgY29uc3QgZ2FtZVN0YXJ0ID0gKCkgPT4ge1xuICAgIHNldFN0YXR1cygnU1RBUlRFRCcpO1xuICAgIHNldEdhbWVJbmRleCgwKTtcbiAgfVxuXG4gIGNvbnN0IGdhbWVFbmQgPSAoKSA9PiB7XG4gICAgc2V0U3RhdHVzKCdFTkQnKTtcbiAgfVxuXG4gIGNvbnN0IGdldEdhbWVQcm9tcHQgPSAoZ2FtZUluZGV4KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2N1cnJlbnQgZ2FtZSBwcm9tcHQ6JywgcHJvcHMuZ2FtZURhdGEuZmlsdGVyKGVsZW0gPT4ge3JldHVybiBTdHJpbmcoZWxlbVtcIklEXCJdKSA9PT0gU3RyaW5nKGdhbWVJbmRleCk7fSkpO1xuICB9XG5cbiAgY29uc3QgdXBkYXRlRG9sbGFycyA9IChkaWZmKSA9PiB7XG4gICAgaWYoZG9sbGFycyArIGRpZmYgPj0gMCl7XG4gICAgICBzZXREb2xsYXJzKGRvbGxhcnMgPT4gZG9sbGFycyArIGRpZmYpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgZ2FtZUVuZCgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHVwZGF0ZVBlcmZvcm1hbmNlID0gKGRpZmYpID0+IHtcbiAgICBsZXQgbmV3UGVyZm9ybWFuY2UgPSBBcnJheS5hcHBseShudWxsLCBBcnJheShkaWZmLmxlbmd0aCkpLm1hcChmdW5jdGlvbiAoKSB7fSk7XG4gICAgcGVyZm9ybWFuY2UuZm9yRWFjaCgoZWxlbSwgY291bnQpID0+IHtcbiAgICAgIGlmKGVsZW0gKyBkaWZmW2NvdW50XSA8IDApe1xuICAgICAgICAvL2dhbWVFbmQoKTtcbiAgICAgIH1cbiAgICAgIG5ld1BlcmZvcm1hbmNlW2NvdW50XSA9IGVsZW0gKyBkaWZmW2NvdW50XTtcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnU2V0dGluZyBwZXJmb3JtYW5jZSB0byA6ICcsIG5ld1BlcmZvcm1hbmNlKTtcbiAgICBzZXRQZXJmb3JtYW5jZShuZXdQZXJmb3JtYW5jZSk7XG5cbiAgfVxuXG4gIGNvbnN0IGZpbmRHYW1lSW5kZXggPSAoSURuYW1lKSA9PiB7XG5cbiAgICBjb25zdCBmb3VuZElEID0gcHJvcHMuZ2FtZURhdGEuZmluZEluZGV4KChlbGVtKSA9PiB7XG4gICAgICByZXR1cm4gU3RyaW5nKElEbmFtZSkgPT09IFN0cmluZyhlbGVtWydJRCddKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm91bmRJRDtcbiAgfVxuXG4gIGNvbnN0IGNoZWNrQkcgPSAoY3VyUHJvbXB0VHlwZSkgPT4ge1xuICAgIGlmKGN1clByb21wdFR5cGUgPT09IFwiQ2F0YXN0cm9waGVcIil7XG4gICAgICBzZXRCRygncmVkcGluaycpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgaWYoYmcgIT09ICdub3JtYWwnKXtcbiAgICAgICAgc2V0QkcoJ25vcm1hbCcpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGN1clByb21wdCA9IHByb3BzLmdhbWVEYXRhW2ZpbmRHYW1lSW5kZXgoZ2FtZUluZGV4KV07XG4gICAgaWYoY3VyUHJvbXB0ICYmIGN1clByb21wdC5oYXNPd25Qcm9wZXJ0eShcIlR5cGVcIikpe1xuICAgICAgY2hlY2tCRyhjdXJQcm9tcHRbXCJUeXBlXCJdKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IGdldEJhY2tncm91bmRJbmZvID0gKCkgPT4ge1xuICAgIGNvbnN0IGdhbWVTY3JlZW5DbGFzcyA9IChnYW1lU3RhdHVzID09PSBcIkVORFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUluZGV4ID09PSBcIkVORFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmcgPT09IFwicmVkcGlua1wiKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJnYW1lT3ZlclwiIDogXCJcIjtcblxuXG4gICAgY29uc3QgY3VyUHJvbXB0ID0gcHJvcHMuZ2FtZURhdGFbZmluZEdhbWVJbmRleChnYW1lSW5kZXgpXTtcbiAgICBjb25zdCBiYWNrZ3JvdW5kSW1hZ2UgPSBjdXJQcm9tcHQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGN1clByb21wdFtcIkJhY2tncm91bmRcIl0gPT09IFwicHlsb25lXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIklsbHVzX1NlY3Rpb24tMDFfUHlsb25lX1YwMS0xNC5zdmdcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clByb21wdFtcIkJhY2tncm91bmRcIl0gPT09IFwiYW1wb3VsZVwiID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIklsbHVzX1NlY3Rpb24tMDJfQW1wb3VsZV9WMDIuc3ZnXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyUHJvbXB0W1wiQmFja2dyb3VuZFwiXSA9PT0gXCJjZW50cmFsZVwiID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiSWxsdXNfU2VjdGlvbi0wMF9DZW50cmFsZV9WMDEuc3ZnXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbDtcblxuICAgIHJldHVybiB7XG4gICAgICBnYW1lU2NyZWVuQ2xhc3M6IGdhbWVTY3JlZW5DbGFzcyxcbiAgICAgIGJhY2tncm91bmRJbWFnZTogYmFja2dyb3VuZEltYWdlXG4gICAgfTtcbiAgfTtcblxuXG4gIGNvbnN0IGRvbUVsZW1lbnQgPSBnYW1lU3RhdHVzID09PSBcIklETEVcIiA/XG4gICAgKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYW1lU2NyZWVuXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmFja2dyb3VuZC1pbWFnZVwiPlxuICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgIHNyYz1cImFzc2V0cy9pbWcvSWxsdXNfU2VjdGlvbi0wMF9DZW50cmFsZV9WMDEuc3ZnXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPEludHJvQm94IGludHJvRWxlbT17cHJvcHMuaW50cm9FbGVtfSBtYXBPYmo9e3Byb3BzLm1hcE9ian0gZ2FtZVN0YXJ0PXtnYW1lU3RhcnR9IC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gICAgOlxuICAgIDxkaXYgY2xhc3NOYW1lPXtgZ2FtZVNjcmVlbiAke2dldEJhY2tncm91bmRJbmZvKCkuZ2FtZVNjcmVlbkNsYXNzfWB9PlxuICAgICAge1xuICAgICAgICAoZ2V0QmFja2dyb3VuZEluZm8oKS5iYWNrZ3JvdW5kSW1hZ2UgIT09IG51bGwpP1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmFja2dyb3VuZC1pbWFnZVwiPlxuICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICBzcmM9e2Bhc3NldHMvaW1nLyR7Z2V0QmFja2dyb3VuZEluZm8oKS5iYWNrZ3JvdW5kSW1hZ2V9YH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibm8tbW9iaWxlXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgOlxuICAgICAgICAgICcnXG4gICAgICB9XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRlbXBvcmFyeUluZm9cIj5cbiAgICAgICAgPHA+UGVyZm9ybWFuY2UgKHRlbXBvcmFpcmUpPC9wPlxuICAgICAgICA8cD5Eb2xsYXJzOiB7YCR7ZG9sbGFyc30gJGB9PC9wPlxuICAgICAgICA8cD5FbGVjOiB7YCR7cGVyZm9ybWFuY2VbMF19IFRXaGB9PC9wPlxuICAgICAgICA8cD5FbnZpcm86IHtgJHtwZXJmb3JtYW5jZVsxXX0gcHRzYH08L3A+XG4gICAgICAgIDxwPlBvcHU6IHtgJHtwZXJmb3JtYW5jZVsyXX0gcHRzYH08L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxQcm9tcHRCb3ggY3VySW5kZXg9e2dhbWVJbmRleH1cbiAgICAgICAgY3VyUHJvbXB0PXsoZ2FtZUluZGV4ID09PSBcIkVORFwiKSA/IFwiXCIgOiBwcm9wcy5nYW1lRGF0YVtmaW5kR2FtZUluZGV4KGdhbWVJbmRleCldfVxuICAgICAgICBjaGFuZ2VQcm9tcHQ9e3NldEdhbWVJbmRleH1cbiAgICAgICAgdXBkYXRlRG9sbGFycz17dXBkYXRlRG9sbGFyc31cbiAgICAgICAgdXBkYXRlUGVyZm9ybWFuY2U9e3VwZGF0ZVBlcmZvcm1hbmNlfVxuICAgICAgICBnYXVnZXM9ezxHYXVnZXMgZG9sbGFycz17ZG9sbGFyc30vPn1cbiAgICAgICAgcGVyZm9ybWFuY2U9e3BlcmZvcm1hbmNlfVxuICAgICAgICBlbmRHYW1lPXtnYW1lSW5kZXggPT09IFwiRU5EXCIgfHwgZ2FtZVN0YXR1cyA9PT0gXCJFTkRcIn1cblxuICAgICAgICAvPlxuICAgIDwvZGl2PjtcblxuICByZXR1cm4gZG9tRWxlbWVudDtcbn1cbiIsImltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tL2NsaWVudFwiO1xuaW1wb3J0IHsgcmVuZGVyVG9TdGF0aWNNYXJrdXAgfSBmcm9tICdyZWFjdC1kb20vc2VydmVyJztcbmltcG9ydCB7IE1haW5GcmFtZSB9IGZyb20gJy4vY29tcG9uZW50cy9tYWluZnJhbWUnO1xuaW1wb3J0IHsgb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLCBjb250ZW50SGVhZGVyQ29uc3RhbnRzIH0gZnJvbSBcIi4uL2dlbmVyYXRvci9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IEludHJvU2VjdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvSW50cm9TZWN0aW9uJztcblxuZXhwb3J0IGNsYXNzIEVuZ2luZSB7XG5cbiAgY29uc3RydWN0b3IoY29udGFpbmVyLCBvcHRpb25EYXRhLCBpbnRyb09iaiwgZ2FtZURhdGEpe1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIGNvbnN0IHJvb3RFbGVtID0gdGhpcy5jb250YWluZXIuYXBwZW5kKCdkaXYnKVxuICAgICAgLmNsYXNzZWQoJ3Jvb3RFbGVtJywgdHJ1ZSk7XG4gICAgdGhpcy5lbmdpbmVSb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbS5ub2RlKCkpO1xuICAgIHRoaXMub3B0aW9uRGF0YSA9IG9wdGlvbkRhdGE7XG4gICAgdGhpcy5hbW9yY2UgPSBpbnRyb09ialtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXTtcbiAgICB0aGlzLmdhbWVEYXRhID0gZ2FtZURhdGE7XG4gICAgY29uc29sZS5sb2coJ2dhbWUgRGF0YSBpcyA6ICcsIHRoaXMuZ2FtZURhdGEpO1xuICAgIHRoaXMuaW5pdEVuZ2luZSgpO1xuICB9XG5cbiAgaW5pdEVuZ2luZSgpe1xuICAgIGNvbnN0IGludHJvRWxlbSA9ICg8SW50cm9TZWN0aW9uXG4gICAgICBrZXk9e1wiZ2FtZUludHJvXCJ9XG4gICAgICBzZWN0aW9uVHlwZT17b3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5pbnRyb3RpdHJlfVxuICAgICAgb3B0aW9uRGF0YT17dGhpcy5vcHRpb25EYXRhfVxuICAgICAgYW1vcmNlPXt0aGlzLmFtb3JjZX1cbiAgICAgIGJhY2tncm91bmQ9e251bGx9XG4gICAgICBjbGFzc2VzPXtcIlwifVxuICAgICAgLz4pO1xuXG4gICAgdGhpcy5lbmdpbmVSb290LnJlbmRlcig8TWFpbkZyYW1lIGludHJvRWxlbT17aW50cm9FbGVtfSBnYW1lU3RhdHVzPXt0aGlzLmdhbWVTdGF0dXN9IGdhbWVEYXRhPXt0aGlzLmdhbWVEYXRhfS8+KTtcbiAgfVxuXG59XG4iLCIvKipcbiAqIHZpei5qc1xuICogPT09PT09PVxuICogRmlsZSB1c2VkIHRvIGRlZmluZSB0aGUgdmlzdWFsaXphdGlvbiBzZWN0aW9uLlxuICovXG5cbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCB7IGdldFN0cnVjdHVyZSwgZ2VuZXJhdGVDYWxsYmFja3MsIGdldE9wdGlvbnMgfSBmcm9tICcuL2dlbmVyYXRvci9zdHJ1Y3R1cmVHZW5lcmF0b3IuanMnO1xuaW1wb3J0IHsgY2FsbGJhY2tzIH0gZnJvbSAnLi4vZGF0YS9zdHJ1Y3R1cmUvY2FsbGJhY2tzLmpzJztcblxuaW1wb3J0IHsgTWFwIH0gZnJvbSAnbGVkZXZvaXItZGF0YXZpeic7XG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuL2dhbWUvZW5naW5lLmpzJztcblxuY29uc3QgY29uZmlnID0ge1xuICB3aWR0aDogNTAwLFxuICBoZWlnaHQ6IDUwMCxcbiAgbWFyZ2luOiB7XG4gICAgdG9wOiAxMDAsXG4gICAgcmlnaHQ6IDEwMCxcbiAgICBib3R0b206IDEwMCxcbiAgICBsZWZ0OiAxMDBcbiAgfVxufVxuY29uc3QgZnVsbFdpZHRoID0gY29uZmlnLm1hcmdpbi5sZWZ0ICsgY29uZmlnLndpZHRoICsgY29uZmlnLm1hcmdpbi5yaWdodDtcbmNvbnN0IGZ1bGxIZWlnaHQgPSBjb25maWcubWFyZ2luLnRvcCArIGNvbmZpZy5oZWlnaHQgKyBjb25maWcubWFyZ2luLmJvdHRvbTtcbmNvbnN0IG1hcEJveFN0eWxlID0gXCJtYXBib3g6Ly9zdHlsZXMvbGVkZXZvaXIvY2xhbDl6bGZrMDA0YTE1cW9oaHI3cjQ5NVwiO1xuXG5jb25zdCBjdXN0b21DYWxsYmFja3NOZWVkZWQgPSB0cnVlOyAvLyBTZXQgdG8gdHJ1ZSBpZiBjdXN0b20gY2FsbGJhY2tzIGFyZSBuZWVkZWRcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemUoY29udGVudERhdGEsIG9wdGlvbnMpIHtcblxuICByZXR1cm4gZDMuY3N2KFwiaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvZS8yUEFDWC0xdlFRWjNzejBxMXZuWm1vWVlSNUlyQ2Z1T05oSGNOdzUwaUR0YmcxSDJtSVg4bEhETDFCUTRzQU1pN2lBcFNFMUc5V1FUVzJqSGNXdjRLVy9wdWI/Z2lkPTE0OTc4NjEwMTcmc2luZ2xlPXRydWUmb3V0cHV0PWNzdlwiKVxuICAgIC50aGVuKCBnYW1lRGF0YSA9PiB7XG5cbiAgICAgIGNvbnN0IG1hcENvbnRhaW5lciA9IGQzLnNlbGVjdChcIi5nYW1lLWFyZWFcIik7XG5cbiAgICAgIGNvbnN0IGVuZ2luZSA9IG5ldyBFbmdpbmUobWFwQ29udGFpbmVyLCBnZXRPcHRpb25zKG9wdGlvbnMpLCBjb250ZW50RGF0YVswXSwgZ2FtZURhdGEpO1xuXG4gICAgICBsZXQgYXV0b0NhbGxiYWNrcztcbiAgICAgIHNldHVwVml6KGNvbnRlbnREYXRhLG9wdGlvbnMpO1xuICAgICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgIGF1dG9DYWxsYmFja3MgPSBnZW5lcmF0ZUNhbGxiYWNrcyhjb250ZW50RGF0YSwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBhdXRvQ2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuICAgICAgfVxuXG4gICAgICBpZihjdXN0b21DYWxsYmFja3NOZWVkZWQpe1xuICAgICAgICAvL2lmIGN1c3RvbSBjYWxsYmFja3MgYXJlIG5lZWRlZCwgc3VjaCBhcyBWaXN1YWxpemF0aW9uIHRyYW5zZm9ybWF0aW9ucywgaW5jbHVkZSB0aGVtIGhlcmUuXG4gICAgICAgIC8vIFRoaXMgYWxsb3dzIHRvIHVzZSBhbnkgb2JqZWN0IGNyZWF0ZWQgaW4gdml6LmpzIChncmFwaHMsIHRvb2xzLCBldGMpIGluIHRoZSBjYWxsYmFja3MuXG4gICAgICAgIC8vIFlvdSB3aWxsIG5lZWQgdG8gbWFudWFsbHkgY3JlYXRlIHRoZSBjb3JyZWN0IG51bWJlciBvZiBjYWxsYmFja3MgdG8gbWF0Y2ggdGhlIHZpeiBzZWN0aW9uc1xuXG4gICAgICAgIGxldCBjdXN0b21DYWxsYmFja3MgPSBbXG4gICAgICAgICAgW1xuICAgICAgICAgICAgKCkgPT4ge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICBdXG4gICAgICAgIHJldHVybiBjdXN0b21DYWxsYmFja3M7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXV0b0NhbGxiYWNrcztcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0dXBWaXooY29udGVudERhdGEsIG9wdGlvbnMpe1xuXG4gIGNvbnN0IGZ1bGxTdHJ1Y3R1cmUgPSBnZXRTdHJ1Y3R1cmUoY29udGVudERhdGEsIG9wdGlvbnMpO1xuICBjb25zb2xlLmxvZygnY2hlY2tpbmcgc3RydWN0dXJlOicsIGZ1bGxTdHJ1Y3R1cmUpO1xuICBmdWxsU3RydWN0dXJlLm1hcChzZWN0aW9uT2JqID0+IHtcblxuICAgIGlmKHNlY3Rpb25PYmouc2VjdGlvblR5cGUgPT09IFwidml6LXNlY3Rpb25cIil7XG4gICAgICBzZWN0aW9uT2JqLnN0ZXBzLm1hcCgoc3RlcCxpbmRleCkgPT4ge1xuICAgICAgICAgIGlmKHN0ZXAudmlzdWFsICE9PSBcIlwiKXtcbiAgICAgICAgICAgIGlmKGluZGV4ID09PSAwKXtcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KGAjJHtzZWN0aW9uT2JqLmtleX1fJHtpbmRleH1gKS5zdHlsZSgnb3BhY2l0eScsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KGAjJHtzZWN0aW9uT2JqLmtleX1fJHtpbmRleH1gKS5zdHlsZSgnb3BhY2l0eScsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbn0pO1xufVxuXG5mdW5jdGlvbiBzZXR1cFZpZGVvcygpe1xuICBsZXQgdmlkZW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInZpZGVvXCIpO1xuICAgIHZpZGVvcy5mb3JFYWNoKCh2aWRlbykgPT4ge1xuICAgICAgLy8gV2UgY2FuIG9ubHkgY29udHJvbCBwbGF5YmFjayB3aXRob3V0IGluc3RlcmFjdGlvbiBpZiB2aWRlbyBpcyBtdXRlXG4gICAgICB2aWRlby5tdXRlZCA9IHRydWU7XG4gICAgICB2aWRlby5jdXJyZW50VGltZSA9IDA7XG4gICAgICAvLyBQbGF5IGlzIGEgcHJvbWlzZSBzbyB3ZSBuZWVkIHRvIGNoZWNrIHdlIGhhdmUgaXRcbiAgICAgIGxldCBwbGF5UHJvbWlzZSA9IHZpZGVvLnBsYXkoKTtcbiAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcGxheVByb21pc2UudGhlbigoXykgPT4ge1xuICAgICAgICAgICAgICBsZXQgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgICAgICAgICAgICAoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gIT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF2aWRlby5wYXVzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW8uY3VycmVudFRpbWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZpZGVvLnBhdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgeyB0aHJlc2hvbGQ6IDAuMiB9XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUodmlkZW8pO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xufVxuIiwiLyoqXHJcbiAqIHNjcm9sbGVyLmpzXHJcbiAqID09PT09PT09PT09XHJcbiAqIERlZmluZXMgdGhlIGxvZ2ljIHVzZWQgYnkgdGhlIHNjcm9sbGVyLiBUaGlzIHNjcmlwdCBkb2VzIG5vdCBuZWVkIGV4dGVybmFsIGRlcGVuZGVuY2llcyBhbmQgdXNlcyBuYXRpdmUgZnVuY3Rpb25zXHJcbiAqIG9mIHRoZSBicm93c2VyLlxyXG4gKlxyXG4gKiAvIVxcIFBMRUFTRSwgRE8gTk9UIE1PRElGWSBUSElTIEZJTEUuXHJcbiAqXHJcbiAqIEBhdXRob3IgQW50b2luZSBCw6lsYW5kIDxhYmVsYW5kQGxlZGV2b2lyLmNvbT5cclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG4vKipcclxuICogRGVmaW5lcyBhIHN0ZXAgYXNzb2NpYXRlZCB3aXRoIGEgc3BlY2lmaWMgdmlzdWFsaXphdGlvbi4gQSBzdGVwIGlzIGFjdGl2YXRlZCBvciBkZWFjdGl2YXRlZCBiYXNlZCBvbiB0aGUgc2Nyb2xsXHJcbiAqIHBvc2l0aW9uLiBUaGlzIGNsYXNzIGlzIHVzZWQgYnkgdGhlIHNjcm9sbGVyIGZ1bmN0aW9uLlxyXG4gKi9cclxuY2xhc3MgU2Nyb2xsZXJTdGVwIHtcclxuICAvKipcclxuICAgKiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiBTY3JvbGxlclN0ZXAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gZWwgICAgICAgICAgVGhlIG5hdGl2ZSBlbGVtZW50IHRoYXQgcmVwcmVzZW50cyB0aGUgc3RlcCBpbiB0aGUgSFRNTCBkb2N1bWVudC5cclxuICAgKiBAcGFyYW0gaW5kZXggICAgICAgVGhlIGluZGV4IG9mIHRoZSBzdGVwLlxyXG4gICAqIEBwYXJhbSBjYWxsYmFjayAgICBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBzdGVwIGlzIGFjdGl2YXRlLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKGVsLCBpbmRleCwgY2FsbGJhY2spIHtcclxuICAgIHRoaXMuZWwgPSBlbDtcclxuICAgIHRoaXMuaW5kZXggPSBpbmRleDtcclxuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIHRoaXMuX2lzQWN0aXZhdGUgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFjdGl2YXRlcyB0aGUgY3VycmVudCBzdGVwLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHNjcm9sbERpcmVjdGlvbiAgIFRoZSBjdXJyZW50IHNjcm9sbCBkaXJlY3Rpb24uXHJcbiAgICovXHJcbiAgYWN0aXZhdGUoc2Nyb2xsRGlyZWN0aW9uKSB7XHJcbiAgICBpZiAodGhpcy5faXNBY3RpdmF0ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9pc0FjdGl2YXRlID0gdHJ1ZTtcclxuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB0aGlzLmNhbGxiYWNrKHNjcm9sbERpcmVjdGlvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWFjdGl2YXRlcyB0aGUgY3VycmVudCBzdGVwLlxyXG4gICAqL1xyXG4gIGRlYWN0aXZhdGUoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2lzQWN0aXZhdGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faXNBY3RpdmF0ZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWZpbmVzIHRoZSBzY3JvbGwgZGlyZWN0aW9ucy5cclxuICpcclxuICogQHR5cGUge3t1cDogc3RyaW5nLCBkb3duOiBzdHJpbmd9fVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHNjcm9sbERpcmVjdGlvbnMgPSB7XHJcbiAgdXA6ICd1cCcsXHJcbiAgZG93bjogJ2Rvd24nXHJcbn07XHJcblxyXG4vKipcclxuICogRGVmaW5lcyB0aGUgc2Nyb2xsZXIgdG8gdXNlIHdpdGggdGhlIExlIERldm9pcidzIHNjcm9sbHl0ZWxsaW5nIGFydGljbGVzLiBQbGVhc2Ugc2VlIFwiUkVBRE1FLm1kXCJcclxuICogdG8ga25vdyBob3cgdG8gdXNlIGl0LlxyXG4gKlxyXG4gKiAvIVxcIEJlIHN1cmUgdG8gdXNlIHRoZSBnb29kIENTUyBjbGFzcyBuYW1lcyBpbiB5b3VyIEhUTUwgZmlsZSBiZWZvcmUgdG8gdXNlIHRoZSBmdW5jdGlvbi5cclxuICpcclxuICogQHBhcmFtIGNhbGxiYWNrcyAgIEEgbXVsdGktZGltZW5zaW9uYWwgYXJyYXkgb2YgY2FsbGJhY2tzIHRvIHVzZSB3aXRoIGVhY2ggc3RlcC5cclxuICogQHJldHVybnMgeyp9ICAgICAgIFRoZSBpbnN0YW5jZSBvZiB0aGUgc2Nyb2xsZXIuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2Nyb2xsZXIoY2FsbGJhY2tzKSB7XHJcbiAgbGV0IF9vZmZzZXRUb3AgPSAwO1xyXG4gIGxldCBfb2Zmc2V0Qm90dG9tID0gMDtcclxuXHJcbiAgbGV0IGlubmVySGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gIGxldCBpc0luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgbGV0IGxhc3RTY3JvbGwgPSAwO1xyXG4gIGxldCBzdGVwcyA9IFtdO1xyXG4gIGxldCB2aXogPSBbXTtcclxuICBsZXQgdmlzaWJsZVN0ZXBzID0gW107XHJcbiAgXHJcbiAgY29uc3QgYXJ0aWNsZVJlbWluZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUtcmVtaW5kZXInKTtcclxuICBjb25zdCBzY3JvbGxQcm9ncmVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciA+IC5wcm9ncmVzcycpO1xyXG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludHJvLXNlY3Rpb24gaDEnKTtcclxuXHJcbiAgY29uc3Qgdml6U2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudml6LXNlY3Rpb24nKTtcclxuICBpZiAodml6U2VjdGlvbnMubGVuZ3RoICE9PSBjYWxsYmFja3MubGVuZ3RoKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBudW1iZXIgb2Ygdml6IHNlY3Rpb25zICgke3ZpelNlY3Rpb25zLmxlbmd0aH0pIG1pc21hdGNoIHdpdGggdGhlIGxlbmd0aCBvZiB0aGUgZmlyc3QgYCArXHJcbiAgICAgIGBkaW1lbnNpb24gb2YgdGhlIGNhbGxiYWNrcyBhcnJheSAoJHtjYWxsYmFja3MubGVuZ3RofSkuIFBsZWFzZSwgYmUgc3VyZSB0aGF0IHRoZSB0d28gZWxlbWVudHMgYCArXHJcbiAgICAgIGBoYXZlIHRoZSBzYW1lIHNpemUuYCk7XHJcbiAgfVxyXG4gIHZpelNlY3Rpb25zLmZvckVhY2goKHZpelNlY3Rpb24sIGkpID0+IHtcclxuICAgIGNvbnN0IHNlY3Rpb25zID0gWy4uLnZpelNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnc2VjdGlvbicpXTtcclxuICAgIGlmIChzZWN0aW9ucy5sZW5ndGggIT09IGNhbGxiYWNrc1tpXS5sZW5ndGgpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgbnVtYmVyIG9mIHN0ZXBzICgke3NlY3Rpb25zLmxlbmd0aH0pIGluIHRoZSB2aXogc2VjdGlvbiAjJHtpICsgMX0gbWlzbWF0Y2ggd2l0aCB0aGUgYCArXHJcbiAgICAgICAgYG51bWJlciBvZiBjYWxsYmFja3Mgc3BlY2lmaWVkICgke2NhbGxiYWNrc1tpXS5sZW5ndGh9KSBhdCB0aGUgaW5kZXggXCIke2l9XCIuIFBsZWFzZSwgYmUgc3VyZSB0aGF0IHRoZSB0d28gYCArXHJcbiAgICAgICAgYGVsZW1lbnRzIGhhdmUgdGhlIHNhbWUgc2l6ZS5gKTtcclxuICAgIH1cclxuICAgIHN0ZXBzID0gc3RlcHMuY29uY2F0KHNlY3Rpb25zLm1hcCgoZSwgaikgPT4gbmV3IFNjcm9sbGVyU3RlcChlLCBgJHtpfS0ke2p9YCwgY2FsbGJhY2tzW2ldW2pdKSkpO1xyXG4gICAgdml6ID0gdml6LmNvbmNhdCh2aXosIHZpelNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnZpeiA+IConKSk7XHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIGRpc3BsYXkgYmFzZWQgb24gc2Nyb2xsYmFyIHBvc2l0aW9uLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY29uc3QgX3VwZGF0ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgIHN0ZXBzLmZvckVhY2goc3RlcCA9PiB7XHJcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHN0ZXAgaXMgaW4gdGhlIHZpZXdwb3J0LlxyXG4gICAgICBjb25zdCBib3VuZGluZ1JlY3QgPSBzdGVwLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBpZiAoaW5uZXJIZWlnaHQgLSBib3VuZGluZ1JlY3QudG9wIC0gX29mZnNldEJvdHRvbSA+IDBcclxuICAgICAgICAmJiBib3VuZGluZ1JlY3QudG9wICsgYm91bmRpbmdSZWN0LmhlaWdodCAtIF9vZmZzZXRUb3AgPiAwKSB7XHJcbiAgICAgICAgdmlzaWJsZVN0ZXBzLnB1c2goc3RlcCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3RlcC5kZWFjdGl2YXRlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIERpc3BsYXkgdGhlIHRpdGxlIGFzIGEgcmVtaW5kZXIgd2hlbiB0aGUgbWFpbiBhcnRpY2xlIHRpdGxlIGlzIGhpZGRlbi5cclxuICAgIGNvbnN0IGlzQXJ0aWNsZVJlbWluZGVyRGlzcGxheWVkID0gdGl0bGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIDw9IDA7XHJcbiAgICBjb25zdCBpc0FydGljbGVSZW1pbmRlcklzVmlzaWJsZSA9IGFydGljbGVSZW1pbmRlci5jbGFzc0xpc3QuY29udGFpbnMoJ3Zpc2libGUnKTtcclxuICAgIGlmIChpc0FydGljbGVSZW1pbmRlckRpc3BsYXllZCAmJiAhaXNBcnRpY2xlUmVtaW5kZXJJc1Zpc2libGUpIHtcclxuICAgICAgYXJ0aWNsZVJlbWluZGVyLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKVxyXG4gICAgfSBlbHNlIGlmICghaXNBcnRpY2xlUmVtaW5kZXJEaXNwbGF5ZWQgJiYgaXNBcnRpY2xlUmVtaW5kZXJJc1Zpc2libGUpIHtcclxuICAgICAgYXJ0aWNsZVJlbWluZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvciB0aGUgdmlzaWJsZSBzdGVwcywgY2hvb3NlIHRoZSBnb29kIG9uZSBiYXNlZCBvbiB0aGUgc2Nyb2xsIGRpcmVjdGlvbi5cclxuICAgIHZpc2libGVTdGVwcy5mb3JFYWNoKChzZWN0aW9uLCBpKSA9PiB7XHJcbiAgICAgIGlmIChjdXJyZW50U2Nyb2xsID49IGxhc3RTY3JvbGwpIHsgLy8gU2Nyb2xsIGRvd24gKOKGkylcclxuICAgICAgICBpZiAoaSA9PT0gdmlzaWJsZVN0ZXBzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgIHNlY3Rpb24uYWN0aXZhdGUoc2Nyb2xsRGlyZWN0aW9ucy5kb3duKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2VjdGlvbi5kZWFjdGl2YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgeyAvLyBTY3JvbGwgdXAgKOKGkSlcclxuICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgc2VjdGlvbi5hY3RpdmF0ZShzY3JvbGxEaXJlY3Rpb25zLnVwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2VjdGlvbi5kZWFjdGl2YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIF91cGRhdGVTY3JvbGxQcm9ncmVzcygpO1xyXG5cclxuICAgIC8vIFJlc2V0IHRoZSB2YXJpYWJsZXMgZm9yIHRoZSBuZXh0IGZ1bmN0aW9uIGNhbGwuXHJcbiAgICB2aXNpYmxlU3RlcHMgPSBbXTtcclxuICAgIGxhc3RTY3JvbGwgPSBjdXJyZW50U2Nyb2xsO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIHNjcm9sbCBwcm9ncmVzc2lvbiBpbmRpY2F0b3IuXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdCBfdXBkYXRlU2Nyb2xsUHJvZ3Jlc3MgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB3aW5TY3JvbGwgPSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICBjb25zdCBzY3JvbGxlZCA9ICh3aW5TY3JvbGwgLyBoZWlnaHQpICogMTAwO1xyXG4gICAgc2Nyb2xsUHJvZ3Jlc3Muc3R5bGUud2lkdGggPSBzY3JvbGxlZCArICclJztcclxuICB9O1xyXG5cclxuICBjb25zdCBwdWJsaWNJbnRlcmZhY2UgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIHRoZSBzY3JvbGxlci4gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGNhbiBiZSBvbmx5IGNhbGxlZCBvbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgaW5zdGFuY2Ugb2YgdGhlIHNjcm9sbGVyLlxyXG4gICAgICovXHJcbiAgICBpbml0aWFsaXplOiAoKSA9PiB7XHJcbiAgICAgIGlmIChpc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc2Nyb2xsZXIgaXMgYWxyZWFkeSBpbml0aWFsaXplZC4nKTtcclxuICAgICAgfVxyXG4gICAgICBpc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF91cGRhdGUpO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgIGlubmVySGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIF91cGRhdGVTY3JvbGxQcm9ncmVzcygpO1xyXG4gICAgICB9KTtcclxuICAgICAgaWYgKCh3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkgPiAwKSB7XHJcbiAgICAgICAgX3VwZGF0ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIF91cGRhdGVTY3JvbGxQcm9ncmVzcygpO1xyXG4gICAgICByZXR1cm4gcHVibGljSW50ZXJmYWNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgb3Igc2V0cyB0aGUgdG9wIG9mZnNldCB0byB1c2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9mZnNldFRvcFxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSBpbnN0YW5jZSBvZiB0aGUgc2Nyb2xsZXIuXHJcbiAgICAgKi9cclxuICAgIG9mZnNldFRvcDogb2Zmc2V0VG9wID0+IHtcclxuICAgICAgaWYgKG9mZnNldFRvcCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIF9vZmZzZXRUb3A7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKG9mZnNldFRvcCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBvZmZzZXQgbXVzdCBiZSBhbiBpbnRlZ2VyIG51bWJlci4nKTtcclxuICAgICAgfVxyXG4gICAgICBfb2Zmc2V0VG9wID0gb2Zmc2V0VG9wO1xyXG4gICAgICByZXR1cm4gcHVibGljSW50ZXJmYWNlO1xyXG4gICAgfSAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIG9yIHNldHMgdGhlIGJvdHRvbSBvZmZzZXQgdG8gdXNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvZmZzZXRCb3R0b21cclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgaW5zdGFuY2Ugb2YgdGhlIHNjcm9sbGVyLlxyXG4gICAgICovXHJcbiAgICBvZmZzZXRCb3R0b206IG9mZnNldEJvdHRvbSA9PiB7XHJcbiAgICAgIGlmIChvZmZzZXRCb3R0b20gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBfb2Zmc2V0Qm90dG9tO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihvZmZzZXRCb3R0b20pKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgb2Zmc2V0IG11c3QgYmUgYW4gaW50ZWdlciBudW1iZXIuJyk7XHJcbiAgICAgIH1cclxuICAgICAgX29mZnNldEJvdHRvbSA9IG9mZnNldEJvdHRvbTtcclxuICAgICAgcmV0dXJuIHB1YmxpY0ludGVyZmFjZTtcclxuICAgIH1cclxuICB9O1xyXG4gIHJldHVybiBwdWJsaWNJbnRlcmZhY2U7XHJcbn1cclxuIiwiXHJcbmltcG9ydCB7IGluaXRpYWxpemUgYXMgdjEgfSBmcm9tICcuLi92aXonO1xyXG5pbXBvcnQgeyBzY3JvbGxlciB9IGZyb20gJy4uL3Njcm9sbGVyJztcclxuaW1wb3J0IExhenlMb2FkIGZyb20gXCJ2YW5pbGxhLWxhenlsb2FkXCI7XHJcbmNvbnN0IGhlYWRlckhlaWdodCA9IDQwO1xyXG5pbXBvcnQgc3RpY2t5Qml0cyBmcm9tICdzdGlja3liaXRzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRTY3JvbGxlcihjb250ZW50RGF0YSwgcGFyYW1zRGF0YSl7XHJcblxyXG4gICAgbGV0IGVsZW1lbnRzID0gW107XHJcbiAgICBbJy52aXonLCAnLmZ1bGwtcGFnZS1zZWN0aW9uID4gaW1nJywgJy5mdWxsLXBhZ2Utc2VjdGlvbiA+IHZpZGVvJ10uZm9yRWFjaChzZWxlY3RvciA9PiB7XHJcbiAgICAgIGVsZW1lbnRzID0gZWxlbWVudHMuY29uY2F0KEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpKTtcclxuICAgIH0pO1xyXG4gICAgc3RpY2t5Qml0cyhlbGVtZW50cywgeyBzdGlja3lCaXRTdGlja3lPZmZzZXQ6IGhlYWRlckhlaWdodCB9KTtcclxuICBcclxuICAgIGNvbnN0IGxsID0gbmV3IExhenlMb2FkKHtcclxuICAgICAgZWxlbWVudHNfc2VsZWN0b3I6IFwiLmxhenlcIixcclxuICAgICAgdGhyZXNob2xkOiA1MDBcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgUHJvbWlzZS5hbGwoW3YxKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKV0pLnRoZW4oKFtjYWxsYmFja3NWMV0pID0+ICB7XHJcbiAgICAgIHNjcm9sbGVyKGNhbGxiYWNrc1YxKVxyXG4gICAgICAgIC5vZmZzZXRUb3AoaGVhZGVySGVpZ2h0KVxyXG4gICAgICAgIC5vZmZzZXRCb3R0b20oMClcclxuICAgICAgICAuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfSk7XHJcbiAgfSIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEludHJvU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL0ludHJvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgVGV4dFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9UZXh0U2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgVml6U2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1ZpelNlY3Rpb24uanNcIjtcbmltcG9ydCB7IEZ1bGxQYWdlU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Z1bGxQYWdlU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgcGFyc2UgZnJvbSBcImh0bWwtcmVhY3QtcGFyc2VyXCI7XG5pbXBvcnQgeyBnZXRTdHJ1Y3R1cmUgfSBmcm9tIFwiLi9zdHJ1Y3R1cmVHZW5lcmF0b3IuanNcIjtcbmltcG9ydCB7IGluaXRTY3JvbGxlciB9IGZyb20gXCIuL2luaXRTY3JvbGxlci5qc1wiO1xuXG5cbi8qKlxuICogVGFrZSBwcm9wcyAoYXJ0aWNsZSBzdHJ1Y3R1cmUgYXMgQ1NWIGFuZCBwYXJhbXMpIGFuZCB0cmFuc2Zvcm0gaXQgYXMgSFRNTCBhcmNoaXRlY3R1cmVcbiAqIEBwYXJhbSAge09iamVjdH0gY29udGVudERhdGEgQXJ0aWNsZSdzIENTViBzdHJ1Y3R1cmVcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNEYXRhIEFydGljbGUgcGFyYW1ldGVyc1xuICogQHJldHVybiB7T2JqZWN0fSBPYmogSFRNTCBjb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBSZW5kZXJTdHJ1Y3R1cmUocHJvcHMpe1xuICAgIGlmKHByb3BzLnJlbmRlcmVkKXtcbiAgICAgICAgdXNlRWZmZWN0KCgpID0+IHtcblxuICAgICAgICAgICAgaW5pdFNjcm9sbGVyKHByb3BzLmNvbnRlbnREYXRhLCBwcm9wcy5wYXJhbXNEYXRhKTtcblxuICAgICAgICB9LCBbXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlbmRlckRhdGEoZ2V0U3RydWN0dXJlKHByb3BzLmNvbnRlbnREYXRhLCBwcm9wcy5wYXJhbXNEYXRhKSk7XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckRhdGEoc3RydWN0dXJlRGF0YSl7XG5cbiAgICBsZXQgcmVuZGVyZWREYXRhID0ge307XG5cbiAgICBPYmplY3Qua2V5cyhzdHJ1Y3R1cmVEYXRhKS5tYXAoKHNlY3Rpb25LZXksaW5kZXgpID0+IHtcbiAgICAgICAgbGV0IGN1clNlY3Rpb24gPSBzdHJ1Y3R1cmVEYXRhW3NlY3Rpb25LZXldO1xuICAgICAgICBpZihjdXJTZWN0aW9uLnNlY3Rpb25UeXBlID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLmludHJvdGl0cmUpe1xuICAgICAgICAgICAgcmVuZGVyZWREYXRhW3NlY3Rpb25LZXldID0gKCg8SW50cm9TZWN0aW9uIGtleT17Y3VyU2VjdGlvbi5rZXl9IHNlY3Rpb25UeXBlPXtjdXJTZWN0aW9uLnNlY3Rpb25UeXBlfSBvcHRpb25EYXRhPXtjdXJTZWN0aW9uLm9wdGlvbkRhdGF9IGFtb3JjZT17cGFyc2UoY3VyU2VjdGlvbi5hbW9yY2UpfSBiYWNrZ3JvdW5kPXtjdXJTZWN0aW9uLmJhY2tncm91bmR9IGNsYXNzZXM9e2N1clNlY3Rpb24uY2xhc3Nlc30gLz4pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGN1clNlY3Rpb24uc2VjdGlvblR5cGUgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudGV4dGVjbGFzc2lxdWUpe1xuXG4gICAgICAgICAgICByZW5kZXJlZERhdGFbc2VjdGlvbktleV0gPSAoKDxUZXh0U2VjdGlvbiBrZXk9e2N1clNlY3Rpb24ua2V5fSBpZD17Y3VyU2VjdGlvbi5rZXl9IHNlY3Rpb25UeXBlPXtjdXJTZWN0aW9uLnNlY3Rpb25UeXBlfSB0ZXh0cz17Y3VyU2VjdGlvbi50ZXh0c30gYmFja2dyb3VuZD17Y3VyU2VjdGlvbi5iYWNrZ3JvdW5kfSBjbGFzc2VzPXtjdXJTZWN0aW9uLmNsYXNzZXN9IHZpc3VlbGNsYXNzZXM9e2N1clNlY3Rpb24udmlzdWVsY2xhc3Nlc30gdmlzdWFsPXtjdXJTZWN0aW9uLnZpc3VhbH0gZmlsZW5hbWU9e2N1clNlY3Rpb24uZmlsZW5hbWV9Lz4pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGN1clNlY3Rpb24uc2VjdGlvblR5cGUgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMucGxlaW5lcGFnZXRpdHJlKXtcbiAgICAgICAgICAgIHJlbmRlcmVkRGF0YVtzZWN0aW9uS2V5XSA9ICgoPEZ1bGxQYWdlU2VjdGlvbiBrZXk9e2N1clNlY3Rpb24ua2V5fSBpZD17Y3VyU2VjdGlvbi5rZXl9IHNlY3Rpb25UeXBlPXtjdXJTZWN0aW9uLnNlY3Rpb25UeXBlfSBiYWNrZ3JvdW5kPXtjdXJTZWN0aW9uLmJhY2tncm91bmR9IGNsYXNzZXM9e2N1clNlY3Rpb24uY2xhc3Nlc30gdmlzdWVsY2xhc3Nlcz17Y3VyU2VjdGlvbi52aXN1ZWxjbGFzc2VzfSB2aXN1YWw9e2N1clNlY3Rpb24udmlzdWFsfSBtYWluVGl0bGU9e2N1clNlY3Rpb24udGV4dHMubWFpblRpdGxlfSBzdWJUaXRsZT17Y3VyU2VjdGlvbi50ZXh0cy5zdWJUaXRsZX0gZmlsZW5hbWU9e2N1clNlY3Rpb24uZmlsZW5hbWV9IC8+KSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGN1clNlY3Rpb24uc2VjdGlvblR5cGUgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudml6c2VjdGlvbil7XG4gICAgICAgICAgICByZW5kZXJlZERhdGFbc2VjdGlvbktleV0gPSAoPFZpelNlY3Rpb24ga2V5PXtjdXJTZWN0aW9uLmtleX0gbGlzdElEPXtjdXJTZWN0aW9uLmxpc3RJRH0gc3RlcHM9e2N1clNlY3Rpb24uc3RlcHN9IGNsYXNzZWQ9e2N1clNlY3Rpb24uY2xhc3NlZH0gbWVkaWFJbmZvPXtjdXJTZWN0aW9uLm1lZGlhSW5mb30gYmFja2dyb3VuZD17Y3VyU2VjdGlvbi5iYWNrZ3JvdW5kfS8+KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHJlbmRlcmVkRGF0YSk7XG59XG4iLCIvKipcbiAqIGFwcC5qc1xuICogPT09PT09XG4gKiBNYWluIGZpbGUgb2YgdGhlIGFwcGxpY2F0aW9uLiBUaGlzIGZpbGUgaXMgdXNlZCB0byBpbml0aWFsaXplIHRoZSBzY3JvbGxlciBhbmQgaW1wb3J0cyB0aGUgdmlzdWFsaXphdGlvbnMgdXNlZC5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQgc3RydWN0dXJlIGZyb20gJy4uL2RhdGEvc3RydWN0dXJlL3N0cnVjdHVyZS5qc29uJztcblxuaWYoIUVOVl9DT05GSUcuZG93bmxvYWRTdHJ1Yyl7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyb290JykuaW5uZXJIVE1MID0gKHN0cnVjdHVyZS5odG1sc3RydWMpO1xufVxuXG5pbXBvcnQgJy4uL2Fzc2V0cy9zdHlsZXMvc3R5bGUuc2Nzcyc7XG5pbXBvcnQge2dvb2dsZV9jb25maWd9IGZyb20gXCIuLi9kYXRhL2dvb2dsZV9jb25maWdcIjtcbmltcG9ydCB7IFJlbmRlclN0cnVjdHVyZSB9IGZyb20gJy4vZ2VuZXJhdG9yL1JlbmRlclN0cnVjdHVyZSc7XG5pbXBvcnQgeyBpbml0U2Nyb2xsZXIgfSBmcm9tICcuL2dlbmVyYXRvci9pbml0U2Nyb2xsZXInO1xuaW1wb3J0IHsgZ2VuZXJhdGVDYWxsYmFja3MgfSBmcm9tICcuL2dlbmVyYXRvci9zdHJ1Y3R1cmVHZW5lcmF0b3InO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7XG5cbmlmKEVOVl9DT05GSUcuZG93bmxvYWRTdHJ1Yyl7XG4gIFByb21pc2UuYWxsKFtpbXBvcnQoXCJyZWFjdC1kb20vY2xpZW50XCIpLCBpbXBvcnQoXCJyZWFjdC1kb20vc2VydmVyXCIpLCBpbXBvcnQoXCJyZWFjdFwiKV0pXG4gICAgLnRoZW4ocGFja2FnZXMgPT4ge1xuICAgICAgY29uc3QgUmVhY3RET00gPSBwYWNrYWdlc1swXTtcbiAgICAgIGNvbnN0IFJlYWN0RE9NU2VydmVyID0gcGFja2FnZXNbMV07XG4gICAgICBjb25zdCBSZWFjdCA9IHBhY2thZ2VzWzJdO1xuICAgICAgYWRkTm90UHVibGlzaGVkKCk7XG4gICAgICBpZihFTlZfQ09ORklHLmF1dG9yZW5kZXIpe1xuICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5jb250ZW50VVJMKS50aGVuKCBjb250ZW50RGF0YSA9PiB7XG4gICAgICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcucGFyYW1zVVJMKS50aGVuKCBwYXJhbXNEYXRhID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJvb3QgPSBSZWFjdERPTS5jcmVhdGVSb290KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKSk7XG4gICAgICAgICAgICByb290LnJlbmRlcihcbiAgICAgICAgICAgICAgPFJlbmRlclN0cnVjdHVyZSBjb250ZW50RGF0YT17Y29udGVudERhdGF9IHBhcmFtc0RhdGE9e3BhcmFtc0RhdGF9IHJlbmRlcmVkPXt0cnVlfS8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYWRkRm9vdGVyKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcuY29udGVudFVSTCkudGhlbiggY29udGVudERhdGEgPT4ge1xuICAgICAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLnBhcmFtc1VSTCkudGhlbiggcGFyYW1zRGF0YSA9PiB7XG4gICAgICAgICAgICBkMy5ibG9iKGdvb2dsZV9jb25maWcuY29udGVudFVSTCkudGhlbihjb250ZW50QmxvYiA9PiB7XG4gICAgICAgICAgICAgIGQzLmJsb2IoZ29vZ2xlX2NvbmZpZy5wYXJhbXNVUkwpLnRoZW4ocGFyYW1zQmxvYiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGVkU3RydWMgPSBSZW5kZXJTdHJ1Y3R1cmUoe2NvbnRlbnREYXRhOiBjb250ZW50RGF0YSwgcGFyYW1zRGF0YTogcGFyYW1zRGF0YSwgcmVuZGVyOiBmYWxzZX0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGh0bWxTdHJ1YyA9IFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RhdGljTWFya3VwKGdlbmVyYXRlZFN0cnVjKTtcbiAgICAgICAgICAgICAgICB3cml0ZUhUTUxmaWxlKGh0bWxTdHJ1YywgY29udGVudEJsb2IsIHBhcmFtc0Jsb2IpO1xuICAgICAgICAgICAgICAgIGdlbmVyYXRlQ2FsbGJhY2tzKGNvbnRlbnREYXRhLHBhcmFtc0RhdGEpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pXG59XG5lbHNle1xuICBpZihFTlZfQ09ORklHLmF1dG9yZW5kZXIpe1xuICAgIFByb21pc2UuYWxsKFtpbXBvcnQoXCJyZWFjdC1kb20vY2xpZW50XCIpLCBpbXBvcnQoXCJyZWFjdFwiKV0pXG4gICAgLnRoZW4ocGFja2FnZXMgPT4ge1xuICAgICAgY29uc3QgUmVhY3RET00gPSBwYWNrYWdlc1swXTtcbiAgICAgIGNvbnN0IFJlYWN0ID0gcGFja2FnZXNbMV07XG4gICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5jb250ZW50VVJMKS50aGVuKCBjb250ZW50RGF0YSA9PiB7XG4gICAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLnBhcmFtc1VSTCkudGhlbiggcGFyYW1zRGF0YSA9PiB7XG4gICAgICAgICAgY29uc3Qgcm9vdCA9IFJlYWN0RE9NLmNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb290XCIpKTtcbiAgICAgICAgICByb290LnJlbmRlcihcbiAgICAgICAgICAgIDxSZW5kZXJTdHJ1Y3R1cmUgY29udGVudERhdGE9e2NvbnRlbnREYXRhfSBwYXJhbXNEYXRhPXtwYXJhbXNEYXRhfSByZW5kZXJlZD17dHJ1ZX0vPlxuICAgICAgICAgICk7XG4gICAgICAgICAgYWRkRm9vdGVyKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgZWxzZXtcbiAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5sb2NhbENvbnRlbnRVUkwpLnRoZW4oIGNvbnRlbnREYXRhID0+IHtcbiAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmxvY2FsUGFyYW1zVVJMKS50aGVuKCBwYXJhbXNEYXRhID0+IHtcbiAgICAgICAgaW5pdFNjcm9sbGVyKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKTtcbiAgICAgICAgYWRkRm9vdGVyKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cml0ZUhUTUxmaWxlKEhUTUxTdHJ1Y3QsIGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKXtcbiAgbGV0IGJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoe2h0bWxzdHJ1YzogYCR7SFRNTFN0cnVjdH1gfSwgbnVsbCwgMildLCB7dHlwZTogXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLThcIn0pO1xuICBsZXQgY29udGVudENTViA9IG5ldyBCbG9iKFtjb250ZW50RGF0YV0sIHt0eXBlOiBcInRleHQvY3N2O2NoYXJzZXQ9dXRmLThcIn0pO1xuICBsZXQgcGFyYW1zQ1NWID0gbmV3IEJsb2IoW3BhcmFtc0RhdGFdLCB7dHlwZTogXCJ0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04XCJ9KTtcblxuICBzYXZlQXMoY29udGVudENTViwgXCJjb250ZW50RGF0YS5jc3ZcIik7XG4gIHNhdmVBcyhwYXJhbXNDU1YsIFwicGFyYW1zRGF0YS5jc3ZcIik7XG4gIHNhdmVBcyhibG9iLCBcInN0cnVjdHVyZS5qc29uXCIpO1xufVxuXG5mdW5jdGlvbiBhZGROb3RQdWJsaXNoZWQoKXtcbiAgY29uc3QgZGl2ID0gZDMuc2VsZWN0KCcucHVsbC1yaWdodCcpLmluc2VydChcImxpXCIsJ2xpJyk7XG4gIGRpdi5odG1sKGA8cCBjbGFzcz0nbm90LXB1Ymxpc2hlZCc+TmUgcGFzIHB1YmxpZXI8L3A+YCk7XG59XG5cbmZ1bmN0aW9uIGFkZEZvb3Rlcigpe1xuICAvL2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb290ZXJDb250YWluZXInKS5yZW1vdmUoKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvb3RlckNvbnRhaW5lcicpLmlubmVySFRNTCA9IGQzLnNlbGVjdChgI2Zvb3RlckNvbnRlbnRgKS5ub2RlKCkuaW5uZXJIVE1MO1xufVxuIiwiY29uc3QgZ29vZ2xlX2NvbmZpZyA9IHtcbiAgICBcImNvbnRlbnRVUkxcIjogXCJodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2U0V5d0pFMFZVZ3kzTnNxM1RnX29oLVZzNjMzVFNpbWRJSGZrWFR5ejlCYkV0V05WZ3VyZDFUb3UtUTVhbnZkT2l3M2NvQ0ZrRENpU1lxL3B1Yj9naWQ9MCZzaW5nbGU9dHJ1ZSZvdXRwdXQ9Y3N2XCIsXG4gICAgXCJwYXJhbXNVUkxcIjogXCJodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2U0V5d0pFMFZVZ3kzTnNxM1RnX29oLVZzNjMzVFNpbWRJSGZrWFR5ejlCYkV0V05WZ3VyZDFUb3UtUTVhbnZkT2l3M2NvQ0ZrRENpU1lxL3B1Yj9naWQ9NDA5OTUwMjM3JnNpbmdsZT10cnVlJm91dHB1dD1jc3ZcIixcbiAgICBcImxvY2FsQ29udGVudFVSTFwiOiBcIi4vZGF0YS9zdHJ1Y3R1cmUvY29udGVudERhdGEuY3N2XCIsXG4gICAgXCJsb2NhbFBhcmFtc1VSTFwiOiBcIi4vZGF0YS9zdHJ1Y3R1cmUvcGFyYW1zRGF0YS5jc3ZcIlxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7Z29vZ2xlX2NvbmZpZ307XG4iXSwibmFtZXMiOlsiSW50cm9TZWN0aW9uIiwicHJvcHMiLCJpbnRyb1NlY3Rpb25PYmoiLCJjbGFzc05hbWUiLCJjbGFzc2VzIiwiYW1vcmNlIiwicGFyc2UiLCJvcHRpb25EYXRhIiwidGl0bGUiLCJiYWNrZ3JvdW5kIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJUZXh0U2VjdGlvbiIsInF1b3RlT2JqIiwiaXNRdW90ZSIsIlN0cmluZyIsImluY2x1ZGVzIiwidGV4dCIsInRleHRzIiwic3BsaXQiLCJhdXRob3IiLCJiaWdOdW1iZXJPYmoiLCJpc0JpZ051bWJlciIsIm51bWJlciIsInVuZGVyVGV4dCIsImlzVmlzdWFsIiwidmlzdWFsIiwidmlzdWFsT2JqIiwia2V5IiwiaWQiLCJzcmMiLCJmaWxlbmFtZSIsInZpc3VlbGNsYXNzZXMiLCJwYWRkaW5nQm90dG9tIiwiYXV0b1BsYXkiLCJsb29wIiwibXV0ZWQiLCJwbGF5c0lubGluZSIsInByZWxvYWQiLCJ0ZXh0U2VjdGlvbk9iaiIsInN0YXJ0c1dpdGgiLCJEV0NoYXJ0IiwiaWZyYW1lUmVmIiwidXNlUmVmIiwidXNlU3RhdGUiLCJoZWlnaHQiLCJzZXRTdGF0ZSIsIm9uTWVzc2FnZSIsInVzZUNhbGxiYWNrIiwiZGF0YSIsInNvdXJjZSIsImN1cnJlbnQiLCJjb250ZW50V2luZG93IiwidXNlRWZmZWN0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZWYiLCJzY3JvbGxpbmciLCJmcmFtZUJvcmRlciIsIndpZHRoIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwibG9hZGluZyIsIm9wdGlvbnNEcm9wZG93bkNvbnN0YW50cyIsInBhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMiLCJ0aXRyZSIsImF1dGV1cnMiLCJkYXRlIiwiVml6U2VjdGlvbiIsInN0ZXBzIiwiY3VyU3RlcENsYXNzZXMiLCJjdXJDb21tb25DbGFzcyIsInZpelNlY3Rpb25PYmoiLCJsaXN0SUQiLCJjbGFzc2VkIiwibWFwIiwic3RlcCIsImluZGV4Iiwic3RlcGNsYXNzZXMiLCJBcnJheSIsImxlbmd0aCIsImZvckVhY2giLCJzdGVwRWxlbSIsImlkeCIsImlzQXJyYXkiLCJlbGVtIiwiaSIsInJlZHVjZSIsImEiLCJiIiwiRnVsbFBhZ2VTZWN0aW9uIiwiZnVsbHBhZ2VTZWN0aW9uT2JqIiwibWFpblRpdGxlIiwiY2xhc3MiLCJzdWJUaXRsZSIsImdldFN0cnVjdHVyZSIsImNvbnRlbnREYXRhIiwicGFyYW1zRGF0YSIsInN0cnVjdHVyZURhdGEiLCJ2aXpTZWN0aW9uSURzIiwib3B0aW9ucyIsImdldE9wdGlvbnMiLCJjb25zb2xlIiwibG9nIiwicm93RGF0YSIsImN1ckFtb3JjZSIsInNlY3Rpb25CYWNrZ3JvdW5kIiwic2VjdGlvblR5cGUiLCJwYXJzZUNsYXNzZXMiLCJnYW1laWQiLCJ0aXRsZU9iaiIsImlzSnNvbiIsIkpTT04iLCJjdXJEYXRhIiwiYXR0cmlidXRzIiwic2Nyb2xsVHlwZSIsImhhc093blByb3BlcnR5IiwiY3VyVml6U2VjdGlvbiIsInB1c2giLCJjdXJTZWN0aW9uIiwic2VjdGlvbkF0dHIiLCJtZWRpYUluZm8iLCJPYmplY3QiLCJ2YWx1ZXMiLCJnZW5lcmF0ZUNhbGxiYWNrcyIsImZ1bGxTdHJ1Y3R1cmUiLCJjYWxsYmFja3NBcnJheSIsImNhbGxiYWNrIiwiY3VyU3RlcHMiLCJjdXJDb21tYW5kIiwib3BhY2l0eVNlbGVjdG9yIiwiZmlsbCIsIl8iLCJmaWx0ZXIiLCJkIiwiaW5kIiwiam9pbiIsImQzIiwidHJhbnNpdGlvbiIsImN1clRhZ0lEIiwiY3VyVGFnSURfaW5kZXgiLCJwYXJzZUludCIsInN0ciIsImUiLCJmcm9tIiwiYXV0aG9ycyIsInVybHMiLCJtYXBib3hnbCIsIkdhdWdlcyIsInNlbGVjdEFsbCIsIm5vZGVzIiwibm9kZSIsImN1cldpZHRoIiwiYXR0ciIsImRvbGxhcnMiLCJzZWxlY3QiLCJNYXRoIiwicm91bmQiLCJjb21taXR0ZWQiLCJJbnRyb0JveCIsInN0YXJ0R2FtZSIsImdhbWVTdGFydCIsImludHJvRWxlbSIsIm9uQ2xpY2siLCJNb25pdG9yaW5nIiwidGVyYXdhdHRzIiwiY2FsY3VsYXRlUGVyZm9ybWFuY2UiLCJjaG9pY2VzX3ZhbHVlcyIsInNsaWNlIiwiQ2hvaWNlIiwic2VsZWN0aW9uIiwic2V0U2VsZWN0aW9uIiwib2JqIiwibmV4dFByb21wdCIsImNvc3QiLCJwZXJmb3JtYW5jZSIsInRyaWdnZXJOZXh0IiwiY3VyUHJvbXB0IiwicmVwbGFjZSIsImNoYW5nZVByb21wdCIsInVwZGF0ZURvbGxhcnMiLCJ1cGRhdGVQZXJmb3JtYW5jZSIsInByZXZpb3VzUHJvbXB0IiwiY3VySW5kZXgiLCJjaG9pY2VzIiwiY2hvaWNlIiwiZXZlbnQiLCJ0YXJnZXQiLCJ1cGRhdGVTZWxlY3RlZCIsInNob3dUV2giLCJnYXVnZXMiLCJNdWx0aVNlbGVjdGlvbiIsInJlc2V0U2VsZWN0aW9uIiwiY2FsY3VsYXRlVG90YWxTZWxlY3Rpb24iLCJhY2NDb3N0IiwiYWNjIiwiY3VyIiwiYWNjUGVyZm9ybWFuY2UiLCJjb3VudCIsIm5ld0FycmF5IiwiUHJpbnRQcm9tcHQiLCJtZXNzYWdlIiwiUmVwYXJ0aXRpb24iLCJqZXRvbnMiLCJzZXRKZXRvbnMiLCJzZXRUZXJhd2F0dHMiLCJvdGhlclBlcmZvTWV0cmljcyIsInNldE90aGVyUGVyZm9NZXRyaWNzIiwidW5pdHMiLCJzZXRVbml0cyIsInRva2Vuc1BlclVuaXQiLCJzZXRUb2tlbnNQZXJVbml0IiwiZ2V0T3B0aW9uUGFyYW1zIiwibmV3VW5pdHMiLCJ1bml0VmFsdWUiLCJuZXdKZXRvbnMiLCJjdXJWYWwiLCJuZXdNVyIsImN1ck9wdGlvblBhcmFtcyIsIm5ld090aGVyUGVyZm9NZXRyaWNzIiwic3BsaXR0ZWRUcmlnZ2VyTmV4dCIsImV2ZXJ5IiwidmFsIiwiZGVmYXVsdE5leHQiLCJpbmRleE9mTWF4VmFsdWUiLCJpTWF4IiwieCIsImFyciIsImNvbmNhdCIsInByb2Nlc3NDaG9pY2VzIiwic3BsaXR0ZWRDaG9pY2VzIiwibmFtZSIsInVuaXRUV2h2YWx1ZSIsInVuaXRFbnZpcm92YWx1ZSIsInVuaXRQb3B1dmFsdWUiLCJtb2RpZnlPbkNsaWNrIiwiZGlmZiIsIm5ld0FkZGl0aW9uIiwidG90YWwiLCJ2YWx1ZSIsIk1hcE5hdmlnYXRvciIsInNldHVwT25DbGljayIsInRpcCIsImQzVGlwIiwiZGlyZWN0aW9uIiwiaHRtbCIsInN1cHBfdGV4dCIsIlByb21pc2UiLCJhbGwiLCJ0aGVuIiwiYmdNYXAiLCJpY29uT05NYXAiLCJhcHBlbmQiLCJkb2N1bWVudEVsZW1lbnQiLCJPbkljb25zU1ZHIiwiY2FsbCIsImFwcGVuZENoaWxkIiwiZ0J1dHRvbnMiLCJ0aXRsZXMiLCJzdXBwX3RleHRzIiwicmV2ZXJzZSIsImN1clRpcERhdGEiLCJvbiIsInN0b3BQcm9wYWdhdGlvbiIsInNob3ciLCJ0b2dnbGVJY29uIiwicGFyZW50RWxlbWVudCIsImhpZGUiLCJpY29uT2JqIiwic3RhdHVzIiwiQmlsYW4iLCJ0ZXh0Q29udGVudEFycmF5IiwidGV4dFN1cHBBcnJheSIsInByb2Nlc3NlZENvbnRlbnQiLCJnZW5lcmljVGV4dCIsIkVuZEdhbWUiLCJyYWlzb24iLCJQcm9tcHRCb3giLCJyZWFzb25zIiwibmV3VmFsdWUiLCJkaWZmVmFsdWUiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJkaWZmQXJyYXkiLCJyZW5kZXJTd2l0Y2giLCJwYXJhbSIsImVuZEdhbWUiLCJNYWluRnJhbWUiLCJnYW1lU3RhdHVzIiwic2V0U3RhdHVzIiwiZ2FtZUluZGV4Iiwic2V0R2FtZUluZGV4Iiwic2V0RG9sbGFycyIsInNldFBlcmZvcm1hbmNlIiwiYmciLCJzZXRCRyIsImdldEdhbWVQcm9tcHQiLCJnYW1lRW5kIiwiZ2FtZURhdGEiLCJmaW5kR2FtZUluZGV4IiwiSURuYW1lIiwiZmluZEluZGV4IiwiZ2V0QmFja2dyb3VuZEluZm8iLCJnYW1lU2NyZWVuQ2xhc3MiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJtYXBPYmoiLCJuZXdQZXJmb3JtYW5jZSIsImFwcGx5IiwiRW5naW5lIiwiY29udGFpbmVyIiwiaW50cm9PYmoiLCJ0aGlzIiwicm9vdEVsZW0iLCJlbmdpbmVSb290IiwiUmVhY3RET00iLCJpbml0RW5naW5lIiwicmVuZGVyIiwiaW5pdGlhbGl6ZSIsIm1hcENvbnRhaW5lciIsInNldHVwVml6Iiwic2VjdGlvbk9iaiIsIlNjcm9sbGVyU3RlcCIsImVsIiwiX2lzQWN0aXZhdGUiLCJzY3JvbGxEaXJlY3Rpb24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJpbml0U2Nyb2xsZXIiLCJlbGVtZW50cyIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3RpY2t5Qml0cyIsInN0aWNreUJpdFN0aWNreU9mZnNldCIsIkxhenlMb2FkIiwiZWxlbWVudHNfc2VsZWN0b3IiLCJ0aHJlc2hvbGQiLCJ2MSIsImNhbGxiYWNrcyIsIl9vZmZzZXRUb3AiLCJfb2Zmc2V0Qm90dG9tIiwiaW5uZXJIZWlnaHQiLCJpc0luaXRpYWxpemVkIiwibGFzdFNjcm9sbCIsInZpeiIsInZpc2libGVTdGVwcyIsImFydGljbGVSZW1pbmRlciIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGxQcm9ncmVzcyIsInZpelNlY3Rpb25zIiwiRXJyb3IiLCJ2aXpTZWN0aW9uIiwic2VjdGlvbnMiLCJqIiwiX3VwZGF0ZSIsImN1cnJlbnRTY3JvbGwiLCJwYWdlWU9mZnNldCIsInNjcm9sbFRvcCIsImJvdW5kaW5nUmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImRlYWN0aXZhdGUiLCJpc0FydGljbGVSZW1pbmRlckRpc3BsYXllZCIsImJvdHRvbSIsImlzQXJ0aWNsZVJlbWluZGVySXNWaXNpYmxlIiwiY29udGFpbnMiLCJzZWN0aW9uIiwiYWN0aXZhdGUiLCJfdXBkYXRlU2Nyb2xsUHJvZ3Jlc3MiLCJzY3JvbGxlZCIsImJvZHkiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJwdWJsaWNJbnRlcmZhY2UiLCJvZmZzZXRUb3AiLCJ1bmRlZmluZWQiLCJvZmZzZXRCb3R0b20iLCJzY3JvbGxlciIsIlJlbmRlclN0cnVjdHVyZSIsInJlbmRlcmVkIiwicmVuZGVyZWREYXRhIiwia2V5cyIsInNlY3Rpb25LZXkiLCJwYWNrYWdlcyIsIlJlYWN0IiwiaW5zZXJ0IiwiZ29vZ2xlX2NvbmZpZyIsImNyZWF0ZVJvb3QiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9