(self.webpackChunkscrollytelling_template=self.webpackChunkscrollytelling_template||[]).push([[179],{11819:(e,t,n)=>{"use strict";var a=n(40207),r=n(67294);function o(e){var t=Array.from(String(e.optionData.authors).split(",")).map((function(t,n){var a=Array.from(String(e.optionData.authors).split(",")).length;return a>2?n===a-2?r.createElement("span",{key:n},r.createElement("a",{href:"".concat(String(e.optionData.urls).split(",")[n])},t)," et "):n===a-1?r.createElement("span",{key:n},r.createElement("a",{href:"".concat(String(e.optionData.urls).split(",")[n])},t)):r.createElement("span",{key:n},r.createElement("a",{href:"".concat(String(e.optionData.urls).split(",")[n])},t),", "):0===n?r.createElement("span",{key:n},r.createElement("a",{href:"".concat(String(e.optionData.urls).split(",")[n])},t)," et "):r.createElement("span",{key:n},r.createElement("a",{href:"".concat(String(e.optionData.urls).split(",")[n])},t))})),n=r.createElement("section",{className:"intro-section ".concat(e.classes)},r.createElement("h1",null,e.optionData.title),r.createElement("address",null,r.createElement("div",{className:"authors"},"Par ",t),r.createElement("div",{className:"date"},e.optionData.date)),r.createElement("p",null,e.amorce));return e.background?r.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},n):n}var i=n(25935);function c(e){var t,n=String(e.classes).includes("citation");n&&(t={text:String(e.texts).split("/")[0],author:String(e.texts).split("/")[1]});var a,o=String(e.classes).includes("bigNumber");o&&(a={number:String(e.texts).split("/")[0],underText:String(e.texts).split("/")[1]});var c=e.visual,s=""!==c?"Photo"===e.visual?r.createElement("img",{key:"photoTextSection_".concat(e.id),id:"photoTextSection_".concat(e.id),src:"assets/img/675/".concat(e.filename),"data-srcset":"assets/img/2048/".concat(e.filename," 2048w, assets/img/990/").concat(e.filename," 990w, assets/img/675/").concat(e.filename," 675w, assets/img/1350/").concat(e.filename," 1350w, assets/img/100/").concat(e.filename," 100w, assets/img/495/").concat(e.filename," 495w, assets/img/1024/").concat(e.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(e.visuelclasses),style:{paddingBottom:"1rem"}}):"Video"===e.visual?r.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(e.visuelclasses),preload:"metadata",key:"videoTextSection_".concat(e.id),id:"videoTextSection_".concat(e.id)},r.createElement("source",{src:"assets/videos/".concat(e.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):r.createElement("div",null):r.createElement("div",null),l=r.createElement("section",{className:"text-section ".concat(e.classes)},n?r.createElement("blockquote",{className:"small"},r.createElement("div",null,r.createElement("p",null,r.createElement("b",null,(0,i.ZP)(t.text))),r.createElement("p",{className:"author"},t.author),r.createElement("div",{className:"symbol"}))):o?r.createElement("div",{className:"container-number"},r.createElement("div",{className:"numbers"},r.createElement("h2",null,a.number),r.createElement("small",null,a.underText))):r.createElement("div",null,c?s:r.createElement("div",null),String(e.texts).startsWith("<")?(0,i.ZP)(e.texts):r.createElement("p",null,(0,i.ZP)(e.texts))));return e.background?r.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},l):l}var s,l=n(45697),u=n.n(l),m=["title","src"];function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p.apply(this,arguments)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function f(e){var t,n,a=e.title,o=e.src,i=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,m),c=(0,r.useRef)(),s=(t=(0,r.useState)(500),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],u=s[1],f=(0,r.useCallback)((function(e){var t=e.data,n=void 0===t?{}:t;e.source===c.current.contentWindow&&"string"!=typeof n&&n["datawrapper-height"]}),[u,c]);return(0,r.useEffect)((function(){return window.addEventListener("message",f),function(){return window.removeEventListener("message",f)}}),[l,u,f]),r.createElement("iframe",p({ref:c,scrolling:"no",frameBorder:"0",width:"100%"},i,{title:a,src:o,height:l}))}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}f.propTypes={title:u().string.isRequired,src:u().string.isRequired,loading:u().oneOf(["eager","lazy"])};var h="intro-titre",g="pleine-page-titre",y="texte-classique",E="viz-section",b="centré",w="Photo",x="Video",S="Visualisation",k="iframe",T=(v(s={titre:"Titre",auteurs:"Auteurs",date:"Date"},"date","Date"),v(s,"urls","LienAuteurs"),v(s,"lienfichiersource","LienFichierSource"),s);function N(e){var t,n,a,o=r.createElement("section",{id:e.listID,className:e.classed},r.createElement("div",{className:"steps ".concat((t=e.steps,n=t.map((function(e,t){return e.stepclasses})),a=new Array(n.length),n.forEach((function(e,t){if(Array.isArray(e))e.forEach((function(e){for(var r=t;r<n.length;r++)n[r].includes(e)&&(a[r]=e)}));else if("string"==typeof e)for(var r=t;r<n.length;r++)n[r].includes(e)&&(a[r]=e)})),a.reduce((function(e,t){return e===t&&""!==e&&""!==t?e:""}))))},e.steps.map((function(e,t){var n,a=String(e.stepclasses).includes("citation");return a&&(n={text:String(e.text).split("/")[0],author:String(e.text).split("/")[1]}),r.createElement("section",{key:t,className:e.stepclasses},a?r.createElement("blockquote",{className:"small"},r.createElement("div",null,r.createElement("p",null,r.createElement("b",null,(0,i.ZP)(n.text))),r.createElement("p",{className:"author"},n.author),r.createElement("div",{className:"symbol"}))):String(e.text).startsWith("<")?(0,i.ZP)(e.text):r.createElement("p",null,e.text?(0,i.ZP)(e.text):""))}))),r.createElement("div",{className:"viz",id:"viz"},e.steps.map((function(t,n){return t.visual===w?r.createElement("img",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),src:"assets/img/675/".concat(t.filename),"data-srcset":"assets/img/2048/".concat(t.filename," 2048w, assets/img/990/").concat(t.filename," 990w, assets/img/675/").concat(t.filename," 675w, assets/img/1350/").concat(t.filename," 1350w, assets/img/100/").concat(t.filename," 100w, assets/img/495/").concat(t.filename," 495w, assets/img/1024/").concat(t.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(t.visuelclasses)}):t.visual===x?r.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(t.visuelclasses),preload:"metadata",key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n)},r.createElement("source",{src:"assets/videos/".concat(t.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):t.visual===k?r.createElement("div",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),className:"iframeContainer"},r.createElement(f,{title:"Mesures d'arsenic",src:"".concat(t.filename)})):t.visual===S?r.createElement("div",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),className:"iframeContainer ".concat(t.visuelclasses)}):void 0}))));return e.background?r.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},o):o}function I(e){var t=r.createElement("section",{className:"full-page-section ".concat(e.classes)},r.createElement("div",{className:"titleImage"},e.filename?"Photo"===e.visual?r.createElement("img",{key:"".concat(e.id),id:"".concat(e.id),src:"assets/img/675/".concat(e.filename),"data-srcset":"assets/img/2048/".concat(e.filename," 2048w, assets/img/990/").concat(e.filename," 990w, assets/img/675/").concat(e.filename," 675w, assets/img/1350/").concat(e.filename," 1350w, assets/img/100/").concat(e.filename," 100w, assets/img/495/").concat(e.filename," 495w, assets/img/1024/").concat(e.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(e.visuelclasses)}):"Video"===e.visual?r.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(e.visuelclasses),preload:"metadata",key:"".concat(e.id),id:"".concat(e.id)},r.createElement("source",{src:"assets/videos/".concat(e.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):r.createElement("div",null):r.createElement("div",null),e.filename?r.createElement("div",{className:"filter"}):r.createElement("div",null)),r.createElement("div",{className:"captionholder"},r.createElement("h2",{className:"caption ".concat(e.mainTitle.class)},e.mainTitle.text),e.subTitle?r.createElement("h3",{className:"caption ".concat(e.subTitle.class)},e.subTitle.text):r.createElement("div",null)));return e.background?r.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},t):t}n(93162);var A=n(36184);function C(e,t){var n={},a=[],r=O(t);return console.log("content Data",e),e.map((function(e,t){if(e.Section===h){var o=e.StepClasses,i=e.TEXTE,c=e.StyleFond;n[e.SectionID]={key:t,sectionType:h,optionData:r,amorce:i,background:c,classes:j(o),gameid:e.GameID}}else if(e.Section===y){var s=e.TEXTE,l=e.StepClasses,u=e.StyleFond;n[e.SectionID]={key:t,sectionType:y,texts:s,visual:e.VISUEL,filename:e.NomFichierSource,background:u,classes:j(l),visuelclasses:j(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===g){var m=e.TEXTE;D(e.TEXTE)&&(m=JSON.parse(e.TEXTE)),n[e.SectionID]={key:t,sectionType:g,texts:D(e.TEXTE)?m:{mainTitle:{class:"",text:m},subTitle:null},visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,classes:j(e.StepClasses),visuelclasses:j(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===E){var p={attributs:e.Attributs,scrollType:e.Step,text:e.TEXTE,visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,visuelclasses:j(e.VisuelClasses),stepclasses:j(e.StepClasses),gameid:e.GameID};if(n.hasOwnProperty(e.SectionID)){var d=n[e.SectionID];d.push(p),n[e.SectionID]=d}else n[e.SectionID]=[p],a.push(e.SectionID)}})),a.map((function(e){var t=n[e],a=t[0].attributs===b?" full-page":"",r=t[0].background;n[e]={key:e,sectionType:E,listID:e,steps:t,classed:"viz-section".concat(a),mediaInfo:0,background:r}})),Object.values(n)}function P(e,t){var n=C(e,t),a=[];return n.map((function(e){if("viz-section"===e.sectionType){var t=[];e.steps.map((function(n,a){var r=function(){};if(""!==n.visual){var o=Array(e.steps.length).fill(null).map((function(e,t){return t})).filter((function(e){return e!==a})).map((function(t){return"#".concat(e.key,"_").concat(t)})).join(",");r=function(){A.Ys("#".concat(e.key,"_").concat(a)).transition().style("opacity",1).style("display",null),""!==o&&A.td_("".concat(o)).transition().style("opacity",0).style("display","none")}}else if(String(n.filename).startsWith("TAGID")){var i=String(n.filename).split("=")[1],c=parseInt(i.split("_")[1]),s=Array(e.steps.length).fill(null).map((function(e,t){return t})).filter((function(e){return e!==c})).map((function(t){return"#".concat(e.key,"_").concat(t)})).join(",");r=function(){A.Ys("#".concat(i)).transition().style("opacity",1).style("display",null),""!==s&&A.td_("".concat(s)).transition().style("opacity",0).style("display","none")}}t.push(r)})),a.push(t)}})),a}function D(e){try{JSON.parse(e)}catch(e){return!1}return!0}function j(e){return Array.from(e.split(";")).join(" ")}function O(e){return{title:e[0][T.titre],authors:e[0][T.auteurs],urls:e[0][T.urls],date:e[0][T.date]}}n(9208);var R=n(83731);function _(){return window.innerWidth<400}function z(){return window.innerWidth<=576}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var V={token:"pk.eyJ1IjoibGVkZXZvaXIiLCJhIjoiY2p2bW81dHU2MWV1cTRhcXIzaXZqMGYxciJ9.WrIF8o69aR_TstDFu6Qyag",mapBounds:{max:[-165,30.72833,-25.23636,82.229434]},colors:["#F4CBC6","#F4A39A","#EE6A5E","#CE3727","#A22823","#751A1A","#410000"],clusterMaxZoom:11,clusterRadius:30,clusterMinPoints:5};R.accessToken=V.token;var Y=function(){function e(t,n,a,r,o){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];M(this,e),this.dataSourceObjects=a,this.constants=V,this.map=new R.Map({container:n,style:r,preserveDrawingBuffer:!0,center:o.center,zoom:o.zoom}),this.maxBounds=o,this.boundsList=this.dataSourceObjects.map((function(e){return e.coords})),this.extraBounds=this.dataSourceObjects.map((function(e){return e.extraCoords})),i&&(this.map.scrollZoom.disable(),this.map.dragPan.disable(),this.map.dragRotate.disable(),this.map.boxZoom.disable(),this.map.doubleClickZoom.disable()),c&&this.setupHandlers(),this.dataList=this.dataSourceObjects.map((function(e){return e.data}))}var t,n;return t=e,n=[{key:"updateBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.maxBounds,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_()?5:z()?15:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;this.map=this.map.fitBounds(e,{duration:n,padding:t})}},{key:"updateCoordsAndZoom",value:function(e){this.map.flyTo({center:e.center,zoom:e.zoom,speed:.7,curve:1,easing:function(e){return e}})}},{key:"viewBoundObj",value:function(e){this.updateCoordsAndZoom(this.boundsList[e])}},{key:"viewExtraBoundObj",value:function(e,t,n){var a=this.extraBounds[e];this.updateCoordsAndZoom(a[t])}},{key:"viewInitBounds",value:function(e){this.updateCoordsAndZoom(this.maxBounds)}},{key:"showSourceXItemY",value:function(e,t){this.updateCoordsAndZoom(this.dataList[e][t])}},{key:"initMapSourcesAndLayers",value:function(){var e=this;this.initialised||(this.initialised=!0,this.dataSourceObjects.map((function(t){e.map.addSource(t.sourceName,{type:t.sourceType,data:t.sourceData}),"fill"===t.layerType?e.map.addLayer({id:t.sourceName,type:t.layerType,source:t.sourceName,paint:{"fill-color":t.color,"fill-opacity":t.opacity}}):"circle"===t.layerType&&e.map.addLayer({id:t.sourceName,type:t.layerType,source:t.sourceName,paint:{"circle-color":["match",["get","statut"],"Recherches effectuées ou en cours","#ff561c","Phase préliminaire","#ffc734","#b7b7b7"],"circle-radius":5}})})))}},{key:"changeLayerPaint",value:function(e,t,n){this.map.setPaintProperty(e,t,n)}},{key:"setupHandlers",value:function(){var e=this;this.map.on("mouseover","pensionnatsSource",(function(t){e.map.getCanvas().style.cursor="pointer",e.drawPopup(t)})),this.map.on("mouseout","pensionnatsSource",(function(t){e.map.getCanvas().style.cursor="default",e.closePopup()})),this.map.on("click","pensionnatsSource",(function(t){t.preventDefault(),e.map.getCanvas().style.cursor="pointer",e.drawPopup(t)}))}},{key:"drawPopup",value:function(e){for(var t=e.features[0].geometry.coordinates.slice(),n=e.features[0].properties,a=L(n.ouverture.split("/"),3),r=a[0],o=a[1],i=a[2],c=L(n.fermeture.split("/"),3),s=c[0],l=c[1],u=c[2],m=[new Intl.DateTimeFormat("fr-CA",{dateStyle:"long"}).format(new Date(Date.UTC(i,o,r))),new Intl.DateTimeFormat("fr-CA",{dateStyle:"long"}).format(new Date(Date.UTC(u,l,s)))],p=m[0],d=m[1],f="\n      <h3>".concat(n.name,"</h3>\n      <h4>").concat(n.ville,", ").concat(n.province,"</h4>\n      <p>").concat(p," - ").concat(d,"</p>\n      <p>").concat(n.statut,"</p>\n    ");Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;this.popup=(new R.Popup).setLngLat(t).setHTML(f).addTo(this.map)}},{key:"closePopup",value:function(){this.popup&&this.popup.remove()}},{key:"updateData",value:function(e,t){this.initialised||this.initMapSourcesAndLayers(),this.map.getSource(e).setData(t)}}],n&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n(6899);var F=n(20745);function Z(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,r)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){Z(o,a,r,i,c,"next",e)}function c(e){Z(o,a,r,i,c,"throw",e)}i(void 0)}))}}function W(e){var t=(0,r.useCallback)(U(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("starting game"),e.mapObj.viewExtraBoundObj(0,"zone1"),e.gameStart();case 3:case"end":return t.stop()}}),t)}))));return r.createElement("div",{className:"gameBox"},r.createElement("div",{className:"introBox"},e.introElem),r.createElement("div",{className:"userBox"},r.createElement("div",{className:"startbutton",onClick:t},r.createElement("p",null,"Commencer"))))}function X(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,r)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){X(o,a,r,i,c,"next",e)}function c(e){X(o,a,r,i,c,"throw",e)}i(void 0)}))}}function G(e){(0,r.useEffect)((function(){}),[]);var t=(0,r.useCallback)(H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("next prompt!",e.curIndex+1),e.changePrompt(e.curIndex+1);case 2:case"end":return t.stop()}}),t)})))),n=(0,r.useCallback)(H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("previous prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1));case 1:case"end":return t.stop()}}),t)}))));return r.createElement("div",{className:"choices"},r.createElement("div",{className:"column"},e.curIndex>0?r.createElement("div",{className:"actionbutton",onClick:n},r.createElement("div",{className:"butn"},r.createElement("p",null,"Previous"))):r.createElement("div",null)),r.createElement("div",{className:"column"},e.choices.map((function(e,n){return console.log("returning choice: ",e),r.createElement("div",{className:"actionbutton",key:n,onClick:t},r.createElement("div",{className:"butn"},r.createElement("p",null,e)))}))))}function J(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,r)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){J(o,a,r,i,c,"next",e)}function c(e){J(o,a,r,i,c,"throw",e)}i(void 0)}))}}function $(e){var t=(0,r.useCallback)(Q(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("next prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1));case 1:case"end":return t.stop()}}),t)})))),n=(0,r.useCallback)(Q(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("next prompt!",e.curIndex+1),e.changePrompt(e.curIndex+1);case 2:case"end":return t.stop()}}),t)}))));return r.createElement("div",{className:"printprompt"},r.createElement("div",{className:"message"},e.message),r.createElement("div",{className:"actionbutton",onClick:t},r.createElement("div",{className:"butn"},r.createElement("p",null,"Previous"))),r.createElement("div",{className:"actionbutton",onClick:n},r.createElement("div",{className:"butn"},r.createElement("p",null,"Suivant"))))}function K(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,r)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){K(o,a,r,i,c,"next",e)}function c(e){K(o,a,r,i,c,"throw",e)}i(void 0)}))}}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ae(e){var t=te((0,r.useState)(0),2),n=t[0],a=t[1],o=te((0,r.useState)(0),2),i=o[0],c=o[1];(0,r.useEffect)((function(){}),[]);var s,l=(0,r.useCallback)(ee(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("next prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1));case 1:case"end":return t.stop()}}),t)})))),u=(0,r.useCallback)(ee(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("next prompt!",e.curIndex+1),e.changePrompt(e.curIndex+1);case 2:case"end":return t.stop()}}),t)}))));return r.createElement("div",{className:"repartition"},(s=e.choices.map((function(e){return{name:(t=e.split("_"))[0],unitValue:parseInt(t[1]),total:parseInt(t[2]),unitMWvalue:parseInt(t[3])};var t})),console.log("render choices:",s),s.map((function(e,t){return r.createElement("div",{className:"row",key:t},r.createElement("div",{className:"choice_header"},r.createElement("h5",null,e.name),"//",r.createElement("p",null,e.unitValue," jetons et ",e.unitMWvalue," MW par unité")),r.createElement("div",{className:"selector"},r.createElement("div",{className:"band_row"},r.createElement("div",{className:"band",onClick:function(t){return function(e,t,n,r){var o=function(e){return(e.clientX-e.target.getBoundingClientRect().left)/e.target.getBoundingClientRect().width}(e);console.log(" totals check: ",e,Math.round(parseFloat(o*n).toFixed(0)/t),t,n,r),A.Ys(e.target.parentElement).select(".rowjetonsTotal").select(".value").html(Math.round(parseFloat(o*n).toFixed(0)/t)*t),A.Ys(e.target.parentElement).select(".rowmegawattsTotal").select(".value").html(Math.round(parseFloat(o*n).toFixed(0)/t)*r);var i=0,s=0;A.Ys(e.target.offsetParent).selectAll(".band_row").nodes().map((function(e){console.log("checking node: ",e),i+=parseInt(A.Ys(e).select(".rowjetonsTotal").select(".value").html()),s+=parseInt(A.Ys(e).select(".rowmegawattsTotal").select(".value").html())})),a(i),c(s)}(t,e.unitValue,e.total,e.unitMWvalue)}}),r.createElement("div",{className:"values"},r.createElement("div",{className:"rowjetonsTotal"},r.createElement("p",{className:"value"},"0")),r.createElement("div",{className:"rowmegawattsTotal"},r.createElement("p",{className:"value"},"0")))),r.createElement("div",{className:"separator"})))}))),e.curIndex>0?r.createElement("div",{className:"actionbutton",onClick:l},r.createElement("div",{className:"butn"},r.createElement("p",null,"Previous"))):r.createElement("div",null),r.createElement("div",{className:"monitoring"},r.createElement("div",{className:"column"},r.createElement("div",{className:"monitoring_header"},r.createElement("h5",null,"Jetons investis")),r.createElement("div",{className:"monitoring_valeur"},r.createElement("h3",null,n))),r.createElement("div",{className:"column"},r.createElement("div",{className:"monitoring_header"},r.createElement("h5",null,"Électricité produite")),r.createElement("div",{className:"monitoring_valeur"},r.createElement("h3",null,i)))),r.createElement("div",{className:"actionbutton",onClick:u},r.createElement("div",{className:"butn"},r.createElement("p",null,"Suivant"))))}function re(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,r)}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ie(e){var t,n,a=(t=(0,r.useState)([]),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());a[0],a[1],(0,r.useEffect)((function(){}),[]);var o=(0,r.useCallback)(function(){var t,n=(t=regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.changePrompt(n);case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(e){re(o,a,r,i,c,"next",e)}function c(e){re(o,a,r,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}());return r.createElement("div",{className:"gameBox"},r.createElement("div",{className:"promptBox"},r.createElement("div",{className:"header"},r.createElement("div",{className:"surtitre"},r.createElement("h3",null,e.curPrompt.Sujet)),r.createElement("div",{className:"question"},r.createElement("p",null,e.curPrompt.Question))),function(t){switch(t){case"Repartition":return r.createElement(ae,{choices:String(e.curPrompt.Choix).split(";"),changePrompt:o,curIndex:e.curIndex});case"Carte":case"Suivi":case"choixReponse":case"Catastrophe":default:return r.createElement(G,{choices:String(e.curPrompt.Choix).split(";"),changePrompt:o,curIndex:e.curIndex});case"Print":return r.createElement($,{message:String(e.curPrompt.Texte_Supp),changePrompt:o,curIndex:e.curIndex})}}(e.curPrompt.Type)))}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function le(e){var t=ce((0,r.useState)("IDLE"),2),n=t[0],a=t[1],o=ce((0,r.useState)(0),2),i=o[0],c=o[1];(0,r.useEffect)((function(){console.log("checking props mapObj:",e.mapObj)}),[]),(0,r.useEffect)((function(){console.log("game ",n)}),[n]),(0,r.useEffect)((function(){s(i)}),[i]);var s=function(t){console.log("current game prompt:",e.gameData.filter((function(e){return String(e.Index)===String(t)})))};return r.createElement("div",{className:"gameScreen"},r.createElement("div",{className:"gauges"},r.createElement("div",{className:"gauge dollarGauge"},r.createElement("div",{className:"textBox"},r.createElement("h5",null,"Dollars")),r.createElement("div",{className:"gaugeColor blue"},r.createElement("div",{className:"value"},r.createElement("p",null,"100")))),r.createElement("div",{className:"gauge environmentGauge"},r.createElement("div",{className:"textBox"},r.createElement("h5",null,"TWh en 2050")),r.createElement("div",{className:"gaugeColor green"},r.createElement("div",{className:"value"},r.createElement("p",null,"100"))))),"IDLE"===n?r.createElement(W,{introElem:e.introElem,mapObj:e.mapObj,gameStart:function(){a("STARTED"),c(0)}}):"END"===n?r.createElement("div",null):r.createElement(ie,{curIndex:i,curPrompt:e.gameData[i],changePrompt:c}))}function ue(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n(97762);var me=function(){function e(t,n,a,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t;var i=this.container.append("div").classed("rootElem",!0);this.engineRoot=F.createRoot(i.node()),this.optionData=n,this.mapObj=r,this.amorce=a.TEXTE,this.gameData=o,console.log("game Data is : ",this.gameData),this.initEngine()}var t,n;return t=e,(n=[{key:"initEngine",value:function(){var e=r.createElement(o,{key:"gameIntro",sectionType:h,optionData:this.optionData,amorce:this.amorce,background:null,classes:""});this.engineRoot.render(r.createElement(le,{introElem:e,mapObj:this.mapObj,gameStatus:this.gameStatus,gameData:this.gameData}))}}])&&ue(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pe(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,r)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){pe(o,a,r,i,c,"next",e)}function c(e){pe(o,a,r,i,c,"throw",e)}i(void 0)}))}}var fe="mapbox://styles/ledevoir/clal9zlfk004a15qohhr7r495";function ve(e,t){return he.apply(this,arguments)}function he(){return(he=de(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.gyn("https://docs.google.com/spreadsheets/d/e/2PACX-1vQQZ3sz0q1vnZmoYYR5IrCfuONhHcNw50iDtbg1H2mIX8lHDL1BQ4sAMi7iApSE1G9WQTW2jHcWv4KW/pub?gid=0&single=true&output=csv").then((function(e){return A.AVB("./data/filtered_accidents.geojson").then((function(a){var r=[{sourceName:"mapSource",sourceType:"geojson",sourceData:a,layerType:"circle",color:"#f58366",opacity:.8,coords:{center:[-70.566,52.488],zoom:4},extraCoords:{zone1:{center:[-70.566,52.488],zoom:5}}}],o=A.Ys(".map-area");o.append("div").classed("map",!0).attr("id","qcmap");var i=new Y(A.Ys("#qcmap"),"qcmap",r,fe,{center:[-70.566,52.488],zoom:4});return i.map.on("load",(function(){A.Ys("#qcmap").select(".mapbox-improve-map").text(""),i.initMapSourcesAndLayers(),A.Ys("#qcmap").select(".loading").style("display","none"),A.Ys("#qcmap").select(".options-bar").classed("disabled",!1)})),new me(o,O(n),t[0],i,e),ge(t,n),P(t,n),[[function(){}]]}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t){var n=C(e,t);console.log("checking structure:",n),n.map((function(e){"viz-section"===e.sectionType&&e.steps.map((function(t,n){""!==t.visual&&(0===n?A.Ys("#".concat(e.key,"_").concat(n)).style("opacity",1):A.Ys("#".concat(e.key,"_").concat(n)).style("opacity",0))}))}))}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var be=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.index=n,this.callback=a,this._isActivate=!1}var t,n;return t=e,(n=[{key:"activate",value:function(e){this._isActivate||(this._isActivate=!0,this.el.classList.add("active"),this.callback(e))}},{key:"deactivate",value:function(){this._isActivate&&(this._isActivate=!1,this.el.classList.remove("active"))}}])&&Ee(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),we=n(52732),xe=n.n(we),Se=n(89438);function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Te(e,t){var n=[];[".viz",".full-page-section > img",".full-page-section > video"].forEach((function(e){n=n.concat(Array.from(document.querySelectorAll(e)))})),(0,Se.Z)(n,{stickyBitStickyOffset:40}),new(xe())({elements_selector:".lazy",threshold:500}),Promise.all([ve(e,t)]).then((function(e){var t,n;(function(e){var t=0,n=0,a=window.innerHeight,r=!1,o=0,i=[],c=[],s=[],l=document.querySelector(".article-reminder"),u=document.querySelector("header > .progress"),m=document.querySelector(".intro-section h1"),p=document.querySelectorAll(".viz-section");if(p.length!==e.length)throw new Error("The number of viz sections (".concat(p.length,") mismatch with the length of the first ")+"dimension of the callbacks array (".concat(e.length,"). Please, be sure that the two elements ")+"have the same size.");p.forEach((function(t,n){var a,r=function(e){if(Array.isArray(e))return ye(e)}(a=t.querySelectorAll("section"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(r.length!==e[n].length)throw new Error("The number of steps (".concat(r.length,") in the viz section #").concat(n+1," mismatch with the ")+"number of callbacks specified (".concat(e[n].length,') at the index "').concat(n,'". Please, be sure that the two ')+"elements have the same size.");i=i.concat(r.map((function(t,a){return new be(t,"".concat(n,"-").concat(a),e[n][a])}))),c=c.concat(c,t.querySelector(".viz > *"))}));var d=function(){var e=window.pageYOffset||document.documentElement.scrollTop;i.forEach((function(e){var r=e.el.getBoundingClientRect();a-r.top-n>0&&r.top+r.height-t>0?s.push(e):e.deactivate()}));var r=m.getBoundingClientRect().bottom<=0,c=l.classList.contains("visible");r&&!c?l.classList.add("visible"):!r&&c&&l.classList.remove("visible"),s.forEach((function(t,n){e>=o?n===s.length-1?t.activate("down"):t.deactivate():0===n?t.activate("up"):t.deactivate()})),f(),s=[],o=e},f=function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;u.style.width=e+"%"},v={initialize:function(){if(r)throw new Error("The scroller is already initialized.");return r=!0,window.addEventListener("scroll",d),window.addEventListener("resize",(function(){a=window.innerHeight,f()})),(window.pageYOffset||document.documentElement.scrollTop)>0&&d(),f(),v},offsetTop:function(e){if(void 0===e)return t;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return t=e,v},offsetBottom:function(e){if(void 0===e)return n;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return n=e,v}};return v})((t=e,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]).offsetTop(40).offsetBottom(0).initialize()}))}function Ne(e){return e.rendered&&(0,r.useEffect)((function(){Te(e.contentData,e.paramsData)}),[]),t=C(e.contentData,e.paramsData),n={},Object.keys(t).map((function(e,a){var s=t[e];s.sectionType===h?n[e]=r.createElement(o,{key:s.key,sectionType:s.sectionType,optionData:s.optionData,amorce:(0,i.ZP)(s.amorce),background:s.background,classes:s.classes}):s.sectionType===y?n[e]=r.createElement(c,{key:s.key,id:s.key,sectionType:s.sectionType,texts:s.texts,background:s.background,classes:s.classes,visuelclasses:s.visuelclasses,visual:s.visual,filename:s.filename}):s.sectionType===g?n[e]=r.createElement(I,{key:s.key,id:s.key,sectionType:s.sectionType,background:s.background,classes:s.classes,visuelclasses:s.visuelclasses,visual:s.visual,mainTitle:s.texts.mainTitle,subTitle:s.texts.subTitle,filename:s.filename}):s.sectionType===E&&(n[e]=r.createElement(N,{key:s.key,listID:s.listID,steps:s.steps,classed:s.classed,mediaInfo:s.mediaInfo,background:s.background}))})),Object.values(n);var t,n}Promise.all([Promise.resolve().then(n.t.bind(n,20745,19)),Promise.resolve().then(n.t.bind(n,97762,19)),Promise.resolve().then(n.t.bind(n,67294,19))]).then((function(e){var t=e[0],n=(e[1],e[2]);A.Ys(".pull-right").insert("li","li").html("<p class='not-published'>Ne pas publier</p>"),A.gyn(a.google_config.contentURL).then((function(e){A.gyn(a.google_config.paramsURL).then((function(a){t.createRoot(document.getElementById("root")).render(n.createElement(Ne,{contentData:e,paramsData:a,rendered:!0})),document.querySelector("#footerContainer").innerHTML=A.Ys("#footerContent").node().innerHTML}))}))}))},40207:e=>{e.exports={google_config:{contentURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=0&single=true&output=csv",paramsURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=409950237&single=true&output=csv",localContentURL:"./data/structure/contentData.csv",localParamsURL:"./data/structure/paramsData.csv"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[216],(()=>(t(28594),t(35666),t(11819)))),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDbEJBLEVBQVMsSUFvRWZqUSxFQUFBQSxHQUFVLGVBQWVtUSxPQUFPLEtBQUssTUFDN0NuSCxLQUFKLCtDQWxFTWhKLEVBQUFBLElBQU9vUSxFQUFjLGNBQWRBLFlBQTBCdEYsTUFBTSxTQUFBdk4sR0FDckN5QyxFQUFBQSxJQUFPb1EsRUFBYyxjQUFkQSxXQUF5QnRGLE1BQU0sU0FBQXROLEdBQ3ZCaU4sRUFBUzRGLFdBQVc3RCxTQUFTOEQsZUFBZSxTQUNwRDNGLE9BQ0gsZ0JBQUNpRixHQUFELENBQWlCclMsWUFBYUEsRUFBYUMsV0FBWUEsRUFBWXFTLFVBQVUsS0FtRXpGckQsU0FBU21CLGNBQWMsb0JBQW9CNEMsVUFBWXZRLEVBQUFBLEdBQUEsa0JBQTRCc0osT0FBT2lILG9CLFVDN0Y1RkMsRUFBT0MsUUFBVSxDQUFDTCxjQVBJLENBQ2xCLFdBQWMsbUtBQ2QsVUFBYSwyS0FDYixnQkFBbUIsbUNBQ25CLGVBQWtCLHNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2NvbXBvbmVudHMvSW50cm9TZWN0aW9uLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9jb21wb25lbnRzL1RleHRTZWN0aW9uLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9jb21wb25lbnRzL0RXQ2hhcnQuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dlbmVyYXRvci9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2NvbXBvbmVudHMvVml6U2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvY29tcG9uZW50cy9GdWxsUGFnZVNlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dlbmVyYXRvci9zdHJ1Y3R1cmVHZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvZGF0YS9zdHJ1Y3R1cmUvY2FsbGJhY2tzLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4uL2xlZGV2b2lyLWRhdGF2aXovc3JjL21hcHMvc2NyZWVuLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4uL2xlZGV2b2lyLWRhdGF2aXovc3JjL21hcHMvaW50ZXJhY3RpdmUtbWFwLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4uL2xlZGV2b2lyLWRhdGF2aXovc3JjL2dyYXBocy9zdGFja2VkQXJlYUNoYXJ0LmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvaW50cm9Cb3guanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL011bHRpcGxlQ2hvaWNlLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9QcmludFByb21wdC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL3Byb21wdGZpbGwvUmVwYXJ0aXRpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9Qcm9tcHRCb3guanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9tYWluZnJhbWUuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvZW5naW5lLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC92aXouanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3Njcm9sbGVyLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nZW5lcmF0b3IvaW5pdFNjcm9sbGVyLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nZW5lcmF0b3IvUmVuZGVyU3RydWN0dXJlLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9hcHAuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvZGF0YS9nb29nbGVfY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBJbnRyb1NlY3Rpb24ocHJvcHMpe1xyXG4gICAgXHJcbiAgICBsZXQgYXV0aG9yc0xpbmUgPSBBcnJheS5mcm9tKFN0cmluZyhwcm9wcy5vcHRpb25EYXRhLmF1dGhvcnMpLnNwbGl0KCcsJykpLm1hcCgobmFtZSxpKSA9PiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGN1ckxlbiA9IEFycmF5LmZyb20oU3RyaW5nKHByb3BzLm9wdGlvbkRhdGEuYXV0aG9ycykuc3BsaXQoJywnKSkubGVuZ3RoO1xyXG4gICAgICAgIGlmKGN1ckxlbiA+IDIpe1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgaSA9PT0gKGN1ckxlbi0yKSA/XHJcbiAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4ga2V5PXtpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17YCR7U3RyaW5nKHByb3BzLm9wdGlvbkRhdGEudXJscykuc3BsaXQoJywnKVtpXX1gfT57bmFtZX08L2E+Jm5ic3A7ZXQmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICApICAgIFxyXG4gICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgIGkgPT09IChjdXJMZW4gLSAxKSA/IFxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGtleT17aX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2Ake1N0cmluZyhwcm9wcy5vcHRpb25EYXRhLnVybHMpLnNwbGl0KCcsJylbaV19YH0+e25hbWV9PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4ga2V5PXtpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17YCR7U3RyaW5nKHByb3BzLm9wdGlvbkRhdGEudXJscykuc3BsaXQoJywnKVtpXX1gfT57bmFtZX08L2E+LCZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgaSA9PT0gMCA/XHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIDxzcGFuIGtleT17aX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17YCR7U3RyaW5nKHByb3BzLm9wdGlvbkRhdGEudXJscykuc3BsaXQoJywnKVtpXX1gfT57bmFtZX08L2E+Jm5ic3A7ZXQmbmJzcDtcclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgKSAgICBcclxuXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgPHNwYW4ga2V5PXtpfT5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9e2Ake1N0cmluZyhwcm9wcy5vcHRpb25EYXRhLnVybHMpLnNwbGl0KCcsJylbaV19YH0+e25hbWV9PC9hPlxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG4gICAgfSk7XHJcbiAgICBsZXQgaW50cm9TZWN0aW9uT2JqID0gKFxyXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT17YGludHJvLXNlY3Rpb24gJHtwcm9wcy5jbGFzc2VzfWB9PlxyXG4gICAgICAgICAgICA8aDE+e3Byb3BzLm9wdGlvbkRhdGEudGl0bGV9PC9oMT5cclxuICAgICAgICAgICAgPGFkZHJlc3M+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF1dGhvcnNcIj5QYXIge2F1dGhvcnNMaW5lfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRhdGVcIj57cHJvcHMub3B0aW9uRGF0YS5kYXRlfTwvZGl2PlxyXG4gICAgICAgICAgICA8L2FkZHJlc3M+XHJcbiAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAge3Byb3BzLmFtb3JjZX1cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgIDwvc2VjdGlvbj5cclxuICAgICk7XHJcbiAgICBsZXQgY29udGFpbmVkT2JqID0gcHJvcHMuYmFja2dyb3VuZCA/XHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBgJHtwcm9wcy5iYWNrZ3JvdW5kfWB9fSBjbGFzc05hbWU9e1wic2VjdGlvbkNvbnRhaW5lclwifT5cclxuICAgICAgICAgICAgICAgIHtpbnRyb1NlY3Rpb25PYmp9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIClcclxuICAgICAgICA6XHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICBpbnRyb1NlY3Rpb25PYmpcclxuICAgICAgICApXHJcbiAgICBcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgY29udGFpbmVkT2JqXHJcbiAgICApXHJcbn0iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBUZXh0U2VjdGlvbihwcm9wcyl7XHJcblxyXG4gICAgbGV0IGlzUXVvdGUgPSBTdHJpbmcocHJvcHMuY2xhc3NlcykuaW5jbHVkZXMoJ2NpdGF0aW9uJyk7XHJcbiAgICBsZXQgcXVvdGVPYmo7XHJcbiAgICBpZihpc1F1b3RlKXtcclxuICAgICAgICBxdW90ZU9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDpTdHJpbmcocHJvcHMudGV4dHMpLnNwbGl0KCcvJylbMF0sXHJcbiAgICAgICAgICAgIGF1dGhvcjpTdHJpbmcocHJvcHMudGV4dHMpLnNwbGl0KCcvJylbMV1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0JpZ051bWJlciA9IFN0cmluZyhwcm9wcy5jbGFzc2VzKS5pbmNsdWRlcygnYmlnTnVtYmVyJyk7XHJcbiAgICBsZXQgYmlnTnVtYmVyT2JqO1xyXG4gICAgaWYoaXNCaWdOdW1iZXIpe1xyXG4gICAgICAgIGJpZ051bWJlck9iaiA9IHtcclxuICAgICAgICAgICAgbnVtYmVyOlN0cmluZyhwcm9wcy50ZXh0cykuc3BsaXQoJy8nKVswXSxcclxuICAgICAgICAgICAgdW5kZXJUZXh0OlN0cmluZyhwcm9wcy50ZXh0cykuc3BsaXQoJy8nKVsxXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlzVmlzdWFsID0gcHJvcHMudmlzdWFsO1xyXG4gICAgbGV0IHZpc3VhbE9iaiA9IChcclxuICAgICAgICAoaXNWaXN1YWwgIT09IFwiXCIpID8gXHJcbiAgICAgICAgICAgIHByb3BzLnZpc3VhbCA9PT0gXCJQaG90b1wiID8gXHJcbiAgICAgICAgICAgICAgICA8aW1nIFxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17YHBob3RvVGV4dFNlY3Rpb25fJHtwcm9wcy5pZH1gfVxyXG4gICAgICAgICAgICAgICAgICAgIGlkPXtgcGhvdG9UZXh0U2VjdGlvbl8ke3Byb3BzLmlkfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjPXtgYXNzZXRzL2ltZy82NzUvJHtwcm9wcy5maWxlbmFtZX1gfVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtc3Jjc2V0PXtgYXNzZXRzL2ltZy8yMDQ4LyR7cHJvcHMuZmlsZW5hbWV9IDIwNDh3LCBhc3NldHMvaW1nLzk5MC8ke3Byb3BzLmZpbGVuYW1lfSA5OTB3LCBhc3NldHMvaW1nLzY3NS8ke3Byb3BzLmZpbGVuYW1lfSA2NzV3LCBhc3NldHMvaW1nLzEzNTAvJHtwcm9wcy5maWxlbmFtZX0gMTM1MHcsIGFzc2V0cy9pbWcvMTAwLyR7cHJvcHMuZmlsZW5hbWV9IDEwMHcsIGFzc2V0cy9pbWcvNDk1LyR7cHJvcHMuZmlsZW5hbWV9IDQ5NXcsIGFzc2V0cy9pbWcvMTAyNC8ke3Byb3BzLmZpbGVuYW1lfSAxMDI0d2B9XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS1zaXplcz1cIihtYXgtd2lkdGg6IDEwMHB4KSAxMDBweCwgKG1heC13aWR0aDogNDk1cHgpIDQ5NXB4LCAobWF4LXdpZHRoOiA2NzVweCkgNjc1cHgsIChtYXgtd2lkdGg6IDk5MHB4KSA5OTBweCwgKG1heC13aWR0aDogIDEwMjRweCkgMTAyNHB4LCAobWF4LXdpZHRoOiAgMTM1MHB4KSAxMzUwcHgsIChtYXgtd2lkdGg6ICAyMDQ4cHgpIDIwNDhweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbGF6eSAke3Byb3BzLnZpc3VlbGNsYXNzZXN9YH1cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206ICcxcmVtJ319XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA6XHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIHByb3BzLnZpc3VhbCA9PT0gXCJWaWRlb1wiID8gXHJcbiAgICAgICAgICAgICAgICA8dmlkZW8gYXV0b1BsYXkgbG9vcCBtdXRlZCBwbGF5c0lubGluZSBjbGFzc05hbWU9e2B2aWRlbyAke3Byb3BzLnZpc3VlbGNsYXNzZXN9YH0gcHJlbG9hZD1cIm1ldGFkYXRhXCIga2V5PXtgdmlkZW9UZXh0U2VjdGlvbl8ke3Byb3BzLmlkfWB9IGlkPXtgdmlkZW9UZXh0U2VjdGlvbl8ke3Byb3BzLmlkfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzb3VyY2Ugc3JjPXtgYXNzZXRzL3ZpZGVvcy8ke3Byb3BzLmZpbGVuYW1lfWB9Lz5cclxuICAgICAgICAgICAgICAgICAgICBWaWTDqW8gbm9uIHN1cHBvcnTDqWUuIFLDqS1lc3NheWV6IHN1ciB1biBhdXRyZSBhcHBhcmVpbCBvdSBmdXJldGV1ci5cclxuICAgICAgICAgICAgICAgIDwvdmlkZW8+XHJcbiAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIDpcclxuICAgICAgICA8ZGl2PjwvZGl2PlxyXG4gICAgKVxyXG5cclxuICAgIGxldCB0ZXh0U2VjdGlvbk9iaiA9IChcclxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9e2B0ZXh0LXNlY3Rpb24gJHtwcm9wcy5jbGFzc2VzfWB9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaXNRdW90ZSA/IFxyXG4gICAgICAgICAgICA8YmxvY2txdW90ZSBjbGFzc05hbWU9XCJzbWFsbFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAgICAgIDxiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtwYXJzZShxdW90ZU9iai50ZXh0KX1cclxuICAgICAgICAgICAgICAgICAgICA8L2I+XHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJhdXRob3JcIj5cclxuICAgICAgICAgICAgICAgICAgICB7cXVvdGVPYmouYXV0aG9yfVxyXG4gICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzeW1ib2xcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Jsb2NrcXVvdGU+XHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgaXNCaWdOdW1iZXIgP1xyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyLW51bWJlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm51bWJlcnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMj57YmlnTnVtYmVyT2JqLm51bWJlcn08L2gyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNtYWxsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtiaWdOdW1iZXJPYmoudW5kZXJUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zbWFsbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWaXN1YWwgPyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXN1YWxPYmpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyhwcm9wcy50ZXh0cykuc3RhcnRzV2l0aCgnPCcpID8gIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2UocHJvcHMudGV4dHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57cGFyc2UocHJvcHMudGV4dHMpfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICApO1xyXG4gICAgbGV0IGNvbnRhaW5lZE9iaiA9IHByb3BzLmJhY2tncm91bmQgPyBcclxuICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBgJHtwcm9wcy5iYWNrZ3JvdW5kfWB9fSBjbGFzc05hbWU9e1wic2VjdGlvbkNvbnRhaW5lclwifT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RleHRTZWN0aW9uT2JqfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRTZWN0aW9uT2JqXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICBjb250YWluZWRPYmpcclxuICAgIClcclxufSIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERXQ2hhcnQoeyB0aXRsZSwgc3JjLCAuLi5wcm9wcyB9KSB7XHJcbiAgY29uc3QgaWZyYW1lUmVmID0gdXNlUmVmKClcclxuICBjb25zdCBbaGVpZ2h0LCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSg1MDApXHJcblxyXG4gIGNvbnN0IG9uTWVzc2FnZSA9IHVzZUNhbGxiYWNrKFxyXG4gICAgKHsgZGF0YSA9IHt9LCBzb3VyY2UgfSkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgc291cmNlICE9PSBpZnJhbWVSZWYuY3VycmVudC5jb250ZW50V2luZG93IHx8XHJcbiAgICAgICAgdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgIWRhdGFbJ2RhdGF3cmFwcGVyLWhlaWdodCddXHJcbiAgICAgIClcclxuICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgIC8vc2V0U3RhdGUoT2JqZWN0LnZhbHVlcyhkYXRhWydkYXRhd3JhcHBlci1oZWlnaHQnXSlbMF0pXHJcbiAgICB9LFxyXG4gICAgW3NldFN0YXRlLCBpZnJhbWVSZWZdXHJcbiAgKVxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpXHJcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpXHJcbiAgfSwgW2hlaWdodCwgc2V0U3RhdGUsIG9uTWVzc2FnZV0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8aWZyYW1lXHJcbiAgICAgIHJlZj17aWZyYW1lUmVmfVxyXG4gICAgICBzY3JvbGxpbmc9XCJub1wiXHJcbiAgICAgIGZyYW1lQm9yZGVyPVwiMFwiXHJcbiAgICAgIHdpZHRoPVwiMTAwJVwiXHJcbiAgICAgIHsuLi5wcm9wc31cclxuICAgICAgdGl0bGU9e3RpdGxlfVxyXG4gICAgICBzcmM9e3NyY31cclxuICAgICAgaGVpZ2h0PXtoZWlnaHR9XHJcbiAgICAvPlxyXG4gIClcclxufVxyXG5cclxuRFdDaGFydC5wcm9wVHlwZXMgPSB7XHJcbiAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICBzcmM6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICBsb2FkaW5nOiBQcm9wVHlwZXMub25lT2YoWydlYWdlcicsICdsYXp5J10pLFxyXG59IiwiZXhwb3J0IGNvbnN0IGNvbnRlbnRIZWFkZXJDb25zdGFudHMgPSB7XG4gICAgc2VjdGlvbjogXCJTZWN0aW9uXCIsXG4gICAgc2VjdGlvbklEOiBcIlNlY3Rpb25JRFwiLFxuICAgIGF0dHJpYnV0czogXCJBdHRyaWJ1dHNcIixcbiAgICBzb3Vzc2VjdGlvbjogXCJTdGVwXCIsXG4gICAgdGV4dGU6IFwiVEVYVEVcIixcbiAgICB2aXN1ZWw6IFwiVklTVUVMXCIsXG4gICAgbm9tZmljaGllcnNvdXJjZTogXCJOb21GaWNoaWVyU291cmNlXCIsXG4gICAgc3R5bGVmb25kOiBcIlN0eWxlRm9uZFwiLFxuICAgIHN0ZXBjbGFzc2VzOiBcIlN0ZXBDbGFzc2VzXCIsXG4gICAgdmlzdWVsY2xhc3NlczogXCJWaXN1ZWxDbGFzc2VzXCIsXG4gICAgbm90ZXM6IFwiTm90ZXNcIixcbiAgICBnYW1laWQ6IFwiR2FtZUlEXCJcbn07XG5cbmV4cG9ydCBjb25zdCBvcHRpb25zRHJvcGRvd25Db25zdGFudHMgPSB7XG4gICAgc2VjdGlvbnR5cGVzOiB7XG4gICAgICAgIGludHJvdGl0cmU6IFwiaW50cm8tdGl0cmVcIixcbiAgICAgICAgcGxlaW5lcGFnZXRpdHJlOiBcInBsZWluZS1wYWdlLXRpdHJlXCIsXG4gICAgICAgIHRleHRlY2xhc3NpcXVlOiBcInRleHRlLWNsYXNzaXF1ZVwiLFxuICAgICAgICB2aXpzZWN0aW9uOiBcInZpei1zZWN0aW9uXCJcbiAgICB9LFxuICAgIHNlY3Rpb25hdHRyaWJ1dGVzOntcbiAgICAgICAgcGxlaW5lcGFnZTogXCJwbGVpbmUtcGFnZVwiLFxuICAgICAgICBmb25kbm9pcjogXCJmb25kLW5vaXJcIixcbiAgICAgICAgY2VudHJlOiBcImNlbnRyw6lcIixcbiAgICAgICAgY290ZWNvdGU6IFwiY8O0dMOpLWPDtHTDqVwiXG4gICAgfSxcbiAgICB2aXN1ZWx0eXBlczp7XG4gICAgICAgIHBob3RvOiBcIlBob3RvXCIsXG4gICAgICAgIHZpZGVvOiBcIlZpZGVvXCIsXG4gICAgICAgIGF1ZGlvOiBcIkF1ZGlvXCIsXG4gICAgICAgIHZpc3VhbGlzYXRpb246IFwiVmlzdWFsaXNhdGlvblwiLFxuICAgICAgICBpZnJhbWU6IFwiaWZyYW1lXCJcbiAgICB9LFxuICAgIHNvdXNzZWN0aW9udHlwZXM6e1xuICAgICAgICBzY3JvbGxub3JtYWw6IFwic2Nyb2xsLW5vcm1hbFwiLFxuICAgICAgICBzY3JvbGxpbnZpc2libGU6IFwic2Nyb2xsLWludmlzaWJsZVwiLFxuICAgICAgICBzY3JvbGxsb25nOiBcInNjcm9sbC1sb25nXCJcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cyA9IHtcbiAgICB0aXRyZTogXCJUaXRyZVwiLFxuICAgIGF1dGV1cnM6IFwiQXV0ZXVyc1wiLFxuICAgIGRhdGU6IFwiRGF0ZVwiLFxuICAgIGRhdGU6IFwiRGF0ZVwiLFxuICAgIHVybHM6IFwiTGllbkF1dGV1cnNcIixcbiAgICBsaWVuZmljaGllcnNvdXJjZTogXCJMaWVuRmljaGllclNvdXJjZVwiXG59O1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgcGFyc2UgZnJvbSBcImh0bWwtcmVhY3QtcGFyc2VyXCI7XG5pbXBvcnQgRFdDaGFydCBmcm9tIFwiLi9EV0NoYXJ0XCI7XG5pbXBvcnQgeyBvcHRpb25zRHJvcGRvd25Db25zdGFudHMgfSBmcm9tIFwiLi4vZ2VuZXJhdG9yL2NvbnN0YW50c1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gVml6U2VjdGlvbihwcm9wcyl7XG5cbiAgICBsZXQgdml6U2VjdGlvbk9iaiA9IChcbiAgICAgICAgPHNlY3Rpb24gaWQ9e3Byb3BzLmxpc3RJRH0gY2xhc3NOYW1lPXtwcm9wcy5jbGFzc2VkfT5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BzdGVwcyAke2dldFN0ZXBDb21tb25DbGFzcyhwcm9wcy5zdGVwcyl9YH0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzLnN0ZXBzLm1hcCgoc3RlcCxpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc3RlcCBpcyAnLCBzdGVwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc1F1b3RlID0gU3RyaW5nKHN0ZXAuc3RlcGNsYXNzZXMpLmluY2x1ZGVzKCdjaXRhdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHF1b3RlT2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNRdW90ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVPYmogPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6U3RyaW5nKHN0ZXAudGV4dCkuc3BsaXQoJy8nKVswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yOlN0cmluZyhzdGVwLnRleHQpLnNwbGl0KCcvJylbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBrZXk9e2luZGV4fSBjbGFzc05hbWU9e3N0ZXAuc3RlcGNsYXNzZXN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1F1b3RlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxibG9ja3F1b3RlIGNsYXNzTmFtZT1cInNtYWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwYXJzZShxdW90ZU9iai50ZXh0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9iPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJhdXRob3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3F1b3RlT2JqLmF1dGhvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzeW1ib2xcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYmxvY2txdW90ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyhzdGVwLnRleHQpLnN0YXJ0c1dpdGgoJzwnKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2Uoc3RlcC50ZXh0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3N0ZXAudGV4dCA/IHBhcnNlKHN0ZXAudGV4dCkgOiBcIlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidml6XCIgaWQ9XCJ2aXpcIj5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzLnN0ZXBzLm1hcCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0ZXAudmlzdWFsID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMudmlzdWVsdHlwZXMucGhvdG8pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e2Bhc3NldHMvaW1nLzY3NS8ke3N0ZXAuZmlsZW5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtc3Jjc2V0PXtgYXNzZXRzL2ltZy8yMDQ4LyR7c3RlcC5maWxlbmFtZX0gMjA0OHcsIGFzc2V0cy9pbWcvOTkwLyR7c3RlcC5maWxlbmFtZX0gOTkwdywgYXNzZXRzL2ltZy82NzUvJHtzdGVwLmZpbGVuYW1lfSA2NzV3LCBhc3NldHMvaW1nLzEzNTAvJHtzdGVwLmZpbGVuYW1lfSAxMzUwdywgYXNzZXRzL2ltZy8xMDAvJHtzdGVwLmZpbGVuYW1lfSAxMDB3LCBhc3NldHMvaW1nLzQ5NS8ke3N0ZXAuZmlsZW5hbWV9IDQ5NXcsIGFzc2V0cy9pbWcvMTAyNC8ke3N0ZXAuZmlsZW5hbWV9IDEwMjR3YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtc2l6ZXM9XCIobWF4LXdpZHRoOiAxMDBweCkgMTAwcHgsIChtYXgtd2lkdGg6IDQ5NXB4KSA0OTVweCwgKG1heC13aWR0aDogNjc1cHgpIDY3NXB4LCAobWF4LXdpZHRoOiA5OTBweCkgOTkwcHgsIChtYXgtd2lkdGg6ICAxMDI0cHgpIDEwMjRweCwgKG1heC13aWR0aDogIDEzNTBweCkgMTM1MHB4LCAobWF4LXdpZHRoOiAgMjA0OHB4KSAyMDQ4cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbGF6eSAke3N0ZXAudmlzdWVsY2xhc3Nlc31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoc3RlcC52aXN1YWwgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy52aXN1ZWx0eXBlcy52aWRlbyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHZpZGVvIGF1dG9QbGF5IGxvb3AgbXV0ZWQgcGxheXNJbmxpbmUgY2xhc3NOYW1lPXtgdmlkZW8gJHtzdGVwLnZpc3VlbGNsYXNzZXN9YH0gcHJlbG9hZD1cIm1ldGFkYXRhXCIga2V5PXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH0gaWQ9e2Ake3Byb3BzLmxpc3RJRH1fJHtpbmRleH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzb3VyY2Ugc3JjPXtgYXNzZXRzL3ZpZGVvcy8ke3N0ZXAuZmlsZW5hbWV9YH0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlkw6lvIG5vbiBzdXBwb3J0w6llLiBSw6ktZXNzYXlleiBzdXIgdW4gYXV0cmUgYXBwYXJlaWwgb3UgZnVyZXRldXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdmlkZW8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHN0ZXAudmlzdWFsID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMudmlzdWVsdHlwZXMuaWZyYW1lKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9IGlkPXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH0gY2xhc3NOYW1lPVwiaWZyYW1lQ29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RFdDaGFydCB0aXRsZT1cIk1lc3VyZXMgZCdhcnNlbmljXCIgc3JjPXtgJHtzdGVwLmZpbGVuYW1lfWB9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihzdGVwLnZpc3VhbCA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnZpc3VlbHR5cGVzLnZpc3VhbGlzYXRpb24pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH0gaWQ9e2Ake3Byb3BzLmxpc3RJRH1fJHtpbmRleH1gfSBjbGFzc05hbWU9e2BpZnJhbWVDb250YWluZXIgJHtzdGVwLnZpc3VlbGNsYXNzZXN9YH0+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICApO1xuICAgIGxldCBjb250YWluZWRPYmogPSBwcm9wcy5iYWNrZ3JvdW5kID9cbiAgICAgICAgKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogYCR7cHJvcHMuYmFja2dyb3VuZH1gfX0gY2xhc3NOYW1lPXtcInNlY3Rpb25Db250YWluZXJcIn0+XG4gICAgICAgICAgICAgICAge3ZpelNlY3Rpb25PYmp9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgICAgICA6XG4gICAgICAgIChcbiAgICAgICAgICAgIHZpelNlY3Rpb25PYmpcbiAgICAgICAgKVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgY29udGFpbmVkT2JqXG4gICAgKVxufVxuXG5mdW5jdGlvbiBnZXRTdGVwQ29tbW9uQ2xhc3Moc3RlcHMpe1xuICAgIGxldCBjdXJTdGVwQ2xhc3NlcyA9IHN0ZXBzLm1hcCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHN0ZXAuc3RlcGNsYXNzZXM7XG4gICAgfSk7XG4gICAgbGV0IGN1ckNvbW1vbkNsYXNzID0gbmV3IEFycmF5KGN1clN0ZXBDbGFzc2VzLmxlbmd0aCk7XG4gICAgY3VyU3RlcENsYXNzZXMuZm9yRWFjaCgoc3RlcEVsZW0sIGlkeCkgPT4ge1xuICAgICAgICBpZihBcnJheS5pc0FycmF5KHN0ZXBFbGVtKSl7XG4gICAgICAgICAgICBzdGVwRWxlbS5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgICAgIGZvciggbGV0IGkgPSBpZHg7IGkgPCBjdXJTdGVwQ2xhc3Nlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGN1clN0ZXBDbGFzc2VzW2ldLmluY2x1ZGVzKGVsZW0pKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvbW1vbkNsYXNzW2ldID0gKGVsZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Yoc3RlcEVsZW0pID09PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgIGZvciggbGV0IGkgPSBpZHg7IGkgPCBjdXJTdGVwQ2xhc3Nlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoY3VyU3RlcENsYXNzZXNbaV0uaW5jbHVkZXMoc3RlcEVsZW0pKXtcbiAgICAgICAgICAgICAgICAgICAgY3VyQ29tbW9uQ2xhc3NbaV0gPSAoc3RlcEVsZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjdXJDb21tb25DbGFzcy5yZWR1Y2UoZnVuY3Rpb24oYSwgYil7IHJldHVybiAoYSA9PT0gYiAmJiBhICE9PSBcIlwiICYmIGIgIT09IFwiXCIpID8gYSA6IFwiXCI7IH0pO1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEZ1bGxQYWdlU2VjdGlvbihwcm9wcyl7XHJcblxyXG4gICAgbGV0IGZ1bGxwYWdlU2VjdGlvbk9iaiA9IChcclxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9e2BmdWxsLXBhZ2Utc2VjdGlvbiAke3Byb3BzLmNsYXNzZXN9YH0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGl0bGVJbWFnZVwiPlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLmZpbGVuYW1lID8gXHJcbiAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy52aXN1YWwgPT09IFwiUGhvdG9cIiA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtwcm9wcy5pZH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgJHtwcm9wcy5pZH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17YGFzc2V0cy9pbWcvNjc1LyR7cHJvcHMuZmlsZW5hbWV9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXNyY3NldD17YGFzc2V0cy9pbWcvMjA0OC8ke3Byb3BzLmZpbGVuYW1lfSAyMDQ4dywgYXNzZXRzL2ltZy85OTAvJHtwcm9wcy5maWxlbmFtZX0gOTkwdywgYXNzZXRzL2ltZy82NzUvJHtwcm9wcy5maWxlbmFtZX0gNjc1dywgYXNzZXRzL2ltZy8xMzUwLyR7cHJvcHMuZmlsZW5hbWV9IDEzNTB3LCBhc3NldHMvaW1nLzEwMC8ke3Byb3BzLmZpbGVuYW1lfSAxMDB3LCBhc3NldHMvaW1nLzQ5NS8ke3Byb3BzLmZpbGVuYW1lfSA0OTV3LCBhc3NldHMvaW1nLzEwMjQvJHtwcm9wcy5maWxlbmFtZX0gMTAyNHdgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtc2l6ZXM9XCIobWF4LXdpZHRoOiAxMDBweCkgMTAwcHgsIChtYXgtd2lkdGg6IDQ5NXB4KSA0OTVweCwgKG1heC13aWR0aDogNjc1cHgpIDY3NXB4LCAobWF4LXdpZHRoOiA5OTBweCkgOTkwcHgsIChtYXgtd2lkdGg6ICAxMDI0cHgpIDEwMjRweCwgKG1heC13aWR0aDogIDEzNTBweCkgMTM1MHB4LCAobWF4LXdpZHRoOiAgMjA0OHB4KSAyMDQ4cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGxhenkgJHtwcm9wcy52aXN1ZWxjbGFzc2VzfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMudmlzdWFsID09PSBcIlZpZGVvXCIgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx2aWRlbyBhdXRvUGxheSBsb29wIG11dGVkIHBsYXlzSW5saW5lIGNsYXNzTmFtZT17YHZpZGVvICR7cHJvcHMudmlzdWVsY2xhc3Nlc31gfSBwcmVsb2FkPVwibWV0YWRhdGFcIiBrZXk9e2Ake3Byb3BzLmlkfWB9IGlkPXtgJHtwcm9wcy5pZH1gfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNvdXJjZSBzcmM9e2Bhc3NldHMvdmlkZW9zLyR7cHJvcHMuZmlsZW5hbWV9YH0vPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWTDqW8gbm9uIHN1cHBvcnTDqWUuIFLDqS1lc3NheWV6IHN1ciB1biBhdXRyZSBhcHBhcmVpbCBvdSBmdXJldGV1ci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3ZpZGVvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxkaXY+PC9kaXY+KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAoPGRpdj48L2Rpdj4pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuZmlsZW5hbWUgPyBcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbHRlclwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FwdGlvbmhvbGRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT17YGNhcHRpb24gJHtwcm9wcy5tYWluVGl0bGUuY2xhc3N9YH0+e3Byb3BzLm1haW5UaXRsZS50ZXh0fTwvaDI+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuc3ViVGl0bGUgPyBcclxuICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9e2BjYXB0aW9uICR7cHJvcHMuc3ViVGl0bGUuY2xhc3N9YH0+e3Byb3BzLnN1YlRpdGxlLnRleHR9PC9oMz5cclxuICAgICAgICAgICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgKTtcclxuICAgIGxldCBjb250YWluZWRPYmogPSBwcm9wcy5iYWNrZ3JvdW5kID8gXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBgJHtwcm9wcy5iYWNrZ3JvdW5kfWB9fSBjbGFzc05hbWU9e1wic2VjdGlvbkNvbnRhaW5lclwifT5cclxuICAgICAgICAgICAgICAgIHtmdWxscGFnZVNlY3Rpb25PYmp9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIClcclxuICAgICAgICA6XHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICBmdWxscGFnZVNlY3Rpb25PYmpcclxuICAgICAgICApXHJcblxyXG4gICAgcmV0dXJuIGNvbnRhaW5lZE9iajtcclxuXHJcbn0iLCJcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IHsgY29udGVudEhlYWRlckNvbnN0YW50cywgb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLCBwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJ1Y3R1cmUoY29udGVudERhdGEsIHBhcmFtc0RhdGEpe1xuXG4gICAgbGV0IHN0cnVjdHVyZURhdGEgPSB7fTsgLy8gV2hvbGUgc2Nyb2xseSBzdHJ1Y3R1cmVcbiAgICBsZXQgdml6U2VjdGlvbklEcyA9IFtdOyAvLyBMaXN0IG9mIHNlY3Rpb25JRHNcblxuICAgIGxldCBvcHRpb25zID0gZ2V0T3B0aW9ucyhwYXJhbXNEYXRhKTtcblxuICAgIGNvbnNvbGUubG9nKCdjb250ZW50IERhdGEnLCBjb250ZW50RGF0YSk7XG4gICAgY29udGVudERhdGEubWFwKChyb3dEYXRhLGluZGV4KSA9PiB7XG5cbiAgICAgICAgaWYocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25dID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLmludHJvdGl0cmUpe1xuICAgICAgICAgICAgbGV0IGNsYXNzZXMgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3RlcGNsYXNzZXNdO1xuICAgICAgICAgICAgbGV0IGN1ckFtb3JjZSA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV07XG4gICAgICAgICAgICBsZXQgc2VjdGlvbkJhY2tncm91bmQgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXTtcbiAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0ge1xuICAgICAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICAgICAgc2VjdGlvblR5cGU6IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMuaW50cm90aXRyZSxcbiAgICAgICAgICAgICAgICBvcHRpb25EYXRhOiBvcHRpb25zLFxuICAgICAgICAgICAgICAgIGFtb3JjZTogY3VyQW1vcmNlLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHNlY3Rpb25CYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgIGNsYXNzZXM6IHBhcnNlQ2xhc3NlcyhjbGFzc2VzKSxcbiAgICAgICAgICAgICAgICBnYW1laWQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5nYW1laWRdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25dID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnRleHRlY2xhc3NpcXVlKXtcbiAgICAgICAgICAgIGxldCB0ZXh0cyA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV07XG4gICAgICAgICAgICBsZXQgY2xhc3NlcyA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc107XG4gICAgICAgICAgICBsZXQgc2VjdGlvbkJhY2tncm91bmQgPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXTtcbiAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0ge1xuICAgICAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICAgICAgc2VjdGlvblR5cGU6IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudGV4dGVjbGFzc2lxdWUsXG4gICAgICAgICAgICAgICAgdGV4dHM6IHRleHRzLFxuICAgICAgICAgICAgICAgIHZpc3VhbDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbF0sXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5ub21maWNoaWVyc291cmNlXSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBzZWN0aW9uQmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiBwYXJzZUNsYXNzZXMoY2xhc3NlcyksXG4gICAgICAgICAgICAgICAgdmlzdWVsY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxjbGFzc2VzXSksXG4gICAgICAgICAgICAgICAgZ2FtZWlkOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuZ2FtZWlkXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uXSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5wbGVpbmVwYWdldGl0cmUpe1xuICAgICAgICAgICAgbGV0IHRpdGxlT2JqID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXTtcbiAgICAgICAgICAgIGlmIChpc0pzb24ocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXSkpe1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0T2JqID0gSlNPTi5wYXJzZShyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdKTtcbiAgICAgICAgICAgICAgICB0aXRsZU9iaiA9IHRleHRPYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJ1Y3R1cmVEYXRhW3Jvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdXSA9IHtcbiAgICAgICAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgICAgICAgIHNlY3Rpb25UeXBlOiBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnBsZWluZXBhZ2V0aXRyZSxcbiAgICAgICAgICAgICAgICB0ZXh0czogaXNKc29uKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV0pID8gdGl0bGVPYmpcbiAgICAgICAgICAgICAgICA6e1xuICAgICAgICAgICAgICAgICAgICBtYWluVGl0bGU6e2NsYXNzOiBcIlwiLCB0ZXh0OiB0aXRsZU9ian0sXG4gICAgICAgICAgICAgICAgICAgIHN1YlRpdGxlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2aXN1YWw6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxdLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMubm9tZmljaGllcnNvdXJjZV0sXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0eWxlZm9uZF0sXG4gICAgICAgICAgICAgICAgY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIHZpc3VlbGNsYXNzZXM6IHBhcnNlQ2xhc3Nlcyhyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIGdhbWVpZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmdhbWVpZF1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbl0gPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudml6c2VjdGlvbil7XG5cbiAgICAgICAgICAgIGxldCBjdXJEYXRhID0ge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0czogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmF0dHJpYnV0c10sXG4gICAgICAgICAgICAgICAgc2Nyb2xsVHlwZTogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNvdXNzZWN0aW9uXSxcbiAgICAgICAgICAgICAgICB0ZXh0OiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdLFxuICAgICAgICAgICAgICAgIHZpc3VhbDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbF0sXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5ub21maWNoaWVyc291cmNlXSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXSxcbiAgICAgICAgICAgICAgICB2aXN1ZWxjbGFzc2VzOiBwYXJzZUNsYXNzZXMocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbGNsYXNzZXNdKSxcbiAgICAgICAgICAgICAgICBzdGVwY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIGdhbWVpZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmdhbWVpZF1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZihzdHJ1Y3R1cmVEYXRhLmhhc093blByb3BlcnR5KHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdKSl7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHN0ZXAgdG8gZXhpc3RpbmdcbiAgICAgICAgICAgICAgICBsZXQgY3VyVml6U2VjdGlvbiA9IHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dO1xuICAgICAgICAgICAgICAgIGN1clZpelNlY3Rpb24ucHVzaChjdXJEYXRhKTtcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVEYXRhW3Jvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdXSA9IGN1clZpelNlY3Rpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0gW2N1ckRhdGFdO1xuICAgICAgICAgICAgICAgIHZpelNlY3Rpb25JRHMucHVzaChyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2aXpTZWN0aW9uSURzLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgIGxldCBjdXJTZWN0aW9uID0gc3RydWN0dXJlRGF0YVtrZXldO1xuICAgICAgICBsZXQgc2VjdGlvbkF0dHIgPSBjdXJTZWN0aW9uWzBdLmF0dHJpYnV0cyA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb25hdHRyaWJ1dGVzLmNlbnRyZSA/IFwiIGZ1bGwtcGFnZVwiIDogXCJcIjtcbiAgICAgICAgbGV0IHNlY3Rpb25CYWNrZ3JvdW5kID0gY3VyU2VjdGlvblswXS5iYWNrZ3JvdW5kO1xuICAgICAgICBzdHJ1Y3R1cmVEYXRhW2tleV0gPSB7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIHNlY3Rpb25UeXBlOiBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnZpenNlY3Rpb24sXG4gICAgICAgICAgICBsaXN0SUQ6IGtleSxcbiAgICAgICAgICAgIHN0ZXBzOiBjdXJTZWN0aW9uLFxuICAgICAgICAgICAgY2xhc3NlZDogYHZpei1zZWN0aW9uJHtzZWN0aW9uQXR0cn1gLFxuICAgICAgICAgICAgbWVkaWFJbmZvOiAwLFxuICAgICAgICAgICAgYmFja2dyb3VuZDogc2VjdGlvbkJhY2tncm91bmRcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHN0cnVjdHVyZURhdGEpO1xufVxuXG4vKipcbiAqIFRha2UgYXJ0aWNsZSBzdHJ1Y3R1cmUgYXMgQ1NWIGFuZCB0cmFuc2Zvcm0gaXQgYXMgY2FsbGJhY2tBcnJheVxuICogQHBhcmFtICB7T2JqZWN0fSBjb250ZW50RGF0YSBhcnRpY2xlIHN0cnVjdHVyZVxuICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zIGFydGljbGUgb3B0aW9uc1xuICogQHJldHVybiB7QXJyYXl9IFNjcm9sbGVyIGNhbGxiYWNrIGFycmF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUNhbGxiYWNrcyhjb250ZW50RGF0YSwgcGFyYW1zRGF0YSl7XG5cbiAgICBsZXQgZnVsbFN0cnVjdHVyZSA9IGdldFN0cnVjdHVyZShjb250ZW50RGF0YSwgcGFyYW1zRGF0YSk7XG4gICAgbGV0IGNhbGxiYWNrc0FycmF5ID0gW107XG4gICAgZnVsbFN0cnVjdHVyZS5tYXAoY2FsbGJhY2sgPT4ge1xuICAgICAgICBpZihjYWxsYmFjay5zZWN0aW9uVHlwZSA9PT0gXCJ2aXotc2VjdGlvblwiKXtcbiAgICAgICAgICAgIGxldCBjdXJTdGVwcyA9IFtdO1xuICAgICAgICAgICAgY2FsbGJhY2suc3RlcHMubWFwKChzdGVwLGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGN1ckNvbW1hbmQgPSAoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcikgPyAoKCk9Pnt9KSA6IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYoc3RlcC52aXN1YWwgIT09IFwiXCIpe1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyTnVtYmVyQXJyYXkgPSBBcnJheShjYWxsYmFjay5zdGVwcy5sZW5ndGgpLmZpbGwobnVsbCkubWFwKChfLCBpKSA9PiBpKS5maWx0ZXIoZCA9PiBkICE9PSBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvcGFjaXR5U2VsZWN0b3IgPSBjdXJOdW1iZXJBcnJheS5tYXAoaW5kID0+IGAjJHtjYWxsYmFjay5rZXl9XyR7aW5kfWApLmpvaW4oJywnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChgIyR7Y2FsbGJhY2sua2V5fV8ke2luZGV4fWApLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3BhY2l0eVNlbGVjdG9yICE9PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKGAke29wYWNpdHlTZWxlY3Rvcn1gKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gYGQzLnNlbGVjdCgnIyR7Y2FsbGJhY2sua2V5fV8ke2luZGV4fScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7JHtvcGFjaXR5U2VsZWN0b3IgIT09IFwiXCIgPyBgZDMuc2VsZWN0QWxsKCcke29wYWNpdHlTZWxlY3Rvcn0nKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7YCA6IFwiXCJ9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKFN0cmluZyhzdGVwLmZpbGVuYW1lKS5zdGFydHNXaXRoKFwiVEFHSURcIikpe1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyVGFnSUQgPSBTdHJpbmcoc3RlcC5maWxlbmFtZSkuc3BsaXQoJz0nKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clRhZ0lEX2luZGV4ID0gcGFyc2VJbnQoY3VyVGFnSUQuc3BsaXQoXCJfXCIpWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ck51bWJlckFycmF5ID0gQXJyYXkoY2FsbGJhY2suc3RlcHMubGVuZ3RoKS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gaSkuZmlsdGVyKGQgPT4gZCAhPT0gY3VyVGFnSURfaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3BhY2l0eVNlbGVjdG9yID0gY3VyTnVtYmVyQXJyYXkubWFwKGluZCA9PiBgIyR7Y2FsbGJhY2sua2V5fV8ke2luZH1gKS5qb2luKCcsJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmKEVOVl9DT05GSUcuZG93bmxvYWRTdHJ1YyAmJiBFTlZfQ09ORklHLmF1dG9yZW5kZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ29tbWFuZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KGAjJHtjdXJUYWdJRH1gKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAxKS5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcGFjaXR5U2VsZWN0b3IgIT09IFwiXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKGAke29wYWNpdHlTZWxlY3Rvcn1gKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gYGQzLnNlbGVjdCgnIyR7Y3VyVGFnSUR9JykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTske29wYWNpdHlTZWxlY3RvciAhPT0gXCJcIiA/IGBkMy5zZWxlY3RBbGwoJyR7b3BhY2l0eVNlbGVjdG9yfScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDApLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtgIDogXCJcIn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgICAgICAgICAgICAgICAgY3VyU3RlcHMucHVzaChjdXJDb21tYW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY3VyU3RlcHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAoKSA9PiB7JHtjdXJDb21tYW5kfX1gXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhbGxiYWNrc0FycmF5LnB1c2goY3VyU3RlcHMpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnR09UIENBTExCQUNLUyBBUlJBWTogJywgY2FsbGJhY2tzQXJyYXkpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2tzQXJyYXk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTYXZpbmcgY2FsbGJhY2tzIHRvIGZpbGUuLi4nKTtcbiAgICAgICAgY29uc3QgdGV4dCA9IGBpbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XFxuZXhwb3J0IGNvbnN0IGNhbGxiYWNrcyA9ICR7SlNPTi5zdHJpbmdpZnkoY2FsbGJhY2tzQXJyYXksIG51bGwsIDIpfWA7XG4gICAgICAgIGxldCBibG9iID0gbmV3IEJsb2IoW3RleHQucmVwbGFjZUFsbCgnXCInLCAnJyldLCB7dHlwZTogXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLThcIn0pO1xuICAgICAgICBzYXZlQXMoYmxvYiwgXCJjYWxsYmFja3MuanNcIik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxufVxuXG5mdW5jdGlvbiBpc0pzb24oc3RyKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgSlNPTi5wYXJzZShzdHIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDbGFzc2VzKHN0cil7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oc3RyLnNwbGl0KCc7JykpLmpvaW4oJyAnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9wdGlvbnMocGFyYW1zRGF0YSl7XG5cbiAgcmV0dXJuIHtcbiAgICB0aXRsZTogcGFyYW1zRGF0YVswXVtwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzLnRpdHJlXSxcbiAgICBhdXRob3JzOiBwYXJhbXNEYXRhWzBdW3BhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMuYXV0ZXVyc10sXG4gICAgdXJsczogcGFyYW1zRGF0YVswXVtwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzLnVybHNdLFxuICAgIGRhdGU6IHBhcmFtc0RhdGFbMF1bcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cy5kYXRlXVxuICB9O1xufVxuIiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xyXG5leHBvcnQgY29uc3QgY2FsbGJhY2tzID0gW1xyXG4gIFtcclxuICAgICgpID0+IHtkMy5zZWxlY3QoJyN2aXpTZWN0aW9uMV8wJykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTtkMy5zZWxlY3RBbGwoJyN2aXpTZWN0aW9uMV8xLCN2aXpTZWN0aW9uMV8yJykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMCkuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO30sXHJcbiAgICAoKSA9PiB7ZDMuc2VsZWN0KCcjdml6U2VjdGlvbjFfMScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7ZDMuc2VsZWN0QWxsKCcjdml6U2VjdGlvbjFfMCwjdml6U2VjdGlvbjFfMicpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDApLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTt9LFxyXG4gICAgKCkgPT4ge2QzLnNlbGVjdCgnI3ZpelNlY3Rpb24xXzInKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAxKS5zdHlsZSgnZGlzcGxheScsIG51bGwpO2QzLnNlbGVjdEFsbCgnI3ZpelNlY3Rpb24xXzAsI3ZpelNlY3Rpb24xXzEnKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7fVxyXG4gIF0sXHJcbiAgW1xyXG4gICAgKCkgPT4ge2QzLnNlbGVjdCgnI3ZpelNlY3Rpb24yXzAnKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAxKS5zdHlsZSgnZGlzcGxheScsIG51bGwpO2QzLnNlbGVjdEFsbCgnI3ZpelNlY3Rpb24yXzEnKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7fSxcclxuICAgICgpID0+IHtkMy5zZWxlY3QoJyN2aXpTZWN0aW9uMl8xJykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTtkMy5zZWxlY3RBbGwoJyN2aXpTZWN0aW9uMl8wJykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMCkuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO31cclxuICBdLFxyXG4gIFtcclxuICAgICgpID0+IHtkMy5zZWxlY3QoJyN2aXpTZWN0aW9uM18wJykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTtkMy5zZWxlY3RBbGwoJyN2aXpTZWN0aW9uM18xJykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMCkuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO30sXHJcbiAgICAoKSA9PiB7fVxyXG4gIF1cclxuXSIsImV4cG9ydCBmdW5jdGlvbiBzaG91bGRCcmVhayhicikge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoIDwgYnJcclxuICB9XHJcbiAgXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIGlzWFMoKSB7XHJcbiAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aCA8IDQwMFxyXG4gICAgfVxyXG4gIFxyXG4gIGV4cG9ydCBmdW5jdGlvbiBpc1BvcnRyYWl0ICgpIHtcclxuICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLyB3aW5kb3cuaW5uZXJXaWR0aCA+IDFcclxuICB9XHJcbiAgXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIGlzU20oKSB7XHJcbiAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aCA8PSA1NzZcclxuICAgIH1cclxuICBcclxuICBleHBvcnQgZnVuY3Rpb24gaXNNZCgpIHtcclxuICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoID4gNTc2ICYmIHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2OFxyXG4gICAgfVxyXG4gIFxyXG4gIGV4cG9ydCBmdW5jdGlvbiBpc0xnKCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoID4gNzY4ICYmIHdpbmRvdy5pbm5lcldpZHRoIDw9IDk5MlxyXG4gIH1cclxuICBcclxuICBleHBvcnQgZnVuY3Rpb24gaXNYTGcoKSB7XHJcbiAgICByZXR1cm4gd2luZG93LmlubmVyV2lkdGggPiA5OTJcclxuICB9IiwiaW1wb3J0IHsgY29uc3RhbnQgfSBmcm9tIFwibG9kYXNoXCI7XHJcbmltcG9ydCBtYXBib3hnbCBmcm9tIFwibWFwYm94LWdsXCI7XHJcbmltcG9ydCAqIGFzIHNjcmVlbiBmcm9tIFwiLi9zY3JlZW4uanNcIjtcclxuXHJcbmNvbnN0IGNvbnN0YW50cyA9IHtcclxuICB0b2tlbjpcclxuICAgIFwicGsuZXlKMUlqb2liR1ZrWlhadmFYSWlMQ0poSWpvaVkycDJiVzgxZEhVMk1XVjFjVFJoY1hJemFYWnFNR1l4Y2lKOS5XcklGOG82OWFSX1RzdERGdTZReWFnXCIsXHJcbiAgbWFwQm91bmRzOiB7XHJcbiAgICBtYXg6IFstMTY1LCAzMC43MjgzMzAsIC0yNS4yMzYzNiwgODIuMjI5NDM0XSxcclxuICB9LFxyXG4gIGNvbG9yczogW1xyXG4gICAgXCIjRjRDQkM2XCIsXHJcbiAgICBcIiNGNEEzOUFcIixcclxuICAgIFwiI0VFNkE1RVwiLFxyXG4gICAgXCIjQ0UzNzI3XCIsXHJcbiAgICBcIiNBMjI4MjNcIixcclxuICAgIFwiIzc1MUExQVwiLFxyXG4gICAgXCIjNDEwMDAwXCIsXHJcbiAgXSxcclxuICBjbHVzdGVyTWF4Wm9vbTogMTEsXHJcbiAgY2x1c3RlclJhZGl1czogMzAsXHJcbiAgY2x1c3Rlck1pblBvaW50czogNVxyXG59O1xyXG5cclxubWFwYm94Z2wuYWNjZXNzVG9rZW4gPSBjb25zdGFudHMudG9rZW47XHJcblxyXG5leHBvcnQgY2xhc3MgTWFwIHtcclxuICBjb25zdHJ1Y3RvcihkaXYsIGNsYXNzTmFtZSwgZGF0YVNvdXJjZUFycmF5LCBzdHlsZVVybCwgaW5pdENvb3JkcywgZGlzYWJsZUNvbnRyb2xzPXRydWUsIHdpdGhIYW5kbGVycz1mYWxzZSwgbWF4Qm91bmRzID0gbnVsbCkge1xyXG5cclxuICAgIHRoaXMuZGF0YVNvdXJjZU9iamVjdHMgPSBkYXRhU291cmNlQXJyYXk7XHJcbiAgICB0aGlzLmNvbnN0YW50cyA9IGNvbnN0YW50cztcclxuICAgIHRoaXMubWFwID0gbmV3IG1hcGJveGdsLk1hcCh7XHJcbiAgICAgIGNvbnRhaW5lcjogY2xhc3NOYW1lLFxyXG4gICAgICBzdHlsZTogc3R5bGVVcmwsXHJcbiAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogdHJ1ZSxcclxuICAgICAgY2VudGVyOiBpbml0Q29vcmRzLmNlbnRlcixcclxuICAgICAgem9vbTogaW5pdENvb3Jkcy56b29tXHJcbiAgICB9KTtcclxuICAgIHRoaXMubWF4Qm91bmRzID0gaW5pdENvb3JkcztcclxuICAgIHRoaXMuYm91bmRzTGlzdCA9IHRoaXMuZGF0YVNvdXJjZU9iamVjdHMubWFwKGRhdGFTb3VyY2UgPT4gZGF0YVNvdXJjZVsnY29vcmRzJ10pO1xyXG4gICAgdGhpcy5leHRyYUJvdW5kcyA9IHRoaXMuZGF0YVNvdXJjZU9iamVjdHMubWFwKGRhdGFTb3VyY2UgPT4gZGF0YVNvdXJjZVsnZXh0cmFDb29yZHMnXSk7XHJcbiAgICBpZihkaXNhYmxlQ29udHJvbHMpe1xyXG4gICAgICB0aGlzLm1hcC5zY3JvbGxab29tLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5tYXAuZHJhZ1Bhbi5kaXNhYmxlKCk7XHJcbiAgICAgIHRoaXMubWFwLmRyYWdSb3RhdGUuZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLm1hcC5ib3hab29tLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5tYXAuZG91YmxlQ2xpY2tab29tLmRpc2FibGUoKTtcclxuICAgIH1cclxuICAgIGlmKHdpdGhIYW5kbGVycyl7XHJcbiAgICAgIHRoaXMuc2V0dXBIYW5kbGVycygpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5kYXRhTGlzdCA9IHRoaXMuZGF0YVNvdXJjZU9iamVjdHMubWFwKGRhdGFTb3VyY2UgPT4gZGF0YVNvdXJjZVsnZGF0YSddKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUJvdW5kcyhcclxuICAgIGJvdW5kcyA9IHRoaXMubWF4Qm91bmRzLFxyXG4gICAgcGFkZGluZyA9IHNjcmVlbi5pc1hTKCkgPyA1IDogc2NyZWVuLmlzU20oKSA/IDE1IDogMjAsXHJcbiAgICBkdXJhdGlvbiA9IDEwMFxyXG4gICkge1xyXG4gICAgdGhpcy5tYXAgPSB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7XHJcbiAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcclxuICAgICAgcGFkZGluZzogcGFkZGluZyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQ29vcmRzQW5kWm9vbShkYXRhUGFpcil7XHJcbiAgICB0aGlzLm1hcC5mbHlUbyh7XHJcbiAgICAgIGNlbnRlcjogZGF0YVBhaXIuY2VudGVyLFxyXG4gICAgICB6b29tOiBkYXRhUGFpci56b29tLFxyXG4gICAgICBzcGVlZDogMC43LFxyXG4gICAgICBjdXJ2ZTogMSxcclxuICAgICAgZWFzaW5nKHQpe1xyXG4gICAgICAgIHJldHVybiB0XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICB2aWV3Qm91bmRPYmoob2JqaW5kZXgpe1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKHRoaXMuYm91bmRzTGlzdFtvYmppbmRleF0pO1xyXG4gIH1cclxuXHJcbiAgdmlld0V4dHJhQm91bmRPYmoob2JqaW5kZXgsIGtleU5hbWUsIGR1cmF0aW9uKXtcclxuICAgIGxldCBleHRyYUJvdW5kcyA9IHRoaXMuZXh0cmFCb3VuZHNbb2JqaW5kZXhdO1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKGV4dHJhQm91bmRzW2tleU5hbWVdKTtcclxuICB9XHJcblxyXG4gIHZpZXdJbml0Qm91bmRzKGR1cmF0aW9uKXtcclxuICAgIHRoaXMudXBkYXRlQ29vcmRzQW5kWm9vbSh0aGlzLm1heEJvdW5kcyk7XHJcbiAgfVxyXG4gIHNob3dTb3VyY2VYSXRlbVkoc291cmNlSW5kZXgsIGl0ZW1JbmRleCkge1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKHRoaXMuZGF0YUxpc3Rbc291cmNlSW5kZXhdW2l0ZW1JbmRleF0pXHJcbiAgfVxyXG5cclxuICBpbml0TWFwU291cmNlc0FuZExheWVycygpIHtcclxuICAgIGlmICh0aGlzLmluaXRpYWxpc2VkKSByZXR1cm47XHJcbiAgICB0aGlzLmluaXRpYWxpc2VkID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgdGhpcy5kYXRhU291cmNlT2JqZWN0cy5tYXAoZGF0YVNvdXJjZSA9PiB7XHJcbiAgICAgIHRoaXMubWFwLmFkZFNvdXJjZShkYXRhU291cmNlWydzb3VyY2VOYW1lJ10sIHtcclxuICAgICAgICB0eXBlOiBkYXRhU291cmNlWydzb3VyY2VUeXBlJ10sXHJcbiAgICAgICAgZGF0YTogZGF0YVNvdXJjZVsnc291cmNlRGF0YSddXHJcbiAgICAgIH0pO1xyXG4gICAgICBpZihkYXRhU291cmNlWydsYXllclR5cGUnXSA9PT0gJ2ZpbGwnKXtcclxuICAgICAgICB0aGlzLm1hcC5hZGRMYXllcih7XHJcbiAgICAgICAgICBpZDogZGF0YVNvdXJjZVsnc291cmNlTmFtZSddLFxyXG4gICAgICAgICAgdHlwZTogZGF0YVNvdXJjZVsnbGF5ZXJUeXBlJ10sXHJcbiAgICAgICAgICBzb3VyY2U6IGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSxcclxuICAgICAgICAgIHBhaW50OiB7XHJcbiAgICAgICAgICAgICdmaWxsLWNvbG9yJzogZGF0YVNvdXJjZVsnY29sb3InXSxcclxuICAgICAgICAgICAgJ2ZpbGwtb3BhY2l0eSc6IGRhdGFTb3VyY2VbJ29wYWNpdHknXVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGRhdGFTb3VyY2VbJ2xheWVyVHlwZSddID09PSAnY2lyY2xlJyl7XHJcbiAgICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIoe1xyXG4gICAgICAgICAgaWQ6IGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSxcclxuICAgICAgICAgIHR5cGU6IGRhdGFTb3VyY2VbJ2xheWVyVHlwZSddLFxyXG4gICAgICAgICAgc291cmNlOiBkYXRhU291cmNlWydzb3VyY2VOYW1lJ10sXHJcbiAgICAgICAgICBwYWludDoge1xyXG4gICAgICAgICAgICAnY2lyY2xlLWNvbG9yJzogWydtYXRjaCcsIFtcImdldFwiLCBcInN0YXR1dFwiXSwgJ1JlY2hlcmNoZXMgZWZmZWN0dcOpZXMgb3UgZW4gY291cnMnLCAnI2ZmNTYxYycsICdQaGFzZSBwcsOpbGltaW5haXJlJywgJyNmZmM3MzQnLCAnI2I3YjdiNyddLFxyXG4gICAgICAgICAgICAnY2lyY2xlLXJhZGl1cyc6IDVcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICBjaGFuZ2VMYXllclBhaW50KGlkLCBwcm9wZXJ0eSwgdmFsdWUpe1xyXG4gICAgdGhpcy5tYXAuc2V0UGFpbnRQcm9wZXJ0eShpZCwgcHJvcGVydHksIHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHNldHVwSGFuZGxlcnMoKXtcclxuICAgIFxyXG4gICAgdGhpcy5tYXAub24oXCJtb3VzZW92ZXJcIiwgXCJwZW5zaW9ubmF0c1NvdXJjZVwiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLm1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcclxuICAgICAgdGhpcy5kcmF3UG9wdXAoZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubWFwLm9uKFwibW91c2VvdXRcIiwgXCJwZW5zaW9ubmF0c1NvdXJjZVwiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLm1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubWFwLm9uKFwiY2xpY2tcIiwgXCJwZW5zaW9ubmF0c1NvdXJjZVwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMubWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgICB0aGlzLmRyYXdQb3B1cChlKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gIH1cclxuXHJcbiAgZHJhd1BvcHVwKGUpe1xyXG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSBlLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnNsaWNlKCk7XHJcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gZS5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzO1xyXG4gICAgbGV0IFtvcGVuZGF5c3RyLCBvcGVubW9udGhzdHIsIG9wZW55ZWFyc3RyXSA9IHByb3BlcnRpZXNbJ291dmVydHVyZSddLnNwbGl0KCcvJyk7XHJcbiAgICBsZXQgW2Zlcm1kYXlzdHIsIGZlcm1tb250aHN0ciwgZmVybXllYXJzdHJdID0gcHJvcGVydGllc1snZmVybWV0dXJlJ10uc3BsaXQoJy8nKTtcclxuICAgIGxldCBbZGF0ZV9vdXZlcnR1cmUsZGF0ZV9mZXJtZXR1cmVdID0gW1xyXG4gICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImZyLUNBXCIsIHtkYXRlU3R5bGU6XCJsb25nXCJ9KS5mb3JtYXQobmV3IERhdGUoRGF0ZS5VVEMob3BlbnllYXJzdHIsIG9wZW5tb250aHN0ciwgb3BlbmRheXN0cikpKSxcclxuICAgICAgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJmci1DQVwiLCB7ZGF0ZVN0eWxlOlwibG9uZ1wifSkuZm9ybWF0KG5ldyBEYXRlKERhdGUuVVRDKGZlcm15ZWFyc3RyLCBmZXJtbW9udGhzdHIsIGZlcm1kYXlzdHIpKSlcclxuICAgIF07XHJcbiAgICBsZXQgaHRtbF9wb3B1cF9jb250ZW50ID0gYFxyXG4gICAgICA8aDM+JHtwcm9wZXJ0aWVzWyduYW1lJ119PC9oMz5cclxuICAgICAgPGg0PiR7cHJvcGVydGllc1sndmlsbGUnXX0sICR7cHJvcGVydGllc1sncHJvdmluY2UnXX08L2g0PlxyXG4gICAgICA8cD4ke2RhdGVfb3V2ZXJ0dXJlfSAtICR7ZGF0ZV9mZXJtZXR1cmV9PC9wPlxyXG4gICAgICA8cD4ke3Byb3BlcnRpZXNbJ3N0YXR1dCddfTwvcD5cclxuICAgIGA7XHJcbiAgICB3aGlsZSAoTWF0aC5hYnMoZS5sbmdMYXQubG5nIC0gY29vcmRpbmF0ZXNbMF0pID4gMTgwKSB7XHJcbiAgICAgIGNvb3JkaW5hdGVzWzBdICs9IGUubG5nTGF0LmxuZyA+IGNvb3JkaW5hdGVzWzBdID8gMzYwIDogLTM2MDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnBvcHVwID0gbmV3IG1hcGJveGdsLlBvcHVwKClcclxuICAgICAgLnNldExuZ0xhdChjb29yZGluYXRlcylcclxuICAgICAgLnNldEhUTUwoaHRtbF9wb3B1cF9jb250ZW50KVxyXG4gICAgICAuYWRkVG8odGhpcy5tYXApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIGlmICh0aGlzLnBvcHVwKSB7XHJcbiAgICAgIHRoaXMucG9wdXAucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVEYXRhKGRhdGFTb3VyY2VOYW1lLCBkYXRhKSB7XHJcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGlzZWQpIHRoaXMuaW5pdE1hcFNvdXJjZXNBbmRMYXllcnMoKTtcclxuICAgIHRoaXMubWFwLmdldFNvdXJjZShkYXRhU291cmNlTmFtZSkuc2V0RGF0YShkYXRhKTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcclxuXHJcbmNvbnN0IHBvc2l0aXZlT3JkZXJEaWN0ID0ge1xyXG4gICAgXCJsYW5kX3NpbmtcIjowLFxyXG4gICAgXCJmb3NzaWxfZW1pc3Npb25zXCI6MSxcclxuICAgIFwibGFuZF91c2VfY2hhbmdlXCI6Mn07XHJcblxyXG5jb25zdCBuZWdhdGl2ZU9yZGVyRGljdCA9IHtcIm9jZWFuX3NpbmtcIjowLFxyXG4gICAgXCJhdG1vc19zaW5rXCI6MSxcclxuICAgIFwibGFuZF9zaW5rXCI6Mn07XHJcblxyXG5jb25zdCBjb2xvckRpY3QgPSB7XHJcblxyXG4gICAgZm9zc2lsX2VtaXNzaW9uczogXCIjYjdjM2MzXCIsXHJcbiAgICBsYW5kX3VzZV9jaGFuZ2U6IFwiI0VGRTY2RlwiLFxyXG4gICAgbGFuZF9zaW5rOiBcIiNhNWRhYThcIixcclxuICAgIG9jZWFuX3Npbms6IFwiIzc1YTNiMVwiLFxyXG4gICAgYXRtb3Nfc2luazogXCIjODljZmYwXCIsXHJcbiAgICBjZW1lbnRfc2luazogXCIjYTJhMTk4XCJcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIHN0YWNrZWRBcmVhQ2hhcnR7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3Znb2JqLCByYXdkYXRhKXtcclxuXHJcbiAgICAgICAgdGhpcy5zdmdPYmogPSBzdmdvYmo7XHJcbiAgICAgICAgdGhpcy5zdmdXaWR0aCA9IHRoaXMuc3ZnT2JqLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICAgICAgICB0aGlzLnN2Z0hlaWdodCA9IHRoaXMuc3ZnT2JqLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5jaGFydFdpZHRoID0gdGhpcy5zdmdXaWR0aCAqIDAuOTtcclxuICAgICAgICB0aGlzLmNoYXJ0SGVpZ2h0ID0gdGhpcy5zdmdIZWlnaHQgKiAwLjk7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5jbGVhbkRhdGEocmF3ZGF0YSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NzdkRhdGE6JywgdGhpcy5kYXRhKTtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdGhpcy5tYWluR3JvdXAgPSB0aGlzLnN2Z09iai5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLmNoYXJ0V2lkdGgpXHJcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLmNoYXJ0SGVpZ2h0KVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkeyh0aGlzLnN2Z1dpZHRoLXRoaXMuY2hhcnRXaWR0aCkvMn0sJHsodGhpcy5zdmdIZWlnaHQtdGhpcy5jaGFydEhlaWdodCkvMn0pYCk7XHJcbiAgICAgICAgdGhpcy5pbml0Q2hhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhbkRhdGEoZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEubWFwKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHllYXI6IHllYXJEYXRhW1wiQW5uw6llXCJdLFxyXG4gICAgICAgICAgICAgICAgZm9zc2lsX2VtaXNzaW9uczogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCLDiW1pc3Npb25zIGlzc3VlcyBkZXMgw6luZXJnaWVzIGZvc3NpbGVzXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgbGFuZF91c2VfY2hhbmdlOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIkNoYW5nZW1lbnQgZCdhZmZlY3RhdGlvbiBkZXMgdGVycmVzXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgbGFuZF9zaW5rOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIlB1aXRzIHRlcnJlc3RyZVwiXSkucmVwbGFjZSgnLCcsXCIuXCIpKSxcclxuICAgICAgICAgICAgICAgIG9jZWFuX3Npbms6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiT2PDqWFuXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgYXRtb3Nfc2luazogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCJBdG1vc3Bow6hyZVwiXSkucmVwbGFjZSgnLCcsXCIuXCIpKSxcclxuICAgICAgICAgICAgICAgIGNlbWVudF9zaW5rOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIlB1aXRzIGRlIGNpbWVudFwiXSkucmVwbGFjZSgnLCcsXCIuXCIpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdENoYXJ0KCl7XHJcblxyXG4gICAgICAgIGxldCBsZWdlbmREYXRhID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogXCLDiW1pc3Npb25zIGlzc3VlcyBkZXMgw6luZXJnaWVzIGZvc3NpbGVzXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJmb3NzaWxfZW1pc3Npb25zXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiQ2hhbmdlbWVudCBkJ2FmZmVjdGF0aW9uIGRlcyB0ZXJyZXNcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcImxhbmRfdXNlX2NoYW5nZVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIlB1aXRzIHRlcnJlc3RyZVwiLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwibGFuZF9zaW5rXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiT2PDqWFuXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJvY2Vhbl9zaW5rXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiQXRtb3NwaMOocmVcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcImF0bW9zX3NpbmtcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc3QgeEF4aXMgPSB0aGlzLmRyYXdYQXhpcyh0aGlzLm1haW5Hcm91cCwgdGhpcy5jaGFydFdpZHRoLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgIGNvbnN0IHlBeGlzID0gdGhpcy5kcmF3WUF4aXModGhpcy5tYWluR3JvdXAsIHRoaXMuY2hhcnRIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuZHJhd0FyZWFzKHRoaXMubWFpbkdyb3VwLCB4QXhpcywgeUF4aXMpO1xyXG4gICAgICAgIC8vdGhpcy5kcmF3UmVjdGFuZ2xlcyh0aGlzLm1haW5Hcm91cCwgeEF4aXMsIHlBeGlzKTtcclxuICAgICAgICB0aGlzLmRyYXdUaXRsZSh0aGlzLm1haW5Hcm91cCk7XHJcbiAgICAgICAgdGhpcy5kcmF3Qm90dG9tQm94KHRoaXMubWFpbkdyb3VwLCB0aGlzLmNoYXJ0V2lkdGgpXHJcbiAgICAgICAgdGhpcy5kcmF3RGV0YWlscyh0aGlzLm1haW5Hcm91cCwgbGVnZW5kRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2QzLlNlbGVjdGlvbn0gY29udGFpbmVyIGQzIHNlbGVjdGlvblxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIHdpZHRoIG9mIHRoZSBjaGFydFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgZGF0YSBPYmogY29udGFpbmluZyBzZXJpZXMgYW5kIGRvbWFpbnNcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBheGlzVGl0bGUgeCBheGlzIHRpdGxlXHJcbiAgICAgKi9cclxuICAgICBkcmF3WEF4aXMoY29udGFpbmVyLCB3aWR0aCwgZGF0YSwgYXhpc1RpdGxlKXtcclxuXHJcbiAgICAgICAgY29uc3QgeEF4aXNHcm91cCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAneEF4aXNHcm91cCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7MH0sJHt0aGlzLmNoYXJ0SGVpZ2h0KjAuOTB9KWApO1xyXG5cclxuICAgICAgICBjb25zdCBzY2FsZSA9IGQzLnNjYWxlQmFuZCgpXHJcbiAgICAgICAgICAgIC5kb21haW4oZGF0YS5tYXAoZWxlbSA9PiBlbGVtLnllYXIpKVxyXG4gICAgICAgICAgICAucmFuZ2UoW3RoaXMuY2hhcnRXaWR0aCowLjA1LCB3aWR0aF0pO1xyXG5cclxuICAgICAgICBjb25zdCBheGlzID0gZDMuYXhpc0JvdHRvbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZShzY2FsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tWYWx1ZXMoc2NhbGUuZG9tYWluKCkuZmlsdGVyKChkLGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaSsxMCklMjAgPT09IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGlja0Zvcm1hdCgoZCxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zcGxpdCgnLScpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB4QXhpc0dyb3VwLmNhbGwoYXhpcylcclxuICAgICAgICAgICAgLmNhbGwoZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aWNrR3JvdXBzID0gZy5zZWxlY3RBbGwoXCIudGlja1wiKTtcclxuICAgICAgICAgICAgICAgIHRpY2tHcm91cHMuc2VsZWN0KCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTRwdCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgKGQsaSkgPT4gaSA9PT0gdGlja0dyb3Vwcy5ub2RlcygpLmxlbmd0aC0xID8gXCJlbmRcIiA6IFwibWlkZGxlXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4gc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2QzLlNlbGVjdGlvbn0gY29udGFpbmVyIGQzIHNlbGVjdGlvblxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIHdpZHRoIG9mIHRoZSBjaGFydFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgZGF0YSBPYmogY29udGFpbmluZyBzZXJpZXMgYW5kIGRvbWFpbnNcclxuICAgICAqL1xyXG4gICAgIGRyYXdZQXhpcyhjb250YWluZXIsIGhlaWdodCl7XHJcblxyXG4gICAgICAgIGNvbnN0IHlBeGlzR3JvdXAgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3lBeGlzR3JvdXAnKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3RoaXMuY2hhcnRXaWR0aCowLjA1fSwkezB9KWApO1xyXG5cclxuICAgICAgICBjb25zdCBzY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgICAgLmRvbWFpbihbMTIsLTEyXSlcclxuICAgICAgICAgICAgLnJhbmdlKFswLGhlaWdodCowLjkwXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGF4aXMgPSBkMy5heGlzTGVmdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZShzY2FsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMCk7XHJcbiAgICAgICAgeUF4aXNHcm91cC5jYWxsKGF4aXMpXHJcbiAgICAgICAgICAgIC5jYWxsKGcgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGlja0dyb3VwcyA9IGcuc2VsZWN0QWxsKFwiLnRpY2tcIik7XHJcbiAgICAgICAgICAgICAgICB0aWNrR3JvdXBzLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDQwMClcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgJ2dyYXBoaWsnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzEycHQnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAncm90YXRlKC05MCknKVxyXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgMClcclxuICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIC1zY2FsZSgwKSlcclxuICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi0zZW1cIilcclxuICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxMnB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LWZhbWlseScsICdncmFwaGlrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsICc2MDAnKVxyXG4gICAgICAgICAgICAudGV4dChcIkZsdXggZGUgQ08yIChHdEMgLyBhbm7DqWUpXCIpO1xyXG4gICAgICAgIHJldHVybiBzY2FsZTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3QXJlYXMoY29udGFpbmVyLCB4U2NhbGUsIHlTY2FsZSl7XHJcblxyXG4gICAgICAgIGxldCBwb3NpdGl2ZV9wYXRoc19hcnJheSA9IHt9O1xyXG4gICAgICAgIGxldCBuZWdhdGl2ZV9wYXRoc19hcnJheSA9IHt9O1xyXG5cclxuICAgICAgICBjb25zdCBwb3NEYXRhID0gdGhpcy5kYXRhLm1hcCh5ZWFyRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBwb3NFbGVtcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgY3VyVG90YWwgPSAwO1xyXG4gICAgICAgICAgICBsZXQgY3VyWWVhciA9IHllYXJEYXRhLnllYXI7XHJcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHllYXJEYXRhKS5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgIGlmKGN1ckVsZW0+MCAmJiBlbnRyeVswXSAhPT0gXCJ5ZWFyXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc0VsZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVudHJ5WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3Q6IGN1clRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyVG90YWwgKz0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKGVudHJ5WzBdID09PSBcImNlbWVudF9zaW5rXCIpeyAvLyBBZGQgY2VtZW50IHNpbmsgdG8gcmVtb3ZlIGl0IGFmdGVyd2FyZHMgKGluIGZvc3NpbCBmdWVsKSAgXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW50cnlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4gcG9zRWxlbXMuc29ydCgoYSxiKSA9PiBwb3NpdGl2ZU9yZGVyRGljdFthLnR5cGVdIC0gcG9zaXRpdmVPcmRlckRpY3RbYi50eXBlXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5lZ0RhdGEgPSB0aGlzLmRhdGEubWFwKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgbGV0IG5lZ0VsZW1zID0gW107XHJcbiAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBjdXJZZWFyID0geWVhckRhdGEueWVhcjtcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoeWVhckRhdGEpLnNvcnQoKGEsYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5lZ2F0aXZlT3JkZXJEaWN0W2FbMF1dIC0gbmVnYXRpdmVPcmRlckRpY3RbYlswXV07XHJcbiAgICAgICAgICAgIH0pLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgaWYoY3VyRWxlbTwwICYmIGVudHJ5WzBdICE9PSBcInllYXJcIiAmJiBlbnRyeVswXSAhPT0gXCJjZW1lbnRfc2lua1wiICl7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVnRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW50cnlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuIG5lZ0VsZW1zOy8vLnNvcnQoKGEsYikgPT4gbmVnYXRpdmVPcmRlckRpY3RbYS50eXBlXSAtIG5lZ2F0aXZlT3JkZXJEaWN0W2IudHlwZV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnZ290IG5lZ0RhdGE6ICcsIG5lZ0RhdGEpO1xyXG5cclxuICAgICAgICBsZXQgYXJlYUdlbiA9IGQzLmFyZWEoKVxyXG4gICAgICAgICAgICAueChkID0+IHhTY2FsZShkLmN1clllYXIpKVxyXG4gICAgICAgICAgICAueTAoZCA9PiB5U2NhbGUoZC5jdXJUb3QpKVxyXG4gICAgICAgICAgICAueTEoZCA9PiB5U2NhbGUoZC5jdXJUb3QrZC52YWx1ZSkpO1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHBvc2l0aXZlT3JkZXJEaWN0KS5mb3JFYWNoKG9yZGVyT2JqID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBjdXJLZXkgPSBvcmRlck9ialswXTtcclxuICAgICAgICAgICAgbGV0IGN1ck9yZGVyVmFsdWUgPSBvcmRlck9ialsxXTtcclxuICAgICAgICAgICAgbGV0IGN1clBhdGhBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICBwb3NEYXRhLmZvckVhY2goeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSB5ZWFyRGF0YVswXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJZZWFyID0gY3VyRWxlbVsnY3VyWWVhciddO1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleU9iaiA9IHllYXJEYXRhLmZpbHRlcihlbGVtID0+IGN1cktleSA9PT0gZWxlbS50eXBlKTtcclxuICAgICAgICAgICAgICAgIGxldCBjZW1lbnRPYmogPSB5ZWFyRGF0YS5maWx0ZXIoZWxlbSA9PiAnY2VtZW50X3NpbmsnID09PSBlbGVtLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihrZXlPYmoubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICBpZihjdXJLZXkgPT09IFwiZm9zc2lsX2VtaXNzaW9uc1wiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY3VyS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDoga2V5T2JqWzBdLmN1clRvdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBrZXlPYmpbMF0udmFsdWUgLSBNYXRoLmFicyhjZW1lbnRPYmpbMF0udmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY3VyS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDoga2V5T2JqWzBdLmN1clRvdC0gTWF0aC5hYnMoY2VtZW50T2JqWzBdLnZhbHVlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBrZXlPYmpbMF0udmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAvL0FkZCB6ZXJvXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjdXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBvc2l0aXZlX3BhdGhzX2FycmF5W2N1cktleV0gPSBjdXJQYXRoQXJyYXk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY29uc3QgcG9zaXRpdmVQYXRocyA9IHRoaXMubWFpbkdyb3VwLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdwb3NpdGl2ZVBhdGhzJyk7XHJcblxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHBvc2l0aXZlX3BhdGhzX2FycmF5KS5mb3JFYWNoKGNhdGVnb3J5T2JqID0+IHtcclxuICAgICAgICAgICAgbGV0IGN1cktleSA9IGNhdGVnb3J5T2JqWzBdO1xyXG4gICAgICAgICAgICBsZXQgY3VyQXJyYXkgPSBjYXRlZ29yeU9ialsxXTtcclxuXHJcbiAgICAgICAgICAgIHBvc2l0aXZlUGF0aHMuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGN1cktleSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgLmRhdHVtKGN1ckFycmF5KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBjb2xvckRpY3RbY3VyS2V5XSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDApXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIGQgPT4gYXJlYUdlbihkKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG5lZ2F0aXZlT3JkZXJEaWN0KS5zb3J0KChhLGIpID0+IGJbMV0gLSBhWzFdKS5mb3JFYWNoKG9yZGVyT2JqID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBjdXJLZXkgPSBvcmRlck9ialswXTtcclxuICAgICAgICAgICAgbGV0IGN1ck9yZGVyVmFsdWUgPSBvcmRlck9ialsxXTtcclxuICAgICAgICAgICAgbGV0IGN1clBhdGhBcnJheSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgbmVnRGF0YS5mb3JFYWNoKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0geWVhckRhdGFbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyWWVhciA9IGN1ckVsZW1bJ2N1clllYXInXTtcclxuICAgICAgICAgICAgICAgIGxldCBrZXlPYmogPSB5ZWFyRGF0YS5maWx0ZXIoZWxlbSA9PiBjdXJLZXkgPT09IGVsZW0udHlwZSk7XHJcbiAgICAgICAgICAgICAgICBpZihrZXlPYmoubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaChrZXlPYmpbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAvL0FkZCB6ZXJvXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyUGF0aEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjdXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5lZ2F0aXZlX3BhdGhzX2FycmF5W2N1cktleV0gPSBjdXJQYXRoQXJyYXk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY29uc3QgbmVnYXRpdmVQYXRocyA9IHRoaXMubWFpbkdyb3VwLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICduZWdhdGl2ZXBhdGhzJyk7XHJcblxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG5lZ2F0aXZlX3BhdGhzX2FycmF5KS5mb3JFYWNoKGNhdGVnb3J5T2JqID0+IHtcclxuICAgICAgICAgICAgbGV0IGN1cktleSA9IGNhdGVnb3J5T2JqWzBdO1xyXG4gICAgICAgICAgICBsZXQgY3VyQXJyYXkgPSBjYXRlZ29yeU9ialsxXTtcclxuXHJcbiAgICAgICAgICAgIG5lZ2F0aXZlUGF0aHMuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGN1cktleSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgLmRhdHVtKGN1ckFycmF5KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBjb2xvckRpY3RbY3VyS2V5XSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDApXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIGQgPT4gYXJlYUdlbihkKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIERyYXcgbGluZVxyXG4gICAgICAgIGNvbnN0IGxpbmVHZW4gPSBkMy5saW5lKCkueChkID0+IHhTY2FsZShkLnllYXIpKS55KGQgPT4geVNjYWxlKGQudmFsdWUpKTtcclxuXHJcbiAgICAgICAgbGV0IG5lZ1llYXJUb3RhbCA9IFtdO1xyXG4gICAgICAgIGxldCBwb3NZZWFyVG90YWwgPSBbXTtcclxuICAgICAgICBwb3NEYXRhLmZvckVhY2goeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW5pdFZhbHVlID0gMDtcclxuICAgICAgICAgICAgbGV0IGN1clZhbHVlID0geWVhckRhdGEucmVkdWNlKChwcmV2VmFsLGN1clZhbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlZHVjaW5nLi4uJywgcHJldlZhbCAsIGN1clZhbCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldlZhbCArIGN1clZhbC52YWx1ZTtcclxuICAgICAgICAgICAgfSwgaW5pdFZhbHVlKTtcclxuICAgICAgICAgICAgbmVnWWVhclRvdGFsLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgeWVhcjogeWVhckRhdGFbMF0uY3VyWWVhcixcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAtY3VyVmFsdWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBvc1llYXJUb3RhbC5wdXNoKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXI6IHllYXJEYXRhWzBdLmN1clllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGN1clZhbHVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZygneWVhciB0b3RhbDonLCApO1xyXG5cclxuICAgICAgICB2YXIgcG9zbGluZSA9IGQzLnNlbGVjdCgnc3ZnJylcclxuICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgIC5kYXR1bShwb3NZZWFyVG90YWwpXHJcbiAgICAgICAgICAgIC5hdHRyKCdkJywgbGluZUdlbilcclxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJ25vbmUnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5jaGFydFdpZHRoKjAuMDUgKyB4U2NhbGUuYmFuZHdpZHRoKCl9LCR7TWF0aC5hYnMoeVNjYWxlKDIqMC43NCkteVNjYWxlKDApKX0pYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIG5lZ2xpbmUgPSBkMy5zZWxlY3QoJ3N2ZycpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAuZGF0dW0obmVnWWVhclRvdGFsKVxyXG4gICAgICAgICAgICAuYXR0cignZCcsIGxpbmVHZW4pXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICdub25lJylcclxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJzdHJva2UtZGFzaGFycmF5XCIsIChcIjMsIDNcIikpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5jaGFydFdpZHRoKjAuMDUgKyB4U2NhbGUuYmFuZHdpZHRoKCl9LCR7TWF0aC5hYnMoeVNjYWxlKDIqMC43NCkteVNjYWxlKDApKX0pYCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdUaXRsZShjb250YWluZXIpe1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsICh0aGlzLnN2Z1dpZHRoIC0gdGhpcy5jaGFydFdpZHRoKSAvIDIgKyB0aGlzLmNoYXJ0V2lkdGgqMC4wNSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCAodGhpcy5zdmdIZWlnaHQgLSB0aGlzLmNoYXJ0SGVpZ2h0KS8yIC0gNTApXHJcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTdwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnNjAwJylcclxuICAgICAgICAgICAgLnRleHQoXCJMZSB0aXRyZSBkdSBncmFwaGlxdWVcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywodGhpcy5zdmdXaWR0aCAtIHRoaXMuY2hhcnRXaWR0aCkgLyAyICsgdGhpcy5jaGFydFdpZHRoKjAuMDUpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgKHRoaXMuc3ZnSGVpZ2h0IC0gdGhpcy5jaGFydEhlaWdodCkvMiAtIDI1KVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzEzcHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgJ2dyYXBoaWsnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgJzQwMCcpXHJcbiAgICAgICAgICAgIC50ZXh0KFwiTGUgc291cy10aXRyZSBkdSBncmFwaGlxdWVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0JvdHRvbUJveChjb250YWluZXIsIHdpZHRoKXtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdzdG9rZS13aWR0aCcsIDEpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDAuMylcclxuICAgICAgICAgICAgLmF0dHIoXCJ4MVwiLCB0aGlzLmNoYXJ0V2lkdGgqMC4wNSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ5MVwiLCB0aGlzLmNoYXJ0SGVpZ2h0LTMwKVxyXG4gICAgICAgICAgICAuYXR0cihcIngyXCIsIHRoaXMuY2hhcnRXaWR0aClcclxuICAgICAgICAgICAgLmF0dHIoXCJ5MlwiLCB0aGlzLmNoYXJ0SGVpZ2h0LTMwKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jaGFydFdpZHRoKjAuMDUpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgdGhpcy5jaGFydEhlaWdodC0xNylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDYwMClcclxuICAgICAgICAgICAgLnRleHQoJ0dyYXBoaXF1ZSA6JylcclxuICAgICAgICAgICAgLmFwcGVuZCgndHNwYW4nKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIHRoaXMuY2hhcnRXaWR0aCowLjA1KyA2NSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmNoYXJ0SGVpZ2h0LTE3KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgICAgICAudGV4dCgnTGUgRGV2b2lyIC0gJyk7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jaGFydFdpZHRoKjAuMDUgKyAxMjIpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgdGhpcy5jaGFydEhlaWdodC0xNylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDYwMClcclxuICAgICAgICAgICAgLnRleHQoJ1NvdXJjZSA6JylcclxuICAgICAgICAgICAgLmFwcGVuZCgndHNwYW4nKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIHRoaXMuY2hhcnRXaWR0aCowLjA1ICsgMTY5KVxyXG4gICAgICAgICAgICAuYXR0cigneScsIHRoaXMuY2hhcnRIZWlnaHQtMTcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA0MDApXHJcbiAgICAgICAgICAgIC50ZXh0KCcgLi4uICcpO1xyXG5cclxuICAgICAgICAvLyBjb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3gnLCB0aGlzLnN2Z1dpZHRoKjAuMSlcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3knLCB0aGlzLnN2Z0hlaWdodCowLjk1MSlcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDYwMClcclxuICAgICAgICAvLyAgICAgLnRleHQoJ05vdGUgOicpXHJcbiAgICAgICAgLy8gICAgIC5hcHBlbmQoJ3RzcGFuJylcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3gnLCB0aGlzLnN2Z1dpZHRoKjAuMSszNSlcclxuICAgICAgICAvLyAgICAgLmF0dHIoJ3knLCB0aGlzLnN2Z0hlaWdodCowLjk1MSlcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDQwMClcclxuICAgICAgICAvLyAgICAgLnRleHQoJ0Rvbm7DqWVzIGNvbGxlY3TDqWVzIGRlcHVpcyBodHRwczovL2Rvbm5lZXMubW9udHJlYWwuY2EvdmlsbGUtZGUtbW9udHJlYWwvY29tcHRhZ2UtdmVoaWN1bGVzLXBpZXRvbnMnKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3RGV0YWlscyhjb250YWluZXIsIGxlZ2VuZERhdGEpe1xyXG5cclxuICAgICAgICBjb25zdCBsZWdlbmRDb250YWluZXIgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xlZ2VuZENvbnRhaW5lcicpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7KHRoaXMuc3ZnV2lkdGggLSB0aGlzLmNoYXJ0V2lkdGgpIC8gMiArICh0aGlzLmNoYXJ0V2lkdGgqMC4wNSArIDEwKX0sJHt0aGlzLnN2Z0hlaWdodCowLjA3fSlgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgcm93cyA9IGxlZ2VuZENvbnRhaW5lci5zZWxlY3RBbGwoJ2cnKVxyXG4gICAgICAgICAgICAuZGF0YShsZWdlbmREYXRhKVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xlZ2VuZFJvdycpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCxpKSA9PiBgdHJhbnNsYXRlKDAsJHtpKjIwfSlgKTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcm93cy5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjeCcsIDApXHJcbiAgICAgICAgICAgIC5hdHRyKCdjeScsIDApXHJcbiAgICAgICAgICAgIC5hdHRyKCdyJywgOClcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGNvbG9yRGljdFtkLmNvbG9yXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIHJvd3MuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCAxOClcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCA0KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNTAwKVxyXG4gICAgICAgICAgICAudGV4dCggZCA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5sYWJlbDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdSZWN0YW5nbGVzKGNvbnRhaW5lciwgeFNjYWxlLCB5U2NhbGUpeyAvLyBub3QgdXNlZFxyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGl2ZUFyZWFHcm91cCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgIC5hdHRyKCdpZCcsICdwb3NBcmVhZ3JvdXAnKVxyXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsJHswfSlgKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVnYXRpdmVBcmVhR3JvdXAgPSBjb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAuYXR0cignaWQnLCAnbmVnQXJlYWdyb3VwJylcclxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgwLCR7MH0pYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBvc1llYXJHcm91cHMgPSBwb3NpdGl2ZUFyZWFHcm91cC5zZWxlY3RBbGwoJ2cnKVxyXG4gICAgICAgICAgICAuZGF0YSh0aGlzLmRhdGEpXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBkID0+IGB5ZWFyXyR7ZC55ZWFyfWApO1xyXG4gICAgICAgIGNvbnN0IHBvc1JlY3RzID0gcG9zWWVhckdyb3Vwcy5zZWxlY3RBbGwoJ3JlY3QnKVxyXG4gICAgICAgICAgICAuZGF0YShkID0+IHsgXHJcbiAgICAgICAgICAgICAgICBsZXQgcG9zRWxlbXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyWWVhciA9IGQueWVhcjtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQpLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjdXJFbGVtPjAgJiYgZW50cnlbMF0gIT09IFwieWVhclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvc0VsZW1zLnNvcnQoKGEsYikgPT4gcG9zaXRpdmVPcmRlckRpY3RbYS50eXBlXSAtIHBvc2l0aXZlT3JkZXJEaWN0W2IudHlwZV0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgZCA9PiBgJHtkLnR5cGV9XyR7ZC52YWx1ZX1gKVxyXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB4U2NhbGUuYmFuZHdpZHRoKCkpXHJcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAoZCxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoeVNjYWxlKDApIC0geVNjYWxlKGQudmFsdWUpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCBkID0+IHhTY2FsZShkLmN1clllYXIpKVxyXG4gICAgICAgICAgICAuYXR0cigneScsIGQgPT4gKHlTY2FsZSgwKSAtIChNYXRoLmFicyh5U2NhbGUoMCkgLSB5U2NhbGUoZC52YWx1ZSkpKSAtIChNYXRoLmFicyh5U2NhbGUoMCkgLSB5U2NhbGUoZC5jdXJUb3QpKSkpKVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsIGQgPT4gY29sb3JEaWN0W2QudHlwZV0pO1xyXG5cclxuICAgICAgICBjb25zdCBuZWdhdGl2ZVllYXJHcm91cHMgPSBuZWdhdGl2ZUFyZWFHcm91cC5zZWxlY3RBbGwoJ2cnKVxyXG4gICAgICAgICAgICAuZGF0YSh0aGlzLmRhdGEpXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBkID0+IGB5ZWFyXyR7ZC55ZWFyfWApO1xyXG5cclxuICAgICAgICBjb25zdCBuZWdSZWN0cyA9IG5lZ2F0aXZlWWVhckdyb3Vwcy5zZWxlY3RBbGwoJ3JlY3QnKVxyXG4gICAgICAgICAgICAuZGF0YShkID0+IHsgXHJcbiAgICAgICAgICAgICAgICBsZXQgbmVnRWxlbXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyWWVhciA9IGQueWVhcjtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQpLmZpbHRlcihlbGVtID0+IGVsZW1bMV08MCkuc29ydCgoYSxiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYVZhbCA9IG5lZ2F0aXZlT3JkZXJEaWN0W2FbMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJWYWwgPSBuZWdhdGl2ZU9yZGVyRGljdFtiWzBdXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYVZhbCAtIGJWYWw7XHJcbiAgICAgICAgICAgICAgICB9KS5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZW50cnlbMF0gIT09IFwieWVhclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVnRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRyeVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5lZ0VsZW1zO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgZCA9PiBgJHtkLnR5cGV9XyR7ZC52YWx1ZX1gKVxyXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB4U2NhbGUuYmFuZHdpZHRoKCkpXHJcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAoZCxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoeVNjYWxlKDApIC0geVNjYWxlKE1hdGguYWJzKGQudmFsdWUpKSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgZCA9PiB4U2NhbGUoZC5jdXJZZWFyKSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCBkID0+ICh5U2NhbGUoZC5jdXJUb3QpKSlcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGNvbG9yRGljdFtkLnR5cGVdKTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFja30gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnRyb0JveChwcm9wcyl7XG5cbiAgY29uc3Qgc3RhcnRHYW1lID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnc3RhcnRpbmcgZ2FtZScpO1xuICAgIHByb3BzLm1hcE9iai52aWV3RXh0cmFCb3VuZE9iaigwLFwiem9uZTFcIik7XG4gICAgcHJvcHMuZ2FtZVN0YXJ0KCk7XG4gIH0pO1xuXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWVCb3hcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW50cm9Cb3hcIj5cbiAgICAgICAge3Byb3BzLmludHJvRWxlbX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyQm94XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RhcnRidXR0b25cIiBvbkNsaWNrPXtzdGFydEdhbWV9PlxuICAgICAgICAgIDxwPkNvbW1lbmNlcjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICApXG5cbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIE11bHRpcGxlQ2hvaWNlKHByb3BzKXtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuXG4gIH0sIFtdKTtcblxuICBjb25zdCBuZXh0UHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnbmV4dCBwcm9tcHQhJywgcHJvcHMuY3VySW5kZXgrIDEpO1xuICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCArIDEpO1xuICB9KTtcblxuICBjb25zdCBwcmV2aW91c1Byb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgaWYocHJvcHMuY3VySW5kZXggPiAwKXtcbiAgICAgIGNvbnNvbGUubG9nKCdwcmV2aW91cyBwcm9tcHQhJywgcHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgIH1cblxuICB9KTtcblxuICByZXR1cm4oXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjaG9pY2VzXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxuICAgICAgICB7cHJvcHMuY3VySW5kZXggPiAwID9cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvblwiIG9uQ2xpY2s9e3ByZXZpb3VzUHJvbXB0fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDpcbiAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgIHtcbiAgICAgICAgICBwcm9wcy5jaG9pY2VzLm1hcCgoY2hvaWNlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JldHVybmluZyBjaG9pY2U6ICcsIGNob2ljZSk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvblwiIGtleT17aW5kZXh9IG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgICAgICAgICAgPHA+e2Nob2ljZX08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcblxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gUHJpbnRQcm9tcHQocHJvcHMpe1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgY29uc29sZS5sb2coJ25leHQgcHJvbXB0IScsIHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IG5leHRQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCduZXh0IHByb21wdCEnLCBwcm9wcy5jdXJJbmRleCsgMSk7XG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb3BzLmN1ckluZGV4ICsgMSk7XG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwcmludHByb21wdFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXNzYWdlXCI+e3Byb3BzLm1lc3NhZ2V9PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvblwiIG9uQ2xpY2s9e3ByZXZpb3VzUHJvbXB0fT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgPHA+UHJldmlvdXM8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvblwiIG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5TdWl2YW50PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuKVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBSZXBhcnRpdGlvbihwcm9wcyl7XG5cbiAgY29uc3QgW2pldG9ucywgc2V0SmV0b25zXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbbWVnYXdhdHRzLCBzZXRNZWdhd2F0dHNdID0gdXNlU3RhdGUoMCk7XG5cbiAgdXNlRWZmZWN0KCAoKSA9PiB7XG5cbiAgfSwgW10pO1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgY29uc29sZS5sb2coJ25leHQgcHJvbXB0IScsIHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IG5leHRQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCduZXh0IHByb21wdCEnLCBwcm9wcy5jdXJJbmRleCsgMSk7XG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb3BzLmN1ckluZGV4ICsgMSk7XG4gIH0pO1xuXG4gIGNvbnN0IHByb2Nlc3NDaG9pY2VzID0gKGNob2ljZXMpID0+IHtcbiAgICBjb25zdCBzcGxpdHRlZENob2ljZXMgPSBjaG9pY2VzLnNwbGl0KCdfJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHNwbGl0dGVkQ2hvaWNlc1swXSxcbiAgICAgIHVuaXRWYWx1ZTogcGFyc2VJbnQoc3BsaXR0ZWRDaG9pY2VzWzFdKSxcbiAgICAgIHRvdGFsOiBwYXJzZUludChzcGxpdHRlZENob2ljZXNbMl0pLFxuICAgICAgdW5pdE1XdmFsdWU6IHBhcnNlSW50KHNwbGl0dGVkQ2hvaWNlc1szXSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBjYWxjdWxhdGVUb3RhbHMgPSAoZXZlbnQsIHVuaXRWYWx1ZSwgdG90YWwsIHVuaXRNV3ZhbHVlKSA9PiB7XG4gICAgY29uc3QgY2xpY2tWYWx1ZSA9IGNhbGN1bGF0ZUNsaWNrKGV2ZW50KTtcbiAgICBjb25zb2xlLmxvZygnIHRvdGFscyBjaGVjazogJywgZXZlbnQsIE1hdGgucm91bmQocGFyc2VGbG9hdChjbGlja1ZhbHVlKnRvdGFsKS50b0ZpeGVkKDApL3VuaXRWYWx1ZSksIHVuaXRWYWx1ZSwgdG90YWwsIHVuaXRNV3ZhbHVlKTtcblxuXG4gICAgZDMuc2VsZWN0KGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50KS5zZWxlY3QoJy5yb3dqZXRvbnNUb3RhbCcpLnNlbGVjdCgnLnZhbHVlJykuaHRtbChNYXRoLnJvdW5kKHBhcnNlRmxvYXQoY2xpY2tWYWx1ZSp0b3RhbCkudG9GaXhlZCgwKS91bml0VmFsdWUpKnVuaXRWYWx1ZSk7XG4gICAgZDMuc2VsZWN0KGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50KS5zZWxlY3QoJy5yb3dtZWdhd2F0dHNUb3RhbCcpLnNlbGVjdCgnLnZhbHVlJykuaHRtbChNYXRoLnJvdW5kKHBhcnNlRmxvYXQoY2xpY2tWYWx1ZSp0b3RhbCkudG9GaXhlZCgwKS91bml0VmFsdWUpKnVuaXRNV3ZhbHVlKTtcblxuICAgIGxldCB0b3RhbEpldG9ucyA9IDA7XG4gICAgbGV0IHRvdGFsTVcgPSAwO1xuICAgIGQzLnNlbGVjdChldmVudC50YXJnZXQub2Zmc2V0UGFyZW50KS5zZWxlY3RBbGwoJy5iYW5kX3JvdycpLm5vZGVzKCkubWFwKG5vZGUgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ2NoZWNraW5nIG5vZGU6ICcsIG5vZGUpO1xuICAgICAgdG90YWxKZXRvbnMgKz0gcGFyc2VJbnQoZDMuc2VsZWN0KG5vZGUpLnNlbGVjdCgnLnJvd2pldG9uc1RvdGFsJykuc2VsZWN0KCcudmFsdWUnKS5odG1sKCkpO1xuICAgICAgdG90YWxNVyArPSBwYXJzZUludChkMy5zZWxlY3Qobm9kZSkuc2VsZWN0KCcucm93bWVnYXdhdHRzVG90YWwnKS5zZWxlY3QoJy52YWx1ZScpLmh0bWwoKSk7XG4gICAgfSk7XG4gICAgc2V0SmV0b25zKHRvdGFsSmV0b25zKTtcbiAgICBzZXRNZWdhd2F0dHModG90YWxNVyk7XG5cbiAgfVxuXG4gIGNvbnN0IGNhbGN1bGF0ZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgcmV0dXJuIChldmVudC5jbGllbnRYIC0gZXZlbnQudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQpIC8gZXZlbnQudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICB9XG5cbiAgY29uc3QgcmVuZGVyUm93cyA9IChjaG9pY2VzKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3JlbmRlciBjaG9pY2VzOicsIGNob2ljZXMpO1xuICAgIHJldHVybiBjaG9pY2VzLm1hcCggKGVsZW0saW5kZXgpID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCIga2V5PXtpbmRleH0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaG9pY2VfaGVhZGVyXCI+XG4gICAgICAgICAgICA8aDU+e2VsZW0ubmFtZX08L2g1PlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIDxwPntlbGVtLnVuaXRWYWx1ZX0gamV0b25zIGV0IHtlbGVtLnVuaXRNV3ZhbHVlfSBNVyBwYXIgdW5pdMOpPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VsZWN0b3JcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmFuZF9yb3dcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiYW5kXCIgb25DbGljaz17KGUpID0+IGNhbGN1bGF0ZVRvdGFscyhlLCBlbGVtLnVuaXRWYWx1ZSwgZWxlbS50b3RhbCwgZWxlbS51bml0TVd2YWx1ZSl9PjwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZhbHVlc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93amV0b25zVG90YWxcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInZhbHVlXCI+MDwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd21lZ2F3YXR0c1RvdGFsXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ2YWx1ZVwiPjA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlcGFyYXRvclwiPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicmVwYXJ0aXRpb25cIj5cbiAgICAgIHtcbiAgICAgICAgcmVuZGVyUm93cyhwcm9wcy5jaG9pY2VzLm1hcChlID0+IHByb2Nlc3NDaG9pY2VzKGUpKSlcbiAgICAgIH1cbiAgICAgIHtwcm9wcy5jdXJJbmRleCA+IDAgP1xuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvblwiIG9uQ2xpY2s9e3ByZXZpb3VzUHJvbXB0fT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgIDxwPlByZXZpb3VzPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgOlxuICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX2hlYWRlclwiPlxuICAgICAgICAgICAgPGg1PkpldG9ucyBpbnZlc3RpczwvaDU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX3ZhbGV1clwiPlxuICAgICAgICAgICAgPGgzPntqZXRvbnN9PC9oMz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX2hlYWRlclwiPlxuICAgICAgICAgICAgPGg1PsOJbGVjdHJpY2l0w6kgcHJvZHVpdGU8L2g1PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ192YWxldXJcIj5cbiAgICAgICAgICAgIDxoMz57bWVnYXdhdHRzfTwvaDM+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvblwiIG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5TdWl2YW50PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG5cbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IE11bHRpcGxlQ2hvaWNlIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9NdWx0aXBsZUNob2ljZVwiO1xuaW1wb3J0IHsgUHJpbnRQcm9tcHQgfSBmcm9tIFwiLi9wcm9tcHRmaWxsL1ByaW50UHJvbXB0XCI7XG5pbXBvcnQgeyBSZXBhcnRpdGlvbiB9IGZyb20gXCIuL3Byb21wdGZpbGwvUmVwYXJ0aXRpb25cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIFByb21wdEJveChwcm9wcyl7XG5cbiAgY29uc3QgW2Nob2ljZXMsIHNldENob2ljZXNdID0gdXNlU3RhdGUoW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG5cbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNoYW5nZVByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAobmV3VmFsdWUpID0+IHtcbiAgICBwcm9wcy5jaGFuZ2VQcm9tcHQobmV3VmFsdWUpO1xuICB9KTtcblxuICBjb25zdCByZW5kZXJTd2l0Y2ggPSAocGFyYW0pID0+IHtcbiAgICBzd2l0Y2gocGFyYW0pe1xuICAgICAgY2FzZSAnUmVwYXJ0aXRpb24nIDpcbiAgICAgICAgcmV0dXJuIDxSZXBhcnRpdGlvbiBjaG9pY2VzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peCddKS5zcGxpdCgnOycpfSBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH0gY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fS8+O1xuICAgICAgY2FzZSAnQ2FydGUnOlxuICAgICAgICByZXR1cm4gPE11bHRpcGxlQ2hvaWNlIGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4J10pLnNwbGl0KCc7Jyl9IGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fSBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9Lz47XG4gICAgICBjYXNlICdTdWl2aSc6XG4gICAgICAgIHJldHVybiA8TXVsdGlwbGVDaG9pY2UgY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXgnXSkuc3BsaXQoJzsnKX0gY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9IGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH0vPjtcbiAgICAgIGNhc2UgJ1ByaW50JzpcbiAgICAgICAgcmV0dXJuIDxQcmludFByb21wdCBtZXNzYWdlPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydUZXh0ZV9TdXBwJ10pfSBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH0gY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fS8+O1xuICAgICAgY2FzZSAnY2hvaXhSZXBvbnNlJzpcbiAgICAgICAgcmV0dXJuIDxNdWx0aXBsZUNob2ljZSBjaG9pY2VzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peCddKS5zcGxpdCgnOycpfSBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH0gY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fS8+O1xuICAgICAgY2FzZSAnQ2F0YXN0cm9waGUnOlxuICAgICAgICByZXR1cm4gPE11bHRpcGxlQ2hvaWNlIGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4J10pLnNwbGl0KCc7Jyl9IGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fSBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9Lz47XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gPE11bHRpcGxlQ2hvaWNlIGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4J10pLnNwbGl0KCc7Jyl9IGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fSBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9Lz47XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWVCb3hcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvbXB0Qm94XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdXJ0aXRyZVwiPlxuICAgICAgICAgICAgPGgzPntwcm9wcy5jdXJQcm9tcHRbJ1N1amV0J119PC9oMz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInF1ZXN0aW9uXCI+XG4gICAgICAgICAgICA8cD57cHJvcHMuY3VyUHJvbXB0WydRdWVzdGlvbiddfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtcbiAgICAgICAgICByZW5kZXJTd2l0Y2gocHJvcHMuY3VyUHJvbXB0WydUeXBlJ10pXG4gICAgICAgIH1cblxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcblxuXG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSW50cm9Cb3ggfSBmcm9tIFwiLi9pbnRyb0JveFwiO1xuaW1wb3J0IHsgUHJvbXB0Qm94IH0gZnJvbSBcIi4vUHJvbXB0Qm94XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBNYWluRnJhbWUocHJvcHMpe1xuXG4gIGNvbnN0IFtnYW1lU3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGUoJ0lETEUnKTtcbiAgY29uc3QgW2dhbWVJbmRleCwgc2V0R2FtZUluZGV4XSA9IHVzZVN0YXRlKDApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2NoZWNraW5nIHByb3BzIG1hcE9iajonLCBwcm9wcy5tYXBPYmopO1xuICB9LFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdnYW1lICcsIGdhbWVTdGF0dXMpO1xuXG4gIH0sIFtnYW1lU3RhdHVzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRHYW1lUHJvbXB0KGdhbWVJbmRleCk7XG4gIH0sIFtnYW1lSW5kZXhdKTtcblxuXG4gIGNvbnN0IGdhbWVTdGFydGVkID0gKCkgPT4ge1xuICAgIHNldFN0YXR1cygnU1RBUlRFRCcpO1xuICAgIHNldEdhbWVJbmRleCgwKTtcbiAgfVxuXG4gIGNvbnN0IHNldEdhbWVQcm9tcHQgPSAoZ2FtZUluZGV4KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2N1cnJlbnQgZ2FtZSBwcm9tcHQ6JywgcHJvcHMuZ2FtZURhdGEuZmlsdGVyKGVsZW0gPT4ge3JldHVybiBTdHJpbmcoZWxlbVtcIkluZGV4XCJdKSA9PT0gU3RyaW5nKGdhbWVJbmRleCk7fSkpO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWVTY3JlZW5cIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2F1Z2VzXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2F1Z2UgZG9sbGFyR2F1Z2VcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHRCb3hcIj5cbiAgICAgICAgICAgIDxoNT5Eb2xsYXJzPC9oNT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdhdWdlQ29sb3IgYmx1ZVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2YWx1ZVwiPlxuICAgICAgICAgICAgICA8cD4xMDA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2F1Z2UgZW52aXJvbm1lbnRHYXVnZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dEJveFwiPlxuICAgICAgICAgICAgPGg1PlRXaCBlbiAyMDUwPC9oNT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdhdWdlQ29sb3IgZ3JlZW5cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmFsdWVcIj5cbiAgICAgICAgICAgICAgPHA+MTAwPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICB7XG4gICAgICAgIGdhbWVTdGF0dXMgPT09IFwiSURMRVwiID9cbiAgICAgICAgPEludHJvQm94IGludHJvRWxlbT17cHJvcHMuaW50cm9FbGVtfSBtYXBPYmo9e3Byb3BzLm1hcE9ian0gZ2FtZVN0YXJ0PXtnYW1lU3RhcnRlZH0gLz5cbiAgICAgICAgOlxuICAgICAgICBnYW1lU3RhdHVzID09PSBcIkVORFwiID9cbiAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgIDpcbiAgICAgICAgICA8UHJvbXB0Qm94IGN1ckluZGV4PXtnYW1lSW5kZXh9IGN1clByb21wdD17cHJvcHMuZ2FtZURhdGFbZ2FtZUluZGV4XX0gY2hhbmdlUHJvbXB0PXtzZXRHYW1lSW5kZXh9Lz5cbiAgICAgIH1cbiAgICA8L2Rpdj5cblxuICApXG5cbn1cbiIsImltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tL2NsaWVudFwiO1xuaW1wb3J0IHsgcmVuZGVyVG9TdGF0aWNNYXJrdXAgfSBmcm9tICdyZWFjdC1kb20vc2VydmVyJztcbmltcG9ydCB7IE1haW5GcmFtZSB9IGZyb20gJy4vY29tcG9uZW50cy9tYWluZnJhbWUnO1xuaW1wb3J0IHsgb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLCBjb250ZW50SGVhZGVyQ29uc3RhbnRzIH0gZnJvbSBcIi4uL2dlbmVyYXRvci9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IEludHJvU2VjdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvSW50cm9TZWN0aW9uJztcblxuZXhwb3J0IGNsYXNzIEVuZ2luZSB7XG5cbiAgY29uc3RydWN0b3IoY29udGFpbmVyLCBvcHRpb25EYXRhLCBpbnRyb09iaiwgbWFwT2JqLCBnYW1lRGF0YSl7XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgY29uc3Qgcm9vdEVsZW0gPSB0aGlzLmNvbnRhaW5lci5hcHBlbmQoJ2RpdicpXG4gICAgICAuY2xhc3NlZCgncm9vdEVsZW0nLCB0cnVlKTtcbiAgICB0aGlzLmVuZ2luZVJvb3QgPSBSZWFjdERPTS5jcmVhdGVSb290KHJvb3RFbGVtLm5vZGUoKSk7XG4gICAgdGhpcy5vcHRpb25EYXRhID0gb3B0aW9uRGF0YTtcbiAgICB0aGlzLm1hcE9iaiA9IG1hcE9iajtcbiAgICB0aGlzLmFtb3JjZSA9IGludHJvT2JqW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdO1xuICAgIHRoaXMuZ2FtZURhdGEgPSBnYW1lRGF0YTtcbiAgICBjb25zb2xlLmxvZygnZ2FtZSBEYXRhIGlzIDogJywgdGhpcy5nYW1lRGF0YSk7XG4gICAgdGhpcy5pbml0RW5naW5lKCk7XG4gIH1cblxuICBpbml0RW5naW5lKCl7XG4gICAgY29uc3QgaW50cm9FbGVtID0gKDxJbnRyb1NlY3Rpb25cbiAgICAgIGtleT17XCJnYW1lSW50cm9cIn1cbiAgICAgIHNlY3Rpb25UeXBlPXtvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLmludHJvdGl0cmV9XG4gICAgICBvcHRpb25EYXRhPXt0aGlzLm9wdGlvbkRhdGF9XG4gICAgICBhbW9yY2U9e3RoaXMuYW1vcmNlfVxuICAgICAgYmFja2dyb3VuZD17bnVsbH1cbiAgICAgIGNsYXNzZXM9e1wiXCJ9XG4gICAgICAvPik7XG5cbiAgICB0aGlzLmVuZ2luZVJvb3QucmVuZGVyKDxNYWluRnJhbWUgaW50cm9FbGVtPXtpbnRyb0VsZW19IG1hcE9iaj17dGhpcy5tYXBPYmp9IGdhbWVTdGF0dXM9e3RoaXMuZ2FtZVN0YXR1c30gZ2FtZURhdGE9e3RoaXMuZ2FtZURhdGF9Lz4pO1xuICB9XG5cbn1cbiIsIi8qKlxuICogdml6LmpzXG4gKiA9PT09PT09XG4gKiBGaWxlIHVzZWQgdG8gZGVmaW5lIHRoZSB2aXN1YWxpemF0aW9uIHNlY3Rpb24uXG4gKi9cblxuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IHsgZ2V0U3RydWN0dXJlLCBnZW5lcmF0ZUNhbGxiYWNrcywgZ2V0T3B0aW9ucyB9IGZyb20gJy4vZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvci5qcyc7XG5pbXBvcnQgeyBjYWxsYmFja3MgfSBmcm9tICcuLi9kYXRhL3N0cnVjdHVyZS9jYWxsYmFja3MuanMnO1xuXG5pbXBvcnQgeyBNYXAgfSBmcm9tICdsZWRldm9pci1kYXRhdml6JztcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gJy4vZ2FtZS9lbmdpbmUuanMnO1xuXG5jb25zdCBjb25maWcgPSB7XG4gIHdpZHRoOiA1MDAsXG4gIGhlaWdodDogNTAwLFxuICBtYXJnaW46IHtcbiAgICB0b3A6IDEwMCxcbiAgICByaWdodDogMTAwLFxuICAgIGJvdHRvbTogMTAwLFxuICAgIGxlZnQ6IDEwMFxuICB9XG59XG5jb25zdCBmdWxsV2lkdGggPSBjb25maWcubWFyZ2luLmxlZnQgKyBjb25maWcud2lkdGggKyBjb25maWcubWFyZ2luLnJpZ2h0O1xuY29uc3QgZnVsbEhlaWdodCA9IGNvbmZpZy5tYXJnaW4udG9wICsgY29uZmlnLmhlaWdodCArIGNvbmZpZy5tYXJnaW4uYm90dG9tO1xuY29uc3QgbWFwQm94U3R5bGUgPSBcIm1hcGJveDovL3N0eWxlcy9sZWRldm9pci9jbGFsOXpsZmswMDRhMTVxb2hocjdyNDk1XCI7XG5cbmNvbnN0IGN1c3RvbUNhbGxiYWNrc05lZWRlZCA9IHRydWU7IC8vIFNldCB0byB0cnVlIGlmIGN1c3RvbSBjYWxsYmFja3MgYXJlIG5lZWRlZFxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZShjb250ZW50RGF0YSwgb3B0aW9ucykge1xuXG4gIHJldHVybiBkMy5jc3YoXCJodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2UVFaM3N6MHExdm5abW9ZWVI1SXJDZnVPTmhIY053NTBpRHRiZzFIMm1JWDhsSERMMUJRNHNBTWk3aUFwU0UxRzlXUVRXMmpIY1d2NEtXL3B1Yj9naWQ9MCZzaW5nbGU9dHJ1ZSZvdXRwdXQ9Y3N2XCIpXG4gICAgLnRoZW4oIGdhbWVEYXRhID0+IHtcbiAgICAgIHJldHVybiBkMy5qc29uKFwiLi9kYXRhL2ZpbHRlcmVkX2FjY2lkZW50cy5nZW9qc29uXCIpXG4gICAgICAudGhlbiggZ2VvRGF0YSA9PiB7XG5cbiAgICAgICAgY29uc3QgbWFwU291cmNlID0gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNvdXJjZU5hbWU6J21hcFNvdXJjZScsXG4gICAgICAgICAgICBzb3VyY2VUeXBlOidnZW9qc29uJyxcbiAgICAgICAgICAgIHNvdXJjZURhdGE6IGdlb0RhdGEsXG4gICAgICAgICAgICBsYXllclR5cGU6J2NpcmNsZScsXG4gICAgICAgICAgICBjb2xvcjonI2Y1ODM2NicsXG4gICAgICAgICAgICBvcGFjaXR5OjAuOCxcbiAgICAgICAgICAgIGNvb3Jkczp7XG4gICAgICAgICAgICAgIGNlbnRlcjogWy03MC41NjYsIDUyLjQ4OF0sXG4gICAgICAgICAgICAgIHpvb206IDRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBleHRyYUNvb3Jkczp7XG4gICAgICAgICAgICAgIHpvbmUxOiB7XG4gICAgICAgICAgICAgICAgY2VudGVyOiBbLTcwLjU2NiwgNTIuNDg4XSxcbiAgICAgICAgICAgICAgICB6b29tOiA1XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IG1hcENvbnRhaW5lciA9IGQzLnNlbGVjdChcIi5tYXAtYXJlYVwiKTtcblxuICAgICAgICBtYXBDb250YWluZXIuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgIC5jbGFzc2VkKCdtYXAnLCB0cnVlKVxuICAgICAgICAgIC5hdHRyKCdpZCcsICdxY21hcCcpXG5cbiAgICAgICAgY29uc3QgbWFwT2JqID0gbmV3IE1hcChkMy5zZWxlY3QoXCIjcWNtYXBcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxY21hcFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcFNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBCb3hTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6Wy03MC41NjYsIDUyLjQ4OF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiA0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbWFwT2JqLm1hcC5vbihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgIGQzLnNlbGVjdChcIiNxY21hcFwiKS5zZWxlY3QoXCIubWFwYm94LWltcHJvdmUtbWFwXCIpLnRleHQoXCJcIilcbiAgICAgICAgICBtYXBPYmouaW5pdE1hcFNvdXJjZXNBbmRMYXllcnMoKTtcbiAgICAgICAgICBkMy5zZWxlY3QoXCIjcWNtYXBcIikuc2VsZWN0KFwiLmxvYWRpbmdcIikuc3R5bGUoXCJkaXNwbGF5XCIsIFwibm9uZVwiKVxuICAgICAgICAgIGQzLnNlbGVjdChcIiNxY21hcFwiKS5zZWxlY3QoXCIub3B0aW9ucy1iYXJcIikuY2xhc3NlZChcImRpc2FibGVkXCIsIGZhbHNlKVxuICAgICAgICB9KTtcblxuXG4gICAgICAgIGNvbnN0IGVuZ2luZSA9IG5ldyBFbmdpbmUobWFwQ29udGFpbmVyLCBnZXRPcHRpb25zKG9wdGlvbnMpLCBjb250ZW50RGF0YVswXSwgbWFwT2JqLCBnYW1lRGF0YSk7XG5cbiAgICAgICAgbGV0IGF1dG9DYWxsYmFja3M7XG4gICAgICAgIHNldHVwVml6KGNvbnRlbnREYXRhLG9wdGlvbnMpO1xuICAgICAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgICBhdXRvQ2FsbGJhY2tzID0gZ2VuZXJhdGVDYWxsYmFja3MoY29udGVudERhdGEsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgYXV0b0NhbGxiYWNrcyA9IGNhbGxiYWNrcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGN1c3RvbUNhbGxiYWNrc05lZWRlZCl7XG4gICAgICAgICAgLy9pZiBjdXN0b20gY2FsbGJhY2tzIGFyZSBuZWVkZWQsIHN1Y2ggYXMgVmlzdWFsaXphdGlvbiB0cmFuc2Zvcm1hdGlvbnMsIGluY2x1ZGUgdGhlbSBoZXJlLlxuICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIHRvIHVzZSBhbnkgb2JqZWN0IGNyZWF0ZWQgaW4gdml6LmpzIChncmFwaHMsIHRvb2xzLCBldGMpIGluIHRoZSBjYWxsYmFja3MuXG4gICAgICAgICAgLy8gWW91IHdpbGwgbmVlZCB0byBtYW51YWxseSBjcmVhdGUgdGhlIGNvcnJlY3QgbnVtYmVyIG9mIGNhbGxiYWNrcyB0byBtYXRjaCB0aGUgdml6IHNlY3Rpb25zXG5cbiAgICAgICAgICBsZXQgY3VzdG9tQ2FsbGJhY2tzID0gW1xuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAoKSA9PiB7XG5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIF1cbiAgICAgICAgICByZXR1cm4gY3VzdG9tQ2FsbGJhY2tzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhdXRvQ2FsbGJhY2tzO1xuICAgICAgfSk7XG5cbiAgICB9KVxufVxuXG5mdW5jdGlvbiBzZXR1cFZpeihjb250ZW50RGF0YSwgb3B0aW9ucyl7XG5cbiAgY29uc3QgZnVsbFN0cnVjdHVyZSA9IGdldFN0cnVjdHVyZShjb250ZW50RGF0YSwgb3B0aW9ucyk7XG4gIGNvbnNvbGUubG9nKCdjaGVja2luZyBzdHJ1Y3R1cmU6JywgZnVsbFN0cnVjdHVyZSk7XG4gIGZ1bGxTdHJ1Y3R1cmUubWFwKHNlY3Rpb25PYmogPT4ge1xuXG4gICAgaWYoc2VjdGlvbk9iai5zZWN0aW9uVHlwZSA9PT0gXCJ2aXotc2VjdGlvblwiKXtcbiAgICAgIHNlY3Rpb25PYmouc3RlcHMubWFwKChzdGVwLGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYoc3RlcC52aXN1YWwgIT09IFwiXCIpe1xuICAgICAgICAgICAgaWYoaW5kZXggPT09IDApe1xuICAgICAgICAgICAgICBkMy5zZWxlY3QoYCMke3NlY3Rpb25PYmoua2V5fV8ke2luZGV4fWApLnN0eWxlKCdvcGFjaXR5JywgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICBkMy5zZWxlY3QoYCMke3NlY3Rpb25PYmoua2V5fV8ke2luZGV4fWApLnN0eWxlKCdvcGFjaXR5JywgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxufSk7XG59XG5cbmZ1bmN0aW9uIHNldHVwVmlkZW9zKCl7XG4gIGxldCB2aWRlb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidmlkZW9cIik7XG4gICAgdmlkZW9zLmZvckVhY2goKHZpZGVvKSA9PiB7XG4gICAgICAvLyBXZSBjYW4gb25seSBjb250cm9sIHBsYXliYWNrIHdpdGhvdXQgaW5zdGVyYWN0aW9uIGlmIHZpZGVvIGlzIG11dGVcbiAgICAgIHZpZGVvLm11dGVkID0gdHJ1ZTtcbiAgICAgIHZpZGVvLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgIC8vIFBsYXkgaXMgYSBwcm9taXNlIHNvIHdlIG5lZWQgdG8gY2hlY2sgd2UgaGF2ZSBpdFxuICAgICAgbGV0IHBsYXlQcm9taXNlID0gdmlkZW8ucGxheSgpO1xuICAgICAgaWYgKHBsYXlQcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKChfKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICAgICAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyAhPT0gMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXZpZGVvLnBhdXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5jdXJyZW50VGltZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlkZW8ucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7IHRocmVzaG9sZDogMC4yIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh2aWRlbyk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG59XG4iLCIvKipcclxuICogc2Nyb2xsZXIuanNcclxuICogPT09PT09PT09PT1cclxuICogRGVmaW5lcyB0aGUgbG9naWMgdXNlZCBieSB0aGUgc2Nyb2xsZXIuIFRoaXMgc2NyaXB0IGRvZXMgbm90IG5lZWQgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzIGFuZCB1c2VzIG5hdGl2ZSBmdW5jdGlvbnNcclxuICogb2YgdGhlIGJyb3dzZXIuXHJcbiAqXHJcbiAqIC8hXFwgUExFQVNFLCBETyBOT1QgTU9ESUZZIFRISVMgRklMRS5cclxuICpcclxuICogQGF1dGhvciBBbnRvaW5lIELDqWxhbmQgPGFiZWxhbmRAbGVkZXZvaXIuY29tPlxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBEZWZpbmVzIGEgc3RlcCBhc3NvY2lhdGVkIHdpdGggYSBzcGVjaWZpYyB2aXN1YWxpemF0aW9uLiBBIHN0ZXAgaXMgYWN0aXZhdGVkIG9yIGRlYWN0aXZhdGVkIGJhc2VkIG9uIHRoZSBzY3JvbGxcclxuICogcG9zaXRpb24uIFRoaXMgY2xhc3MgaXMgdXNlZCBieSB0aGUgc2Nyb2xsZXIgZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBTY3JvbGxlclN0ZXAge1xyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIFNjcm9sbGVyU3RlcC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBlbCAgICAgICAgICBUaGUgbmF0aXZlIGVsZW1lbnQgdGhhdCByZXByZXNlbnRzIHRoZSBzdGVwIGluIHRoZSBIVE1MIGRvY3VtZW50LlxyXG4gICAqIEBwYXJhbSBpbmRleCAgICAgICBUaGUgaW5kZXggb2YgdGhlIHN0ZXAuXHJcbiAgICogQHBhcmFtIGNhbGxiYWNrICAgIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIHN0ZXAgaXMgYWN0aXZhdGUuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoZWwsIGluZGV4LCBjYWxsYmFjaykge1xyXG4gICAgdGhpcy5lbCA9IGVsO1xyXG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5faXNBY3RpdmF0ZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWN0aXZhdGVzIHRoZSBjdXJyZW50IHN0ZXAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gc2Nyb2xsRGlyZWN0aW9uICAgVGhlIGN1cnJlbnQgc2Nyb2xsIGRpcmVjdGlvbi5cclxuICAgKi9cclxuICBhY3RpdmF0ZShzY3JvbGxEaXJlY3Rpb24pIHtcclxuICAgIGlmICh0aGlzLl9pc0FjdGl2YXRlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX2lzQWN0aXZhdGUgPSB0cnVlO1xyXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIHRoaXMuY2FsbGJhY2soc2Nyb2xsRGlyZWN0aW9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlYWN0aXZhdGVzIHRoZSBjdXJyZW50IHN0ZXAuXHJcbiAgICovXHJcbiAgZGVhY3RpdmF0ZSgpIHtcclxuICAgIGlmICghdGhpcy5faXNBY3RpdmF0ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9pc0FjdGl2YXRlID0gZmFsc2U7XHJcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERlZmluZXMgdGhlIHNjcm9sbCBkaXJlY3Rpb25zLlxyXG4gKlxyXG4gKiBAdHlwZSB7e3VwOiBzdHJpbmcsIGRvd246IHN0cmluZ319XHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgc2Nyb2xsRGlyZWN0aW9ucyA9IHtcclxuICB1cDogJ3VwJyxcclxuICBkb3duOiAnZG93bidcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZWZpbmVzIHRoZSBzY3JvbGxlciB0byB1c2Ugd2l0aCB0aGUgTGUgRGV2b2lyJ3Mgc2Nyb2xseXRlbGxpbmcgYXJ0aWNsZXMuIFBsZWFzZSBzZWUgXCJSRUFETUUubWRcIlxyXG4gKiB0byBrbm93IGhvdyB0byB1c2UgaXQuXHJcbiAqXHJcbiAqIC8hXFwgQmUgc3VyZSB0byB1c2UgdGhlIGdvb2QgQ1NTIGNsYXNzIG5hbWVzIGluIHlvdXIgSFRNTCBmaWxlIGJlZm9yZSB0byB1c2UgdGhlIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gY2FsbGJhY2tzICAgQSBtdWx0aS1kaW1lbnNpb25hbCBhcnJheSBvZiBjYWxsYmFja3MgdG8gdXNlIHdpdGggZWFjaCBzdGVwLlxyXG4gKiBAcmV0dXJucyB7Kn0gICAgICAgVGhlIGluc3RhbmNlIG9mIHRoZSBzY3JvbGxlci5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzY3JvbGxlcihjYWxsYmFja3MpIHtcclxuICBsZXQgX29mZnNldFRvcCA9IDA7XHJcbiAgbGV0IF9vZmZzZXRCb3R0b20gPSAwO1xyXG5cclxuICBsZXQgaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgbGV0IGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICBsZXQgbGFzdFNjcm9sbCA9IDA7XHJcbiAgbGV0IHN0ZXBzID0gW107XHJcbiAgbGV0IHZpeiA9IFtdO1xyXG4gIGxldCB2aXNpYmxlU3RlcHMgPSBbXTtcclxuICBcclxuICBjb25zdCBhcnRpY2xlUmVtaW5kZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZS1yZW1pbmRlcicpO1xyXG4gIGNvbnN0IHNjcm9sbFByb2dyZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyID4gLnByb2dyZXNzJyk7XHJcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50cm8tc2VjdGlvbiBoMScpO1xyXG5cclxuICBjb25zdCB2aXpTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52aXotc2VjdGlvbicpO1xyXG4gIGlmICh2aXpTZWN0aW9ucy5sZW5ndGggIT09IGNhbGxiYWNrcy5sZW5ndGgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIG51bWJlciBvZiB2aXogc2VjdGlvbnMgKCR7dml6U2VjdGlvbnMubGVuZ3RofSkgbWlzbWF0Y2ggd2l0aCB0aGUgbGVuZ3RoIG9mIHRoZSBmaXJzdCBgICtcclxuICAgICAgYGRpbWVuc2lvbiBvZiB0aGUgY2FsbGJhY2tzIGFycmF5ICgke2NhbGxiYWNrcy5sZW5ndGh9KS4gUGxlYXNlLCBiZSBzdXJlIHRoYXQgdGhlIHR3byBlbGVtZW50cyBgICtcclxuICAgICAgYGhhdmUgdGhlIHNhbWUgc2l6ZS5gKTtcclxuICB9XHJcbiAgdml6U2VjdGlvbnMuZm9yRWFjaCgodml6U2VjdGlvbiwgaSkgPT4ge1xyXG4gICAgY29uc3Qgc2VjdGlvbnMgPSBbLi4udml6U2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCdzZWN0aW9uJyldO1xyXG4gICAgaWYgKHNlY3Rpb25zLmxlbmd0aCAhPT0gY2FsbGJhY2tzW2ldLmxlbmd0aCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBudW1iZXIgb2Ygc3RlcHMgKCR7c2VjdGlvbnMubGVuZ3RofSkgaW4gdGhlIHZpeiBzZWN0aW9uICMke2kgKyAxfSBtaXNtYXRjaCB3aXRoIHRoZSBgICtcclxuICAgICAgICBgbnVtYmVyIG9mIGNhbGxiYWNrcyBzcGVjaWZpZWQgKCR7Y2FsbGJhY2tzW2ldLmxlbmd0aH0pIGF0IHRoZSBpbmRleCBcIiR7aX1cIi4gUGxlYXNlLCBiZSBzdXJlIHRoYXQgdGhlIHR3byBgICtcclxuICAgICAgICBgZWxlbWVudHMgaGF2ZSB0aGUgc2FtZSBzaXplLmApO1xyXG4gICAgfVxyXG4gICAgc3RlcHMgPSBzdGVwcy5jb25jYXQoc2VjdGlvbnMubWFwKChlLCBqKSA9PiBuZXcgU2Nyb2xsZXJTdGVwKGUsIGAke2l9LSR7an1gLCBjYWxsYmFja3NbaV1bal0pKSk7XHJcbiAgICB2aXogPSB2aXouY29uY2F0KHZpeiwgdml6U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcudml6ID4gKicpKTtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgZGlzcGxheSBiYXNlZCBvbiBzY3JvbGxiYXIgcG9zaXRpb24uXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdCBfdXBkYXRlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFNjcm9sbCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgc3RlcHMuZm9yRWFjaChzdGVwID0+IHtcclxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgc3RlcCBpcyBpbiB0aGUgdmlld3BvcnQuXHJcbiAgICAgIGNvbnN0IGJvdW5kaW5nUmVjdCA9IHN0ZXAuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGlmIChpbm5lckhlaWdodCAtIGJvdW5kaW5nUmVjdC50b3AgLSBfb2Zmc2V0Qm90dG9tID4gMFxyXG4gICAgICAgICYmIGJvdW5kaW5nUmVjdC50b3AgKyBib3VuZGluZ1JlY3QuaGVpZ2h0IC0gX29mZnNldFRvcCA+IDApIHtcclxuICAgICAgICB2aXNpYmxlU3RlcHMucHVzaChzdGVwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdGVwLmRlYWN0aXZhdGUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRGlzcGxheSB0aGUgdGl0bGUgYXMgYSByZW1pbmRlciB3aGVuIHRoZSBtYWluIGFydGljbGUgdGl0bGUgaXMgaGlkZGVuLlxyXG4gICAgY29uc3QgaXNBcnRpY2xlUmVtaW5kZXJEaXNwbGF5ZWQgPSB0aXRsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPD0gMDtcclxuICAgIGNvbnN0IGlzQXJ0aWNsZVJlbWluZGVySXNWaXNpYmxlID0gYXJ0aWNsZVJlbWluZGVyLmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpO1xyXG4gICAgaWYgKGlzQXJ0aWNsZVJlbWluZGVyRGlzcGxheWVkICYmICFpc0FydGljbGVSZW1pbmRlcklzVmlzaWJsZSkge1xyXG4gICAgICBhcnRpY2xlUmVtaW5kZXIuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpXHJcbiAgICB9IGVsc2UgaWYgKCFpc0FydGljbGVSZW1pbmRlckRpc3BsYXllZCAmJiBpc0FydGljbGVSZW1pbmRlcklzVmlzaWJsZSkge1xyXG4gICAgICBhcnRpY2xlUmVtaW5kZXIuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9yIHRoZSB2aXNpYmxlIHN0ZXBzLCBjaG9vc2UgdGhlIGdvb2Qgb25lIGJhc2VkIG9uIHRoZSBzY3JvbGwgZGlyZWN0aW9uLlxyXG4gICAgdmlzaWJsZVN0ZXBzLmZvckVhY2goKHNlY3Rpb24sIGkpID0+IHtcclxuICAgICAgaWYgKGN1cnJlbnRTY3JvbGwgPj0gbGFzdFNjcm9sbCkgeyAvLyBTY3JvbGwgZG93biAo4oaTKVxyXG4gICAgICAgIGlmIChpID09PSB2aXNpYmxlU3RlcHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgc2VjdGlvbi5hY3RpdmF0ZShzY3JvbGxEaXJlY3Rpb25zLmRvd24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWN0aW9uLmRlYWN0aXZhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7IC8vIFNjcm9sbCB1cCAo4oaRKVxyXG4gICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICBzZWN0aW9uLmFjdGl2YXRlKHNjcm9sbERpcmVjdGlvbnMudXApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWN0aW9uLmRlYWN0aXZhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgX3VwZGF0ZVNjcm9sbFByb2dyZXNzKCk7XHJcblxyXG4gICAgLy8gUmVzZXQgdGhlIHZhcmlhYmxlcyBmb3IgdGhlIG5leHQgZnVuY3Rpb24gY2FsbC5cclxuICAgIHZpc2libGVTdGVwcyA9IFtdO1xyXG4gICAgbGFzdFNjcm9sbCA9IGN1cnJlbnRTY3JvbGw7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgc2Nyb2xsIHByb2dyZXNzaW9uIGluZGljYXRvci5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNvbnN0IF91cGRhdGVTY3JvbGxQcm9ncmVzcyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHdpblNjcm9sbCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgIGNvbnN0IHNjcm9sbGVkID0gKHdpblNjcm9sbCAvIGhlaWdodCkgKiAxMDA7XHJcbiAgICBzY3JvbGxQcm9ncmVzcy5zdHlsZS53aWR0aCA9IHNjcm9sbGVkICsgJyUnO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHB1YmxpY0ludGVyZmFjZSA9IHtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIHNjcm9sbGVyLiBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gY2FuIGJlIG9ubHkgY2FsbGVkIG9uY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSBpbnN0YW5jZSBvZiB0aGUgc2Nyb2xsZXIuXHJcbiAgICAgKi9cclxuICAgIGluaXRpYWxpemU6ICgpID0+IHtcclxuICAgICAgaWYgKGlzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzY3JvbGxlciBpcyBhbHJlYWR5IGluaXRpYWxpemVkLicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX3VwZGF0ZSk7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgX3VwZGF0ZVNjcm9sbFByb2dyZXNzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoKHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSA+IDApIHtcclxuICAgICAgICBfdXBkYXRlKCk7XHJcbiAgICAgIH1cclxuICAgICAgX3VwZGF0ZVNjcm9sbFByb2dyZXNzKCk7XHJcbiAgICAgIHJldHVybiBwdWJsaWNJbnRlcmZhY2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBvciBzZXRzIHRoZSB0b3Agb2Zmc2V0IHRvIHVzZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0VG9wXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIGluc3RhbmNlIG9mIHRoZSBzY3JvbGxlci5cclxuICAgICAqL1xyXG4gICAgb2Zmc2V0VG9wOiBvZmZzZXRUb3AgPT4ge1xyXG4gICAgICBpZiAob2Zmc2V0VG9wID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gX29mZnNldFRvcDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIob2Zmc2V0VG9wKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIG9mZnNldCBtdXN0IGJlIGFuIGludGVnZXIgbnVtYmVyLicpO1xyXG4gICAgICB9XHJcbiAgICAgIF9vZmZzZXRUb3AgPSBvZmZzZXRUb3A7XHJcbiAgICAgIHJldHVybiBwdWJsaWNJbnRlcmZhY2U7XHJcbiAgICB9ICxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgb3Igc2V0cyB0aGUgYm90dG9tIG9mZnNldCB0byB1c2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9mZnNldEJvdHRvbVxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSBpbnN0YW5jZSBvZiB0aGUgc2Nyb2xsZXIuXHJcbiAgICAgKi9cclxuICAgIG9mZnNldEJvdHRvbTogb2Zmc2V0Qm90dG9tID0+IHtcclxuICAgICAgaWYgKG9mZnNldEJvdHRvbSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIF9vZmZzZXRCb3R0b207XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKG9mZnNldEJvdHRvbSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBvZmZzZXQgbXVzdCBiZSBhbiBpbnRlZ2VyIG51bWJlci4nKTtcclxuICAgICAgfVxyXG4gICAgICBfb2Zmc2V0Qm90dG9tID0gb2Zmc2V0Qm90dG9tO1xyXG4gICAgICByZXR1cm4gcHVibGljSW50ZXJmYWNlO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgcmV0dXJuIHB1YmxpY0ludGVyZmFjZTtcclxufVxyXG4iLCJcclxuaW1wb3J0IHsgaW5pdGlhbGl6ZSBhcyB2MSB9IGZyb20gJy4uL3Zpeic7XHJcbmltcG9ydCB7IHNjcm9sbGVyIH0gZnJvbSAnLi4vc2Nyb2xsZXInO1xyXG5pbXBvcnQgTGF6eUxvYWQgZnJvbSBcInZhbmlsbGEtbGF6eWxvYWRcIjtcclxuY29uc3QgaGVhZGVySGVpZ2h0ID0gNDA7XHJcbmltcG9ydCBzdGlja3lCaXRzIGZyb20gJ3N0aWNreWJpdHMnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdFNjcm9sbGVyKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKXtcclxuXHJcbiAgICBsZXQgZWxlbWVudHMgPSBbXTtcclxuICAgIFsnLnZpeicsICcuZnVsbC1wYWdlLXNlY3Rpb24gPiBpbWcnLCAnLmZ1bGwtcGFnZS1zZWN0aW9uID4gdmlkZW8nXS5mb3JFYWNoKHNlbGVjdG9yID0+IHtcclxuICAgICAgZWxlbWVudHMgPSBlbGVtZW50cy5jb25jYXQoQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkpO1xyXG4gICAgfSk7XHJcbiAgICBzdGlja3lCaXRzKGVsZW1lbnRzLCB7IHN0aWNreUJpdFN0aWNreU9mZnNldDogaGVhZGVySGVpZ2h0IH0pO1xyXG4gIFxyXG4gICAgY29uc3QgbGwgPSBuZXcgTGF6eUxvYWQoe1xyXG4gICAgICBlbGVtZW50c19zZWxlY3RvcjogXCIubGF6eVwiLFxyXG4gICAgICB0aHJlc2hvbGQ6IDUwMFxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBQcm9taXNlLmFsbChbdjEoY29udGVudERhdGEsIHBhcmFtc0RhdGEpXSkudGhlbigoW2NhbGxiYWNrc1YxXSkgPT4gIHtcclxuICAgICAgc2Nyb2xsZXIoY2FsbGJhY2tzVjEpXHJcbiAgICAgICAgLm9mZnNldFRvcChoZWFkZXJIZWlnaHQpXHJcbiAgICAgICAgLm9mZnNldEJvdHRvbSgwKVxyXG4gICAgICAgIC5pbml0aWFsaXplKCk7XHJcbiAgICB9KTtcclxuICB9IiwiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSW50cm9TZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvSW50cm9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBUZXh0U2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1RleHRTZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBWaXpTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVml6U2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgRnVsbFBhZ2VTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRnVsbFBhZ2VTZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBvcHRpb25zRHJvcGRvd25Db25zdGFudHMgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcbmltcG9ydCB7IGdldFN0cnVjdHVyZSB9IGZyb20gXCIuL3N0cnVjdHVyZUdlbmVyYXRvci5qc1wiO1xuaW1wb3J0IHsgaW5pdFNjcm9sbGVyIH0gZnJvbSBcIi4vaW5pdFNjcm9sbGVyLmpzXCI7XG5cblxuLyoqXG4gKiBUYWtlIHByb3BzIChhcnRpY2xlIHN0cnVjdHVyZSBhcyBDU1YgYW5kIHBhcmFtcykgYW5kIHRyYW5zZm9ybSBpdCBhcyBIVE1MIGFyY2hpdGVjdHVyZVxuICogQHBhcmFtICB7T2JqZWN0fSBjb250ZW50RGF0YSBBcnRpY2xlJ3MgQ1NWIHN0cnVjdHVyZVxuICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc0RhdGEgQXJ0aWNsZSBwYXJhbWV0ZXJzXG4gKiBAcmV0dXJuIHtPYmplY3R9IE9iaiBIVE1MIGNvZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFJlbmRlclN0cnVjdHVyZShwcm9wcyl7XG4gICAgaWYocHJvcHMucmVuZGVyZWQpe1xuICAgICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuXG4gICAgICAgICAgICBpbml0U2Nyb2xsZXIocHJvcHMuY29udGVudERhdGEsIHByb3BzLnBhcmFtc0RhdGEpO1xuXG4gICAgICAgIH0sIFtdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyRGF0YShnZXRTdHJ1Y3R1cmUocHJvcHMuY29udGVudERhdGEsIHByb3BzLnBhcmFtc0RhdGEpKTtcblxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyRGF0YShzdHJ1Y3R1cmVEYXRhKXtcblxuICAgIGxldCByZW5kZXJlZERhdGEgPSB7fTtcblxuICAgIE9iamVjdC5rZXlzKHN0cnVjdHVyZURhdGEpLm1hcCgoc2VjdGlvbktleSxpbmRleCkgPT4ge1xuICAgICAgICBsZXQgY3VyU2VjdGlvbiA9IHN0cnVjdHVyZURhdGFbc2VjdGlvbktleV07XG4gICAgICAgIGlmKGN1clNlY3Rpb24uc2VjdGlvblR5cGUgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMuaW50cm90aXRyZSl7XG4gICAgICAgICAgICByZW5kZXJlZERhdGFbc2VjdGlvbktleV0gPSAoKDxJbnRyb1NlY3Rpb24ga2V5PXtjdXJTZWN0aW9uLmtleX0gc2VjdGlvblR5cGU9e2N1clNlY3Rpb24uc2VjdGlvblR5cGV9IG9wdGlvbkRhdGE9e2N1clNlY3Rpb24ub3B0aW9uRGF0YX0gYW1vcmNlPXtwYXJzZShjdXJTZWN0aW9uLmFtb3JjZSl9IGJhY2tncm91bmQ9e2N1clNlY3Rpb24uYmFja2dyb3VuZH0gY2xhc3Nlcz17Y3VyU2VjdGlvbi5jbGFzc2VzfSAvPikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoY3VyU2VjdGlvbi5zZWN0aW9uVHlwZSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy50ZXh0ZWNsYXNzaXF1ZSl7XG5cbiAgICAgICAgICAgIHJlbmRlcmVkRGF0YVtzZWN0aW9uS2V5XSA9ICgoPFRleHRTZWN0aW9uIGtleT17Y3VyU2VjdGlvbi5rZXl9IGlkPXtjdXJTZWN0aW9uLmtleX0gc2VjdGlvblR5cGU9e2N1clNlY3Rpb24uc2VjdGlvblR5cGV9IHRleHRzPXtjdXJTZWN0aW9uLnRleHRzfSBiYWNrZ3JvdW5kPXtjdXJTZWN0aW9uLmJhY2tncm91bmR9IGNsYXNzZXM9e2N1clNlY3Rpb24uY2xhc3Nlc30gdmlzdWVsY2xhc3Nlcz17Y3VyU2VjdGlvbi52aXN1ZWxjbGFzc2VzfSB2aXN1YWw9e2N1clNlY3Rpb24udmlzdWFsfSBmaWxlbmFtZT17Y3VyU2VjdGlvbi5maWxlbmFtZX0vPikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoY3VyU2VjdGlvbi5zZWN0aW9uVHlwZSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5wbGVpbmVwYWdldGl0cmUpe1xuICAgICAgICAgICAgcmVuZGVyZWREYXRhW3NlY3Rpb25LZXldID0gKCg8RnVsbFBhZ2VTZWN0aW9uIGtleT17Y3VyU2VjdGlvbi5rZXl9IGlkPXtjdXJTZWN0aW9uLmtleX0gc2VjdGlvblR5cGU9e2N1clNlY3Rpb24uc2VjdGlvblR5cGV9IGJhY2tncm91bmQ9e2N1clNlY3Rpb24uYmFja2dyb3VuZH0gY2xhc3Nlcz17Y3VyU2VjdGlvbi5jbGFzc2VzfSB2aXN1ZWxjbGFzc2VzPXtjdXJTZWN0aW9uLnZpc3VlbGNsYXNzZXN9IHZpc3VhbD17Y3VyU2VjdGlvbi52aXN1YWx9IG1haW5UaXRsZT17Y3VyU2VjdGlvbi50ZXh0cy5tYWluVGl0bGV9IHN1YlRpdGxlPXtjdXJTZWN0aW9uLnRleHRzLnN1YlRpdGxlfSBmaWxlbmFtZT17Y3VyU2VjdGlvbi5maWxlbmFtZX0gLz4pKVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoY3VyU2VjdGlvbi5zZWN0aW9uVHlwZSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy52aXpzZWN0aW9uKXtcbiAgICAgICAgICAgIHJlbmRlcmVkRGF0YVtzZWN0aW9uS2V5XSA9ICg8Vml6U2VjdGlvbiBrZXk9e2N1clNlY3Rpb24ua2V5fSBsaXN0SUQ9e2N1clNlY3Rpb24ubGlzdElEfSBzdGVwcz17Y3VyU2VjdGlvbi5zdGVwc30gY2xhc3NlZD17Y3VyU2VjdGlvbi5jbGFzc2VkfSBtZWRpYUluZm89e2N1clNlY3Rpb24ubWVkaWFJbmZvfSBiYWNrZ3JvdW5kPXtjdXJTZWN0aW9uLmJhY2tncm91bmR9Lz4pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMocmVuZGVyZWREYXRhKTtcbn1cbiIsIi8qKlxuICogYXBwLmpzXG4gKiA9PT09PT1cbiAqIE1haW4gZmlsZSBvZiB0aGUgYXBwbGljYXRpb24uIFRoaXMgZmlsZSBpcyB1c2VkIHRvIGluaXRpYWxpemUgdGhlIHNjcm9sbGVyIGFuZCBpbXBvcnRzIHRoZSB2aXN1YWxpemF0aW9ucyB1c2VkLlxuICovXG5cbid1c2Ugc3RyaWN0JztcbmltcG9ydCBzdHJ1Y3R1cmUgZnJvbSAnLi4vZGF0YS9zdHJ1Y3R1cmUvc3RydWN0dXJlLmpzb24nO1xuXG5pZighRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjKXtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jvb3QnKS5pbm5lckhUTUwgPSAoc3RydWN0dXJlLmh0bWxzdHJ1Yyk7XG59XG5cbmltcG9ydCAnLi4vYXNzZXRzL3N0eWxlcy9zdHlsZS5zY3NzJztcbmltcG9ydCB7Z29vZ2xlX2NvbmZpZ30gZnJvbSBcIi4uL2RhdGEvZ29vZ2xlX2NvbmZpZ1wiO1xuaW1wb3J0IHsgUmVuZGVyU3RydWN0dXJlIH0gZnJvbSAnLi9nZW5lcmF0b3IvUmVuZGVyU3RydWN0dXJlJztcbmltcG9ydCB7IGluaXRTY3JvbGxlciB9IGZyb20gJy4vZ2VuZXJhdG9yL2luaXRTY3JvbGxlcic7XG5pbXBvcnQgeyBnZW5lcmF0ZUNhbGxiYWNrcyB9IGZyb20gJy4vZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvcic7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJztcblxuaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjKXtcbiAgUHJvbWlzZS5hbGwoW2ltcG9ydChcInJlYWN0LWRvbS9jbGllbnRcIiksIGltcG9ydChcInJlYWN0LWRvbS9zZXJ2ZXJcIiksIGltcG9ydChcInJlYWN0XCIpXSlcbiAgICAudGhlbihwYWNrYWdlcyA9PiB7XG4gICAgICBjb25zdCBSZWFjdERPTSA9IHBhY2thZ2VzWzBdO1xuICAgICAgY29uc3QgUmVhY3RET01TZXJ2ZXIgPSBwYWNrYWdlc1sxXTtcbiAgICAgIGNvbnN0IFJlYWN0ID0gcGFja2FnZXNbMl07XG4gICAgICBhZGROb3RQdWJsaXNoZWQoKTtcbiAgICAgIGlmKEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmNvbnRlbnRVUkwpLnRoZW4oIGNvbnRlbnREYXRhID0+IHtcbiAgICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5wYXJhbXNVUkwpLnRoZW4oIHBhcmFtc0RhdGEgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm9vdCA9IFJlYWN0RE9NLmNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb290XCIpKTtcbiAgICAgICAgICAgIHJvb3QucmVuZGVyKFxuICAgICAgICAgICAgICA8UmVuZGVyU3RydWN0dXJlIGNvbnRlbnREYXRhPXtjb250ZW50RGF0YX0gcGFyYW1zRGF0YT17cGFyYW1zRGF0YX0gcmVuZGVyZWQ9e3RydWV9Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBhZGRGb290ZXIoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5jb250ZW50VVJMKS50aGVuKCBjb250ZW50RGF0YSA9PiB7XG4gICAgICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcucGFyYW1zVVJMKS50aGVuKCBwYXJhbXNEYXRhID0+IHtcbiAgICAgICAgICAgIGQzLmJsb2IoZ29vZ2xlX2NvbmZpZy5jb250ZW50VVJMKS50aGVuKGNvbnRlbnRCbG9iID0+IHtcbiAgICAgICAgICAgICAgZDMuYmxvYihnb29nbGVfY29uZmlnLnBhcmFtc1VSTCkudGhlbihwYXJhbXNCbG9iID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBnZW5lcmF0ZWRTdHJ1YyA9IFJlbmRlclN0cnVjdHVyZSh7Y29udGVudERhdGE6IGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhOiBwYXJhbXNEYXRhLCByZW5kZXI6IGZhbHNlfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaHRtbFN0cnVjID0gUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdGF0aWNNYXJrdXAoZ2VuZXJhdGVkU3RydWMpO1xuICAgICAgICAgICAgICAgIHdyaXRlSFRNTGZpbGUoaHRtbFN0cnVjLCBjb250ZW50QmxvYiwgcGFyYW1zQmxvYik7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVDYWxsYmFja3MoY29udGVudERhdGEscGFyYW1zRGF0YSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbn1cbmVsc2V7XG4gIGlmKEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgUHJvbWlzZS5hbGwoW2ltcG9ydChcInJlYWN0LWRvbS9jbGllbnRcIiksIGltcG9ydChcInJlYWN0XCIpXSlcbiAgICAudGhlbihwYWNrYWdlcyA9PiB7XG4gICAgICBjb25zdCBSZWFjdERPTSA9IHBhY2thZ2VzWzBdO1xuICAgICAgY29uc3QgUmVhY3QgPSBwYWNrYWdlc1sxXTtcbiAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmNvbnRlbnRVUkwpLnRoZW4oIGNvbnRlbnREYXRhID0+IHtcbiAgICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcucGFyYW1zVVJMKS50aGVuKCBwYXJhbXNEYXRhID0+IHtcbiAgICAgICAgICBjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJvb3RcIikpO1xuICAgICAgICAgIHJvb3QucmVuZGVyKFxuICAgICAgICAgICAgPFJlbmRlclN0cnVjdHVyZSBjb250ZW50RGF0YT17Y29udGVudERhdGF9IHBhcmFtc0RhdGE9e3BhcmFtc0RhdGF9IHJlbmRlcmVkPXt0cnVlfS8+XG4gICAgICAgICAgKTtcbiAgICAgICAgICBhZGRGb290ZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBlbHNle1xuICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmxvY2FsQ29udGVudFVSTCkudGhlbiggY29udGVudERhdGEgPT4ge1xuICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcubG9jYWxQYXJhbXNVUkwpLnRoZW4oIHBhcmFtc0RhdGEgPT4ge1xuICAgICAgICBpbml0U2Nyb2xsZXIoY29udGVudERhdGEsIHBhcmFtc0RhdGEpO1xuICAgICAgICBhZGRGb290ZXIoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyaXRlSFRNTGZpbGUoSFRNTFN0cnVjdCwgY29udGVudERhdGEsIHBhcmFtc0RhdGEpe1xuICBsZXQgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeSh7aHRtbHN0cnVjOiBgJHtIVE1MU3RydWN0fWB9LCBudWxsLCAyKV0sIHt0eXBlOiBcInRleHQvcGxhaW47Y2hhcnNldD11dGYtOFwifSk7XG4gIGxldCBjb250ZW50Q1NWID0gbmV3IEJsb2IoW2NvbnRlbnREYXRhXSwge3R5cGU6IFwidGV4dC9jc3Y7Y2hhcnNldD11dGYtOFwifSk7XG4gIGxldCBwYXJhbXNDU1YgPSBuZXcgQmxvYihbcGFyYW1zRGF0YV0sIHt0eXBlOiBcInRleHQvY3N2O2NoYXJzZXQ9dXRmLThcIn0pO1xuXG4gIHNhdmVBcyhjb250ZW50Q1NWLCBcImNvbnRlbnREYXRhLmNzdlwiKTtcbiAgc2F2ZUFzKHBhcmFtc0NTViwgXCJwYXJhbXNEYXRhLmNzdlwiKTtcbiAgc2F2ZUFzKGJsb2IsIFwic3RydWN0dXJlLmpzb25cIik7XG59XG5cbmZ1bmN0aW9uIGFkZE5vdFB1Ymxpc2hlZCgpe1xuICBjb25zdCBkaXYgPSBkMy5zZWxlY3QoJy5wdWxsLXJpZ2h0JykuaW5zZXJ0KFwibGlcIiwnbGknKTtcbiAgZGl2Lmh0bWwoYDxwIGNsYXNzPSdub3QtcHVibGlzaGVkJz5OZSBwYXMgcHVibGllcjwvcD5gKTtcbn1cblxuZnVuY3Rpb24gYWRkRm9vdGVyKCl7XG4gIC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvb3RlckNvbnRhaW5lcicpLnJlbW92ZSgpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9vdGVyQ29udGFpbmVyJykuaW5uZXJIVE1MID0gZDMuc2VsZWN0KGAjZm9vdGVyQ29udGVudGApLm5vZGUoKS5pbm5lckhUTUw7XG59XG4iLCJjb25zdCBnb29nbGVfY29uZmlnID0ge1xuICAgIFwiY29udGVudFVSTFwiOiBcImh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZTRXl3SkUwVlVneTNOc3EzVGdfb2gtVnM2MzNUU2ltZElIZmtYVHl6OUJiRXRXTlZndXJkMVRvdS1RNWFudmRPaXczY29DRmtEQ2lTWXEvcHViP2dpZD0wJnNpbmdsZT10cnVlJm91dHB1dD1jc3ZcIixcbiAgICBcInBhcmFtc1VSTFwiOiBcImh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZTRXl3SkUwVlVneTNOc3EzVGdfb2gtVnM2MzNUU2ltZElIZmtYVHl6OUJiRXRXTlZndXJkMVRvdS1RNWFudmRPaXczY29DRmtEQ2lTWXEvcHViP2dpZD00MDk5NTAyMzcmc2luZ2xlPXRydWUmb3V0cHV0PWNzdlwiLFxuICAgIFwibG9jYWxDb250ZW50VVJMXCI6IFwiLi9kYXRhL3N0cnVjdHVyZS9jb250ZW50RGF0YS5jc3ZcIixcbiAgICBcImxvY2FsUGFyYW1zVVJMXCI6IFwiLi9kYXRhL3N0cnVjdHVyZS9wYXJhbXNEYXRhLmNzdlwiXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtnb29nbGVfY29uZmlnfTtcbiJdLCJuYW1lcyI6WyJJbnRyb1NlY3Rpb24iLCJwcm9wcyIsImF1dGhvcnNMaW5lIiwiQXJyYXkiLCJmcm9tIiwiU3RyaW5nIiwib3B0aW9uRGF0YSIsImF1dGhvcnMiLCJzcGxpdCIsIm1hcCIsIm5hbWUiLCJpIiwiY3VyTGVuIiwibGVuZ3RoIiwia2V5IiwiaHJlZiIsInVybHMiLCJpbnRyb1NlY3Rpb25PYmoiLCJjbGFzc05hbWUiLCJjbGFzc2VzIiwidGl0bGUiLCJkYXRlIiwiYW1vcmNlIiwiYmFja2dyb3VuZCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiVGV4dFNlY3Rpb24iLCJxdW90ZU9iaiIsImlzUXVvdGUiLCJpbmNsdWRlcyIsInRleHQiLCJ0ZXh0cyIsImF1dGhvciIsImJpZ051bWJlck9iaiIsImlzQmlnTnVtYmVyIiwibnVtYmVyIiwidW5kZXJUZXh0IiwiaXNWaXN1YWwiLCJ2aXN1YWwiLCJ2aXN1YWxPYmoiLCJpZCIsInNyYyIsImZpbGVuYW1lIiwidmlzdWVsY2xhc3NlcyIsInBhZGRpbmdCb3R0b20iLCJhdXRvUGxheSIsImxvb3AiLCJtdXRlZCIsInBsYXlzSW5saW5lIiwicHJlbG9hZCIsInRleHRTZWN0aW9uT2JqIiwicGFyc2UiLCJzdGFydHNXaXRoIiwiRFdDaGFydCIsImlmcmFtZVJlZiIsInVzZVJlZiIsInVzZVN0YXRlIiwiaGVpZ2h0Iiwic2V0U3RhdGUiLCJvbk1lc3NhZ2UiLCJ1c2VDYWxsYmFjayIsImRhdGEiLCJzb3VyY2UiLCJjdXJyZW50IiwiY29udGVudFdpbmRvdyIsInVzZUVmZmVjdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVmIiwic2Nyb2xsaW5nIiwiZnJhbWVCb3JkZXIiLCJ3aWR0aCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImxvYWRpbmciLCJvcHRpb25zRHJvcGRvd25Db25zdGFudHMiLCJwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzIiwidGl0cmUiLCJhdXRldXJzIiwiVml6U2VjdGlvbiIsInN0ZXBzIiwiY3VyU3RlcENsYXNzZXMiLCJjdXJDb21tb25DbGFzcyIsInZpelNlY3Rpb25PYmoiLCJsaXN0SUQiLCJjbGFzc2VkIiwic3RlcCIsImluZGV4Iiwic3RlcGNsYXNzZXMiLCJmb3JFYWNoIiwic3RlcEVsZW0iLCJpZHgiLCJpc0FycmF5IiwiZWxlbSIsInJlZHVjZSIsImEiLCJiIiwiRnVsbFBhZ2VTZWN0aW9uIiwiZnVsbHBhZ2VTZWN0aW9uT2JqIiwibWFpblRpdGxlIiwiY2xhc3MiLCJzdWJUaXRsZSIsImdldFN0cnVjdHVyZSIsImNvbnRlbnREYXRhIiwicGFyYW1zRGF0YSIsInN0cnVjdHVyZURhdGEiLCJ2aXpTZWN0aW9uSURzIiwib3B0aW9ucyIsImdldE9wdGlvbnMiLCJjb25zb2xlIiwibG9nIiwicm93RGF0YSIsImN1ckFtb3JjZSIsInNlY3Rpb25CYWNrZ3JvdW5kIiwic2VjdGlvblR5cGUiLCJwYXJzZUNsYXNzZXMiLCJnYW1laWQiLCJ0aXRsZU9iaiIsImlzSnNvbiIsIkpTT04iLCJjdXJEYXRhIiwiYXR0cmlidXRzIiwic2Nyb2xsVHlwZSIsImhhc093blByb3BlcnR5IiwiY3VyVml6U2VjdGlvbiIsInB1c2giLCJjdXJTZWN0aW9uIiwic2VjdGlvbkF0dHIiLCJtZWRpYUluZm8iLCJPYmplY3QiLCJ2YWx1ZXMiLCJnZW5lcmF0ZUNhbGxiYWNrcyIsImZ1bGxTdHJ1Y3R1cmUiLCJjYWxsYmFja3NBcnJheSIsImNhbGxiYWNrIiwiY3VyU3RlcHMiLCJjdXJDb21tYW5kIiwib3BhY2l0eVNlbGVjdG9yIiwiZmlsbCIsIl8iLCJmaWx0ZXIiLCJkIiwiaW5kIiwiam9pbiIsImQzIiwidHJhbnNpdGlvbiIsImN1clRhZ0lEIiwiY3VyVGFnSURfaW5kZXgiLCJwYXJzZUludCIsInN0ciIsImUiLCJpc1hTIiwiaW5uZXJXaWR0aCIsImlzU20iLCJjb25zdGFudHMiLCJ0b2tlbiIsIm1hcEJvdW5kcyIsIm1heCIsImNvbG9ycyIsImNsdXN0ZXJNYXhab29tIiwiY2x1c3RlclJhZGl1cyIsImNsdXN0ZXJNaW5Qb2ludHMiLCJtYXBib3hnbCIsIk1hcCIsImRpdiIsImRhdGFTb3VyY2VBcnJheSIsInN0eWxlVXJsIiwiaW5pdENvb3JkcyIsImRpc2FibGVDb250cm9scyIsIndpdGhIYW5kbGVycyIsInRoaXMiLCJkYXRhU291cmNlT2JqZWN0cyIsImNvbnRhaW5lciIsInByZXNlcnZlRHJhd2luZ0J1ZmZlciIsImNlbnRlciIsInpvb20iLCJtYXhCb3VuZHMiLCJib3VuZHNMaXN0IiwiZGF0YVNvdXJjZSIsImV4dHJhQm91bmRzIiwic2Nyb2xsWm9vbSIsImRpc2FibGUiLCJkcmFnUGFuIiwiZHJhZ1JvdGF0ZSIsImJveFpvb20iLCJkb3VibGVDbGlja1pvb20iLCJzZXR1cEhhbmRsZXJzIiwiZGF0YUxpc3QiLCJib3VuZHMiLCJwYWRkaW5nIiwic2NyZWVuIiwiZHVyYXRpb24iLCJmaXRCb3VuZHMiLCJkYXRhUGFpciIsImZseVRvIiwic3BlZWQiLCJjdXJ2ZSIsImVhc2luZyIsInQiLCJvYmppbmRleCIsInVwZGF0ZUNvb3Jkc0FuZFpvb20iLCJrZXlOYW1lIiwic291cmNlSW5kZXgiLCJpdGVtSW5kZXgiLCJpbml0aWFsaXNlZCIsImFkZFNvdXJjZSIsInR5cGUiLCJhZGRMYXllciIsInBhaW50IiwicHJvcGVydHkiLCJ2YWx1ZSIsInNldFBhaW50UHJvcGVydHkiLCJvbiIsImdldENhbnZhcyIsImN1cnNvciIsImRyYXdQb3B1cCIsImNsb3NlUG9wdXAiLCJwcmV2ZW50RGVmYXVsdCIsImNvb3JkaW5hdGVzIiwiZmVhdHVyZXMiLCJnZW9tZXRyeSIsInNsaWNlIiwicHJvcGVydGllcyIsIm9wZW5kYXlzdHIiLCJvcGVubW9udGhzdHIiLCJvcGVueWVhcnN0ciIsImZlcm1kYXlzdHIiLCJmZXJtbW9udGhzdHIiLCJmZXJteWVhcnN0ciIsIkludGwiLCJEYXRlVGltZUZvcm1hdCIsImRhdGVTdHlsZSIsImZvcm1hdCIsIkRhdGUiLCJVVEMiLCJkYXRlX291dmVydHVyZSIsImRhdGVfZmVybWV0dXJlIiwiaHRtbF9wb3B1cF9jb250ZW50IiwiTWF0aCIsImFicyIsImxuZ0xhdCIsImxuZyIsInBvcHVwIiwic2V0TG5nTGF0Iiwic2V0SFRNTCIsImFkZFRvIiwicmVtb3ZlIiwiZGF0YVNvdXJjZU5hbWUiLCJpbml0TWFwU291cmNlc0FuZExheWVycyIsImdldFNvdXJjZSIsInNldERhdGEiLCJJbnRyb0JveCIsInN0YXJ0R2FtZSIsIm1hcE9iaiIsInZpZXdFeHRyYUJvdW5kT2JqIiwiZ2FtZVN0YXJ0IiwiaW50cm9FbGVtIiwib25DbGljayIsIk11bHRpcGxlQ2hvaWNlIiwibmV4dFByb21wdCIsImN1ckluZGV4IiwiY2hhbmdlUHJvbXB0IiwicHJldmlvdXNQcm9tcHQiLCJjaG9pY2VzIiwiY2hvaWNlIiwiUHJpbnRQcm9tcHQiLCJtZXNzYWdlIiwiUmVwYXJ0aXRpb24iLCJqZXRvbnMiLCJzZXRKZXRvbnMiLCJtZWdhd2F0dHMiLCJzZXRNZWdhd2F0dHMiLCJzcGxpdHRlZENob2ljZXMiLCJ1bml0VmFsdWUiLCJ0b3RhbCIsInVuaXRNV3ZhbHVlIiwiZXZlbnQiLCJjbGlja1ZhbHVlIiwiY2xpZW50WCIsInRhcmdldCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJjYWxjdWxhdGVDbGljayIsInJvdW5kIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJwYXJlbnRFbGVtZW50Iiwic2VsZWN0IiwiaHRtbCIsInRvdGFsSmV0b25zIiwidG90YWxNVyIsIm9mZnNldFBhcmVudCIsInNlbGVjdEFsbCIsIm5vZGVzIiwibm9kZSIsImNhbGN1bGF0ZVRvdGFscyIsIlByb21wdEJveCIsIm5ld1ZhbHVlIiwiY3VyUHJvbXB0IiwicGFyYW0iLCJyZW5kZXJTd2l0Y2giLCJNYWluRnJhbWUiLCJnYW1lU3RhdHVzIiwic2V0U3RhdHVzIiwiZ2FtZUluZGV4Iiwic2V0R2FtZUluZGV4Iiwic2V0R2FtZVByb21wdCIsImdhbWVEYXRhIiwiRW5naW5lIiwiaW50cm9PYmoiLCJyb290RWxlbSIsImFwcGVuZCIsImVuZ2luZVJvb3QiLCJSZWFjdERPTSIsImluaXRFbmdpbmUiLCJyZW5kZXIiLCJtYXBCb3hTdHlsZSIsImluaXRpYWxpemUiLCJ0aGVuIiwiZ2VvRGF0YSIsIm1hcFNvdXJjZSIsInNvdXJjZU5hbWUiLCJzb3VyY2VUeXBlIiwic291cmNlRGF0YSIsImxheWVyVHlwZSIsImNvbG9yIiwib3BhY2l0eSIsImNvb3JkcyIsImV4dHJhQ29vcmRzIiwiem9uZTEiLCJtYXBDb250YWluZXIiLCJhdHRyIiwic2V0dXBWaXoiLCJzZWN0aW9uT2JqIiwiU2Nyb2xsZXJTdGVwIiwiZWwiLCJfaXNBY3RpdmF0ZSIsInNjcm9sbERpcmVjdGlvbiIsImNsYXNzTGlzdCIsImFkZCIsImluaXRTY3JvbGxlciIsImVsZW1lbnRzIiwic2VsZWN0b3IiLCJjb25jYXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzdGlja3lCaXRzIiwic3RpY2t5Qml0U3RpY2t5T2Zmc2V0IiwiTGF6eUxvYWQiLCJlbGVtZW50c19zZWxlY3RvciIsInRocmVzaG9sZCIsIlByb21pc2UiLCJhbGwiLCJ2MSIsImNhbGxiYWNrcyIsIl9vZmZzZXRUb3AiLCJfb2Zmc2V0Qm90dG9tIiwiaW5uZXJIZWlnaHQiLCJpc0luaXRpYWxpemVkIiwibGFzdFNjcm9sbCIsInZpeiIsInZpc2libGVTdGVwcyIsImFydGljbGVSZW1pbmRlciIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGxQcm9ncmVzcyIsInZpelNlY3Rpb25zIiwiRXJyb3IiLCJ2aXpTZWN0aW9uIiwic2VjdGlvbnMiLCJqIiwiX3VwZGF0ZSIsImN1cnJlbnRTY3JvbGwiLCJwYWdlWU9mZnNldCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFRvcCIsImJvdW5kaW5nUmVjdCIsInRvcCIsImRlYWN0aXZhdGUiLCJpc0FydGljbGVSZW1pbmRlckRpc3BsYXllZCIsImJvdHRvbSIsImlzQXJ0aWNsZVJlbWluZGVySXNWaXNpYmxlIiwiY29udGFpbnMiLCJzZWN0aW9uIiwiYWN0aXZhdGUiLCJfdXBkYXRlU2Nyb2xsUHJvZ3Jlc3MiLCJzY3JvbGxlZCIsImJvZHkiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJwdWJsaWNJbnRlcmZhY2UiLCJvZmZzZXRUb3AiLCJ1bmRlZmluZWQiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJvZmZzZXRCb3R0b20iLCJzY3JvbGxlciIsIlJlbmRlclN0cnVjdHVyZSIsInJlbmRlcmVkIiwicmVuZGVyZWREYXRhIiwia2V5cyIsInNlY3Rpb25LZXkiLCJwYWNrYWdlcyIsIlJlYWN0IiwiaW5zZXJ0IiwiZ29vZ2xlX2NvbmZpZyIsImNyZWF0ZVJvb3QiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9