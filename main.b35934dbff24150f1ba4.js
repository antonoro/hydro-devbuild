(self.webpackChunkscrollytelling_template=self.webpackChunkscrollytelling_template||[]).push([[179],{47090:(e,t,n)=>{"use strict";const r=JSON.parse('{"E":"<section id=\\"vizSection1_0\\" class=\\"viz-section full-page\\"><div class=\\"steps display-none\\"><section class=\\"display-none\\"><p>Bla bl abl abl ablalbalanl.</p></section></div><div class=\\"viz\\" id=\\"viz\\"><div id=\\"vizSection1_0_0\\" class=\\"iframeContainer map-area\\"></div></div></section>"}');var a=n(40207),c=n(67294);function o(e){var t=c.createElement("section",{className:"intro-section ".concat(e.classes)},c.createElement("h5",{className:"overTitle"},e.amorce),c.createElement("h1",null,e.optionData.title),c.createElement("address",null,c.createElement("div",{className:"date"})));return e.background?c.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},t):t}var i=n(25935);function s(e){var t,n=String(e.classes).includes("citation");n&&(t={text:String(e.texts).split("/")[0],author:String(e.texts).split("/")[1]});var r,a=String(e.classes).includes("bigNumber");a&&(r={number:String(e.texts).split("/")[0],underText:String(e.texts).split("/")[1]});var o=e.visual,s=""!==o?"Photo"===e.visual?c.createElement("img",{key:"photoTextSection_".concat(e.id),id:"photoTextSection_".concat(e.id),src:"assets/img/675/".concat(e.filename),"data-srcset":"assets/img/2048/".concat(e.filename," 2048w, assets/img/990/").concat(e.filename," 990w, assets/img/675/").concat(e.filename," 675w, assets/img/1350/").concat(e.filename," 1350w, assets/img/100/").concat(e.filename," 100w, assets/img/495/").concat(e.filename," 495w, assets/img/1024/").concat(e.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(e.visuelclasses),style:{paddingBottom:"1rem"}}):"Video"===e.visual?c.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(e.visuelclasses),preload:"metadata",key:"videoTextSection_".concat(e.id),id:"videoTextSection_".concat(e.id)},c.createElement("source",{src:"assets/videos/".concat(e.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):c.createElement("div",null):c.createElement("div",null),l=c.createElement("section",{className:"text-section ".concat(e.classes)},n?c.createElement("blockquote",{className:"small"},c.createElement("div",null,c.createElement("p",null,c.createElement("b",null,(0,i.ZP)(t.text))),c.createElement("p",{className:"author"},t.author),c.createElement("div",{className:"symbol"}))):a?c.createElement("div",{className:"container-number"},c.createElement("div",{className:"numbers"},c.createElement("h2",null,r.number),c.createElement("small",null,r.underText))):c.createElement("div",null,o?s:c.createElement("div",null),String(e.texts).startsWith("<")?(0,i.ZP)(e.texts):c.createElement("p",null,(0,i.ZP)(e.texts))));return e.background?c.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},l):l}var l,u=n(45697),m=n.n(u),d=["title","src"];function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t,n,r=e.title,a=e.src,o=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,d),i=(0,c.useRef)(),s=(t=(0,c.useState)(500),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],u=s[1],m=(0,c.useCallback)((function(e){var t=e.data,n=void 0===t?{}:t;e.source===i.current.contentWindow&&"string"!=typeof n&&n["datawrapper-height"]}),[u,i]);return(0,c.useEffect)((function(){return window.addEventListener("message",m),function(){return window.removeEventListener("message",m)}}),[l,u,m]),c.createElement("iframe",p({ref:i,scrolling:"no",frameBorder:"0",width:"100%"},o,{title:r,src:a,height:l}))}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}v.propTypes={title:m().string.isRequired,src:m().string.isRequired,loading:m().oneOf(["eager","lazy"])};var h="intro-titre",y="pleine-page-titre",E="texte-classique",b="viz-section",x="centré",w="Photo",S="Video",N="Visualisation",I="iframe",k=(g(l={titre:"Titre",auteurs:"Auteurs",date:"Date"},"date","Date"),g(l,"urls","LienAuteurs"),g(l,"lienfichiersource","LienFichierSource"),l);function T(e){var t,n,r,a=c.createElement("section",{id:e.listID,className:e.classed},c.createElement("div",{className:"steps ".concat((t=e.steps,n=t.map((function(e,t){return e.stepclasses})),r=new Array(n.length),n.forEach((function(e,t){if(Array.isArray(e))e.forEach((function(e){for(var a=t;a<n.length;a++)n[a].includes(e)&&(r[a]=e)}));else if("string"==typeof e)for(var a=t;a<n.length;a++)n[a].includes(e)&&(r[a]=e)})),r.reduce((function(e,t){return e===t&&""!==e&&""!==t?e:""}))))},e.steps.map((function(e,t){var n,r=String(e.stepclasses).includes("citation");return r&&(n={text:String(e.text).split("/")[0],author:String(e.text).split("/")[1]}),c.createElement("section",{key:t,className:e.stepclasses},r?c.createElement("blockquote",{className:"small"},c.createElement("div",null,c.createElement("p",null,c.createElement("b",null,(0,i.ZP)(n.text))),c.createElement("p",{className:"author"},n.author),c.createElement("div",{className:"symbol"}))):String(e.text).startsWith("<")?(0,i.ZP)(e.text):c.createElement("p",null,e.text?(0,i.ZP)(e.text):""))}))),c.createElement("div",{className:"viz",id:"viz"},e.steps.map((function(t,n){return t.visual===w?c.createElement("img",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),src:"assets/img/675/".concat(t.filename),"data-srcset":"assets/img/2048/".concat(t.filename," 2048w, assets/img/990/").concat(t.filename," 990w, assets/img/675/").concat(t.filename," 675w, assets/img/1350/").concat(t.filename," 1350w, assets/img/100/").concat(t.filename," 100w, assets/img/495/").concat(t.filename," 495w, assets/img/1024/").concat(t.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(t.visuelclasses)}):t.visual===S?c.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(t.visuelclasses),preload:"metadata",key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n)},c.createElement("source",{src:"assets/videos/".concat(t.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):t.visual===I?c.createElement("div",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),className:"iframeContainer"},c.createElement(v,{title:"Mesures d'arsenic",src:"".concat(t.filename)})):t.visual===N?c.createElement("div",{key:"".concat(e.listID,"_").concat(n),id:"".concat(e.listID,"_").concat(n),className:"iframeContainer ".concat(t.visuelclasses)}):void 0}))));return e.background?c.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},a):a}function P(e){var t=c.createElement("section",{className:"full-page-section ".concat(e.classes)},c.createElement("div",{className:"titleImage"},e.filename?"Photo"===e.visual?c.createElement("img",{key:"".concat(e.id),id:"".concat(e.id),src:"assets/img/675/".concat(e.filename),"data-srcset":"assets/img/2048/".concat(e.filename," 2048w, assets/img/990/").concat(e.filename," 990w, assets/img/675/").concat(e.filename," 675w, assets/img/1350/").concat(e.filename," 1350w, assets/img/100/").concat(e.filename," 100w, assets/img/495/").concat(e.filename," 495w, assets/img/1024/").concat(e.filename," 1024w"),"data-sizes":"(max-width: 100px) 100px, (max-width: 495px) 495px, (max-width: 675px) 675px, (max-width: 990px) 990px, (max-width:  1024px) 1024px, (max-width:  1350px) 1350px, (max-width:  2048px) 2048px",className:"lazy ".concat(e.visuelclasses)}):"Video"===e.visual?c.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video ".concat(e.visuelclasses),preload:"metadata",key:"".concat(e.id),id:"".concat(e.id)},c.createElement("source",{src:"assets/videos/".concat(e.filename)}),"Vidéo non supportée. Ré-essayez sur un autre appareil ou fureteur."):c.createElement("div",null):c.createElement("div",null),e.filename?c.createElement("div",{className:"filter"}):c.createElement("div",null)),c.createElement("div",{className:"captionholder"},c.createElement("h2",{className:"caption ".concat(e.mainTitle.class)},e.mainTitle.text),e.subTitle?c.createElement("h3",{className:"caption ".concat(e.subTitle.class)},e.subTitle.text):c.createElement("div",null)));return e.background?c.createElement("div",{style:{backgroundColor:"".concat(e.background)},className:"sectionContainer"},t):t}n(93162);var C=n(26355);function A(e,t){var n={},r=[],a=O(t);return console.log("content Data",e),e.map((function(e,t){if(e.Section===h){var c=e.StepClasses,o=e.TEXTE,i=e.StyleFond;n[e.SectionID]={key:t,sectionType:h,optionData:a,amorce:o,background:i,classes:_(c),gameid:e.GameID}}else if(e.Section===E){var s=e.TEXTE,l=e.StepClasses,u=e.StyleFond;n[e.SectionID]={key:t,sectionType:E,texts:s,visual:e.VISUEL,filename:e.NomFichierSource,background:u,classes:_(l),visuelclasses:_(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===y){var m=e.TEXTE;D(e.TEXTE)&&(m=JSON.parse(e.TEXTE)),n[e.SectionID]={key:t,sectionType:y,texts:D(e.TEXTE)?m:{mainTitle:{class:"",text:m},subTitle:null},visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,classes:_(e.StepClasses),visuelclasses:_(e.VisuelClasses),gameid:e.GameID}}else if(e.Section===b){var d={attributs:e.Attributs,scrollType:e.Step,text:e.TEXTE,visual:e.VISUEL,filename:e.NomFichierSource,background:e.StyleFond,visuelclasses:_(e.VisuelClasses),stepclasses:_(e.StepClasses),gameid:e.GameID};if(n.hasOwnProperty(e.SectionID)){var p=n[e.SectionID];p.push(d),n[e.SectionID]=p}else n[e.SectionID]=[d],r.push(e.SectionID)}})),r.map((function(e){var t=n[e],r=t[0].attributs===x?" full-page":"",a=t[0].background;n[e]={key:e,sectionType:b,listID:e,steps:t,classed:"viz-section".concat(r),mediaInfo:0,background:a}})),Object.values(n)}function D(e){try{JSON.parse(e)}catch(e){return!1}return!0}function _(e){return Array.from(e.split(";")).join(" ")}function O(e){return{title:e[0][k.titre],authors:e[0][k.auteurs],urls:e[0][k.urls],date:e[0][k.date]}}n(9208);n(83731).accessToken="pk.eyJ1IjoibGVkZXZvaXIiLCJhIjoiY2p2bW81dHU2MWV1cTRhcXIzaXZqMGYxciJ9.WrIF8o69aR_TstDFu6Qyag",n(6899);var j=n(20745);function R(e){return(0,c.useEffect)((function(){C.Ys(".gauges").selectAll(".gauge").nodes().forEach((function(t){var n=50;"dollars"===C.Ys(t).attr("id")&&(n=e.dollars),C.Ys(t).select(".gaugeColorHolder").select(".committed").style("width","".concat(Math.round(e.committed/50*100),"%")),C.Ys(t).select(".gaugeColor").style("width","".concat(Math.round(n/50*100),"%"))}))})),c.createElement("div",{className:"gauges"},c.createElement("div",{id:"dollars",className:"gauge dollarGauge"},c.createElement("div",{className:"gaugeColorHolder"},c.createElement("div",{className:"gaugeColor blue"},c.createElement("div",{className:"value"},c.createElement("p",null,e.dollars))),0!=e.committed?c.createElement("div",{className:"committed"},c.createElement("p",null,e.committed)):"")))}function z(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function V(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){z(c,r,a,o,i,"next",e)}function i(e){z(c,r,a,o,i,"throw",e)}o(void 0)}))}}function L(e){var t=(0,c.useCallback)(V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("starting game"),e.gameStart();case 2:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"gameBox transparent"},c.createElement("div",{className:"introBox"},e.introElem),c.createElement("div",{className:"userBox"},c.createElement("div",{className:"startbutton",onClick:t},c.createElement("p",null,"Commencer le jeu"))))}function q(e){return c.createElement("div",{className:"monitoring"},c.createElement("div",{className:"monitoring_content"},c.createElement("div",{className:"column"},c.createElement("div",{className:"monitoring_header"},c.createElement("h5",null,"Répartition de vos jetons")),c.createElement("div",{className:"monitoring_value"},c.createElement(R,{dollars:e.dollars,committed:e.committed,performance:e.performance})))),e.terawatts||0===e.terawatts?c.createElement("div",{className:"monitoring_content"},c.createElement("div",{className:"column"},c.createElement("div",{className:"monitoring_header"},c.createElement("h5",null,"Électricité produite")),c.createElement("div",{className:"monitoring_value"},c.createElement("h3",null,e.terawatts," TWh")))):c.createElement("div",null))}function Z(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Z(c,r,a,o,i,"next",e)}function i(e){Z(c,r,a,o,i,"throw",e)}o(void 0)}))}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e){var t,n,r=(t=(0,c.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],o=r[1];(0,c.useEffect)((function(){}),[]),(0,c.useEffect)((function(){C.td_(".choicebutton").select(".butn").classed("selected",!1),a&&C.Ys(a.obj).select(".butn").classed("selected",!0)}),[a]);var i=(0,c.useCallback)(function(){var t=U(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.curPrompt.Trigger_next,Number.isInteger(parseInt(a))&&(console.log("Checking trigger next: ",parseInt(a)),e.changePrompt(parseInt(a))),e.updateDollars(-parseInt(n)),e.updatePerformance(parseInt(r)),o(null);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),s=(0,c.useCallback)(U(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("previous prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1)),o(null);case 2:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"choices"},c.createElement("div",{className:"row"},e.choices.map((function(t,n){var r=e.choices_values[n].split("_")[0],a=e.choices_values[n].split("_")[1];return c.createElement("div",{className:"choicebutton",key:n,onClick:function(e){!function(e,t,n){o({obj:e.target,cost:t,use:n})}(e,r,a)}},c.createElement("div",{id:n,className:"butn"},c.createElement("div",{className:"holder icon"},c.createElement("img",{src:"./assets/img/On.svg"})),c.createElement("div",{className:"holder label"},c.createElement("h4",null,t),c.createElement("p",null,r," JETONS"))))}))),c.createElement(q,{showTWh:!1,dollars:a&&a.hasOwnProperty("cost")?e.gauges.props.dollars-a.cost:e.gauges.props.dollars,committed:a&&a.hasOwnProperty("cost")?a.cost:0,performance:e.gauges.props.performance}),c.createElement("div",{className:"row"},c.createElement("div",{className:"column"},e.curIndex>0?c.createElement("div",{className:"actionbutton prev",onClick:s},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))):c.createElement("div",null)),c.createElement("div",{className:"column"},c.createElement("div",{className:"actionbutton next ".concat(a?"":"disabled"),onClick:function(){a?i(a.cost,a.use):console.log("Disabled.")}},c.createElement("div",{className:"butn"},c.createElement("p",null,"Next"))))))}function X(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){X(c,r,a,o,i,"next",e)}function i(e){X(c,r,a,o,i,"throw",e)}o(void 0)}))}}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e){var t=Y((0,c.useState)([]),2),n=t[0],r=t[1];(0,c.useEffect)((function(){a()}),[]),(0,c.useEffect)((function(){}),[n]);var a=function(){r(e.choices.map((function(e){return null})))},o=function(e){return[e.reduce((function(e,t){return t&&(e+=t.cost),e}),0),e.reduce((function(e,t){return t&&(e+=t.use),e}),0)]},i=(0,c.useCallback)(function(){var t=M(regeneratorRuntime.mark((function t(n){var r,c,i,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.curPrompt.Trigger_next,Number.isInteger(parseInt(r))&&(console.log("Checking trigger next: ",parseInt(r)),e.changePrompt(parseInt(r))),c=o(n),i=Y(c,2),s=i[0],l=i[1],e.updateDollars(-parseInt(s)),e.updatePerformance(parseInt(l)),a();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),s=(0,c.useCallback)(M(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("previous prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1)),a();case 2:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"choices"},c.createElement("div",{className:"row"},e.choices.map((function(t,a){var o=e.choices_values[a].split("_")[0],i=e.choices_values[a].split("_")[1];return c.createElement("div",{className:"selectionbutton",key:a,onClick:function(e){!function(e,t,a,c){var o,i=function(e){if(Array.isArray(e))return F(e)}(o=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||H(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n[t]?i[t]=null:i[t]={obj:e.target,cost:parseInt(a),use:parseInt(c)},r(i)}(e,a,o,i)}},c.createElement("div",{id:a,className:"butn"},c.createElement("div",{className:"holder selectionBox"},n[a]?"X":""),c.createElement("div",{className:"holder label"},c.createElement("h4",null,t),c.createElement("p",null,o," JETONS"))))}))),c.createElement(q,{showTWh:!1,dollars:n&&n.length>0?e.gauges.props.dollars-o(n)[0]:e.gauges.props.dollars,committed:n&&n.length>0?o(n)[0]:0,performance:e.gauges.props.performance}),c.createElement("div",{className:"row"},c.createElement("div",{className:"column"},e.curIndex>0?c.createElement("div",{className:"actionbutton prev",onClick:s},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))):c.createElement("div",null)),c.createElement("div",{className:"column"},c.createElement("div",{className:"actionbutton next ".concat(n?"":"disabled"),onClick:function(){n?i(n):console.log("Disabled.")}},c.createElement("div",{className:"butn"},c.createElement("p",null,"Next"))))))}function G(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){G(c,r,a,o,i,"next",e)}function i(e){G(c,r,a,o,i,"throw",e)}o(void 0)}))}}function $(e){var t=(0,c.useCallback)(Q(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("prev prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1));case 1:case"end":return t.stop()}}),t)})))),n=(0,c.useCallback)(Q(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.curPrompt.Trigger_next,Number.isInteger(parseInt(n))&&(console.log("Checking trigger next: ",parseInt(n)),e.changePrompt(parseInt(n)));case 2:case"end":return t.stop()}}),t)}))));return c.createElement("div",{className:"printprompt"},c.createElement("div",{className:"message"},c.createElement("p",null,e.message)),c.createElement("div",{className:"actionbutton prev",onClick:t},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))),c.createElement("div",{className:"actionbutton next",onClick:n},c.createElement("div",{className:"butn"},c.createElement("p",null,"Suivant"))))}function K(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){K(c,r,a,o,i,"next",e)}function i(e){K(c,r,a,o,i,"throw",e)}o(void 0)}))}}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){if(e){if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e){var t=te((0,c.useState)(0),2),n=t[0],r=t[1],a=te((0,c.useState)(0),2),o=a[0],i=a[1],s=te((0,c.useState)([]),2),l=s[0],u=s[1],m=te((0,c.useState)([]),2),d=m[0],p=m[1];(0,c.useEffect)((function(){var e=h(),t=e.map((function(){return 0})),n=e.map((function(e){return e.unitValue}));u(t),p(n)}),[]),(0,c.useEffect)((function(){var e=l.reduce((function(e,t,n){return h()[n],e+t}),0),t=l.reduce((function(e,t,n){var r=h()[n];return e+Math.round(t/r.unitValue*r.unitTWhvalue)}),0);r(e),i(t)}),[l]);var f=(0,c.useCallback)(ee(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.curIndex>0&&(console.log("prev prompt!",e.curIndex-1),e.changePrompt(e.curIndex-1));case 1:case"end":return t.stop()}}),t)})))),v=(0,c.useCallback)(ee(regeneratorRuntime.mark((function t(){var r,a,c,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=String(e.curPrompt.Trigger_next).split("_"),1==(a=String(r[0]).split(";")).length&&Number.isInteger(parseInt(a[0]))?(console.log("Checking trigger next: ",a),e.changePrompt(parseInt(a))):a.length>1&&(l.every((function(e){return e===l[0]}))?(o=r[1],e.changePrompt(parseInt(o))):(c=l.reduce((function(e,t,n,r){return t>r[e]?n:e}),0),Number.isInteger(parseInt(a[c]))&&(console.log("Checking trigger next: ",a[c]),e.changePrompt(parseInt(a[c]))))),e.updateDollars(-n);case 4:case"end":return t.stop()}}),t)})))),g=function(e,t){var n=t.split("_");return{name:e,unitValue:parseInt(n[0]),unitTWhvalue:parseInt(n[2])}},h=function(){return e.choices.map((function(t,n){return g(t,e.choices_values[n])}))},y=function(e,t,n,r){var a,c,o,i=function(e){if(Array.isArray(e))return re(e)}(o=l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||ne(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();i[t]+n*d[t]>=0&&(n>0?(a=n*d[t],c=0,l.forEach((function(e,t){c+=e})),c+a>20||(i[t]=i[t]+n*d[t])):i[t]=i[t]+n*d[t],u(i))};return c.createElement("div",{className:"repartition"},c.createElement("div",{className:"optionZone"},e.choices.map((function(t,n){return g(t,e.choices_values[n])})).map((function(e,t){return c.createElement("div",{className:"optionUnit",key:t},c.createElement("div",{className:"selectorZone"},c.createElement("div",{className:"division minusZone",onClick:function(e){return y(0,t,-1)}},c.createElement("h3",null,"-")),c.createElement("div",{className:"division centralZone"},c.createElement("h3",null,l[t])),c.createElement("div",{className:"division plusZone",onClick:function(e){return y(0,t,1)}},c.createElement("h3",null,"+"))),c.createElement("div",{className:"textZone"},c.createElement("h3",null,e.name),c.createElement("div",{className:"inlinetext"},c.createElement("h5",null,e.unitValue," jetons • ",e.unitTWhvalue," TWh"))))}))),c.createElement(q,{showTWh:!0,dollars:e.gauges.props.dollars-n,committed:n,performance:e.gauges.props.performance,terawatts:o}),e.curIndex>0?c.createElement("div",{className:"actionbutton prev",onClick:f},c.createElement("div",{className:"butn"},c.createElement("p",null,"Previous"))):c.createElement("div",null),c.createElement("div",{className:"actionbutton next",onClick:v},c.createElement("div",{className:"butn"},c.createElement("p",null,"Suivant"))))}function ce(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ce(c,r,a,o,i,"next",e)}function i(e){ce(c,r,a,o,i,"throw",e)}o(void 0)}))}}function ie(e){(0,c.useEffect)((function(){}),[]);var t=(0,c.useCallback)(function(){var t=oe(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.changePrompt(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n=(0,c.useCallback)(function(){var t=oe(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Number.isInteger(n)&&e.updateDollars(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r=(0,c.useCallback)(function(){var t=oe(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Number.isInteger(n)&&e.updatePerformance(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return c.createElement("div",{className:"gameBox"},c.createElement("div",{className:"promptBox"},c.createElement("div",{className:"header"},c.createElement("div",{className:"surtitre"},c.createElement("h4",null,(0,i.ZP)(e.curPrompt.Sujet))),c.createElement("div",{className:"question"},c.createElement("p",null,(0,i.ZP)(e.curPrompt.Texte)))),function(a){switch(a){case"Repartition":return c.createElement(ae,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),choices_values:String(e.curPrompt.Choix_Valeurs).split(";"),changePrompt:t,curIndex:e.curIndex,updateDollars:n,gauges:e.gauges});case"Carte":case"Suivi":default:return c.createElement(B,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),changePrompt:t,curIndex:e.curIndex});case"texteBoutonSimple":return c.createElement($,{curPrompt:e.curPrompt,message:String(e.curPrompt.Texte_Supp),changePrompt:t,curIndex:e.curIndex});case"ChoixReponse":case"Catastrophe":return c.createElement(B,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),choices_values:String(e.curPrompt.Choix_Valeurs).split(";"),changePrompt:t,curIndex:e.curIndex,updateDollars:n,updatePerformance:r,gauges:e.gauges});case"MultiSelection":return c.createElement(J,{curPrompt:e.curPrompt,choices:String(e.curPrompt.Choix).split(";"),choices_values:String(e.curPrompt.Choix_Valeurs).split(";"),changePrompt:t,curIndex:e.curIndex,updateDollars:n,updatePerformance:r,gauges:e.gauges})}}(e.curPrompt.Type)))}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ue(e){var t=se((0,c.useState)("IDLE"),2),n=t[0],r=t[1],a=se((0,c.useState)(0),2),o=a[0],i=a[1],s=se((0,c.useState)(50),2),l=s[0],u=s[1],m=se((0,c.useState)(50),2),d=m[0],p=m[1];(0,c.useEffect)((function(){console.log("checking props mapObj:",e.mapObj)}),[]),(0,c.useEffect)((function(){console.log("game ",n)}),[n]),(0,c.useEffect)((function(){v(o)}),[o]);var f=function(){r("END")},v=function(t){console.log("current game prompt:",e.gameData.filter((function(e){return String(e.ID)===String(t)})))};return"IDLE"===n?c.createElement("div",{className:"gameScreen"},c.createElement(L,{introElem:e.introElem,mapObj:e.mapObj,gameStart:function(){r("STARTED"),i(0)}})):"END"===n?c.createElement("div",null):c.createElement("div",{className:"gameScreen"},c.createElement(ie,{curIndex:o,curPrompt:e.gameData[o],changePrompt:i,updateDollars:function(e){l+e>=0?u((function(t){return t+e})):f()},updatePerformance:function(e){d+e>=0?p((function(t){return t+e})):f()},gauges:c.createElement(R,{dollars:l,performance:d})}))}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(97762);var de=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t;var c=this.container.append("div").classed("rootElem",!0);this.engineRoot=j.createRoot(c.node()),this.optionData=n,this.amorce=r.TEXTE,this.gameData=a,console.log("game Data is : ",this.gameData),this.initEngine()}var t,n;return t=e,(n=[{key:"initEngine",value:function(){var e=c.createElement(o,{key:"gameIntro",sectionType:h,optionData:this.optionData,amorce:this.amorce,background:null,classes:""});this.engineRoot.render(c.createElement(ue,{introElem:e,gameStatus:this.gameStatus,gameData:this.gameData}))}}])&&me(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pe(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){pe(c,r,a,o,i,"next",e)}function i(e){pe(c,r,a,o,i,"throw",e)}o(void 0)}))}}function ve(e,t){return ge.apply(this,arguments)}function ge(){return(ge=fe(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.gyn("https://docs.google.com/spreadsheets/d/e/2PACX-1vQQZ3sz0q1vnZmoYYR5IrCfuONhHcNw50iDtbg1H2mIX8lHDL1BQ4sAMi7iApSE1G9WQTW2jHcWv4KW/pub?gid=1497861017&single=true&output=csv").then((function(e){var r=C.Ys(".game-area");return new de(r,O(n),t[0],e),he(t,n),[[function(){}]]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t){var n=A(e,t);console.log("checking structure:",n),n.map((function(e){"viz-section"===e.sectionType&&e.steps.map((function(t,n){""!==t.visual&&(0===n?C.Ys("#".concat(e.key,"_").concat(n)).style("opacity",1):C.Ys("#".concat(e.key,"_").concat(n)).style("opacity",0))}))}))}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var be=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.index=n,this.callback=r,this._isActivate=!1}var t,n;return t=e,(n=[{key:"activate",value:function(e){this._isActivate||(this._isActivate=!0,this.el.classList.add("active"),this.callback(e))}},{key:"deactivate",value:function(){this._isActivate&&(this._isActivate=!1,this.el.classList.remove("active"))}}])&&Ee(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),xe=n(52732),we=n.n(xe),Se=n(89438);function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ie(e,t){var n=[];[".viz",".full-page-section > img",".full-page-section > video"].forEach((function(e){n=n.concat(Array.from(document.querySelectorAll(e)))})),(0,Se.Z)(n,{stickyBitStickyOffset:40}),new(we())({elements_selector:".lazy",threshold:500}),Promise.all([ve(e,t)]).then((function(e){var t,n;(function(e){var t=0,n=0,r=window.innerHeight,a=!1,c=0,o=[],i=[],s=[],l=document.querySelector(".article-reminder"),u=document.querySelector("header > .progress"),m=document.querySelector(".intro-section h1"),d=document.querySelectorAll(".viz-section");if(d.length!==e.length)throw new Error("The number of viz sections (".concat(d.length,") mismatch with the length of the first ")+"dimension of the callbacks array (".concat(e.length,"). Please, be sure that the two elements ")+"have the same size.");d.forEach((function(t,n){var r,a=function(e){if(Array.isArray(e))return ye(e)}(r=t.querySelectorAll("section"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(a.length!==e[n].length)throw new Error("The number of steps (".concat(a.length,") in the viz section #").concat(n+1," mismatch with the ")+"number of callbacks specified (".concat(e[n].length,') at the index "').concat(n,'". Please, be sure that the two ')+"elements have the same size.");o=o.concat(a.map((function(t,r){return new be(t,"".concat(n,"-").concat(r),e[n][r])}))),i=i.concat(i,t.querySelector(".viz > *"))}));var p=function(){var e=window.pageYOffset||document.documentElement.scrollTop;o.forEach((function(e){var a=e.el.getBoundingClientRect();r-a.top-n>0&&a.top+a.height-t>0?s.push(e):e.deactivate()}));var a=m.getBoundingClientRect().bottom<=0,i=l.classList.contains("visible");a&&!i?l.classList.add("visible"):!a&&i&&l.classList.remove("visible"),s.forEach((function(t,n){e>=c?n===s.length-1?t.activate("down"):t.deactivate():0===n?t.activate("up"):t.deactivate()})),f(),s=[],c=e},f=function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;u.style.width=e+"%"},v={initialize:function(){if(a)throw new Error("The scroller is already initialized.");return a=!0,window.addEventListener("scroll",p),window.addEventListener("resize",(function(){r=window.innerHeight,f()})),(window.pageYOffset||document.documentElement.scrollTop)>0&&p(),f(),v},offsetTop:function(e){if(void 0===e)return t;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return t=e,v},offsetBottom:function(e){if(void 0===e)return n;if(!Number.isInteger(e))throw new Error("The offset must be an integer number.");return n=e,v}};return v})((t=e,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]).offsetTop(40).offsetBottom(0).initialize()}))}function ke(e){return e.rendered&&(0,c.useEffect)((function(){Ie(e.contentData,e.paramsData)}),[]),t=A(e.contentData,e.paramsData),n={},Object.keys(t).map((function(e,r){var a=t[e];a.sectionType===h?n[e]=c.createElement(o,{key:a.key,sectionType:a.sectionType,optionData:a.optionData,amorce:(0,i.ZP)(a.amorce),background:a.background,classes:a.classes}):a.sectionType===E?n[e]=c.createElement(s,{key:a.key,id:a.key,sectionType:a.sectionType,texts:a.texts,background:a.background,classes:a.classes,visuelclasses:a.visuelclasses,visual:a.visual,filename:a.filename}):a.sectionType===y?n[e]=c.createElement(P,{key:a.key,id:a.key,sectionType:a.sectionType,background:a.background,classes:a.classes,visuelclasses:a.visuelclasses,visual:a.visual,mainTitle:a.texts.mainTitle,subTitle:a.texts.subTitle,filename:a.filename}):a.sectionType===b&&(n[e]=c.createElement(T,{key:a.key,listID:a.listID,steps:a.steps,classed:a.classed,mediaInfo:a.mediaInfo,background:a.background}))})),Object.values(n);var t,n}document.querySelector("#root").innerHTML=r.E,Promise.all([Promise.resolve().then(n.t.bind(n,20745,19)),Promise.resolve().then(n.t.bind(n,67294,19))]).then((function(e){var t=e[0],n=e[1];C.gyn(a.google_config.contentURL).then((function(e){C.gyn(a.google_config.paramsURL).then((function(r){t.createRoot(document.getElementById("root")).render(n.createElement(ke,{contentData:e,paramsData:r,rendered:!0})),document.querySelector("#footerContainer").innerHTML=C.Ys("#footerContent").node().innerHTML}))}))}))},40207:e=>{e.exports={google_config:{contentURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=0&single=true&output=csv",paramsURL:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSEywJE0VUgy3Nsq3Tg_oh-Vs633TSimdIHfkXTyz9BbEtWNVgurd1Tou-Q5anvdOiw3coCFkDCiSYq/pub?gid=409950237&single=true&output=csv",localContentURL:"./data/structure/contentData.csv",localParamsURL:"./data/structure/paramsData.csv"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[216],(()=>(t(28594),t(35666),t(47090)))),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvY29tcG9uZW50cy9JbnRyb1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dFNlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2NvbXBvbmVudHMvRFdDaGFydC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvY29tcG9uZW50cy9WaXpTZWN0aW9uLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9jb21wb25lbnRzL0Z1bGxQYWdlU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2VuZXJhdG9yL3N0cnVjdHVyZUdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uLi9sZWRldm9pci1kYXRhdml6L3NyYy9tYXBzL2ludGVyYWN0aXZlLW1hcC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uLi9sZWRldm9pci1kYXRhdml6L3NyYy9ncmFwaHMvc3RhY2tlZEFyZWFDaGFydC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL2dhdWdlcy9HYXVnZXMuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9pbnRyb0JveC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL2dhdWdlcy9Nb25pdG9yaW5nLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9DaG9pY2UuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9wcm9tcHRmaWxsL011bHRpU2VsZWN0aW9uLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nYW1lL2NvbXBvbmVudHMvcHJvbXB0ZmlsbC9QcmludFByb21wdC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvZ2FtZS9jb21wb25lbnRzL3Byb21wdGZpbGwvUmVwYXJ0aXRpb24uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9Qcm9tcHRCb3guanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvY29tcG9uZW50cy9tYWluZnJhbWUuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL2dhbWUvZW5naW5lLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC92aXouanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3Njcm9sbGVyLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nZW5lcmF0b3IvaW5pdFNjcm9sbGVyLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9nZW5lcmF0b3IvUmVuZGVyU3RydWN0dXJlLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9hcHAuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvZGF0YS9nb29nbGVfY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIEludHJvU2VjdGlvbihwcm9wcyl7XG5cblxuICAgIGxldCBpbnRyb1NlY3Rpb25PYmogPSAoXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT17YGludHJvLXNlY3Rpb24gJHtwcm9wcy5jbGFzc2VzfWB9PlxuICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cIm92ZXJUaXRsZVwiPlxuICAgICAgICAgICAgICB7cHJvcHMuYW1vcmNlfVxuICAgICAgICAgICAgPC9oNT5cbiAgICAgICAgICAgIDxoMT57cHJvcHMub3B0aW9uRGF0YS50aXRsZX08L2gxPlxuICAgICAgICAgICAgPGFkZHJlc3M+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkYXRlXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2FkZHJlc3M+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICApO1xuICAgIGxldCBjb250YWluZWRPYmogPSBwcm9wcy5iYWNrZ3JvdW5kID9cbiAgICAgICAgKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogYCR7cHJvcHMuYmFja2dyb3VuZH1gfX0gY2xhc3NOYW1lPXtcInNlY3Rpb25Db250YWluZXJcIn0+XG4gICAgICAgICAgICAgICAge2ludHJvU2VjdGlvbk9ian1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgICAgIDpcbiAgICAgICAgKFxuICAgICAgICAgICAgaW50cm9TZWN0aW9uT2JqXG4gICAgICAgIClcblxuICAgIHJldHVybiAoXG4gICAgICAgIGNvbnRhaW5lZE9ialxuICAgIClcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFRleHRTZWN0aW9uKHByb3BzKXtcclxuXHJcbiAgICBsZXQgaXNRdW90ZSA9IFN0cmluZyhwcm9wcy5jbGFzc2VzKS5pbmNsdWRlcygnY2l0YXRpb24nKTtcclxuICAgIGxldCBxdW90ZU9iajtcclxuICAgIGlmKGlzUXVvdGUpe1xyXG4gICAgICAgIHF1b3RlT2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OlN0cmluZyhwcm9wcy50ZXh0cykuc3BsaXQoJy8nKVswXSxcclxuICAgICAgICAgICAgYXV0aG9yOlN0cmluZyhwcm9wcy50ZXh0cykuc3BsaXQoJy8nKVsxXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlzQmlnTnVtYmVyID0gU3RyaW5nKHByb3BzLmNsYXNzZXMpLmluY2x1ZGVzKCdiaWdOdW1iZXInKTtcclxuICAgIGxldCBiaWdOdW1iZXJPYmo7XHJcbiAgICBpZihpc0JpZ051bWJlcil7XHJcbiAgICAgICAgYmlnTnVtYmVyT2JqID0ge1xyXG4gICAgICAgICAgICBudW1iZXI6U3RyaW5nKHByb3BzLnRleHRzKS5zcGxpdCgnLycpWzBdLFxyXG4gICAgICAgICAgICB1bmRlclRleHQ6U3RyaW5nKHByb3BzLnRleHRzKS5zcGxpdCgnLycpWzFdXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaXNWaXN1YWwgPSBwcm9wcy52aXN1YWw7XHJcbiAgICBsZXQgdmlzdWFsT2JqID0gKFxyXG4gICAgICAgIChpc1Zpc3VhbCAhPT0gXCJcIikgPyBcclxuICAgICAgICAgICAgcHJvcHMudmlzdWFsID09PSBcIlBob3RvXCIgPyBcclxuICAgICAgICAgICAgICAgIDxpbWcgXHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtgcGhvdG9UZXh0U2VjdGlvbl8ke3Byb3BzLmlkfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9e2BwaG90b1RleHRTZWN0aW9uXyR7cHJvcHMuaWR9YH1cclxuICAgICAgICAgICAgICAgICAgICBzcmM9e2Bhc3NldHMvaW1nLzY3NS8ke3Byb3BzLmZpbGVuYW1lfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS1zcmNzZXQ9e2Bhc3NldHMvaW1nLzIwNDgvJHtwcm9wcy5maWxlbmFtZX0gMjA0OHcsIGFzc2V0cy9pbWcvOTkwLyR7cHJvcHMuZmlsZW5hbWV9IDk5MHcsIGFzc2V0cy9pbWcvNjc1LyR7cHJvcHMuZmlsZW5hbWV9IDY3NXcsIGFzc2V0cy9pbWcvMTM1MC8ke3Byb3BzLmZpbGVuYW1lfSAxMzUwdywgYXNzZXRzL2ltZy8xMDAvJHtwcm9wcy5maWxlbmFtZX0gMTAwdywgYXNzZXRzL2ltZy80OTUvJHtwcm9wcy5maWxlbmFtZX0gNDk1dywgYXNzZXRzL2ltZy8xMDI0LyR7cHJvcHMuZmlsZW5hbWV9IDEwMjR3YH1cclxuICAgICAgICAgICAgICAgICAgICBkYXRhLXNpemVzPVwiKG1heC13aWR0aDogMTAwcHgpIDEwMHB4LCAobWF4LXdpZHRoOiA0OTVweCkgNDk1cHgsIChtYXgtd2lkdGg6IDY3NXB4KSA2NzVweCwgKG1heC13aWR0aDogOTkwcHgpIDk5MHB4LCAobWF4LXdpZHRoOiAgMTAyNHB4KSAxMDI0cHgsIChtYXgtd2lkdGg6ICAxMzUwcHgpIDEzNTBweCwgKG1heC13aWR0aDogIDIwNDhweCkgMjA0OHB4XCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BsYXp5ICR7cHJvcHMudmlzdWVsY2xhc3Nlc31gfVxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogJzFyZW0nfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgcHJvcHMudmlzdWFsID09PSBcIlZpZGVvXCIgPyBcclxuICAgICAgICAgICAgICAgIDx2aWRlbyBhdXRvUGxheSBsb29wIG11dGVkIHBsYXlzSW5saW5lIGNsYXNzTmFtZT17YHZpZGVvICR7cHJvcHMudmlzdWVsY2xhc3Nlc31gfSBwcmVsb2FkPVwibWV0YWRhdGFcIiBrZXk9e2B2aWRlb1RleHRTZWN0aW9uXyR7cHJvcHMuaWR9YH0gaWQ9e2B2aWRlb1RleHRTZWN0aW9uXyR7cHJvcHMuaWR9YH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNvdXJjZSBzcmM9e2Bhc3NldHMvdmlkZW9zLyR7cHJvcHMuZmlsZW5hbWV9YH0vPlxyXG4gICAgICAgICAgICAgICAgICAgIFZpZMOpbyBub24gc3VwcG9ydMOpZS4gUsOpLWVzc2F5ZXogc3VyIHVuIGF1dHJlIGFwcGFyZWlsIG91IGZ1cmV0ZXVyLlxyXG4gICAgICAgICAgICAgICAgPC92aWRlbz5cclxuICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgOlxyXG4gICAgICAgIDxkaXY+PC9kaXY+XHJcbiAgICApXHJcblxyXG4gICAgbGV0IHRleHRTZWN0aW9uT2JqID0gKFxyXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT17YHRleHQtc2VjdGlvbiAke3Byb3BzLmNsYXNzZXN9YH0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpc1F1b3RlID8gXHJcbiAgICAgICAgICAgIDxibG9ja3F1b3RlIGNsYXNzTmFtZT1cInNtYWxsXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGI+XHJcbiAgICAgICAgICAgICAgICAgICAge3BhcnNlKHF1b3RlT2JqLnRleHQpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvYj5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImF1dGhvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtxdW90ZU9iai5hdXRob3J9XHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN5bWJvbFwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvYmxvY2txdW90ZT5cclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICBpc0JpZ051bWJlciA/XHJcbiAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXItbnVtYmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibnVtYmVyc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyPntiaWdOdW1iZXJPYmoubnVtYmVyfTwvaDI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c21hbGw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2JpZ051bWJlck9iai51bmRlclRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NtYWxsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Zpc3VhbCA/IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc3VhbE9ialxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nKHByb3BzLnRleHRzKS5zdGFydHNXaXRoKCc8JykgPyAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZShwcm9wcy50ZXh0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPntwYXJzZShwcm9wcy50ZXh0cyl9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIDwvc2VjdGlvbj5cclxuICAgICk7XHJcbiAgICBsZXQgY29udGFpbmVkT2JqID0gcHJvcHMuYmFja2dyb3VuZCA/IFxyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6IGAke3Byb3BzLmJhY2tncm91bmR9YH19IGNsYXNzTmFtZT17XCJzZWN0aW9uQ29udGFpbmVyXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGV4dFNlY3Rpb25PYmp9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFNlY3Rpb25PYmpcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIGNvbnRhaW5lZE9ialxyXG4gICAgKVxyXG59IiwiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRFdDaGFydCh7IHRpdGxlLCBzcmMsIC4uLnByb3BzIH0pIHtcclxuICBjb25zdCBpZnJhbWVSZWYgPSB1c2VSZWYoKVxyXG4gIGNvbnN0IFtoZWlnaHQsIHNldFN0YXRlXSA9IHVzZVN0YXRlKDUwMClcclxuXHJcbiAgY29uc3Qgb25NZXNzYWdlID0gdXNlQ2FsbGJhY2soXHJcbiAgICAoeyBkYXRhID0ge30sIHNvdXJjZSB9KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBzb3VyY2UgIT09IGlmcmFtZVJlZi5jdXJyZW50LmNvbnRlbnRXaW5kb3cgfHxcclxuICAgICAgICB0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgfHxcclxuICAgICAgICAhZGF0YVsnZGF0YXdyYXBwZXItaGVpZ2h0J11cclxuICAgICAgKVxyXG4gICAgICAgIHJldHVyblxyXG5cclxuICAgICAgLy9zZXRTdGF0ZShPYmplY3QudmFsdWVzKGRhdGFbJ2RhdGF3cmFwcGVyLWhlaWdodCddKVswXSlcclxuICAgIH0sXHJcbiAgICBbc2V0U3RhdGUsIGlmcmFtZVJlZl1cclxuICApXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uTWVzc2FnZSlcclxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uTWVzc2FnZSlcclxuICB9LCBbaGVpZ2h0LCBzZXRTdGF0ZSwgb25NZXNzYWdlXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxpZnJhbWVcclxuICAgICAgcmVmPXtpZnJhbWVSZWZ9XHJcbiAgICAgIHNjcm9sbGluZz1cIm5vXCJcclxuICAgICAgZnJhbWVCb3JkZXI9XCIwXCJcclxuICAgICAgd2lkdGg9XCIxMDAlXCJcclxuICAgICAgey4uLnByb3BzfVxyXG4gICAgICB0aXRsZT17dGl0bGV9XHJcbiAgICAgIHNyYz17c3JjfVxyXG4gICAgICBoZWlnaHQ9e2hlaWdodH1cclxuICAgIC8+XHJcbiAgKVxyXG59XHJcblxyXG5EV0NoYXJ0LnByb3BUeXBlcyA9IHtcclxuICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gIHNyYzogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gIGxvYWRpbmc6IFByb3BUeXBlcy5vbmVPZihbJ2VhZ2VyJywgJ2xhenknXSksXHJcbn0iLCJleHBvcnQgY29uc3QgY29udGVudEhlYWRlckNvbnN0YW50cyA9IHtcbiAgICBzZWN0aW9uOiBcIlNlY3Rpb25cIixcbiAgICBzZWN0aW9uSUQ6IFwiU2VjdGlvbklEXCIsXG4gICAgYXR0cmlidXRzOiBcIkF0dHJpYnV0c1wiLFxuICAgIHNvdXNzZWN0aW9uOiBcIlN0ZXBcIixcbiAgICB0ZXh0ZTogXCJURVhURVwiLFxuICAgIHZpc3VlbDogXCJWSVNVRUxcIixcbiAgICBub21maWNoaWVyc291cmNlOiBcIk5vbUZpY2hpZXJTb3VyY2VcIixcbiAgICBzdHlsZWZvbmQ6IFwiU3R5bGVGb25kXCIsXG4gICAgc3RlcGNsYXNzZXM6IFwiU3RlcENsYXNzZXNcIixcbiAgICB2aXN1ZWxjbGFzc2VzOiBcIlZpc3VlbENsYXNzZXNcIixcbiAgICBub3RlczogXCJOb3Rlc1wiLFxuICAgIGdhbWVpZDogXCJHYW1lSURcIlxufTtcblxuZXhwb3J0IGNvbnN0IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cyA9IHtcbiAgICBzZWN0aW9udHlwZXM6IHtcbiAgICAgICAgaW50cm90aXRyZTogXCJpbnRyby10aXRyZVwiLFxuICAgICAgICBwbGVpbmVwYWdldGl0cmU6IFwicGxlaW5lLXBhZ2UtdGl0cmVcIixcbiAgICAgICAgdGV4dGVjbGFzc2lxdWU6IFwidGV4dGUtY2xhc3NpcXVlXCIsXG4gICAgICAgIHZpenNlY3Rpb246IFwidml6LXNlY3Rpb25cIlxuICAgIH0sXG4gICAgc2VjdGlvbmF0dHJpYnV0ZXM6e1xuICAgICAgICBwbGVpbmVwYWdlOiBcInBsZWluZS1wYWdlXCIsXG4gICAgICAgIGZvbmRub2lyOiBcImZvbmQtbm9pclwiLFxuICAgICAgICBjZW50cmU6IFwiY2VudHLDqVwiLFxuICAgICAgICBjb3RlY290ZTogXCJjw7R0w6ktY8O0dMOpXCJcbiAgICB9LFxuICAgIHZpc3VlbHR5cGVzOntcbiAgICAgICAgcGhvdG86IFwiUGhvdG9cIixcbiAgICAgICAgdmlkZW86IFwiVmlkZW9cIixcbiAgICAgICAgYXVkaW86IFwiQXVkaW9cIixcbiAgICAgICAgdmlzdWFsaXNhdGlvbjogXCJWaXN1YWxpc2F0aW9uXCIsXG4gICAgICAgIGlmcmFtZTogXCJpZnJhbWVcIlxuICAgIH0sXG4gICAgc291c3NlY3Rpb250eXBlczp7XG4gICAgICAgIHNjcm9sbG5vcm1hbDogXCJzY3JvbGwtbm9ybWFsXCIsXG4gICAgICAgIHNjcm9sbGludmlzaWJsZTogXCJzY3JvbGwtaW52aXNpYmxlXCIsXG4gICAgICAgIHNjcm9sbGxvbmc6IFwic2Nyb2xsLWxvbmdcIlxuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCBwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzID0ge1xuICAgIHRpdHJlOiBcIlRpdHJlXCIsXG4gICAgYXV0ZXVyczogXCJBdXRldXJzXCIsXG4gICAgZGF0ZTogXCJEYXRlXCIsXG4gICAgZGF0ZTogXCJEYXRlXCIsXG4gICAgdXJsczogXCJMaWVuQXV0ZXVyc1wiLFxuICAgIGxpZW5maWNoaWVyc291cmNlOiBcIkxpZW5GaWNoaWVyU291cmNlXCJcbn07XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBwYXJzZSBmcm9tIFwiaHRtbC1yZWFjdC1wYXJzZXJcIjtcbmltcG9ydCBEV0NoYXJ0IGZyb20gXCIuL0RXQ2hhcnRcIjtcbmltcG9ydCB7IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cyB9IGZyb20gXCIuLi9nZW5lcmF0b3IvY29uc3RhbnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBWaXpTZWN0aW9uKHByb3BzKXtcblxuICAgIGxldCB2aXpTZWN0aW9uT2JqID0gKFxuICAgICAgICA8c2VjdGlvbiBpZD17cHJvcHMubGlzdElEfSBjbGFzc05hbWU9e3Byb3BzLmNsYXNzZWR9PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHN0ZXBzICR7Z2V0U3RlcENvbW1vbkNsYXNzKHByb3BzLnN0ZXBzKX1gfT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuc3RlcHMubWFwKChzdGVwLGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzdGVwIGlzICcsIHN0ZXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzUXVvdGUgPSBTdHJpbmcoc3RlcC5zdGVwY2xhc3NlcykuaW5jbHVkZXMoJ2NpdGF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcXVvdGVPYmo7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpc1F1b3RlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZU9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDpTdHJpbmcoc3RlcC50ZXh0KS5zcGxpdCgnLycpWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRob3I6U3RyaW5nKHN0ZXAudGV4dCkuc3BsaXQoJy8nKVsxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGtleT17aW5kZXh9IGNsYXNzTmFtZT17c3RlcC5zdGVwY2xhc3Nlc30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUXVvdGUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJsb2NrcXVvdGUgY2xhc3NOYW1lPVwic21hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Yj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3BhcnNlKHF1b3RlT2JqLnRleHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2I+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImF1dGhvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cXVvdGVPYmouYXV0aG9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN5bWJvbFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9ibG9ja3F1b3RlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nKHN0ZXAudGV4dCkuc3RhcnRzV2l0aCgnPCcpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZShzdGVwLnRleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57c3RlcC50ZXh0ID8gcGFyc2Uoc3RlcC50ZXh0KSA6IFwiXCJ9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2aXpcIiBpZD1cInZpelwiPlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuc3RlcHMubWFwKChzdGVwLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3RlcC52aXN1YWwgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy52aXN1ZWx0eXBlcy5waG90byl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17YGFzc2V0cy9pbWcvNjc1LyR7c3RlcC5maWxlbmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1zcmNzZXQ9e2Bhc3NldHMvaW1nLzIwNDgvJHtzdGVwLmZpbGVuYW1lfSAyMDQ4dywgYXNzZXRzL2ltZy85OTAvJHtzdGVwLmZpbGVuYW1lfSA5OTB3LCBhc3NldHMvaW1nLzY3NS8ke3N0ZXAuZmlsZW5hbWV9IDY3NXcsIGFzc2V0cy9pbWcvMTM1MC8ke3N0ZXAuZmlsZW5hbWV9IDEzNTB3LCBhc3NldHMvaW1nLzEwMC8ke3N0ZXAuZmlsZW5hbWV9IDEwMHcsIGFzc2V0cy9pbWcvNDk1LyR7c3RlcC5maWxlbmFtZX0gNDk1dywgYXNzZXRzL2ltZy8xMDI0LyR7c3RlcC5maWxlbmFtZX0gMTAyNHdgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1zaXplcz1cIihtYXgtd2lkdGg6IDEwMHB4KSAxMDBweCwgKG1heC13aWR0aDogNDk1cHgpIDQ5NXB4LCAobWF4LXdpZHRoOiA2NzVweCkgNjc1cHgsIChtYXgtd2lkdGg6IDk5MHB4KSA5OTBweCwgKG1heC13aWR0aDogIDEwMjRweCkgMTAyNHB4LCAobWF4LXdpZHRoOiAgMTM1MHB4KSAxMzUwcHgsIChtYXgtd2lkdGg6ICAyMDQ4cHgpIDIwNDhweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BsYXp5ICR7c3RlcC52aXN1ZWxjbGFzc2VzfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihzdGVwLnZpc3VhbCA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnZpc3VlbHR5cGVzLnZpZGVvKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dmlkZW8gYXV0b1BsYXkgbG9vcCBtdXRlZCBwbGF5c0lubGluZSBjbGFzc05hbWU9e2B2aWRlbyAke3N0ZXAudmlzdWVsY2xhc3Nlc31gfSBwcmVsb2FkPVwibWV0YWRhdGFcIiBrZXk9e2Ake3Byb3BzLmxpc3RJRH1fJHtpbmRleH1gfSBpZD17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNvdXJjZSBzcmM9e2Bhc3NldHMvdmlkZW9zLyR7c3RlcC5maWxlbmFtZX1gfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWTDqW8gbm9uIHN1cHBvcnTDqWUuIFLDqS1lc3NheWV6IHN1ciB1biBhdXRyZSBhcHBhcmVpbCBvdSBmdXJldGV1ci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC92aWRlbz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoc3RlcC52aXN1YWwgPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy52aXN1ZWx0eXBlcy5pZnJhbWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtgJHtwcm9wcy5saXN0SUR9XyR7aW5kZXh9YH0gaWQ9e2Ake3Byb3BzLmxpc3RJRH1fJHtpbmRleH1gfSBjbGFzc05hbWU9XCJpZnJhbWVDb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEV0NoYXJ0IHRpdGxlPVwiTWVzdXJlcyBkJ2Fyc2VuaWNcIiBzcmM9e2Ake3N0ZXAuZmlsZW5hbWV9YH0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHN0ZXAudmlzdWFsID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMudmlzdWVsdHlwZXMudmlzdWFsaXNhdGlvbil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2Ake3Byb3BzLmxpc3RJRH1fJHtpbmRleH1gfSBpZD17YCR7cHJvcHMubGlzdElEfV8ke2luZGV4fWB9IGNsYXNzTmFtZT17YGlmcmFtZUNvbnRhaW5lciAke3N0ZXAudmlzdWVsY2xhc3Nlc31gfT5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9zZWN0aW9uPlxuICAgICk7XG4gICAgbGV0IGNvbnRhaW5lZE9iaiA9IHByb3BzLmJhY2tncm91bmQgP1xuICAgICAgICAoXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBgJHtwcm9wcy5iYWNrZ3JvdW5kfWB9fSBjbGFzc05hbWU9e1wic2VjdGlvbkNvbnRhaW5lclwifT5cbiAgICAgICAgICAgICAgICB7dml6U2VjdGlvbk9ian1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgICAgIDpcbiAgICAgICAgKFxuICAgICAgICAgICAgdml6U2VjdGlvbk9ialxuICAgICAgICApXG5cbiAgICByZXR1cm4gKFxuICAgICAgICBjb250YWluZWRPYmpcbiAgICApXG59XG5cbmZ1bmN0aW9uIGdldFN0ZXBDb21tb25DbGFzcyhzdGVwcyl7XG4gICAgbGV0IGN1clN0ZXBDbGFzc2VzID0gc3RlcHMubWFwKChzdGVwLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4gc3RlcC5zdGVwY2xhc3NlcztcbiAgICB9KTtcbiAgICBsZXQgY3VyQ29tbW9uQ2xhc3MgPSBuZXcgQXJyYXkoY3VyU3RlcENsYXNzZXMubGVuZ3RoKTtcbiAgICBjdXJTdGVwQ2xhc3Nlcy5mb3JFYWNoKChzdGVwRWxlbSwgaWR4KSA9PiB7XG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoc3RlcEVsZW0pKXtcbiAgICAgICAgICAgIHN0ZXBFbGVtLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yKCBsZXQgaSA9IGlkeDsgaSA8IGN1clN0ZXBDbGFzc2VzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoY3VyU3RlcENsYXNzZXNbaV0uaW5jbHVkZXMoZWxlbSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ29tbW9uQ2xhc3NbaV0gPSAoZWxlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZihzdGVwRWxlbSkgPT09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgZm9yKCBsZXQgaSA9IGlkeDsgaSA8IGN1clN0ZXBDbGFzc2VzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZihjdXJTdGVwQ2xhc3Nlc1tpXS5pbmNsdWRlcyhzdGVwRWxlbSkpe1xuICAgICAgICAgICAgICAgICAgICBjdXJDb21tb25DbGFzc1tpXSA9IChzdGVwRWxlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGN1ckNvbW1vbkNsYXNzLnJlZHVjZShmdW5jdGlvbihhLCBiKXsgcmV0dXJuIChhID09PSBiICYmIGEgIT09IFwiXCIgJiYgYiAhPT0gXCJcIikgPyBhIDogXCJcIjsgfSk7XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gRnVsbFBhZ2VTZWN0aW9uKHByb3BzKXtcclxuXHJcbiAgICBsZXQgZnVsbHBhZ2VTZWN0aW9uT2JqID0gKFxyXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT17YGZ1bGwtcGFnZS1zZWN0aW9uICR7cHJvcHMuY2xhc3Nlc31gfT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aXRsZUltYWdlXCI+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuZmlsZW5hbWUgPyBcclxuICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnZpc3VhbCA9PT0gXCJQaG90b1wiID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake3Byb3BzLmlkfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Ake3Byb3BzLmlkfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtgYXNzZXRzL2ltZy82NzUvJHtwcm9wcy5maWxlbmFtZX1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtc3Jjc2V0PXtgYXNzZXRzL2ltZy8yMDQ4LyR7cHJvcHMuZmlsZW5hbWV9IDIwNDh3LCBhc3NldHMvaW1nLzk5MC8ke3Byb3BzLmZpbGVuYW1lfSA5OTB3LCBhc3NldHMvaW1nLzY3NS8ke3Byb3BzLmZpbGVuYW1lfSA2NzV3LCBhc3NldHMvaW1nLzEzNTAvJHtwcm9wcy5maWxlbmFtZX0gMTM1MHcsIGFzc2V0cy9pbWcvMTAwLyR7cHJvcHMuZmlsZW5hbWV9IDEwMHcsIGFzc2V0cy9pbWcvNDk1LyR7cHJvcHMuZmlsZW5hbWV9IDQ5NXcsIGFzc2V0cy9pbWcvMTAyNC8ke3Byb3BzLmZpbGVuYW1lfSAxMDI0d2B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1zaXplcz1cIihtYXgtd2lkdGg6IDEwMHB4KSAxMDBweCwgKG1heC13aWR0aDogNDk1cHgpIDQ5NXB4LCAobWF4LXdpZHRoOiA2NzVweCkgNjc1cHgsIChtYXgtd2lkdGg6IDk5MHB4KSA5OTBweCwgKG1heC13aWR0aDogIDEwMjRweCkgMTAyNHB4LCAobWF4LXdpZHRoOiAgMTM1MHB4KSAxMzUwcHgsIChtYXgtd2lkdGg6ICAyMDQ4cHgpIDIwNDhweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbGF6eSAke3Byb3BzLnZpc3VlbGNsYXNzZXN9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy52aXN1YWwgPT09IFwiVmlkZW9cIiA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHZpZGVvIGF1dG9QbGF5IGxvb3AgbXV0ZWQgcGxheXNJbmxpbmUgY2xhc3NOYW1lPXtgdmlkZW8gJHtwcm9wcy52aXN1ZWxjbGFzc2VzfWB9IHByZWxvYWQ9XCJtZXRhZGF0YVwiIGtleT17YCR7cHJvcHMuaWR9YH0gaWQ9e2Ake3Byb3BzLmlkfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c291cmNlIHNyYz17YGFzc2V0cy92aWRlb3MvJHtwcm9wcy5maWxlbmFtZX1gfS8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpZMOpbyBub24gc3VwcG9ydMOpZS4gUsOpLWVzc2F5ZXogc3VyIHVuIGF1dHJlIGFwcGFyZWlsIG91IGZ1cmV0ZXVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdmlkZW8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPGRpdj48L2Rpdj4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICg8ZGl2PjwvZGl2PilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5maWxlbmFtZSA/IFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsdGVyXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXB0aW9uaG9sZGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPXtgY2FwdGlvbiAke3Byb3BzLm1haW5UaXRsZS5jbGFzc31gfT57cHJvcHMubWFpblRpdGxlLnRleHR9PC9oMj5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5zdWJUaXRsZSA/IFxyXG4gICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT17YGNhcHRpb24gJHtwcm9wcy5zdWJUaXRsZS5jbGFzc31gfT57cHJvcHMuc3ViVGl0bGUudGV4dH08L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICApO1xyXG4gICAgbGV0IGNvbnRhaW5lZE9iaiA9IHByb3BzLmJhY2tncm91bmQgPyBcclxuICAgICAgICAoXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6IGAke3Byb3BzLmJhY2tncm91bmR9YH19IGNsYXNzTmFtZT17XCJzZWN0aW9uQ29udGFpbmVyXCJ9PlxyXG4gICAgICAgICAgICAgICAge2Z1bGxwYWdlU2VjdGlvbk9ian1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKVxyXG4gICAgICAgIDpcclxuICAgICAgICAoXHJcbiAgICAgICAgICAgIGZ1bGxwYWdlU2VjdGlvbk9ialxyXG4gICAgICAgIClcclxuXHJcbiAgICByZXR1cm4gY29udGFpbmVkT2JqO1xyXG5cclxufSIsIlxuaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgeyBjb250ZW50SGVhZGVyQ29uc3RhbnRzLCBvcHRpb25zRHJvcGRvd25Db25zdGFudHMsIHBhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0cnVjdHVyZShjb250ZW50RGF0YSwgcGFyYW1zRGF0YSl7XG5cbiAgICBsZXQgc3RydWN0dXJlRGF0YSA9IHt9OyAvLyBXaG9sZSBzY3JvbGx5IHN0cnVjdHVyZVxuICAgIGxldCB2aXpTZWN0aW9uSURzID0gW107IC8vIExpc3Qgb2Ygc2VjdGlvbklEc1xuXG4gICAgbGV0IG9wdGlvbnMgPSBnZXRPcHRpb25zKHBhcmFtc0RhdGEpO1xuXG4gICAgY29uc29sZS5sb2coJ2NvbnRlbnQgRGF0YScsIGNvbnRlbnREYXRhKTtcbiAgICBjb250ZW50RGF0YS5tYXAoKHJvd0RhdGEsaW5kZXgpID0+IHtcblxuICAgICAgICBpZihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbl0gPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMuaW50cm90aXRyZSl7XG4gICAgICAgICAgICBsZXQgY2xhc3NlcyA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdGVwY2xhc3Nlc107XG4gICAgICAgICAgICBsZXQgY3VyQW1vcmNlID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXTtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uQmFja2dyb3VuZCA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdHlsZWZvbmRdO1xuICAgICAgICAgICAgc3RydWN0dXJlRGF0YVtyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXV0gPSB7XG4gICAgICAgICAgICAgICAga2V5OiBpbmRleCxcbiAgICAgICAgICAgICAgICBzZWN0aW9uVHlwZTogb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5pbnRyb3RpdHJlLFxuICAgICAgICAgICAgICAgIG9wdGlvbkRhdGE6IG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYW1vcmNlOiBjdXJBbW9yY2UsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogc2VjdGlvbkJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgY2xhc3NlczogcGFyc2VDbGFzc2VzKGNsYXNzZXMpLFxuICAgICAgICAgICAgICAgIGdhbWVpZDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLmdhbWVpZF1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbl0gPT09IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudGV4dGVjbGFzc2lxdWUpe1xuICAgICAgICAgICAgbGV0IHRleHRzID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXTtcbiAgICAgICAgICAgIGxldCBjbGFzc2VzID0gcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0ZXBjbGFzc2VzXTtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uQmFja2dyb3VuZCA9IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdHlsZWZvbmRdO1xuICAgICAgICAgICAgc3RydWN0dXJlRGF0YVtyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXV0gPSB7XG4gICAgICAgICAgICAgICAga2V5OiBpbmRleCxcbiAgICAgICAgICAgICAgICBzZWN0aW9uVHlwZTogb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy50ZXh0ZWNsYXNzaXF1ZSxcbiAgICAgICAgICAgICAgICB0ZXh0czogdGV4dHMsXG4gICAgICAgICAgICAgICAgdmlzdWFsOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsXSxcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLm5vbWZpY2hpZXJzb3VyY2VdLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHNlY3Rpb25CYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgIGNsYXNzZXM6IHBhcnNlQ2xhc3NlcyhjbGFzc2VzKSxcbiAgICAgICAgICAgICAgICB2aXN1ZWxjbGFzc2VzOiBwYXJzZUNsYXNzZXMocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbGNsYXNzZXNdKSxcbiAgICAgICAgICAgICAgICBnYW1laWQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5nYW1laWRdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25dID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnBsZWluZXBhZ2V0aXRyZSl7XG4gICAgICAgICAgICBsZXQgdGl0bGVPYmogPSByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdO1xuICAgICAgICAgICAgaWYgKGlzSnNvbihyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudGV4dGVdKSl7XG4gICAgICAgICAgICAgICAgbGV0IHRleHRPYmogPSBKU09OLnBhcnNlKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV0pO1xuICAgICAgICAgICAgICAgIHRpdGxlT2JqID0gdGV4dE9iajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0ge1xuICAgICAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICAgICAgc2VjdGlvblR5cGU6IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMucGxlaW5lcGFnZXRpdHJlLFxuICAgICAgICAgICAgICAgIHRleHRzOiBpc0pzb24ocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnRleHRlXSkgPyB0aXRsZU9ialxuICAgICAgICAgICAgICAgIDp7XG4gICAgICAgICAgICAgICAgICAgIG1haW5UaXRsZTp7Y2xhc3M6IFwiXCIsIHRleHQ6IHRpdGxlT2JqfSxcbiAgICAgICAgICAgICAgICAgICAgc3ViVGl0bGU6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZpc3VhbDogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnZpc3VlbF0sXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5ub21maWNoaWVyc291cmNlXSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc3R5bGVmb25kXSxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiBwYXJzZUNsYXNzZXMocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0ZXBjbGFzc2VzXSksXG4gICAgICAgICAgICAgICAgdmlzdWVsY2xhc3NlczogcGFyc2VDbGFzc2VzKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy52aXN1ZWxjbGFzc2VzXSksXG4gICAgICAgICAgICAgICAgZ2FtZWlkOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuZ2FtZWlkXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uXSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy52aXpzZWN0aW9uKXtcblxuICAgICAgICAgICAgbGV0IGN1ckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRzOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuYXR0cmlidXRzXSxcbiAgICAgICAgICAgICAgICBzY3JvbGxUeXBlOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc291c3NlY3Rpb25dLFxuICAgICAgICAgICAgICAgIHRleHQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV0sXG4gICAgICAgICAgICAgICAgdmlzdWFsOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsXSxcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLm5vbWZpY2hpZXJzb3VyY2VdLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zdHlsZWZvbmRdLFxuICAgICAgICAgICAgICAgIHZpc3VlbGNsYXNzZXM6IHBhcnNlQ2xhc3Nlcyhyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMudmlzdWVsY2xhc3Nlc10pLFxuICAgICAgICAgICAgICAgIHN0ZXBjbGFzc2VzOiBwYXJzZUNsYXNzZXMocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnN0ZXBjbGFzc2VzXSksXG4gICAgICAgICAgICAgICAgZ2FtZWlkOiByb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuZ2FtZWlkXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmKHN0cnVjdHVyZURhdGEuaGFzT3duUHJvcGVydHkocm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF0pKXtcbiAgICAgICAgICAgICAgICAvLyBBZGQgc3RlcCB0byBleGlzdGluZ1xuICAgICAgICAgICAgICAgIGxldCBjdXJWaXpTZWN0aW9uID0gc3RydWN0dXJlRGF0YVtyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXV07XG4gICAgICAgICAgICAgICAgY3VyVml6U2VjdGlvbi5wdXNoKGN1ckRhdGEpO1xuICAgICAgICAgICAgICAgIHN0cnVjdHVyZURhdGFbcm93RGF0YVtjb250ZW50SGVhZGVyQ29uc3RhbnRzLnNlY3Rpb25JRF1dID0gY3VyVml6U2VjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgc3RydWN0dXJlRGF0YVtyb3dEYXRhW2NvbnRlbnRIZWFkZXJDb25zdGFudHMuc2VjdGlvbklEXV0gPSBbY3VyRGF0YV07XG4gICAgICAgICAgICAgICAgdml6U2VjdGlvbklEcy5wdXNoKHJvd0RhdGFbY29udGVudEhlYWRlckNvbnN0YW50cy5zZWN0aW9uSURdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZpelNlY3Rpb25JRHMubWFwKChrZXkpID0+IHtcbiAgICAgICAgbGV0IGN1clNlY3Rpb24gPSBzdHJ1Y3R1cmVEYXRhW2tleV07XG4gICAgICAgIGxldCBzZWN0aW9uQXR0ciA9IGN1clNlY3Rpb25bMF0uYXR0cmlidXRzID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbmF0dHJpYnV0ZXMuY2VudHJlID8gXCIgZnVsbC1wYWdlXCIgOiBcIlwiO1xuICAgICAgICBsZXQgc2VjdGlvbkJhY2tncm91bmQgPSBjdXJTZWN0aW9uWzBdLmJhY2tncm91bmQ7XG4gICAgICAgIHN0cnVjdHVyZURhdGFba2V5XSA9IHtcbiAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgc2VjdGlvblR5cGU6IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMudml6c2VjdGlvbixcbiAgICAgICAgICAgIGxpc3RJRDoga2V5LFxuICAgICAgICAgICAgc3RlcHM6IGN1clNlY3Rpb24sXG4gICAgICAgICAgICBjbGFzc2VkOiBgdml6LXNlY3Rpb24ke3NlY3Rpb25BdHRyfWAsXG4gICAgICAgICAgICBtZWRpYUluZm86IDAsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBzZWN0aW9uQmFja2dyb3VuZFxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoc3RydWN0dXJlRGF0YSk7XG59XG5cbi8qKlxuICogVGFrZSBhcnRpY2xlIHN0cnVjdHVyZSBhcyBDU1YgYW5kIHRyYW5zZm9ybSBpdCBhcyBjYWxsYmFja0FycmF5XG4gKiBAcGFyYW0gIHtPYmplY3R9IGNvbnRlbnREYXRhIGFydGljbGUgc3RydWN0dXJlXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnMgYXJ0aWNsZSBvcHRpb25zXG4gKiBAcmV0dXJuIHtBcnJheX0gU2Nyb2xsZXIgY2FsbGJhY2sgYXJyYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ2FsbGJhY2tzKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKXtcblxuICAgIGxldCBmdWxsU3RydWN0dXJlID0gZ2V0U3RydWN0dXJlKGNvbnRlbnREYXRhLCBwYXJhbXNEYXRhKTtcbiAgICBsZXQgY2FsbGJhY2tzQXJyYXkgPSBbXTtcbiAgICBmdWxsU3RydWN0dXJlLm1hcChjYWxsYmFjayA9PiB7XG4gICAgICAgIGlmKGNhbGxiYWNrLnNlY3Rpb25UeXBlID09PSBcInZpei1zZWN0aW9uXCIpe1xuICAgICAgICAgICAgbGV0IGN1clN0ZXBzID0gW107XG4gICAgICAgICAgICBjYWxsYmFjay5zdGVwcy5tYXAoKHN0ZXAsaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY3VyQ29tbWFuZCA9IChFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKSA/ICgoKT0+e30pIDogXCJcIjtcbiAgICAgICAgICAgICAgICBpZihzdGVwLnZpc3VhbCAhPT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJOdW1iZXJBcnJheSA9IEFycmF5KGNhbGxiYWNrLnN0ZXBzLmxlbmd0aCkuZmlsbChudWxsKS5tYXAoKF8sIGkpID0+IGkpLmZpbHRlcihkID0+IGQgIT09IGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wYWNpdHlTZWxlY3RvciA9IGN1ck51bWJlckFycmF5Lm1hcChpbmQgPT4gYCMke2NhbGxiYWNrLmtleX1fJHtpbmR9YCkuam9pbignLCcpO1xuICAgICAgICAgICAgICAgICAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvbW1hbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KGAjJHtjYWxsYmFjay5rZXl9XyR7aW5kZXh9YCkudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcGFjaXR5U2VsZWN0b3IgIT09IFwiXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoYCR7b3BhY2l0eVNlbGVjdG9yfWApLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDApLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvbW1hbmQgPSBgZDMuc2VsZWN0KCcjJHtjYWxsYmFjay5rZXl9XyR7aW5kZXh9JykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMSkuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTske29wYWNpdHlTZWxlY3RvciAhPT0gXCJcIiA/IGBkMy5zZWxlY3RBbGwoJyR7b3BhY2l0eVNlbGVjdG9yfScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDApLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtgIDogXCJcIn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYoU3RyaW5nKHN0ZXAuZmlsZW5hbWUpLnN0YXJ0c1dpdGgoXCJUQUdJRFwiKSl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJUYWdJRCA9IFN0cmluZyhzdGVwLmZpbGVuYW1lKS5zcGxpdCgnPScpWzFdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyVGFnSURfaW5kZXggPSBwYXJzZUludChjdXJUYWdJRC5zcGxpdChcIl9cIilbMV0pO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyTnVtYmVyQXJyYXkgPSBBcnJheShjYWxsYmFjay5zdGVwcy5sZW5ndGgpLmZpbGwobnVsbCkubWFwKChfLCBpKSA9PiBpKS5maWx0ZXIoZCA9PiBkICE9PSBjdXJUYWdJRF9pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvcGFjaXR5U2VsZWN0b3IgPSBjdXJOdW1iZXJBcnJheS5tYXAoaW5kID0+IGAjJHtjYWxsYmFjay5rZXl9XyR7aW5kfWApLmpvaW4oJywnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoRU5WX0NPTkZJRy5kb3dubG9hZFN0cnVjICYmIEVOVl9DT05GSUcuYXV0b3JlbmRlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb21tYW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoYCMke2N1clRhZ0lEfWApLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9wYWNpdHlTZWxlY3RvciAhPT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoYCR7b3BhY2l0eVNlbGVjdG9yfWApLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDApLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvbW1hbmQgPSBgZDMuc2VsZWN0KCcjJHtjdXJUYWdJRH0nKS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAxKS5zdHlsZSgnZGlzcGxheScsIG51bGwpOyR7b3BhY2l0eVNlbGVjdG9yICE9PSBcIlwiID8gYGQzLnNlbGVjdEFsbCgnJHtvcGFjaXR5U2VsZWN0b3J9JykudHJhbnNpdGlvbigpLnN0eWxlKCdvcGFjaXR5JywgMCkuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO2AgOiBcIlwifWA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMgJiYgRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICBjdXJTdGVwcy5wdXNoKGN1ckNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBjdXJTdGVwcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgYCgpID0+IHske2N1ckNvbW1hbmR9fWBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FsbGJhY2tzQXJyYXkucHVzaChjdXJTdGVwcyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmKEVOVl9DT05GSUcuZG93bmxvYWRTdHJ1YyAmJiBFTlZfQ09ORklHLmF1dG9yZW5kZXIpe1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdHT1QgQ0FMTEJBQ0tTIEFSUkFZOiAnLCBjYWxsYmFja3NBcnJheSk7XG4gICAgICAgIHJldHVybiBjYWxsYmFja3NBcnJheTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgY29uc29sZS5sb2coJ1NhdmluZyBjYWxsYmFja3MgdG8gZmlsZS4uLicpO1xuICAgICAgICBjb25zdCB0ZXh0ID0gYGltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcXG5leHBvcnQgY29uc3QgY2FsbGJhY2tzID0gJHtKU09OLnN0cmluZ2lmeShjYWxsYmFja3NBcnJheSwgbnVsbCwgMil9YDtcbiAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihbdGV4dC5yZXBsYWNlQWxsKCdcIicsICcnKV0sIHt0eXBlOiBcInRleHQvcGxhaW47Y2hhcnNldD11dGYtOFwifSk7XG4gICAgICAgIHNhdmVBcyhibG9iLCBcImNhbGxiYWNrcy5qc1wiKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGlzSnNvbihzdHIpIHtcbiAgICB0cnkge1xuICAgICAgICBKU09OLnBhcnNlKHN0cik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNsYXNzZXMoc3RyKXtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShzdHIuc3BsaXQoJzsnKSkuam9pbignICcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3B0aW9ucyhwYXJhbXNEYXRhKXtcblxuICByZXR1cm4ge1xuICAgIHRpdGxlOiBwYXJhbXNEYXRhWzBdW3BhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMudGl0cmVdLFxuICAgIGF1dGhvcnM6IHBhcmFtc0RhdGFbMF1bcGFyYW1ldGVyc0hlYWRlckNvbnN0YW50cy5hdXRldXJzXSxcbiAgICB1cmxzOiBwYXJhbXNEYXRhWzBdW3BhcmFtZXRlcnNIZWFkZXJDb25zdGFudHMudXJsc10sXG4gICAgZGF0ZTogcGFyYW1zRGF0YVswXVtwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzLmRhdGVdXG4gIH07XG59XG4iLCJpbXBvcnQgeyBjb25zdGFudCB9IGZyb20gXCJsb2Rhc2hcIjtcclxuaW1wb3J0IG1hcGJveGdsIGZyb20gXCJtYXBib3gtZ2xcIjtcclxuaW1wb3J0ICogYXMgc2NyZWVuIGZyb20gXCIuL3NjcmVlbi5qc1wiO1xyXG5cclxuY29uc3QgY29uc3RhbnRzID0ge1xyXG4gIHRva2VuOlxyXG4gICAgXCJway5leUoxSWpvaWJHVmtaWFp2YVhJaUxDSmhJam9pWTJwMmJXODFkSFUyTVdWMWNUUmhjWEl6YVhacU1HWXhjaUo5LldySUY4bzY5YVJfVHN0REZ1NlF5YWdcIixcclxuICBtYXBCb3VuZHM6IHtcclxuICAgIG1heDogWy0xNjUsIDMwLjcyODMzMCwgLTI1LjIzNjM2LCA4Mi4yMjk0MzRdLFxyXG4gIH0sXHJcbiAgY29sb3JzOiBbXHJcbiAgICBcIiNGNENCQzZcIixcclxuICAgIFwiI0Y0QTM5QVwiLFxyXG4gICAgXCIjRUU2QTVFXCIsXHJcbiAgICBcIiNDRTM3MjdcIixcclxuICAgIFwiI0EyMjgyM1wiLFxyXG4gICAgXCIjNzUxQTFBXCIsXHJcbiAgICBcIiM0MTAwMDBcIixcclxuICBdLFxyXG4gIGNsdXN0ZXJNYXhab29tOiAxMSxcclxuICBjbHVzdGVyUmFkaXVzOiAzMCxcclxuICBjbHVzdGVyTWluUG9pbnRzOiA1XHJcbn07XHJcblxyXG5tYXBib3hnbC5hY2Nlc3NUb2tlbiA9IGNvbnN0YW50cy50b2tlbjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNYXAge1xyXG4gIGNvbnN0cnVjdG9yKGRpdiwgY2xhc3NOYW1lLCBkYXRhU291cmNlQXJyYXksIHN0eWxlVXJsLCBpbml0Q29vcmRzLCBkaXNhYmxlQ29udHJvbHM9dHJ1ZSwgd2l0aEhhbmRsZXJzPWZhbHNlLCBtYXhCb3VuZHMgPSBudWxsKSB7XHJcblxyXG4gICAgdGhpcy5kYXRhU291cmNlT2JqZWN0cyA9IGRhdGFTb3VyY2VBcnJheTtcclxuICAgIHRoaXMuY29uc3RhbnRzID0gY29uc3RhbnRzO1xyXG4gICAgdGhpcy5tYXAgPSBuZXcgbWFwYm94Z2wuTWFwKHtcclxuICAgICAgY29udGFpbmVyOiBjbGFzc05hbWUsXHJcbiAgICAgIHN0eWxlOiBzdHlsZVVybCxcclxuICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlLFxyXG4gICAgICBjZW50ZXI6IGluaXRDb29yZHMuY2VudGVyLFxyXG4gICAgICB6b29tOiBpbml0Q29vcmRzLnpvb21cclxuICAgIH0pO1xyXG4gICAgdGhpcy5tYXhCb3VuZHMgPSBpbml0Q29vcmRzO1xyXG4gICAgdGhpcy5ib3VuZHNMaXN0ID0gdGhpcy5kYXRhU291cmNlT2JqZWN0cy5tYXAoZGF0YVNvdXJjZSA9PiBkYXRhU291cmNlWydjb29yZHMnXSk7XHJcbiAgICB0aGlzLmV4dHJhQm91bmRzID0gdGhpcy5kYXRhU291cmNlT2JqZWN0cy5tYXAoZGF0YVNvdXJjZSA9PiBkYXRhU291cmNlWydleHRyYUNvb3JkcyddKTtcclxuICAgIGlmKGRpc2FibGVDb250cm9scyl7XHJcbiAgICAgIHRoaXMubWFwLnNjcm9sbFpvb20uZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLm1hcC5kcmFnUGFuLmRpc2FibGUoKTtcclxuICAgICAgdGhpcy5tYXAuZHJhZ1JvdGF0ZS5kaXNhYmxlKCk7XHJcbiAgICAgIHRoaXMubWFwLmJveFpvb20uZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLm1hcC5kb3VibGVDbGlja1pvb20uZGlzYWJsZSgpO1xyXG4gICAgfVxyXG4gICAgaWYod2l0aEhhbmRsZXJzKXtcclxuICAgICAgdGhpcy5zZXR1cEhhbmRsZXJzKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmRhdGFMaXN0ID0gdGhpcy5kYXRhU291cmNlT2JqZWN0cy5tYXAoZGF0YVNvdXJjZSA9PiBkYXRhU291cmNlWydkYXRhJ10pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQm91bmRzKFxyXG4gICAgYm91bmRzID0gdGhpcy5tYXhCb3VuZHMsXHJcbiAgICBwYWRkaW5nID0gc2NyZWVuLmlzWFMoKSA/IDUgOiBzY3JlZW4uaXNTbSgpID8gMTUgOiAyMCxcclxuICAgIGR1cmF0aW9uID0gMTAwXHJcbiAgKSB7XHJcbiAgICB0aGlzLm1hcCA9IHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMsIHtcclxuICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxyXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVDb29yZHNBbmRab29tKGRhdGFQYWlyKXtcclxuICAgIHRoaXMubWFwLmZseVRvKHtcclxuICAgICAgY2VudGVyOiBkYXRhUGFpci5jZW50ZXIsXHJcbiAgICAgIHpvb206IGRhdGFQYWlyLnpvb20sXHJcbiAgICAgIHNwZWVkOiAwLjcsXHJcbiAgICAgIGN1cnZlOiAxLFxyXG4gICAgICBlYXNpbmcodCl7XHJcbiAgICAgICAgcmV0dXJuIHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHZpZXdCb3VuZE9iaihvYmppbmRleCl7XHJcbiAgICB0aGlzLnVwZGF0ZUNvb3Jkc0FuZFpvb20odGhpcy5ib3VuZHNMaXN0W29iamluZGV4XSk7XHJcbiAgfVxyXG5cclxuICB2aWV3RXh0cmFCb3VuZE9iaihvYmppbmRleCwga2V5TmFtZSwgZHVyYXRpb24pe1xyXG4gICAgbGV0IGV4dHJhQm91bmRzID0gdGhpcy5leHRyYUJvdW5kc1tvYmppbmRleF07XHJcbiAgICB0aGlzLnVwZGF0ZUNvb3Jkc0FuZFpvb20oZXh0cmFCb3VuZHNba2V5TmFtZV0pO1xyXG4gIH1cclxuXHJcbiAgdmlld0luaXRCb3VuZHMoZHVyYXRpb24pe1xyXG4gICAgdGhpcy51cGRhdGVDb29yZHNBbmRab29tKHRoaXMubWF4Qm91bmRzKTtcclxuICB9XHJcbiAgc2hvd1NvdXJjZVhJdGVtWShzb3VyY2VJbmRleCwgaXRlbUluZGV4KSB7XHJcbiAgICB0aGlzLnVwZGF0ZUNvb3Jkc0FuZFpvb20odGhpcy5kYXRhTGlzdFtzb3VyY2VJbmRleF1baXRlbUluZGV4XSlcclxuICB9XHJcblxyXG4gIGluaXRNYXBTb3VyY2VzQW5kTGF5ZXJzKCkge1xyXG4gICAgaWYgKHRoaXMuaW5pdGlhbGlzZWQpIHJldHVybjtcclxuICAgIHRoaXMuaW5pdGlhbGlzZWQgPSB0cnVlO1xyXG4gICAgXHJcbiAgICB0aGlzLmRhdGFTb3VyY2VPYmplY3RzLm1hcChkYXRhU291cmNlID0+IHtcclxuICAgICAgdGhpcy5tYXAuYWRkU291cmNlKGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSwge1xyXG4gICAgICAgIHR5cGU6IGRhdGFTb3VyY2VbJ3NvdXJjZVR5cGUnXSxcclxuICAgICAgICBkYXRhOiBkYXRhU291cmNlWydzb3VyY2VEYXRhJ11cclxuICAgICAgfSk7XHJcbiAgICAgIGlmKGRhdGFTb3VyY2VbJ2xheWVyVHlwZSddID09PSAnZmlsbCcpe1xyXG4gICAgICAgIHRoaXMubWFwLmFkZExheWVyKHtcclxuICAgICAgICAgIGlkOiBkYXRhU291cmNlWydzb3VyY2VOYW1lJ10sXHJcbiAgICAgICAgICB0eXBlOiBkYXRhU291cmNlWydsYXllclR5cGUnXSxcclxuICAgICAgICAgIHNvdXJjZTogZGF0YVNvdXJjZVsnc291cmNlTmFtZSddLFxyXG4gICAgICAgICAgcGFpbnQ6IHtcclxuICAgICAgICAgICAgJ2ZpbGwtY29sb3InOiBkYXRhU291cmNlWydjb2xvciddLFxyXG4gICAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogZGF0YVNvdXJjZVsnb3BhY2l0eSddXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoZGF0YVNvdXJjZVsnbGF5ZXJUeXBlJ10gPT09ICdjaXJjbGUnKXtcclxuICAgICAgICB0aGlzLm1hcC5hZGRMYXllcih7XHJcbiAgICAgICAgICBpZDogZGF0YVNvdXJjZVsnc291cmNlTmFtZSddLFxyXG4gICAgICAgICAgdHlwZTogZGF0YVNvdXJjZVsnbGF5ZXJUeXBlJ10sXHJcbiAgICAgICAgICBzb3VyY2U6IGRhdGFTb3VyY2VbJ3NvdXJjZU5hbWUnXSxcclxuICAgICAgICAgIHBhaW50OiB7XHJcbiAgICAgICAgICAgICdjaXJjbGUtY29sb3InOiBbJ21hdGNoJywgW1wiZ2V0XCIsIFwic3RhdHV0XCJdLCAnUmVjaGVyY2hlcyBlZmZlY3R1w6llcyBvdSBlbiBjb3VycycsICcjZmY1NjFjJywgJ1BoYXNlIHByw6lsaW1pbmFpcmUnLCAnI2ZmYzczNCcsICcjYjdiN2I3J10sXHJcbiAgICAgICAgICAgICdjaXJjbGUtcmFkaXVzJzogNVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIGNoYW5nZUxheWVyUGFpbnQoaWQsIHByb3BlcnR5LCB2YWx1ZSl7XHJcbiAgICB0aGlzLm1hcC5zZXRQYWludFByb3BlcnR5KGlkLCBwcm9wZXJ0eSwgdmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBIYW5kbGVycygpe1xyXG4gICAgXHJcbiAgICB0aGlzLm1hcC5vbihcIm1vdXNlb3ZlclwiLCBcInBlbnNpb25uYXRzU291cmNlXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMubWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgICB0aGlzLmRyYXdQb3B1cChlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5tYXAub24oXCJtb3VzZW91dFwiLCBcInBlbnNpb25uYXRzU291cmNlXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMubWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5tYXAub24oXCJjbGlja1wiLCBcInBlbnNpb25uYXRzU291cmNlXCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5tYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XHJcbiAgICAgIHRoaXMuZHJhd1BvcHVwKGUpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgfVxyXG5cclxuICBkcmF3UG9wdXAoZSl7XHJcbiAgICBjb25zdCBjb29yZGluYXRlcyA9IGUuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXMuc2xpY2UoKTtcclxuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBlLmZlYXR1cmVzWzBdLnByb3BlcnRpZXM7XHJcbiAgICBsZXQgW29wZW5kYXlzdHIsIG9wZW5tb250aHN0ciwgb3BlbnllYXJzdHJdID0gcHJvcGVydGllc1snb3V2ZXJ0dXJlJ10uc3BsaXQoJy8nKTtcclxuICAgIGxldCBbZmVybWRheXN0ciwgZmVybW1vbnRoc3RyLCBmZXJteWVhcnN0cl0gPSBwcm9wZXJ0aWVzWydmZXJtZXR1cmUnXS5zcGxpdCgnLycpO1xyXG4gICAgbGV0IFtkYXRlX291dmVydHVyZSxkYXRlX2Zlcm1ldHVyZV0gPSBbXHJcbiAgICAgIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZnItQ0FcIiwge2RhdGVTdHlsZTpcImxvbmdcIn0pLmZvcm1hdChuZXcgRGF0ZShEYXRlLlVUQyhvcGVueWVhcnN0ciwgb3Blbm1vbnRoc3RyLCBvcGVuZGF5c3RyKSkpLFxyXG4gICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImZyLUNBXCIsIHtkYXRlU3R5bGU6XCJsb25nXCJ9KS5mb3JtYXQobmV3IERhdGUoRGF0ZS5VVEMoZmVybXllYXJzdHIsIGZlcm1tb250aHN0ciwgZmVybWRheXN0cikpKVxyXG4gICAgXTtcclxuICAgIGxldCBodG1sX3BvcHVwX2NvbnRlbnQgPSBgXHJcbiAgICAgIDxoMz4ke3Byb3BlcnRpZXNbJ25hbWUnXX08L2gzPlxyXG4gICAgICA8aDQ+JHtwcm9wZXJ0aWVzWyd2aWxsZSddfSwgJHtwcm9wZXJ0aWVzWydwcm92aW5jZSddfTwvaDQ+XHJcbiAgICAgIDxwPiR7ZGF0ZV9vdXZlcnR1cmV9IC0gJHtkYXRlX2Zlcm1ldHVyZX08L3A+XHJcbiAgICAgIDxwPiR7cHJvcGVydGllc1snc3RhdHV0J119PC9wPlxyXG4gICAgYDtcclxuICAgIHdoaWxlIChNYXRoLmFicyhlLmxuZ0xhdC5sbmcgLSBjb29yZGluYXRlc1swXSkgPiAxODApIHtcclxuICAgICAgY29vcmRpbmF0ZXNbMF0gKz0gZS5sbmdMYXQubG5nID4gY29vcmRpbmF0ZXNbMF0gPyAzNjAgOiAtMzYwO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucG9wdXAgPSBuZXcgbWFwYm94Z2wuUG9wdXAoKVxyXG4gICAgICAuc2V0TG5nTGF0KGNvb3JkaW5hdGVzKVxyXG4gICAgICAuc2V0SFRNTChodG1sX3BvcHVwX2NvbnRlbnQpXHJcbiAgICAgIC5hZGRUbyh0aGlzLm1hcCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZVBvcHVwKCkge1xyXG4gICAgaWYgKHRoaXMucG9wdXApIHtcclxuICAgICAgdGhpcy5wb3B1cC5yZW1vdmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZURhdGEoZGF0YVNvdXJjZU5hbWUsIGRhdGEpIHtcclxuICAgIGlmICghdGhpcy5pbml0aWFsaXNlZCkgdGhpcy5pbml0TWFwU291cmNlc0FuZExheWVycygpO1xyXG4gICAgdGhpcy5tYXAuZ2V0U291cmNlKGRhdGFTb3VyY2VOYW1lKS5zZXREYXRhKGRhdGEpO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xyXG5cclxuY29uc3QgcG9zaXRpdmVPcmRlckRpY3QgPSB7XHJcbiAgICBcImxhbmRfc2lua1wiOjAsXHJcbiAgICBcImZvc3NpbF9lbWlzc2lvbnNcIjoxLFxyXG4gICAgXCJsYW5kX3VzZV9jaGFuZ2VcIjoyfTtcclxuXHJcbmNvbnN0IG5lZ2F0aXZlT3JkZXJEaWN0ID0ge1wib2NlYW5fc2lua1wiOjAsXHJcbiAgICBcImF0bW9zX3NpbmtcIjoxLFxyXG4gICAgXCJsYW5kX3NpbmtcIjoyfTtcclxuXHJcbmNvbnN0IGNvbG9yRGljdCA9IHtcclxuXHJcbiAgICBmb3NzaWxfZW1pc3Npb25zOiBcIiNiN2MzYzNcIixcclxuICAgIGxhbmRfdXNlX2NoYW5nZTogXCIjRUZFNjZGXCIsXHJcbiAgICBsYW5kX3Npbms6IFwiI2E1ZGFhOFwiLFxyXG4gICAgb2NlYW5fc2luazogXCIjNzVhM2IxXCIsXHJcbiAgICBhdG1vc19zaW5rOiBcIiM4OWNmZjBcIixcclxuICAgIGNlbWVudF9zaW5rOiBcIiNhMmExOThcIlxyXG59XHJcblxyXG5leHBvcnQgY2xhc3Mgc3RhY2tlZEFyZWFDaGFydHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzdmdvYmosIHJhd2RhdGEpe1xyXG5cclxuICAgICAgICB0aGlzLnN2Z09iaiA9IHN2Z29iajtcclxuICAgICAgICB0aGlzLnN2Z1dpZHRoID0gdGhpcy5zdmdPYmoubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgICAgIHRoaXMuc3ZnSGVpZ2h0ID0gdGhpcy5zdmdPYmoubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgICAgICB0aGlzLmNoYXJ0V2lkdGggPSB0aGlzLnN2Z1dpZHRoICogMC45O1xyXG4gICAgICAgIHRoaXMuY2hhcnRIZWlnaHQgPSB0aGlzLnN2Z0hlaWdodCAqIDAuOTtcclxuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmNsZWFuRGF0YShyYXdkYXRhKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnY3N2RGF0YTonLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB0aGlzLm1haW5Hcm91cCA9IHRoaXMuc3ZnT2JqLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMuY2hhcnRXaWR0aClcclxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHRoaXMuY2hhcnRIZWlnaHQpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7KHRoaXMuc3ZnV2lkdGgtdGhpcy5jaGFydFdpZHRoKS8yfSwkeyh0aGlzLnN2Z0hlaWdodC10aGlzLmNoYXJ0SGVpZ2h0KS8yfSlgKTtcclxuICAgICAgICB0aGlzLmluaXRDaGFydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFuRGF0YShkYXRhKXtcclxuICAgICAgICByZXR1cm4gZGF0YS5tYXAoeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgeWVhcjogeWVhckRhdGFbXCJBbm7DqWVcIl0sXHJcbiAgICAgICAgICAgICAgICBmb3NzaWxfZW1pc3Npb25zOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIsOJbWlzc2lvbnMgaXNzdWVzIGRlcyDDqW5lcmdpZXMgZm9zc2lsZXNcIl0pLnJlcGxhY2UoJywnLFwiLlwiKSksXHJcbiAgICAgICAgICAgICAgICBsYW5kX3VzZV9jaGFuZ2U6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiQ2hhbmdlbWVudCBkJ2FmZmVjdGF0aW9uIGRlcyB0ZXJyZXNcIl0pLnJlcGxhY2UoJywnLFwiLlwiKSksXHJcbiAgICAgICAgICAgICAgICBsYW5kX3Npbms6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiUHVpdHMgdGVycmVzdHJlXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgb2NlYW5fc2luazogcGFyc2VGbG9hdChTdHJpbmcoeWVhckRhdGFbXCJPY8OpYW5cIl0pLnJlcGxhY2UoJywnLFwiLlwiKSksXHJcbiAgICAgICAgICAgICAgICBhdG1vc19zaW5rOiBwYXJzZUZsb2F0KFN0cmluZyh5ZWFyRGF0YVtcIkF0bW9zcGjDqHJlXCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpLFxyXG4gICAgICAgICAgICAgICAgY2VtZW50X3Npbms6IHBhcnNlRmxvYXQoU3RyaW5nKHllYXJEYXRhW1wiUHVpdHMgZGUgY2ltZW50XCJdKS5yZXBsYWNlKCcsJyxcIi5cIikpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0Q2hhcnQoKXtcclxuXHJcbiAgICAgICAgbGV0IGxlZ2VuZERhdGEgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIsOJbWlzc2lvbnMgaXNzdWVzIGRlcyDDqW5lcmdpZXMgZm9zc2lsZXNcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcImZvc3NpbF9lbWlzc2lvbnNcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJDaGFuZ2VtZW50IGQnYWZmZWN0YXRpb24gZGVzIHRlcnJlc1wiLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwibGFuZF91c2VfY2hhbmdlXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiUHVpdHMgdGVycmVzdHJlXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJsYW5kX3NpbmtcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJPY8OpYW5cIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIm9jZWFuX3NpbmtcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJBdG1vc3Bow6hyZVwiLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiYXRtb3Nfc2lua1wiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBjb25zdCB4QXhpcyA9IHRoaXMuZHJhd1hBeGlzKHRoaXMubWFpbkdyb3VwLCB0aGlzLmNoYXJ0V2lkdGgsIHRoaXMuZGF0YSk7XHJcbiAgICAgICAgY29uc3QgeUF4aXMgPSB0aGlzLmRyYXdZQXhpcyh0aGlzLm1haW5Hcm91cCwgdGhpcy5jaGFydEhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5kcmF3QXJlYXModGhpcy5tYWluR3JvdXAsIHhBeGlzLCB5QXhpcyk7XHJcbiAgICAgICAgLy90aGlzLmRyYXdSZWN0YW5nbGVzKHRoaXMubWFpbkdyb3VwLCB4QXhpcywgeUF4aXMpO1xyXG4gICAgICAgIHRoaXMuZHJhd1RpdGxlKHRoaXMubWFpbkdyb3VwKTtcclxuICAgICAgICB0aGlzLmRyYXdCb3R0b21Cb3godGhpcy5tYWluR3JvdXAsIHRoaXMuY2hhcnRXaWR0aClcclxuICAgICAgICB0aGlzLmRyYXdEZXRhaWxzKHRoaXMubWFpbkdyb3VwLCBsZWdlbmREYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7ZDMuU2VsZWN0aW9ufSBjb250YWluZXIgZDMgc2VsZWN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGggd2lkdGggb2YgdGhlIGNoYXJ0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBkYXRhIE9iaiBjb250YWluaW5nIHNlcmllcyBhbmQgZG9tYWluc1xyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGF4aXNUaXRsZSB4IGF4aXMgdGl0bGVcclxuICAgICAqL1xyXG4gICAgIGRyYXdYQXhpcyhjb250YWluZXIsIHdpZHRoLCBkYXRhLCBheGlzVGl0bGUpe1xyXG5cclxuICAgICAgICBjb25zdCB4QXhpc0dyb3VwID0gY29udGFpbmVyLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICd4QXhpc0dyb3VwJylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHswfSwke3RoaXMuY2hhcnRIZWlnaHQqMC45MH0pYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gZDMuc2NhbGVCYW5kKClcclxuICAgICAgICAgICAgLmRvbWFpbihkYXRhLm1hcChlbGVtID0+IGVsZW0ueWVhcikpXHJcbiAgICAgICAgICAgIC5yYW5nZShbdGhpcy5jaGFydFdpZHRoKjAuMDUsIHdpZHRoXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGF4aXMgPSBkMy5heGlzQm90dG9tKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlKHNjYWxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGlja1NpemVPdXRlcigwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGlja1ZhbHVlcyhzY2FsZS5kb21haW4oKS5maWx0ZXIoKGQsaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpKzEwKSUyMCA9PT0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aWNrRm9ybWF0KChkLGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNwbGl0KCctJylbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHhBeGlzR3JvdXAuY2FsbChheGlzKVxyXG4gICAgICAgICAgICAuY2FsbChnID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpY2tHcm91cHMgPSBnLnNlbGVjdEFsbChcIi50aWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgdGlja0dyb3Vwcy5zZWxlY3QoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA0MDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LWZhbWlseScsICdncmFwaGlrJylcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxNHB0JylcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCAoZCxpKSA9PiBpID09PSB0aWNrR3JvdXBzLm5vZGVzKCkubGVuZ3RoLTEgPyBcImVuZFwiIDogXCJtaWRkbGVcIik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzY2FsZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7ZDMuU2VsZWN0aW9ufSBjb250YWluZXIgZDMgc2VsZWN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGggd2lkdGggb2YgdGhlIGNoYXJ0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBkYXRhIE9iaiBjb250YWluaW5nIHNlcmllcyBhbmQgZG9tYWluc1xyXG4gICAgICovXHJcbiAgICAgZHJhd1lBeGlzKGNvbnRhaW5lciwgaGVpZ2h0KXtcclxuXHJcbiAgICAgICAgY29uc3QgeUF4aXNHcm91cCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAneUF4aXNHcm91cCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5jaGFydFdpZHRoKjAuMDV9LCR7MH0pYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgICAuZG9tYWluKFsxMiwtMTJdKVxyXG4gICAgICAgICAgICAucmFuZ2UoWzAsaGVpZ2h0KjAuOTBdKTtcclxuXHJcbiAgICAgICAgY29uc3QgYXhpcyA9IGQzLmF4aXNMZWZ0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlKHNjYWxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGlja1NpemVPdXRlcigwKTtcclxuICAgICAgICB5QXhpc0dyb3VwLmNhbGwoYXhpcylcclxuICAgICAgICAgICAgLmNhbGwoZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aWNrR3JvdXBzID0gZy5zZWxlY3RBbGwoXCIudGlja1wiKTtcclxuICAgICAgICAgICAgICAgIHRpY2tHcm91cHMuc2VsZWN0KCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTJwdCcpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICdyb3RhdGUoLTkwKScpXHJcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLCAwKVxyXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgLXNjYWxlKDApKVxyXG4gICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLTNlbVwiKVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzEycHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgJ2dyYXBoaWsnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgJzYwMCcpXHJcbiAgICAgICAgICAgIC50ZXh0KFwiRmx1eCBkZSBDTzIgKEd0QyAvIGFubsOpZSlcIik7XHJcbiAgICAgICAgcmV0dXJuIHNjYWxlO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdBcmVhcyhjb250YWluZXIsIHhTY2FsZSwgeVNjYWxlKXtcclxuXHJcbiAgICAgICAgbGV0IHBvc2l0aXZlX3BhdGhzX2FycmF5ID0ge307XHJcbiAgICAgICAgbGV0IG5lZ2F0aXZlX3BhdGhzX2FycmF5ID0ge307XHJcblxyXG4gICAgICAgIGNvbnN0IHBvc0RhdGEgPSB0aGlzLmRhdGEubWFwKHllYXJEYXRhID0+IHtcclxuICAgICAgICAgICAgbGV0IHBvc0VsZW1zID0gW107XHJcbiAgICAgICAgICAgIGxldCBjdXJUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBjdXJZZWFyID0geWVhckRhdGEueWVhcjtcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoeWVhckRhdGEpLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgaWYoY3VyRWxlbT4wICYmIGVudHJ5WzBdICE9PSBcInllYXJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zRWxlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW50cnlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdDogY3VyVG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJUb3RhbCArPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoZW50cnlbMF0gPT09IFwiY2VtZW50X3NpbmtcIil7IC8vIEFkZCBjZW1lbnQgc2luayB0byByZW1vdmUgaXQgYWZ0ZXJ3YXJkcyAoaW4gZm9zc2lsIGZ1ZWwpICBcclxuICAgICAgICAgICAgICAgICAgICBwb3NFbGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZW50cnlbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHJldHVybiBwb3NFbGVtcy5zb3J0KChhLGIpID0+IHBvc2l0aXZlT3JkZXJEaWN0W2EudHlwZV0gLSBwb3NpdGl2ZU9yZGVyRGljdFtiLnR5cGVdKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVnRGF0YSA9IHRoaXMuZGF0YS5tYXAoeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmVnRWxlbXMgPSBbXTtcclxuICAgICAgICAgICAgbGV0IGN1clRvdGFsID0gMDtcclxuICAgICAgICAgICAgbGV0IGN1clllYXIgPSB5ZWFyRGF0YS55ZWFyO1xyXG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyh5ZWFyRGF0YSkuc29ydCgoYSxiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmVnYXRpdmVPcmRlckRpY3RbYVswXV0gLSBuZWdhdGl2ZU9yZGVyRGljdFtiWzBdXTtcclxuICAgICAgICAgICAgfSkuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJFbGVtID0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICBpZihjdXJFbGVtPDAgJiYgZW50cnlbMF0gIT09IFwieWVhclwiICYmIGVudHJ5WzBdICE9PSBcImNlbWVudF9zaW5rXCIgKXtcclxuICAgICAgICAgICAgICAgICAgICBuZWdFbGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZW50cnlbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBjdXJUb3RhbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1clRvdGFsICs9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4gbmVnRWxlbXM7Ly8uc29ydCgoYSxiKSA9PiBuZWdhdGl2ZU9yZGVyRGljdFthLnR5cGVdIC0gbmVnYXRpdmVPcmRlckRpY3RbYi50eXBlXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdnb3QgbmVnRGF0YTogJywgbmVnRGF0YSk7XHJcblxyXG4gICAgICAgIGxldCBhcmVhR2VuID0gZDMuYXJlYSgpXHJcbiAgICAgICAgICAgIC54KGQgPT4geFNjYWxlKGQuY3VyWWVhcikpXHJcbiAgICAgICAgICAgIC55MChkID0+IHlTY2FsZShkLmN1clRvdCkpXHJcbiAgICAgICAgICAgIC55MShkID0+IHlTY2FsZShkLmN1clRvdCtkLnZhbHVlKSk7XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMocG9zaXRpdmVPcmRlckRpY3QpLmZvckVhY2gob3JkZXJPYmogPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGN1cktleSA9IG9yZGVyT2JqWzBdO1xyXG4gICAgICAgICAgICBsZXQgY3VyT3JkZXJWYWx1ZSA9IG9yZGVyT2JqWzFdO1xyXG4gICAgICAgICAgICBsZXQgY3VyUGF0aEFycmF5ID0gW107XHJcbiAgICAgICAgICAgIHBvc0RhdGEuZm9yRWFjaCh5ZWFyRGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IHllYXJEYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1clllYXIgPSBjdXJFbGVtWydjdXJZZWFyJ107XHJcbiAgICAgICAgICAgICAgICBsZXQga2V5T2JqID0geWVhckRhdGEuZmlsdGVyKGVsZW0gPT4gY3VyS2V5ID09PSBlbGVtLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNlbWVudE9iaiA9IHllYXJEYXRhLmZpbHRlcihlbGVtID0+ICdjZW1lbnRfc2luaycgPT09IGVsZW0udHlwZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKGtleU9iai5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAvL0FkZCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGN1cktleSA9PT0gXCJmb3NzaWxfZW1pc3Npb25zXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjdXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBrZXlPYmpbMF0uY3VyVG90LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGtleU9ialswXS52YWx1ZSAtIE1hdGguYWJzKGNlbWVudE9ialswXS52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjdXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJZZWFyOiBjdXJZZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBrZXlPYmpbMF0uY3VyVG90LSBNYXRoLmFicyhjZW1lbnRPYmpbMF0udmFsdWUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGtleU9ialswXS52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQWRkIHplcm9cclxuICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGN1cktleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcG9zaXRpdmVfcGF0aHNfYXJyYXlbY3VyS2V5XSA9IGN1clBhdGhBcnJheTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGl2ZVBhdGhzID0gdGhpcy5tYWluR3JvdXAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3Bvc2l0aXZlUGF0aHMnKTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMocG9zaXRpdmVfcGF0aHNfYXJyYXkpLmZvckVhY2goY2F0ZWdvcnlPYmogPT4ge1xyXG4gICAgICAgICAgICBsZXQgY3VyS2V5ID0gY2F0ZWdvcnlPYmpbMF07XHJcbiAgICAgICAgICAgIGxldCBjdXJBcnJheSA9IGNhdGVnb3J5T2JqWzFdO1xyXG5cclxuICAgICAgICAgICAgcG9zaXRpdmVQYXRocy5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgY3VyS2V5KVxyXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAuZGF0dW0oY3VyQXJyYXkpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsIGNvbG9yRGljdFtjdXJLZXldKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICdibGFjaycpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMClcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgZCA9PiBhcmVhR2VuKGQpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMobmVnYXRpdmVPcmRlckRpY3QpLnNvcnQoKGEsYikgPT4gYlsxXSAtIGFbMV0pLmZvckVhY2gob3JkZXJPYmogPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGN1cktleSA9IG9yZGVyT2JqWzBdO1xyXG4gICAgICAgICAgICBsZXQgY3VyT3JkZXJWYWx1ZSA9IG9yZGVyT2JqWzFdO1xyXG4gICAgICAgICAgICBsZXQgY3VyUGF0aEFycmF5ID0gW107XHJcblxyXG4gICAgICAgICAgICBuZWdEYXRhLmZvckVhY2goeWVhckRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSB5ZWFyRGF0YVswXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJZZWFyID0gY3VyRWxlbVsnY3VyWWVhciddO1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleU9iaiA9IHllYXJEYXRhLmZpbHRlcihlbGVtID0+IGN1cktleSA9PT0gZWxlbS50eXBlKTtcclxuICAgICAgICAgICAgICAgIGlmKGtleU9iai5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAvL0FkZCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGN1clBhdGhBcnJheS5wdXNoKGtleU9ialswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQWRkIHplcm9cclxuICAgICAgICAgICAgICAgICAgICBjdXJQYXRoQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGN1cktleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyWWVhcjogY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmVnYXRpdmVfcGF0aHNfYXJyYXlbY3VyS2V5XSA9IGN1clBhdGhBcnJheTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCBuZWdhdGl2ZVBhdGhzID0gdGhpcy5tYWluR3JvdXAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ25lZ2F0aXZlcGF0aHMnKTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMobmVnYXRpdmVfcGF0aHNfYXJyYXkpLmZvckVhY2goY2F0ZWdvcnlPYmogPT4ge1xyXG4gICAgICAgICAgICBsZXQgY3VyS2V5ID0gY2F0ZWdvcnlPYmpbMF07XHJcbiAgICAgICAgICAgIGxldCBjdXJBcnJheSA9IGNhdGVnb3J5T2JqWzFdO1xyXG5cclxuICAgICAgICAgICAgbmVnYXRpdmVQYXRocy5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgY3VyS2V5KVxyXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAuZGF0dW0oY3VyQXJyYXkpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsIGNvbG9yRGljdFtjdXJLZXldKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICdibGFjaycpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMClcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgZCA9PiBhcmVhR2VuKGQpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gRHJhdyBsaW5lXHJcbiAgICAgICAgY29uc3QgbGluZUdlbiA9IGQzLmxpbmUoKS54KGQgPT4geFNjYWxlKGQueWVhcikpLnkoZCA9PiB5U2NhbGUoZC52YWx1ZSkpO1xyXG5cclxuICAgICAgICBsZXQgbmVnWWVhclRvdGFsID0gW107XHJcbiAgICAgICAgbGV0IHBvc1llYXJUb3RhbCA9IFtdO1xyXG4gICAgICAgIHBvc0RhdGEuZm9yRWFjaCh5ZWFyRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpbml0VmFsdWUgPSAwO1xyXG4gICAgICAgICAgICBsZXQgY3VyVmFsdWUgPSB5ZWFyRGF0YS5yZWR1Y2UoKHByZXZWYWwsY3VyVmFsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVkdWNpbmcuLi4nLCBwcmV2VmFsICwgY3VyVmFsKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2VmFsICsgY3VyVmFsLnZhbHVlO1xyXG4gICAgICAgICAgICB9LCBpbml0VmFsdWUpO1xyXG4gICAgICAgICAgICBuZWdZZWFyVG90YWwucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB5ZWFyOiB5ZWFyRGF0YVswXS5jdXJZZWFyLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IC1jdXJWYWx1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcG9zWWVhclRvdGFsLnB1c2goXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhcjogeWVhckRhdGFbMF0uY3VyWWVhcixcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY3VyVmFsdWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd5ZWFyIHRvdGFsOicsICk7XHJcblxyXG4gICAgICAgIHZhciBwb3NsaW5lID0gZDMuc2VsZWN0KCdzdmcnKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgLmRhdHVtKHBvc1llYXJUb3RhbClcclxuICAgICAgICAgICAgLmF0dHIoJ2QnLCBsaW5lR2VuKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnbm9uZScpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt0aGlzLmNoYXJ0V2lkdGgqMC4wNSArIHhTY2FsZS5iYW5kd2lkdGgoKX0sJHtNYXRoLmFicyh5U2NhbGUoMiowLjc0KS15U2NhbGUoMCkpfSlgKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbmVnbGluZSA9IGQzLnNlbGVjdCgnc3ZnJylcclxuICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgIC5kYXR1bShuZWdZZWFyVG90YWwpXHJcbiAgICAgICAgICAgIC5hdHRyKCdkJywgbGluZUdlbilcclxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJ25vbmUnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsICdibGFjaycpXHJcbiAgICAgICAgICAgIC5zdHlsZShcInN0cm9rZS1kYXNoYXJyYXlcIiwgKFwiMywgM1wiKSlcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt0aGlzLmNoYXJ0V2lkdGgqMC4wNSArIHhTY2FsZS5iYW5kd2lkdGgoKX0sJHtNYXRoLmFicyh5U2NhbGUoMiowLjc0KS15U2NhbGUoMCkpfSlgKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1RpdGxlKGNvbnRhaW5lcil7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgKHRoaXMuc3ZnV2lkdGggLSB0aGlzLmNoYXJ0V2lkdGgpIC8gMiArIHRoaXMuY2hhcnRXaWR0aCowLjA1KVxyXG4gICAgICAgICAgICAuYXR0cigneScsICh0aGlzLnN2Z0hlaWdodCAtIHRoaXMuY2hhcnRIZWlnaHQpLzIgLSA1MClcclxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxN3B0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LWZhbWlseScsICdncmFwaGlrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsICc2MDAnKVxyXG4gICAgICAgICAgICAudGV4dChcIkxlIHRpdHJlIGR1IGdyYXBoaXF1ZVwiKTtcclxuICAgICAgICBcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCh0aGlzLnN2Z1dpZHRoIC0gdGhpcy5jaGFydFdpZHRoKSAvIDIgKyB0aGlzLmNoYXJ0V2lkdGgqMC4wNSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCAodGhpcy5zdmdIZWlnaHQgLSB0aGlzLmNoYXJ0SGVpZ2h0KS8yIC0gMjUpXHJcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ2JsYWNrJylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTNwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1mYW1pbHknLCAnZ3JhcGhpaycpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnNDAwJylcclxuICAgICAgICAgICAgLnRleHQoXCJMZSBzb3VzLXRpdHJlIGR1IGdyYXBoaXF1ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3Qm90dG9tQm94KGNvbnRhaW5lciwgd2lkdGgpe1xyXG5cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnYmxhY2snKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ3N0b2tlLXdpZHRoJywgMSlcclxuICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMC4zKVxyXG4gICAgICAgICAgICAuYXR0cihcIngxXCIsIHRoaXMuY2hhcnRXaWR0aCowLjA1KVxyXG4gICAgICAgICAgICAuYXR0cihcInkxXCIsIHRoaXMuY2hhcnRIZWlnaHQtMzApXHJcbiAgICAgICAgICAgIC5hdHRyKFwieDJcIiwgdGhpcy5jaGFydFdpZHRoKVxyXG4gICAgICAgICAgICAuYXR0cihcInkyXCIsIHRoaXMuY2hhcnRIZWlnaHQtMzApO1xyXG5cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCB0aGlzLmNoYXJ0V2lkdGgqMC4wNSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmNoYXJ0SGVpZ2h0LTE3KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNjAwKVxyXG4gICAgICAgICAgICAudGV4dCgnR3JhcGhpcXVlIDonKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCd0c3BhbicpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jaGFydFdpZHRoKjAuMDUrIDY1KVxyXG4gICAgICAgICAgICAuYXR0cigneScsIHRoaXMuY2hhcnRIZWlnaHQtMTcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA0MDApXHJcbiAgICAgICAgICAgIC50ZXh0KCdMZSBEZXZvaXIgLSAnKTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCB0aGlzLmNoYXJ0V2lkdGgqMC4wNSArIDEyMilcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmNoYXJ0SGVpZ2h0LTE3KVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNjAwKVxyXG4gICAgICAgICAgICAudGV4dCgnU291cmNlIDonKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCd0c3BhbicpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jaGFydFdpZHRoKjAuMDUgKyAxNjkpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgdGhpcy5jaGFydEhlaWdodC0xNylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnOHB0JylcclxuICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDQwMClcclxuICAgICAgICAgICAgLnRleHQoJyAuLi4gJyk7XHJcblxyXG4gICAgICAgIC8vIGNvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgIC8vICAgICAuYXR0cigneCcsIHRoaXMuc3ZnV2lkdGgqMC4xKVxyXG4gICAgICAgIC8vICAgICAuYXR0cigneScsIHRoaXMuc3ZnSGVpZ2h0KjAuOTUxKVxyXG4gICAgICAgIC8vICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgIC8vICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNjAwKVxyXG4gICAgICAgIC8vICAgICAudGV4dCgnTm90ZSA6JylcclxuICAgICAgICAvLyAgICAgLmFwcGVuZCgndHNwYW4nKVxyXG4gICAgICAgIC8vICAgICAuYXR0cigneCcsIHRoaXMuc3ZnV2lkdGgqMC4xKzM1KVxyXG4gICAgICAgIC8vICAgICAuYXR0cigneScsIHRoaXMuc3ZnSGVpZ2h0KjAuOTUxKVxyXG4gICAgICAgIC8vICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc4cHQnKVxyXG4gICAgICAgIC8vICAgICAuc3R5bGUoJ2ZvbnQtd2VpZ2h0JywgNDAwKVxyXG4gICAgICAgIC8vICAgICAudGV4dCgnRG9ubsOpZXMgY29sbGVjdMOpZXMgZGVwdWlzIGh0dHBzOi8vZG9ubmVlcy5tb250cmVhbC5jYS92aWxsZS1kZS1tb250cmVhbC9jb21wdGFnZS12ZWhpY3VsZXMtcGlldG9ucycpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdEZXRhaWxzKGNvbnRhaW5lciwgbGVnZW5kRGF0YSl7XHJcblxyXG4gICAgICAgIGNvbnN0IGxlZ2VuZENvbnRhaW5lciA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAnbGVnZW5kQ29udGFpbmVyJylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHsodGhpcy5zdmdXaWR0aCAtIHRoaXMuY2hhcnRXaWR0aCkgLyAyICsgKHRoaXMuY2hhcnRXaWR0aCowLjA1ICsgMTApfSwke3RoaXMuc3ZnSGVpZ2h0KjAuMDd9KWApO1xyXG5cclxuICAgICAgICBjb25zdCByb3dzID0gbGVnZW5kQ29udGFpbmVyLnNlbGVjdEFsbCgnZycpXHJcbiAgICAgICAgICAgIC5kYXRhKGxlZ2VuZERhdGEpXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAnbGVnZW5kUm93JylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIChkLGkpID0+IGB0cmFuc2xhdGUoMCwke2kqMjB9KWApO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICByb3dzLmFwcGVuZCgnY2lyY2xlJylcclxuICAgICAgICAgICAgLmF0dHIoJ2N4JywgMClcclxuICAgICAgICAgICAgLmF0dHIoJ2N5JywgMClcclxuICAgICAgICAgICAgLmF0dHIoJ3InLCA4KVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsIGQgPT4gY29sb3JEaWN0W2QuY29sb3JdKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgcm93cy5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIDE4KVxyXG4gICAgICAgICAgICAuYXR0cigneScsIDQpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgJzhwdCcpXHJcbiAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCA1MDApXHJcbiAgICAgICAgICAgIC50ZXh0KCBkID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkLmxhYmVsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1JlY3RhbmdsZXMoY29udGFpbmVyLCB4U2NhbGUsIHlTY2FsZSl7IC8vIG5vdCB1c2VkXHJcblxyXG4gICAgICAgIGNvbnN0IHBvc2l0aXZlQXJlYUdyb3VwID0gY29udGFpbmVyLmFwcGVuZCgnZycpXHJcbiAgICAgICAgLmF0dHIoJ2lkJywgJ3Bvc0FyZWFncm91cCcpXHJcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoMCwkezB9KWApO1xyXG5cclxuICAgICAgICBjb25zdCBuZWdhdGl2ZUFyZWFHcm91cCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgIC5hdHRyKCdpZCcsICduZWdBcmVhZ3JvdXAnKVxyXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsJHswfSlgKTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9zWWVhckdyb3VwcyA9IHBvc2l0aXZlQXJlYUdyb3VwLnNlbGVjdEFsbCgnZycpXHJcbiAgICAgICAgICAgIC5kYXRhKHRoaXMuZGF0YSlcclxuICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQgPT4gYHllYXJfJHtkLnllYXJ9YCk7XHJcbiAgICAgICAgY29uc3QgcG9zUmVjdHMgPSBwb3NZZWFyR3JvdXBzLnNlbGVjdEFsbCgncmVjdCcpXHJcbiAgICAgICAgICAgIC5kYXRhKGQgPT4geyBcclxuICAgICAgICAgICAgICAgIGxldCBwb3NFbGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1clRvdGFsID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJZZWFyID0gZC55ZWFyO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZCkuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyRWxlbSA9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGN1ckVsZW0+MCAmJiBlbnRyeVswXSAhPT0gXCJ5ZWFyXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NFbGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVudHJ5WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBjdXJUb3RhbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdGFsICs9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zRWxlbXMuc29ydCgoYSxiKSA9PiBwb3NpdGl2ZU9yZGVyRGljdFthLnR5cGVdIC0gcG9zaXRpdmVPcmRlckRpY3RbYi50eXBlXSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBkID0+IGAke2QudHlwZX1fJHtkLnZhbHVlfWApXHJcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHhTY2FsZS5iYW5kd2lkdGgoKSlcclxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIChkLGkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyh5U2NhbGUoMCkgLSB5U2NhbGUoZC52YWx1ZSkpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXR0cigneCcsIGQgPT4geFNjYWxlKGQuY3VyWWVhcikpXHJcbiAgICAgICAgICAgIC5hdHRyKCd5JywgZCA9PiAoeVNjYWxlKDApIC0gKE1hdGguYWJzKHlTY2FsZSgwKSAtIHlTY2FsZShkLnZhbHVlKSkpIC0gKE1hdGguYWJzKHlTY2FsZSgwKSAtIHlTY2FsZShkLmN1clRvdCkpKSkpXHJcbiAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgZCA9PiBjb2xvckRpY3RbZC50eXBlXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5lZ2F0aXZlWWVhckdyb3VwcyA9IG5lZ2F0aXZlQXJlYUdyb3VwLnNlbGVjdEFsbCgnZycpXHJcbiAgICAgICAgICAgIC5kYXRhKHRoaXMuZGF0YSlcclxuICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQgPT4gYHllYXJfJHtkLnllYXJ9YCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5lZ1JlY3RzID0gbmVnYXRpdmVZZWFyR3JvdXBzLnNlbGVjdEFsbCgncmVjdCcpXHJcbiAgICAgICAgICAgIC5kYXRhKGQgPT4geyBcclxuICAgICAgICAgICAgICAgIGxldCBuZWdFbGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1clRvdGFsID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJZZWFyID0gZC55ZWFyO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZCkuZmlsdGVyKGVsZW0gPT4gZWxlbVsxXTwwKS5zb3J0KChhLGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhVmFsID0gbmVnYXRpdmVPcmRlckRpY3RbYVswXV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYlZhbCA9IG5lZ2F0aXZlT3JkZXJEaWN0W2JbMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhVmFsIC0gYlZhbDtcclxuICAgICAgICAgICAgICAgIH0pLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ckVsZW0gPSBlbnRyeVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihlbnRyeVswXSAhPT0gXCJ5ZWFyXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWdFbGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVudHJ5WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVudHJ5WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyVG90OiBjdXJUb3RhbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clllYXI6IGN1clllYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRvdGFsICs9IGVudHJ5WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmVnRWxlbXM7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBkID0+IGAke2QudHlwZX1fJHtkLnZhbHVlfWApXHJcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHhTY2FsZS5iYW5kd2lkdGgoKSlcclxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIChkLGkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyh5U2NhbGUoMCkgLSB5U2NhbGUoTWF0aC5hYnMoZC52YWx1ZSkpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCBkID0+IHhTY2FsZShkLmN1clllYXIpKVxyXG4gICAgICAgICAgICAuYXR0cigneScsIGQgPT4gKHlTY2FsZShkLmN1clRvdCkpKVxyXG4gICAgICAgICAgICAuYXR0cignZmlsbCcsIGQgPT4gY29sb3JEaWN0W2QudHlwZV0pO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gR2F1Z2VzKHByb3BzKXtcbiAgY29uc3QgbWF4V2lkdGhWYWx1ZSA9IDUwO1xuICBjb25zdCBjYWxjdWxhdGVHYXVnZVdpZHRoID0gKCkgPT4ge1xuICAgIGNvbnN0IGdhdWdlc0VsZW1zID0gZDMuc2VsZWN0KCcuZ2F1Z2VzJykuc2VsZWN0QWxsKCcuZ2F1Z2UnKTtcbiAgICBnYXVnZXNFbGVtcy5ub2RlcygpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgIGxldCBjdXJXaWR0aCA9IG1heFdpZHRoVmFsdWU7XG4gICAgICBpZihkMy5zZWxlY3Qobm9kZSkuYXR0cignaWQnKSA9PT0gXCJkb2xsYXJzXCIpe1xuICAgICAgICBjdXJXaWR0aCA9IHByb3BzLmRvbGxhcnM7XG4gICAgICB9XG4gICAgICBkMy5zZWxlY3Qobm9kZSkuc2VsZWN0KCcuZ2F1Z2VDb2xvckhvbGRlcicpLnNlbGVjdCgnLmNvbW1pdHRlZCcpLnN0eWxlKCd3aWR0aCcsIGAke01hdGgucm91bmQocHJvcHMuY29tbWl0dGVkL21heFdpZHRoVmFsdWUqMTAwKX0lYCk7XG4gICAgICBkMy5zZWxlY3Qobm9kZSkuc2VsZWN0KCcuZ2F1Z2VDb2xvcicpLnN0eWxlKCd3aWR0aCcsIGAke01hdGgucm91bmQoY3VyV2lkdGgvbWF4V2lkdGhWYWx1ZSoxMDApfSVgKTtcbiAgICB9KTtcbiAgfTtcblxuICB1c2VFZmZlY3QoICgpID0+IHtcbiAgICBjYWxjdWxhdGVHYXVnZVdpZHRoKCk7XG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJnYXVnZXNcIj5cbiAgICAgIDxkaXYgaWQ9XCJkb2xsYXJzXCIgY2xhc3NOYW1lPVwiZ2F1Z2UgZG9sbGFyR2F1Z2VcIj5cbiAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwidGV4dEJveFwiPlxuICAgICAgICAgIDxoNT5KZXRvbnM8L2g1PlxuICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2F1Z2VDb2xvckhvbGRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2F1Z2VDb2xvciBibHVlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZhbHVlXCI+XG4gICAgICAgICAgICAgIDxwPntwcm9wcy5kb2xsYXJzfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtwcm9wcy5jb21taXR0ZWQgIT0gMCA/XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21taXR0ZWRcIj5cbiAgICAgICAgICAgICAgPHA+e3Byb3BzLmNvbW1pdHRlZH08L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgOlwiXCJcbiAgICAgICAgICB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcblxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2t9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gSW50cm9Cb3gocHJvcHMpe1xuXG4gIGNvbnN0IHN0YXJ0R2FtZSA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3N0YXJ0aW5nIGdhbWUnKTtcbiAgICBwcm9wcy5nYW1lU3RhcnQoKTtcbiAgfSk7XG5cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2FtZUJveCB0cmFuc3BhcmVudFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnRyb0JveFwiPlxuICAgICAgICB7cHJvcHMuaW50cm9FbGVtfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXJCb3hcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdGFydGJ1dHRvblwiIG9uQ2xpY2s9e3N0YXJ0R2FtZX0+XG4gICAgICAgICAgPHA+Q29tbWVuY2VyIGxlIGpldTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICApXG5cbn1cbiIsImltcG9ydCBSZWFjdCwge3VzZUVmZmVjdH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBHYXVnZXMgfSBmcm9tIFwiLi9HYXVnZXNcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gTW9uaXRvcmluZyhwcm9wcyl7XG5cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ1wiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb25pdG9yaW5nX2NvbnRlbnRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2x1bW5cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vbml0b3JpbmdfaGVhZGVyXCI+XG4gICAgICAgICAgICA8aDU+UsOpcGFydGl0aW9uIGRlIHZvcyBqZXRvbnM8L2g1PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ192YWx1ZVwiPlxuICAgICAgICAgICAgPEdhdWdlcyBkb2xsYXJzPXtwcm9wcy5kb2xsYXJzfSBjb21taXR0ZWQ9e3Byb3BzLmNvbW1pdHRlZH0gcGVyZm9ybWFuY2U9e3Byb3BzLnBlcmZvcm1hbmNlfS8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsgcHJvcHMudGVyYXdhdHRzIHx8IHByb3BzLnRlcmF3YXR0cyA9PT0gMCA/XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ19jb250ZW50XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2x1bW5cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9uaXRvcmluZ19oZWFkZXJcIj5cbiAgICAgICAgICAgICAgPGg1PsOJbGVjdHJpY2l0w6kgcHJvZHVpdGU8L2g1PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vbml0b3JpbmdfdmFsdWVcIj5cbiAgICAgICAgICAgICAgPGgzPntwcm9wcy50ZXJhd2F0dHN9IFRXaDwvaDM+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDpcbiAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgIH1cbiAgICA8L2Rpdj5cblxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBNb25pdG9yaW5nIH0gZnJvbSBcIi4uL2dhdWdlcy9Nb25pdG9yaW5nXCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIENob2ljZShwcm9wcyl7XG5cblxuICBjb25zdCBbc2VsZWN0aW9uLCBzZXRTZWxlY3Rpb25dID0gdXNlU3RhdGUobnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcblxuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb25idXR0b25zID0gZDMuc2VsZWN0QWxsKCcuY2hvaWNlYnV0dG9uJyk7XG4gICAgc2VsZWN0aW9uYnV0dG9ucy5zZWxlY3QoJy5idXRuJykuY2xhc3NlZCgnc2VsZWN0ZWQnLCBmYWxzZSk7XG4gICAgaWYoc2VsZWN0aW9uKXtcbiAgICAgIGQzLnNlbGVjdChzZWxlY3Rpb24ub2JqKS5zZWxlY3QoJy5idXRuJykuY2xhc3NlZCgnc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICB9XG4gIH0sW3NlbGVjdGlvbl0pXG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoY29zdCwgdXNlKSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXTtcbiAgICBpZihOdW1iZXIuaXNJbnRlZ2VyKHBhcnNlSW50KHRyaWdnZXJOZXh0KSkpe1xuICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyB0cmlnZ2VyIG5leHQ6ICcsIHBhcnNlSW50KHRyaWdnZXJOZXh0KSk7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocGFyc2VJbnQodHJpZ2dlck5leHQpKTtcbiAgICB9XG4gICAgcHJvcHMudXBkYXRlRG9sbGFycygtcGFyc2VJbnQoY29zdCkpO1xuICAgIHByb3BzLnVwZGF0ZVBlcmZvcm1hbmNlKHBhcnNlSW50KHVzZSkpO1xuICAgIHNldFNlbGVjdGlvbihudWxsKTtcbiAgfSk7XG5cbiAgY29uc3QgcHJldmlvdXNQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XG4gICAgICBjb25zb2xlLmxvZygncHJldmlvdXMgcHJvbXB0IScsIHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uKG51bGwpO1xuICB9KTtcblxuICBjb25zdCB1cGRhdGVTZWxlY3RlZCA9IChldmVudCwgY29zdCwgdXNlKSA9PiB7XG4gICAgc2V0U2VsZWN0aW9uKHtcbiAgICAgIG9iajogZXZlbnQudGFyZ2V0LFxuICAgICAgY29zdDogY29zdCxcbiAgICAgIHVzZTogdXNlXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4oXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjaG9pY2VzXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICB7XG4gICAgICAgICAgcHJvcHMuY2hvaWNlcy5tYXAoKGNob2ljZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBjb3N0ID0gcHJvcHMuY2hvaWNlc192YWx1ZXNbaW5kZXhdLnNwbGl0KCdfJylbMF07XG4gICAgICAgICAgICBsZXQgdXNlID0gcHJvcHMuY2hvaWNlc192YWx1ZXNbaW5kZXhdLnNwbGl0KCdfJylbMV07XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNob2ljZWJ1dHRvblwiIGtleT17aW5kZXh9IG9uQ2xpY2s9eyhlKSA9PiB7dXBkYXRlU2VsZWN0ZWQoZSwgY29zdCwgdXNlKX19PlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9e2luZGV4fSBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9sZGVyIGljb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi4vYXNzZXRzL2ltZy9Pbi5zdmdcIj48L2ltZz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9sZGVyIGxhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGg0PntjaG9pY2V9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICA8cD57Y29zdH0gSkVUT05TPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb25pdG9yaW5nIHNob3dUV2g9e2ZhbHNlfSBkb2xsYXJzPXsoc2VsZWN0aW9uICYmIHNlbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShcImNvc3RcIikpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLmdhdWdlcy5wcm9wcy5kb2xsYXJzIC0gc2VsZWN0aW9uLmNvc3QgOiBwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZD17KHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24uaGFzT3duUHJvcGVydHkoXCJjb3N0XCIpKSA/IHNlbGVjdGlvbi5jb3N0IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlPXtwcm9wcy5nYXVnZXMucHJvcHMucGVyZm9ybWFuY2V9Lz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAge3Byb3BzLmN1ckluZGV4ID4gMCA/XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbmJ1dHRvbiBwcmV2XCIgb25DbGljaz17cHJldmlvdXNQcm9tcHR9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2x1bW5cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGFjdGlvbmJ1dHRvbiBuZXh0ICR7c2VsZWN0aW9uID8gJycgOiAnZGlzYWJsZWQnfWB9IG9uQ2xpY2s9eygpID0+IHtzZWxlY3Rpb24gPyBuZXh0UHJvbXB0KHNlbGVjdGlvbi5jb3N0LCBzZWxlY3Rpb24udXNlKSA6IGNvbnNvbGUubG9nKCdEaXNhYmxlZC4nKX19PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgIDxwPk5leHQ8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxuXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBNb25pdG9yaW5nIH0gZnJvbSBcIi4uL2dhdWdlcy9Nb25pdG9yaW5nXCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIE11bHRpU2VsZWN0aW9uKHByb3BzKXtcblxuICBjb25zdCBbc2VsZWN0aW9uLCBzZXRTZWxlY3Rpb25dID0gdXNlU3RhdGUoW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVzZXRTZWxlY3Rpb24oKTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy9jb25zb2xlLmxvZygnY3VyIHNlbGVjdGlvbjogJywgc2VsZWN0aW9uKTtcbiAgfSwgW3NlbGVjdGlvbl0pO1xuXG4gIGNvbnN0IHJlc2V0U2VsZWN0aW9uID0gKCkgPT4ge1xuICAgIHNldFNlbGVjdGlvbihwcm9wcy5jaG9pY2VzLm1hcChlbGVtID0+IG51bGwpKTtcbiAgfVxuXG4gIGNvbnN0IGNhbGN1bGF0ZVRvdGFsU2VsZWN0aW9uID0gKHNlbGVjdGlvbikgPT4ge1xuICAgIGNvbnN0IGFjY0Nvc3QgPSBzZWxlY3Rpb24ucmVkdWNlKChhY2MsIGN1cikgPT4ge1xuICAgICAgaWYoY3VyKXtcbiAgICAgICAgYWNjICs9IGN1ci5jb3N0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCAwKTtcbiAgICBjb25zdCBhY2NQZXJmb3JtYW5jZSA9IHNlbGVjdGlvbi5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7XG4gICAgICBpZihjdXIpe1xuICAgICAgICBhY2MgKz0gY3VyLnVzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgMCk7XG5cbiAgICByZXR1cm4gW2FjY0Nvc3QsIGFjY1BlcmZvcm1hbmNlXTtcbiAgfTtcblxuICBjb25zdCBuZXh0UHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jIChzZWxlY3Rpb24pID0+IHtcbiAgICBsZXQgdHJpZ2dlck5leHQgPSBwcm9wcy5jdXJQcm9tcHRbJ1RyaWdnZXJfbmV4dCddO1xuICAgIGlmKE51bWJlci5pc0ludGVnZXIocGFyc2VJbnQodHJpZ2dlck5leHQpKSl7XG4gICAgY29uc29sZS5sb2coJ0NoZWNraW5nIHRyaWdnZXIgbmV4dDogJywgcGFyc2VJbnQodHJpZ2dlck5leHQpKTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwYXJzZUludCh0cmlnZ2VyTmV4dCkpO1xuICAgIH1cbiAgICBjb25zdCBbYWNjQ29zdCwgYWNjUGVyZm9ybWFuY2VdID0gY2FsY3VsYXRlVG90YWxTZWxlY3Rpb24oc2VsZWN0aW9uKTtcblxuICAgIHByb3BzLnVwZGF0ZURvbGxhcnMoLXBhcnNlSW50KGFjY0Nvc3QpKTtcbiAgICBwcm9wcy51cGRhdGVQZXJmb3JtYW5jZShwYXJzZUludChhY2NQZXJmb3JtYW5jZSkpO1xuICAgIHJlc2V0U2VsZWN0aW9uKCk7XG4gIH0pO1xuXG4gIGNvbnN0IHByZXZpb3VzUHJvbXB0ID0gdXNlQ2FsbGJhY2soIGFzeW5jICgpID0+IHtcbiAgICBpZihwcm9wcy5jdXJJbmRleCA+IDApe1xuICAgICAgY29uc29sZS5sb2coJ3ByZXZpb3VzIHByb21wdCEnLCBwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHByb3BzLmN1ckluZGV4IC0gMSk7XG4gICAgfVxuICAgIHJlc2V0U2VsZWN0aW9uKCk7XG4gIH0pO1xuXG4gIGNvbnN0IHVwZGF0ZVNlbGVjdGVkID0gKGV2ZW50LCBpbmRleCwgY29zdCwgdXNlKSA9PiB7XG4gICAgbGV0IG5ld0FycmF5ID0gWy4uLnNlbGVjdGlvbl07XG4gICAgaWYoc2VsZWN0aW9uW2luZGV4XSl7XG4gICAgICAvLyBVbnNlbGVjdFxuICAgICAgbmV3QXJyYXlbaW5kZXhdID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIC8vIFNlbGVjdFxuICAgICAgbmV3QXJyYXlbaW5kZXhdID0ge1xuICAgICAgICBvYmo6IGV2ZW50LnRhcmdldCxcbiAgICAgICAgY29zdDogcGFyc2VJbnQoY29zdCksXG4gICAgICAgIHVzZTogcGFyc2VJbnQodXNlKVxuICAgICAgfTtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uKG5ld0FycmF5KTtcbiAgfVxuXG4gIHJldHVybihcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImNob2ljZXNcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgIHtcbiAgICAgICAgICBwcm9wcy5jaG9pY2VzLm1hcCgoY2hvaWNlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgbGV0IGNvc3QgPSBwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0uc3BsaXQoJ18nKVswXTtcbiAgICAgICAgICAgIGxldCB1c2UgPSBwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0uc3BsaXQoJ18nKVsxXTtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VsZWN0aW9uYnV0dG9uXCIga2V5PXtpbmRleH0gb25DbGljaz17KGUpID0+IHt1cGRhdGVTZWxlY3RlZChlLCBpbmRleCwgY29zdCwgdXNlKX19PlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9e2luZGV4fSBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvbGRlciBzZWxlY3Rpb25Cb3hcIj5cbiAgICAgICAgICAgICAgICAgICAge3NlbGVjdGlvbltpbmRleF0gPyAnWCcgOiAnJ31cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob2xkZXIgbGFiZWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDQ+e2Nob2ljZX08L2g0PlxuICAgICAgICAgICAgICAgICAgICAgIDxwPntjb3N0fSBKRVRPTlM8L3A+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb25pdG9yaW5nIHNob3dUV2g9e2ZhbHNlfSBkb2xsYXJzPXsoc2VsZWN0aW9uICYmIHNlbGVjdGlvbi5sZW5ndGggPiAwKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycyAtIGNhbGN1bGF0ZVRvdGFsU2VsZWN0aW9uKHNlbGVjdGlvbilbMF0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuZ2F1Z2VzLnByb3BzLmRvbGxhcnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXR0ZWQ9eyhzZWxlY3Rpb24gJiYgc2VsZWN0aW9uLmxlbmd0aCA+IDApID8gY2FsY3VsYXRlVG90YWxTZWxlY3Rpb24oc2VsZWN0aW9uKVswXSA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZT17cHJvcHMuZ2F1Z2VzLnByb3BzLnBlcmZvcm1hbmNlfS8+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbHVtblwiPlxuICAgICAgICAgIHtwcm9wcy5jdXJJbmRleCA+IDAgP1xuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gcHJldlwiIG9uQ2xpY2s9e3ByZXZpb3VzUHJvbXB0fT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICAgICAgPHA+UHJldmlvdXM8L3A+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA6XG4gICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BhY3Rpb25idXR0b24gbmV4dCAke3NlbGVjdGlvbiA/ICcnIDogJ2Rpc2FibGVkJ31gfSBvbkNsaWNrPXsoKSA9PiB7c2VsZWN0aW9uID8gbmV4dFByb21wdChzZWxlY3Rpb24pIDogY29uc29sZS5sb2coJ0Rpc2FibGVkLicpfX0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICAgICAgPHA+TmV4dDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBQcmludFByb21wdChwcm9wcyl7XG5cbiAgY29uc3QgcHJldmlvdXNQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XG4gICAgICBjb25zb2xlLmxvZygncHJldiBwcm9tcHQhJywgcHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHRyaWdnZXJOZXh0ID0gcHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXTtcbiAgICBpZihOdW1iZXIuaXNJbnRlZ2VyKHBhcnNlSW50KHRyaWdnZXJOZXh0KSkpe1xuICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyB0cmlnZ2VyIG5leHQ6ICcsIHBhcnNlSW50KHRyaWdnZXJOZXh0KSk7XG4gICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocGFyc2VJbnQodHJpZ2dlck5leHQpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwcmludHByb21wdFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXNzYWdlXCI+XG4gICAgICAgIDxwPlxuICAgICAgICAgIHtwcm9wcy5tZXNzYWdlfVxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIHByZXZcIiBvbkNsaWNrPXtwcmV2aW91c1Byb21wdH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0blwiPlxuICAgICAgICAgIDxwPlByZXZpb3VzPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25idXR0b24gbmV4dFwiIG9uQ2xpY2s9e25leHRQcm9tcHR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dG5cIj5cbiAgICAgICAgICA8cD5TdWl2YW50PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuKVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgR2F1Z2VzIH0gZnJvbSBcIi4uL2dhdWdlcy9HYXVnZXNcIjtcbmltcG9ydCB7IE1vbml0b3JpbmcgfSBmcm9tIFwiLi4vZ2F1Z2VzL01vbml0b3JpbmdcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIFJlcGFydGl0aW9uKHByb3BzKXtcblxuICBjb25zdCBbamV0b25zLCBzZXRKZXRvbnNdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFt0ZXJhd2F0dHMsIHNldFRlcmF3YXR0c10gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3VuaXRzLCBzZXRVbml0c10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt0b2tlbnNQZXJVbml0LCBzZXRUb2tlbnNQZXJVbml0XSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgbWF4VG9rZW5zID0gMjA7XG5cbiAgdXNlRWZmZWN0KCAoKSA9PiB7XG5cbiAgICBjb25zdCBvcHRpb25zID0gZ2V0T3B0aW9uUGFyYW1zKCk7XG4gICAgY29uc3QgbmV3VW5pdHMgPSBvcHRpb25zLm1hcCgoKSA9PiAwKTtcbiAgICBjb25zdCB0b2tlbnNQZXJVbml0ID0gb3B0aW9ucy5tYXAoZWxlbSA9PiBlbGVtLnVuaXRWYWx1ZSk7XG4gICAgc2V0VW5pdHMobmV3VW5pdHMpO1xuICAgIHNldFRva2Vuc1BlclVuaXQodG9rZW5zUGVyVW5pdCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoICgpID0+IHtcbiAgICBsZXQgbmV3SmV0b25zID0gdW5pdHMucmVkdWNlKFxuICAgICAgKGFjYywgY3VyVmFsLCBpbmRleCkgPT4ge1xuICAgICAgICBsZXQgY3VyT3B0aW9uUGFyYW1zID0gZ2V0T3B0aW9uUGFyYW1zKClbaW5kZXhdO1xuICAgICAgICByZXR1cm4gYWNjICsgY3VyVmFsO1xuICAgICAgfSwwKTtcbiAgICBsZXQgbmV3TVcgPSB1bml0cy5yZWR1Y2UoXG4gICAgICAoYWNjLCBjdXJWYWwsIGluZGV4KSA9PiB7XG4gICAgICAgIGxldCBjdXJPcHRpb25QYXJhbXMgPSBnZXRPcHRpb25QYXJhbXMoKVtpbmRleF07XG4gICAgICAgIHJldHVybiBhY2MgKyBNYXRoLnJvdW5kKGN1clZhbC9jdXJPcHRpb25QYXJhbXNbXCJ1bml0VmFsdWVcIl0qY3VyT3B0aW9uUGFyYW1zW1widW5pdFRXaHZhbHVlXCJdKTtcbiAgICAgIH0sMCk7XG4gICAgc2V0SmV0b25zKG5ld0pldG9ucyk7XG4gICAgc2V0VGVyYXdhdHRzKG5ld01XKTtcbiAgfSwgW3VuaXRzXSk7XG5cbiAgY29uc3QgcHJldmlvdXNQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKCkgPT4ge1xuICAgIGlmKHByb3BzLmN1ckluZGV4ID4gMCl7XG4gICAgICBjb25zb2xlLmxvZygncHJldiBwcm9tcHQhJywgcHJvcHMuY3VySW5kZXggLSAxKTtcbiAgICAgIHByb3BzLmNoYW5nZVByb21wdChwcm9wcy5jdXJJbmRleCAtIDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgbmV4dFByb21wdCA9IHVzZUNhbGxiYWNrKCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHNwbGl0dGVkVHJpZ2dlck5leHQgPSBTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydUcmlnZ2VyX25leHQnXSkuc3BsaXQoXCJfXCIpO1xuICAgIGxldCB0cmlnZ2VyTmV4dCA9IFN0cmluZyhzcGxpdHRlZFRyaWdnZXJOZXh0WzBdKS5zcGxpdChcIjtcIik7XG4gICAgaWYodHJpZ2dlck5leHQubGVuZ3RoID09IDEgJiYgTnVtYmVyLmlzSW50ZWdlcihwYXJzZUludCh0cmlnZ2VyTmV4dFswXSkpKXtcbiAgICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyB0cmlnZ2VyIG5leHQ6ICcsdHJpZ2dlck5leHQpO1xuICAgICAgcHJvcHMuY2hhbmdlUHJvbXB0KHBhcnNlSW50KHRyaWdnZXJOZXh0KSk7XG4gICAgfVxuICAgIGVsc2UgaWYodHJpZ2dlck5leHQubGVuZ3RoID4gMSl7XG4gICAgICBpZighdW5pdHMuZXZlcnkodmFsID0+IHZhbCA9PT0gdW5pdHNbMF0pKXtcbiAgICAgICAgbGV0IGluZGV4T2ZNYXhWYWx1ZSA9IHVuaXRzLnJlZHVjZSgoaU1heCwgeCwgaSwgYXJyKSA9PiB4ID4gYXJyW2lNYXhdID8gaSA6IGlNYXgsIDApO1xuICAgICAgICBpZihOdW1iZXIuaXNJbnRlZ2VyKHBhcnNlSW50KHRyaWdnZXJOZXh0W2luZGV4T2ZNYXhWYWx1ZV0pKSl7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0NoZWNraW5nIHRyaWdnZXIgbmV4dDogJyx0cmlnZ2VyTmV4dFtpbmRleE9mTWF4VmFsdWVdKTtcbiAgICAgICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocGFyc2VJbnQodHJpZ2dlck5leHRbaW5kZXhPZk1heFZhbHVlXSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBsZXQgZGVmYXVsdE5leHQgPSBzcGxpdHRlZFRyaWdnZXJOZXh0WzFdO1xuICAgICAgICBwcm9wcy5jaGFuZ2VQcm9tcHQocGFyc2VJbnQoZGVmYXVsdE5leHQpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcHJvcHMudXBkYXRlRG9sbGFycygtamV0b25zKTtcbiAgfSk7XG5cbiAgY29uc3QgcHJvY2Vzc0Nob2ljZXMgPSAoY2hvaWNlLCBjaG9pY2VzX3ZhbHVlcykgPT4ge1xuICAgIGNvbnN0IHNwbGl0dGVkQ2hvaWNlcyA9IGNob2ljZXNfdmFsdWVzLnNwbGl0KCdfJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGNob2ljZSxcbiAgICAgIHVuaXRWYWx1ZTogcGFyc2VJbnQoc3BsaXR0ZWRDaG9pY2VzWzBdKSxcbiAgICAgIHVuaXRUV2h2YWx1ZTogcGFyc2VJbnQoc3BsaXR0ZWRDaG9pY2VzWzJdKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGdldE9wdGlvblBhcmFtcyA9ICgpID0+IHtcbiAgICByZXR1cm4gcHJvcHMuY2hvaWNlcy5tYXAoKGNob2ljZSwgaW5kZXgpID0+IHtcbiAgICAgIHJldHVybiBwcm9jZXNzQ2hvaWNlcyhjaG9pY2UsIHByb3BzLmNob2ljZXNfdmFsdWVzW2luZGV4XSk7XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGNoZWNrSWZGdWxsID0gKG5ld0FkZGl0aW9uKSA9PiB7XG4gICAgbGV0IHRvdGFsID0gMDtcbiAgICB1bml0cy5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgIHRvdGFsICs9IHZhbHVlO1xuICAgIH0pO1xuICAgIGlmKHRvdGFsK25ld0FkZGl0aW9uID4gbWF4VG9rZW5zKXtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBtb2RpZnlPbkNsaWNrID0gKGUsIGluZGV4LCBkaWZmLCBlbGVtKSA9PiB7XG4gICAgbGV0IG5ld0FycmF5ID0gWy4uLnVuaXRzXTtcbiAgICBpZigobmV3QXJyYXlbaW5kZXhdK2RpZmYqdG9rZW5zUGVyVW5pdFtpbmRleF0pID49IDApe1xuICAgICAgaWYoZGlmZiA+IDApXG4gICAgICB7XG4gICAgICAgIGlmKCFjaGVja0lmRnVsbChkaWZmKnRva2Vuc1BlclVuaXRbaW5kZXhdKSl7XG4gICAgICAgICAgbmV3QXJyYXlbaW5kZXhdID0gbmV3QXJyYXlbaW5kZXhdICsgZGlmZip0b2tlbnNQZXJVbml0W2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgbmV3QXJyYXlbaW5kZXhdID0gbmV3QXJyYXlbaW5kZXhdICsgZGlmZip0b2tlbnNQZXJVbml0W2luZGV4XTtcbiAgICAgIH1cbiAgICAgIHNldFVuaXRzKG5ld0FycmF5KTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBnZW5lcmF0ZVRva2VucyA9ICgpID0+IHtcbiAgICBsZXQgY3VycmVudFVzZWRUb2tlbnMgPSB1bml0cy5tYXAoKGVsZW0sIGluZGV4KSA9PiB7XG4gICAgICBsZXQgY3VyT3B0aW9uUGFyYW1zID0gZ2V0T3B0aW9uUGFyYW1zKClbaW5kZXhdO1xuICAgICAgcmV0dXJuIEFycmF5KGVsZW0qY3VyT3B0aW9uUGFyYW1zW1widW5pdFZhbHVlXCJdKS5maWxsKGN1ck9wdGlvblBhcmFtc1tcIm5hbWVcIl1bMF0pO1xuICAgIH0pO1xuICAgIGxldCBjb25jYXRUb2tlbnMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGN1cnJlbnRVc2VkVG9rZW5zKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogbWF4VG9rZW5zIH0pLm1hcCgoZWxlbSwgaW5kZXgpID0+IHtcbiAgICAgIGxldCBjdXJMZXR0ZXIgPSBjb25jYXRUb2tlbnNbaW5kZXhdID8gU3RyaW5nKGNvbmNhdFRva2Vuc1tpbmRleF0pIDogXCJcIjtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG9rZW5Db250YWluZXJcIiBrZXk9e2luZGV4fT5cbiAgICAgICAgICA8cD57Y3VyTGV0dGVyfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCByZW5kZXJSb3dzID0gKGNob2ljZXMpID0+IHtcbiAgICByZXR1cm4gY2hvaWNlcy5tYXAoIChlbGVtLGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wdGlvblVuaXRcIiBrZXk9e2luZGV4fT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdG9yWm9uZVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpc2lvbiBtaW51c1pvbmVcIiBvbkNsaWNrPXsoZSkgPT4gbW9kaWZ5T25DbGljayhlLCBpbmRleCwgLTEsIGVsZW0pfT5cbiAgICAgICAgICAgICAgPGgzPi08L2gzPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdmlzaW9uIGNlbnRyYWxab25lXCI+XG4gICAgICAgICAgICAgIDxoMz57dW5pdHNbaW5kZXhdfTwvaDM+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aXNpb24gcGx1c1pvbmVcIiBvbkNsaWNrPXsoZSkgPT4gbW9kaWZ5T25DbGljayhlLCBpbmRleCwgMSwgZWxlbSl9PlxuICAgICAgICAgICAgICA8aDM+KzwvaDM+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHRab25lXCI+XG4gICAgICAgICAgICA8aDM+e2VsZW0ubmFtZX08L2gzPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmV0ZXh0XCI+XG4gICAgICAgICAgICAgIDxoNT57ZWxlbS51bml0VmFsdWV9IGpldG9ucyZuYnNwOyYjODIyNjsmbmJzcDt7ZWxlbS51bml0VFdodmFsdWV9IFRXaDwvaDU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybihcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJlcGFydGl0aW9uXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wdGlvblpvbmVcIj5cbiAgICAgICAge1xuICAgICAgICAgIHJlbmRlclJvd3MocHJvcHMuY2hvaWNlcy5tYXAoKGUsIGluZGV4KSA9PiBwcm9jZXNzQ2hvaWNlcyhlLCBwcm9wcy5jaG9pY2VzX3ZhbHVlc1tpbmRleF0pKSlcbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgICA8TW9uaXRvcmluZyBzaG93VFdoPXt0cnVlfSBkb2xsYXJzPXtwcm9wcy5nYXVnZXMucHJvcHMuZG9sbGFycy1qZXRvbnN9IGNvbW1pdHRlZD17amV0b25zfSBwZXJmb3JtYW5jZT17cHJvcHMuZ2F1Z2VzLnByb3BzLnBlcmZvcm1hbmNlfSB0ZXJhd2F0dHM9e3RlcmF3YXR0c30vPlxuICAgICAge3Byb3BzLmN1ckluZGV4ID4gMCA/XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIHByZXZcIiBvbkNsaWNrPXtwcmV2aW91c1Byb21wdH0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgICA8cD5QcmV2aW91czwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDpcbiAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgIH1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uYnV0dG9uIG5leHRcIiBvbkNsaWNrPXtuZXh0UHJvbXB0fT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXRuXCI+XG4gICAgICAgICAgPHA+U3VpdmFudDwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxuXG59XG4iLCJpbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDaG9pY2UgfSBmcm9tIFwiLi9wcm9tcHRmaWxsL0Nob2ljZVwiO1xuaW1wb3J0IHsgTXVsdGlTZWxlY3Rpb24gfSBmcm9tIFwiLi9wcm9tcHRmaWxsL011bHRpU2VsZWN0aW9uXCI7XG5pbXBvcnQgeyBQcmludFByb21wdCB9IGZyb20gXCIuL3Byb21wdGZpbGwvUHJpbnRQcm9tcHRcIjtcbmltcG9ydCB7IFJlcGFydGl0aW9uIH0gZnJvbSBcIi4vcHJvbXB0ZmlsbC9SZXBhcnRpdGlvblwiO1xuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gUHJvbXB0Qm94KHByb3BzKXtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuXG4gIH0sIFtdKTtcblxuICBjb25zdCBjaGFuZ2VQcm9tcHQgPSB1c2VDYWxsYmFjayggYXN5bmMgKG5ld1ZhbHVlKSA9PiB7XG4gICAgcHJvcHMuY2hhbmdlUHJvbXB0KG5ld1ZhbHVlKTtcbiAgfSk7XG5cbiAgY29uc3QgdXBkYXRlRG9sbGFycyA9IHVzZUNhbGxiYWNrKCBhc3luYyAoZGlmZlZhbHVlKSA9PiB7XG4gICAgaWYoTnVtYmVyLmlzSW50ZWdlcihkaWZmVmFsdWUpKXtcbiAgICAgIHByb3BzLnVwZGF0ZURvbGxhcnMoZGlmZlZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHVwZGF0ZVBlcmZvcm1hbmNlID0gdXNlQ2FsbGJhY2soIGFzeW5jIChkaWZmVmFsdWUpID0+IHtcbiAgICBpZihOdW1iZXIuaXNJbnRlZ2VyKGRpZmZWYWx1ZSkpe1xuICAgICAgcHJvcHMudXBkYXRlUGVyZm9ybWFuY2UoZGlmZlZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHJlbmRlclN3aXRjaCA9IChwYXJhbSkgPT4ge1xuICAgIHN3aXRjaChwYXJhbSl7XG4gICAgICBjYXNlICdSZXBhcnRpdGlvbicgOlxuICAgICAgICByZXR1cm4gPFJlcGFydGl0aW9uIGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4J10pLnNwbGl0KCc7Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlc192YWx1ZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4X1ZhbGV1cnMnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRG9sbGFycz17dXBkYXRlRG9sbGFyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXVnZXM9e3Byb3BzLmdhdWdlc30vPjtcbiAgICAgIGNhc2UgJ0NhcnRlJzpcbiAgICAgICAgcmV0dXJuIDxDaG9pY2UgY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9IGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4J10pLnNwbGl0KCc7Jyl9IGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fSBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9Lz47XG4gICAgICBjYXNlICdTdWl2aSc6XG4gICAgICAgIHJldHVybiA8Q2hvaWNlIGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fSBjaG9pY2VzPXtTdHJpbmcocHJvcHMuY3VyUHJvbXB0WydDaG9peCddKS5zcGxpdCgnOycpfSBjaGFuZ2VQcm9tcHQ9e2NoYW5nZVByb21wdH0gY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fS8+O1xuICAgICAgY2FzZSAndGV4dGVCb3V0b25TaW1wbGUnOlxuICAgICAgICByZXR1cm4gPFByaW50UHJvbXB0IGN1clByb21wdD17cHJvcHMuY3VyUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ1RleHRlX1N1cHAnXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySW5kZXg9e3Byb3BzLmN1ckluZGV4fS8+O1xuICAgICAgY2FzZSAnQ2hvaXhSZXBvbnNlJzpcbiAgICAgICAgcmV0dXJuIDxDaG9pY2UgY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXgnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzX3ZhbHVlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXhfVmFsZXVycyddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgIGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cbiAgICAgICAgICAgICAgICAgICAgICBnYXVnZXM9e3Byb3BzLmdhdWdlc30vPjtcbiAgICAgIGNhc2UgJ0NhdGFzdHJvcGhlJzpcbiAgICAgICAgcmV0dXJuIDxDaG9pY2UgY3VyUHJvbXB0PXtwcm9wcy5jdXJQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXgnXSkuc3BsaXQoJzsnKX1cbiAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzX3ZhbHVlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXhfVmFsZXVycyddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVByb21wdD17Y2hhbmdlUHJvbXB0fVxuICAgICAgICAgICAgICAgICAgICAgIGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlPXt1cGRhdGVQZXJmb3JtYW5jZX1cbiAgICAgICAgICAgICAgICAgICAgICBnYXVnZXM9e3Byb3BzLmdhdWdlc30vPjtcbiAgICAgIGNhc2UgJ011bHRpU2VsZWN0aW9uJzpcbiAgICAgICAgcmV0dXJuIDxNdWx0aVNlbGVjdGlvbiBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXM9e1N0cmluZyhwcm9wcy5jdXJQcm9tcHRbJ0Nob2l4J10pLnNwbGl0KCc7Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzX3ZhbHVlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXhfVmFsZXVycyddKS5zcGxpdCgnOycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJbmRleD17cHJvcHMuY3VySW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEb2xsYXJzPXt1cGRhdGVEb2xsYXJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGVyZm9ybWFuY2U9e3VwZGF0ZVBlcmZvcm1hbmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F1Z2VzPXtwcm9wcy5nYXVnZXN9Lz47XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gPENob2ljZSBjdXJQcm9tcHQ9e3Byb3BzLmN1clByb21wdH0gY2hvaWNlcz17U3RyaW5nKHByb3BzLmN1clByb21wdFsnQ2hvaXgnXSkuc3BsaXQoJzsnKX0gY2hhbmdlUHJvbXB0PXtjaGFuZ2VQcm9tcHR9IGN1ckluZGV4PXtwcm9wcy5jdXJJbmRleH0vPjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2FtZUJveFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9tcHRCb3hcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN1cnRpdHJlXCI+XG4gICAgICAgICAgICA8aDQ+e3BhcnNlKHByb3BzLmN1clByb21wdFsnU3VqZXQnXSl9PC9oND5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInF1ZXN0aW9uXCI+XG4gICAgICAgICAgICA8cD57cGFyc2UocHJvcHMuY3VyUHJvbXB0WydUZXh0ZSddKX08L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7XG4gICAgICAgICAgcmVuZGVyU3dpdGNoKHByb3BzLmN1clByb21wdFsnVHlwZSddKVxuICAgICAgICB9XG5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG5cblxufVxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEdhdWdlcyB9IGZyb20gXCIuL2dhdWdlcy9HYXVnZXNcIjtcbmltcG9ydCB7IEludHJvQm94IH0gZnJvbSBcIi4vaW50cm9Cb3hcIjtcbmltcG9ydCB7IFByb21wdEJveCB9IGZyb20gXCIuL1Byb21wdEJveFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gTWFpbkZyYW1lKHByb3BzKXtcblxuICBjb25zdCBbZ2FtZVN0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlKCdJRExFJyk7XG4gIGNvbnN0IFtnYW1lSW5kZXgsIHNldEdhbWVJbmRleF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2RvbGxhcnMsIHNldERvbGxhcnNdID0gdXNlU3RhdGUoNTApO1xuICBjb25zdCBbcGVyZm9ybWFuY2UsIHNldFBlcmZvcm1hbmNlXSA9IHVzZVN0YXRlKDUwKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdjaGVja2luZyBwcm9wcyBtYXBPYmo6JywgcHJvcHMubWFwT2JqKTtcbiAgfSxbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnZ2FtZSAnLCBnYW1lU3RhdHVzKTtcblxuICB9LCBbZ2FtZVN0YXR1c10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZ2V0R2FtZVByb21wdChnYW1lSW5kZXgpO1xuICB9LCBbZ2FtZUluZGV4XSk7XG5cbiAgY29uc3QgZ2FtZVN0YXJ0ID0gKCkgPT4ge1xuICAgIHNldFN0YXR1cygnU1RBUlRFRCcpO1xuICAgIHNldEdhbWVJbmRleCgwKTtcbiAgfVxuXG4gIGNvbnN0IGdhbWVFbmQgPSAoKSA9PiB7XG4gICAgc2V0U3RhdHVzKCdFTkQnKTtcbiAgfVxuXG4gIGNvbnN0IGdldEdhbWVQcm9tcHQgPSAoZ2FtZUluZGV4KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2N1cnJlbnQgZ2FtZSBwcm9tcHQ6JywgcHJvcHMuZ2FtZURhdGEuZmlsdGVyKGVsZW0gPT4ge3JldHVybiBTdHJpbmcoZWxlbVtcIklEXCJdKSA9PT0gU3RyaW5nKGdhbWVJbmRleCk7fSkpO1xuICB9XG5cbiAgY29uc3QgdXBkYXRlRG9sbGFycyA9IChkaWZmKSA9PiB7XG4gICAgaWYoZG9sbGFycyArIGRpZmYgPj0gMCl7XG4gICAgICBzZXREb2xsYXJzKGRvbGxhcnMgPT4gZG9sbGFycyArIGRpZmYpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgZ2FtZUVuZCgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHVwZGF0ZVBlcmZvcm1hbmNlID0gKGRpZmYpID0+IHtcbiAgICBpZihwZXJmb3JtYW5jZSArIGRpZmYgPj0gMCl7XG4gICAgICBzZXRQZXJmb3JtYW5jZShwZXJmb3JtYW5jZSA9PiBwZXJmb3JtYW5jZSArIGRpZmYpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgZ2FtZUVuZCgpO1xuICAgIH1cblxuICB9XG5cbiAgY29uc3QgZG9tRWxlbWVudCA9IGdhbWVTdGF0dXMgPT09IFwiSURMRVwiID9cbiAgICAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWVTY3JlZW5cIj5cbiAgICAgICAgPEludHJvQm94IGludHJvRWxlbT17cHJvcHMuaW50cm9FbGVtfSBtYXBPYmo9e3Byb3BzLm1hcE9ian0gZ2FtZVN0YXJ0PXtnYW1lU3RhcnR9IC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gICAgOlxuICAgIGdhbWVTdGF0dXMgPT09IFwiRU5EXCIgP1xuICAgICAgKDxkaXY+PC9kaXY+KVxuICAgICAgOlxuICAgICAgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWVTY3JlZW5cIj5cbiAgICAgICAgICA8UHJvbXB0Qm94IGN1ckluZGV4PXtnYW1lSW5kZXh9XG4gICAgICAgICAgICBjdXJQcm9tcHQ9e3Byb3BzLmdhbWVEYXRhW2dhbWVJbmRleF19XG4gICAgICAgICAgICBjaGFuZ2VQcm9tcHQ9e3NldEdhbWVJbmRleH1cbiAgICAgICAgICAgIHVwZGF0ZURvbGxhcnM9e3VwZGF0ZURvbGxhcnN9XG4gICAgICAgICAgICB1cGRhdGVQZXJmb3JtYW5jZT17dXBkYXRlUGVyZm9ybWFuY2V9XG4gICAgICAgICAgICBnYXVnZXM9ezxHYXVnZXMgZG9sbGFycz17ZG9sbGFyc30gcGVyZm9ybWFuY2U9e3BlcmZvcm1hbmNlfS8+fS8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgcmV0dXJuIGRvbUVsZW1lbnQ7XG59XG4iLCJpbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbS9jbGllbnRcIjtcbmltcG9ydCB7IHJlbmRlclRvU3RhdGljTWFya3VwIH0gZnJvbSAncmVhY3QtZG9tL3NlcnZlcic7XG5pbXBvcnQgeyBNYWluRnJhbWUgfSBmcm9tICcuL2NvbXBvbmVudHMvbWFpbmZyYW1lJztcbmltcG9ydCB7IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cywgY29udGVudEhlYWRlckNvbnN0YW50cyB9IGZyb20gXCIuLi9nZW5lcmF0b3IvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBJbnRyb1NlY3Rpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL0ludHJvU2VjdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBFbmdpbmUge1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgb3B0aW9uRGF0YSwgaW50cm9PYmosIGdhbWVEYXRhKXtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICBjb25zdCByb290RWxlbSA9IHRoaXMuY29udGFpbmVyLmFwcGVuZCgnZGl2JylcbiAgICAgIC5jbGFzc2VkKCdyb290RWxlbScsIHRydWUpO1xuICAgIHRoaXMuZW5naW5lUm9vdCA9IFJlYWN0RE9NLmNyZWF0ZVJvb3Qocm9vdEVsZW0ubm9kZSgpKTtcbiAgICB0aGlzLm9wdGlvbkRhdGEgPSBvcHRpb25EYXRhO1xuICAgIHRoaXMuYW1vcmNlID0gaW50cm9PYmpbY29udGVudEhlYWRlckNvbnN0YW50cy50ZXh0ZV07XG4gICAgdGhpcy5nYW1lRGF0YSA9IGdhbWVEYXRhO1xuICAgIGNvbnNvbGUubG9nKCdnYW1lIERhdGEgaXMgOiAnLCB0aGlzLmdhbWVEYXRhKTtcbiAgICB0aGlzLmluaXRFbmdpbmUoKTtcbiAgfVxuXG4gIGluaXRFbmdpbmUoKXtcbiAgICBjb25zdCBpbnRyb0VsZW0gPSAoPEludHJvU2VjdGlvblxuICAgICAga2V5PXtcImdhbWVJbnRyb1wifVxuICAgICAgc2VjdGlvblR5cGU9e29wdGlvbnNEcm9wZG93bkNvbnN0YW50cy5zZWN0aW9udHlwZXMuaW50cm90aXRyZX1cbiAgICAgIG9wdGlvbkRhdGE9e3RoaXMub3B0aW9uRGF0YX1cbiAgICAgIGFtb3JjZT17dGhpcy5hbW9yY2V9XG4gICAgICBiYWNrZ3JvdW5kPXtudWxsfVxuICAgICAgY2xhc3Nlcz17XCJcIn1cbiAgICAgIC8+KTtcblxuICAgIHRoaXMuZW5naW5lUm9vdC5yZW5kZXIoPE1haW5GcmFtZSBpbnRyb0VsZW09e2ludHJvRWxlbX0gZ2FtZVN0YXR1cz17dGhpcy5nYW1lU3RhdHVzfSBnYW1lRGF0YT17dGhpcy5nYW1lRGF0YX0vPik7XG4gIH1cblxufVxuIiwiLyoqXG4gKiB2aXouanNcbiAqID09PT09PT1cbiAqIEZpbGUgdXNlZCB0byBkZWZpbmUgdGhlIHZpc3VhbGl6YXRpb24gc2VjdGlvbi5cbiAqL1xuXG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgeyBnZXRTdHJ1Y3R1cmUsIGdlbmVyYXRlQ2FsbGJhY2tzLCBnZXRPcHRpb25zIH0gZnJvbSAnLi9nZW5lcmF0b3Ivc3RydWN0dXJlR2VuZXJhdG9yLmpzJztcbmltcG9ydCB7IGNhbGxiYWNrcyB9IGZyb20gJy4uL2RhdGEvc3RydWN0dXJlL2NhbGxiYWNrcy5qcyc7XG5cbmltcG9ydCB7IE1hcCB9IGZyb20gJ2xlZGV2b2lyLWRhdGF2aXonO1xuaW1wb3J0IHsgRW5naW5lIH0gZnJvbSAnLi9nYW1lL2VuZ2luZS5qcyc7XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgd2lkdGg6IDUwMCxcbiAgaGVpZ2h0OiA1MDAsXG4gIG1hcmdpbjoge1xuICAgIHRvcDogMTAwLFxuICAgIHJpZ2h0OiAxMDAsXG4gICAgYm90dG9tOiAxMDAsXG4gICAgbGVmdDogMTAwXG4gIH1cbn1cbmNvbnN0IGZ1bGxXaWR0aCA9IGNvbmZpZy5tYXJnaW4ubGVmdCArIGNvbmZpZy53aWR0aCArIGNvbmZpZy5tYXJnaW4ucmlnaHQ7XG5jb25zdCBmdWxsSGVpZ2h0ID0gY29uZmlnLm1hcmdpbi50b3AgKyBjb25maWcuaGVpZ2h0ICsgY29uZmlnLm1hcmdpbi5ib3R0b207XG5jb25zdCBtYXBCb3hTdHlsZSA9IFwibWFwYm94Oi8vc3R5bGVzL2xlZGV2b2lyL2NsYWw5emxmazAwNGExNXFvaGhyN3I0OTVcIjtcblxuY29uc3QgY3VzdG9tQ2FsbGJhY2tzTmVlZGVkID0gdHJ1ZTsgLy8gU2V0IHRvIHRydWUgaWYgY3VzdG9tIGNhbGxiYWNrcyBhcmUgbmVlZGVkXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplKGNvbnRlbnREYXRhLCBvcHRpb25zKSB7XG5cbiAgcmV0dXJuIGQzLmNzdihcImh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZRUVozc3owcTF2blptb1lZUjVJckNmdU9OaEhjTnc1MGlEdGJnMUgybUlYOGxIREwxQlE0c0FNaTdpQXBTRTFHOVdRVFcyakhjV3Y0S1cvcHViP2dpZD0xNDk3ODYxMDE3JnNpbmdsZT10cnVlJm91dHB1dD1jc3ZcIilcbiAgICAudGhlbiggZ2FtZURhdGEgPT4ge1xuXG4gICAgICBjb25zdCBtYXBDb250YWluZXIgPSBkMy5zZWxlY3QoXCIuZ2FtZS1hcmVhXCIpO1xuXG4gICAgICBjb25zdCBlbmdpbmUgPSBuZXcgRW5naW5lKG1hcENvbnRhaW5lciwgZ2V0T3B0aW9ucyhvcHRpb25zKSwgY29udGVudERhdGFbMF0sIGdhbWVEYXRhKTtcblxuICAgICAgbGV0IGF1dG9DYWxsYmFja3M7XG4gICAgICBzZXR1cFZpeihjb250ZW50RGF0YSxvcHRpb25zKTtcbiAgICAgIGlmKEVOVl9DT05GSUcuZG93bmxvYWRTdHJ1YyAmJiBFTlZfQ09ORklHLmF1dG9yZW5kZXIpe1xuICAgICAgICBhdXRvQ2FsbGJhY2tzID0gZ2VuZXJhdGVDYWxsYmFja3MoY29udGVudERhdGEsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgYXV0b0NhbGxiYWNrcyA9IGNhbGxiYWNrcztcbiAgICAgIH1cblxuICAgICAgaWYoY3VzdG9tQ2FsbGJhY2tzTmVlZGVkKXtcbiAgICAgICAgLy9pZiBjdXN0b20gY2FsbGJhY2tzIGFyZSBuZWVkZWQsIHN1Y2ggYXMgVmlzdWFsaXphdGlvbiB0cmFuc2Zvcm1hdGlvbnMsIGluY2x1ZGUgdGhlbSBoZXJlLlxuICAgICAgICAvLyBUaGlzIGFsbG93cyB0byB1c2UgYW55IG9iamVjdCBjcmVhdGVkIGluIHZpei5qcyAoZ3JhcGhzLCB0b29scywgZXRjKSBpbiB0aGUgY2FsbGJhY2tzLlxuICAgICAgICAvLyBZb3Ugd2lsbCBuZWVkIHRvIG1hbnVhbGx5IGNyZWF0ZSB0aGUgY29ycmVjdCBudW1iZXIgb2YgY2FsbGJhY2tzIHRvIG1hdGNoIHRoZSB2aXogc2VjdGlvbnNcblxuICAgICAgICBsZXQgY3VzdG9tQ2FsbGJhY2tzID0gW1xuICAgICAgICAgIFtcbiAgICAgICAgICAgICgpID0+IHtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgXVxuICAgICAgICByZXR1cm4gY3VzdG9tQ2FsbGJhY2tzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF1dG9DYWxsYmFja3M7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHNldHVwVml6KGNvbnRlbnREYXRhLCBvcHRpb25zKXtcblxuICBjb25zdCBmdWxsU3RydWN0dXJlID0gZ2V0U3RydWN0dXJlKGNvbnRlbnREYXRhLCBvcHRpb25zKTtcbiAgY29uc29sZS5sb2coJ2NoZWNraW5nIHN0cnVjdHVyZTonLCBmdWxsU3RydWN0dXJlKTtcbiAgZnVsbFN0cnVjdHVyZS5tYXAoc2VjdGlvbk9iaiA9PiB7XG5cbiAgICBpZihzZWN0aW9uT2JqLnNlY3Rpb25UeXBlID09PSBcInZpei1zZWN0aW9uXCIpe1xuICAgICAgc2VjdGlvbk9iai5zdGVwcy5tYXAoKHN0ZXAsaW5kZXgpID0+IHtcbiAgICAgICAgICBpZihzdGVwLnZpc3VhbCAhPT0gXCJcIil7XG4gICAgICAgICAgICBpZihpbmRleCA9PT0gMCl7XG4gICAgICAgICAgICAgIGQzLnNlbGVjdChgIyR7c2VjdGlvbk9iai5rZXl9XyR7aW5kZXh9YCkuc3R5bGUoJ29wYWNpdHknLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIGQzLnNlbGVjdChgIyR7c2VjdGlvbk9iai5rZXl9XyR7aW5kZXh9YCkuc3R5bGUoJ29wYWNpdHknLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG59KTtcbn1cblxuZnVuY3Rpb24gc2V0dXBWaWRlb3MoKXtcbiAgbGV0IHZpZGVvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ2aWRlb1wiKTtcbiAgICB2aWRlb3MuZm9yRWFjaCgodmlkZW8pID0+IHtcbiAgICAgIC8vIFdlIGNhbiBvbmx5IGNvbnRyb2wgcGxheWJhY2sgd2l0aG91dCBpbnN0ZXJhY3Rpb24gaWYgdmlkZW8gaXMgbXV0ZVxuICAgICAgdmlkZW8ubXV0ZWQgPSB0cnVlO1xuICAgICAgdmlkZW8uY3VycmVudFRpbWUgPSAwO1xuICAgICAgLy8gUGxheSBpcyBhIHByb21pc2Ugc28gd2UgbmVlZCB0byBjaGVjayB3ZSBoYXZlIGl0XG4gICAgICBsZXQgcGxheVByb21pc2UgPSB2aWRlby5wbGF5KCk7XG4gICAgICBpZiAocGxheVByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHBsYXlQcm9taXNlLnRoZW4oKF8pID0+IHtcbiAgICAgICAgICAgICAgbGV0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICAgICAgICAgICAgKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LmludGVyc2VjdGlvblJhdGlvICE9PSAxICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdmlkZW8ucGF1c2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2aWRlby5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHsgdGhyZXNob2xkOiAwLjIgfVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHZpZGVvKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbn1cbiIsIi8qKlxyXG4gKiBzY3JvbGxlci5qc1xyXG4gKiA9PT09PT09PT09PVxyXG4gKiBEZWZpbmVzIHRoZSBsb2dpYyB1c2VkIGJ5IHRoZSBzY3JvbGxlci4gVGhpcyBzY3JpcHQgZG9lcyBub3QgbmVlZCBleHRlcm5hbCBkZXBlbmRlbmNpZXMgYW5kIHVzZXMgbmF0aXZlIGZ1bmN0aW9uc1xyXG4gKiBvZiB0aGUgYnJvd3Nlci5cclxuICpcclxuICogLyFcXCBQTEVBU0UsIERPIE5PVCBNT0RJRlkgVEhJUyBGSUxFLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEFudG9pbmUgQsOpbGFuZCA8YWJlbGFuZEBsZWRldm9pci5jb20+XHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuLyoqXHJcbiAqIERlZmluZXMgYSBzdGVwIGFzc29jaWF0ZWQgd2l0aCBhIHNwZWNpZmljIHZpc3VhbGl6YXRpb24uIEEgc3RlcCBpcyBhY3RpdmF0ZWQgb3IgZGVhY3RpdmF0ZWQgYmFzZWQgb24gdGhlIHNjcm9sbFxyXG4gKiBwb3NpdGlvbi4gVGhpcyBjbGFzcyBpcyB1c2VkIGJ5IHRoZSBzY3JvbGxlciBmdW5jdGlvbi5cclxuICovXHJcbmNsYXNzIFNjcm9sbGVyU3RlcCB7XHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgU2Nyb2xsZXJTdGVwLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGVsICAgICAgICAgIFRoZSBuYXRpdmUgZWxlbWVudCB0aGF0IHJlcHJlc2VudHMgdGhlIHN0ZXAgaW4gdGhlIEhUTUwgZG9jdW1lbnQuXHJcbiAgICogQHBhcmFtIGluZGV4ICAgICAgIFRoZSBpbmRleCBvZiB0aGUgc3RlcC5cclxuICAgKiBAcGFyYW0gY2FsbGJhY2sgICAgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgc3RlcCBpcyBhY3RpdmF0ZS5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihlbCwgaW5kZXgsIGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLmVsID0gZWw7XHJcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XHJcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICB0aGlzLl9pc0FjdGl2YXRlID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBY3RpdmF0ZXMgdGhlIGN1cnJlbnQgc3RlcC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBzY3JvbGxEaXJlY3Rpb24gICBUaGUgY3VycmVudCBzY3JvbGwgZGlyZWN0aW9uLlxyXG4gICAqL1xyXG4gIGFjdGl2YXRlKHNjcm9sbERpcmVjdGlvbikge1xyXG4gICAgaWYgKHRoaXMuX2lzQWN0aXZhdGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faXNBY3RpdmF0ZSA9IHRydWU7XHJcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgdGhpcy5jYWxsYmFjayhzY3JvbGxEaXJlY3Rpb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGVhY3RpdmF0ZXMgdGhlIGN1cnJlbnQgc3RlcC5cclxuICAgKi9cclxuICBkZWFjdGl2YXRlKCkge1xyXG4gICAgaWYgKCF0aGlzLl9pc0FjdGl2YXRlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX2lzQWN0aXZhdGUgPSBmYWxzZTtcclxuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRGVmaW5lcyB0aGUgc2Nyb2xsIGRpcmVjdGlvbnMuXHJcbiAqXHJcbiAqIEB0eXBlIHt7dXA6IHN0cmluZywgZG93bjogc3RyaW5nfX1cclxuICovXHJcbmV4cG9ydCBjb25zdCBzY3JvbGxEaXJlY3Rpb25zID0ge1xyXG4gIHVwOiAndXAnLFxyXG4gIGRvd246ICdkb3duJ1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIERlZmluZXMgdGhlIHNjcm9sbGVyIHRvIHVzZSB3aXRoIHRoZSBMZSBEZXZvaXIncyBzY3JvbGx5dGVsbGluZyBhcnRpY2xlcy4gUGxlYXNlIHNlZSBcIlJFQURNRS5tZFwiXHJcbiAqIHRvIGtub3cgaG93IHRvIHVzZSBpdC5cclxuICpcclxuICogLyFcXCBCZSBzdXJlIHRvIHVzZSB0aGUgZ29vZCBDU1MgY2xhc3MgbmFtZXMgaW4geW91ciBIVE1MIGZpbGUgYmVmb3JlIHRvIHVzZSB0aGUgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBjYWxsYmFja3MgICBBIG11bHRpLWRpbWVuc2lvbmFsIGFycmF5IG9mIGNhbGxiYWNrcyB0byB1c2Ugd2l0aCBlYWNoIHN0ZXAuXHJcbiAqIEByZXR1cm5zIHsqfSAgICAgICBUaGUgaW5zdGFuY2Ugb2YgdGhlIHNjcm9sbGVyLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNjcm9sbGVyKGNhbGxiYWNrcykge1xyXG4gIGxldCBfb2Zmc2V0VG9wID0gMDtcclxuICBsZXQgX29mZnNldEJvdHRvbSA9IDA7XHJcblxyXG4gIGxldCBpbm5lckhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICBsZXQgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gIGxldCBsYXN0U2Nyb2xsID0gMDtcclxuICBsZXQgc3RlcHMgPSBbXTtcclxuICBsZXQgdml6ID0gW107XHJcbiAgbGV0IHZpc2libGVTdGVwcyA9IFtdO1xyXG4gIFxyXG4gIGNvbnN0IGFydGljbGVSZW1pbmRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlLXJlbWluZGVyJyk7XHJcbiAgY29uc3Qgc2Nyb2xsUHJvZ3Jlc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgPiAucHJvZ3Jlc3MnKTtcclxuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRyby1zZWN0aW9uIGgxJyk7XHJcblxyXG4gIGNvbnN0IHZpelNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZpei1zZWN0aW9uJyk7XHJcbiAgaWYgKHZpelNlY3Rpb25zLmxlbmd0aCAhPT0gY2FsbGJhY2tzLmxlbmd0aCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgbnVtYmVyIG9mIHZpeiBzZWN0aW9ucyAoJHt2aXpTZWN0aW9ucy5sZW5ndGh9KSBtaXNtYXRjaCB3aXRoIHRoZSBsZW5ndGggb2YgdGhlIGZpcnN0IGAgK1xyXG4gICAgICBgZGltZW5zaW9uIG9mIHRoZSBjYWxsYmFja3MgYXJyYXkgKCR7Y2FsbGJhY2tzLmxlbmd0aH0pLiBQbGVhc2UsIGJlIHN1cmUgdGhhdCB0aGUgdHdvIGVsZW1lbnRzIGAgK1xyXG4gICAgICBgaGF2ZSB0aGUgc2FtZSBzaXplLmApO1xyXG4gIH1cclxuICB2aXpTZWN0aW9ucy5mb3JFYWNoKCh2aXpTZWN0aW9uLCBpKSA9PiB7XHJcbiAgICBjb25zdCBzZWN0aW9ucyA9IFsuLi52aXpTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlY3Rpb24nKV07XHJcbiAgICBpZiAoc2VjdGlvbnMubGVuZ3RoICE9PSBjYWxsYmFja3NbaV0ubGVuZ3RoKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIG51bWJlciBvZiBzdGVwcyAoJHtzZWN0aW9ucy5sZW5ndGh9KSBpbiB0aGUgdml6IHNlY3Rpb24gIyR7aSArIDF9IG1pc21hdGNoIHdpdGggdGhlIGAgK1xyXG4gICAgICAgIGBudW1iZXIgb2YgY2FsbGJhY2tzIHNwZWNpZmllZCAoJHtjYWxsYmFja3NbaV0ubGVuZ3RofSkgYXQgdGhlIGluZGV4IFwiJHtpfVwiLiBQbGVhc2UsIGJlIHN1cmUgdGhhdCB0aGUgdHdvIGAgK1xyXG4gICAgICAgIGBlbGVtZW50cyBoYXZlIHRoZSBzYW1lIHNpemUuYCk7XHJcbiAgICB9XHJcbiAgICBzdGVwcyA9IHN0ZXBzLmNvbmNhdChzZWN0aW9ucy5tYXAoKGUsIGopID0+IG5ldyBTY3JvbGxlclN0ZXAoZSwgYCR7aX0tJHtqfWAsIGNhbGxiYWNrc1tpXVtqXSkpKTtcclxuICAgIHZpeiA9IHZpei5jb25jYXQodml6LCB2aXpTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy52aXogPiAqJykpO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGVzIHRoZSBkaXNwbGF5IGJhc2VkIG9uIHNjcm9sbGJhciBwb3NpdGlvbi5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNvbnN0IF91cGRhdGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U2Nyb2xsID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICBzdGVwcy5mb3JFYWNoKHN0ZXAgPT4ge1xyXG4gICAgICAvLyBDaGVjayBpZiB0aGUgY3VycmVudCBzdGVwIGlzIGluIHRoZSB2aWV3cG9ydC5cclxuICAgICAgY29uc3QgYm91bmRpbmdSZWN0ID0gc3RlcC5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgaWYgKGlubmVySGVpZ2h0IC0gYm91bmRpbmdSZWN0LnRvcCAtIF9vZmZzZXRCb3R0b20gPiAwXHJcbiAgICAgICAgJiYgYm91bmRpbmdSZWN0LnRvcCArIGJvdW5kaW5nUmVjdC5oZWlnaHQgLSBfb2Zmc2V0VG9wID4gMCkge1xyXG4gICAgICAgIHZpc2libGVTdGVwcy5wdXNoKHN0ZXApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0ZXAuZGVhY3RpdmF0ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBEaXNwbGF5IHRoZSB0aXRsZSBhcyBhIHJlbWluZGVyIHdoZW4gdGhlIG1haW4gYXJ0aWNsZSB0aXRsZSBpcyBoaWRkZW4uXHJcbiAgICBjb25zdCBpc0FydGljbGVSZW1pbmRlckRpc3BsYXllZCA9IHRpdGxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA8PSAwO1xyXG4gICAgY29uc3QgaXNBcnRpY2xlUmVtaW5kZXJJc1Zpc2libGUgPSBhcnRpY2xlUmVtaW5kZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJyk7XHJcbiAgICBpZiAoaXNBcnRpY2xlUmVtaW5kZXJEaXNwbGF5ZWQgJiYgIWlzQXJ0aWNsZVJlbWluZGVySXNWaXNpYmxlKSB7XHJcbiAgICAgIGFydGljbGVSZW1pbmRlci5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJylcclxuICAgIH0gZWxzZSBpZiAoIWlzQXJ0aWNsZVJlbWluZGVyRGlzcGxheWVkICYmIGlzQXJ0aWNsZVJlbWluZGVySXNWaXNpYmxlKSB7XHJcbiAgICAgIGFydGljbGVSZW1pbmRlci5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJylcclxuICAgIH1cclxuXHJcbiAgICAvLyBGb3IgdGhlIHZpc2libGUgc3RlcHMsIGNob29zZSB0aGUgZ29vZCBvbmUgYmFzZWQgb24gdGhlIHNjcm9sbCBkaXJlY3Rpb24uXHJcbiAgICB2aXNpYmxlU3RlcHMuZm9yRWFjaCgoc2VjdGlvbiwgaSkgPT4ge1xyXG4gICAgICBpZiAoY3VycmVudFNjcm9sbCA+PSBsYXN0U2Nyb2xsKSB7IC8vIFNjcm9sbCBkb3duICjihpMpXHJcbiAgICAgICAgaWYgKGkgPT09IHZpc2libGVTdGVwcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICBzZWN0aW9uLmFjdGl2YXRlKHNjcm9sbERpcmVjdGlvbnMuZG93bik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNlY3Rpb24uZGVhY3RpdmF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHsgLy8gU2Nyb2xsIHVwICjihpEpXHJcbiAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgIHNlY3Rpb24uYWN0aXZhdGUoc2Nyb2xsRGlyZWN0aW9ucy51cCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNlY3Rpb24uZGVhY3RpdmF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBfdXBkYXRlU2Nyb2xsUHJvZ3Jlc3MoKTtcclxuXHJcbiAgICAvLyBSZXNldCB0aGUgdmFyaWFibGVzIGZvciB0aGUgbmV4dCBmdW5jdGlvbiBjYWxsLlxyXG4gICAgdmlzaWJsZVN0ZXBzID0gW107XHJcbiAgICBsYXN0U2Nyb2xsID0gY3VycmVudFNjcm9sbDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGVzIHRoZSBzY3JvbGwgcHJvZ3Jlc3Npb24gaW5kaWNhdG9yLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY29uc3QgX3VwZGF0ZVNjcm9sbFByb2dyZXNzID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgd2luU2Nyb2xsID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgIGNvbnN0IGhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgY29uc3Qgc2Nyb2xsZWQgPSAod2luU2Nyb2xsIC8gaGVpZ2h0KSAqIDEwMDtcclxuICAgIHNjcm9sbFByb2dyZXNzLnN0eWxlLndpZHRoID0gc2Nyb2xsZWQgKyAnJSc7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcHVibGljSW50ZXJmYWNlID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgc2Nyb2xsZXIuIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBjYW4gYmUgb25seSBjYWxsZWQgb25jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIGluc3RhbmNlIG9mIHRoZSBzY3JvbGxlci5cclxuICAgICAqL1xyXG4gICAgaW5pdGlhbGl6ZTogKCkgPT4ge1xyXG4gICAgICBpZiAoaXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNjcm9sbGVyIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQuJyk7XHJcbiAgICAgIH1cclxuICAgICAgaXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBfdXBkYXRlKTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICBpbm5lckhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICBfdXBkYXRlU2Nyb2xsUHJvZ3Jlc3MoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICgod2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApID4gMCkge1xyXG4gICAgICAgIF91cGRhdGUoKTtcclxuICAgICAgfVxyXG4gICAgICBfdXBkYXRlU2Nyb2xsUHJvZ3Jlc3MoKTtcclxuICAgICAgcmV0dXJuIHB1YmxpY0ludGVyZmFjZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIG9yIHNldHMgdGhlIHRvcCBvZmZzZXQgdG8gdXNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvZmZzZXRUb3BcclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgaW5zdGFuY2Ugb2YgdGhlIHNjcm9sbGVyLlxyXG4gICAgICovXHJcbiAgICBvZmZzZXRUb3A6IG9mZnNldFRvcCA9PiB7XHJcbiAgICAgIGlmIChvZmZzZXRUb3AgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBfb2Zmc2V0VG9wO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihvZmZzZXRUb3ApKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgb2Zmc2V0IG11c3QgYmUgYW4gaW50ZWdlciBudW1iZXIuJyk7XHJcbiAgICAgIH1cclxuICAgICAgX29mZnNldFRvcCA9IG9mZnNldFRvcDtcclxuICAgICAgcmV0dXJuIHB1YmxpY0ludGVyZmFjZTtcclxuICAgIH0gLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBvciBzZXRzIHRoZSBib3R0b20gb2Zmc2V0IHRvIHVzZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0Qm90dG9tXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIGluc3RhbmNlIG9mIHRoZSBzY3JvbGxlci5cclxuICAgICAqL1xyXG4gICAgb2Zmc2V0Qm90dG9tOiBvZmZzZXRCb3R0b20gPT4ge1xyXG4gICAgICBpZiAob2Zmc2V0Qm90dG9tID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gX29mZnNldEJvdHRvbTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIob2Zmc2V0Qm90dG9tKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIG9mZnNldCBtdXN0IGJlIGFuIGludGVnZXIgbnVtYmVyLicpO1xyXG4gICAgICB9XHJcbiAgICAgIF9vZmZzZXRCb3R0b20gPSBvZmZzZXRCb3R0b207XHJcbiAgICAgIHJldHVybiBwdWJsaWNJbnRlcmZhY2U7XHJcbiAgICB9XHJcbiAgfTtcclxuICByZXR1cm4gcHVibGljSW50ZXJmYWNlO1xyXG59XHJcbiIsIlxyXG5pbXBvcnQgeyBpbml0aWFsaXplIGFzIHYxIH0gZnJvbSAnLi4vdml6JztcclxuaW1wb3J0IHsgc2Nyb2xsZXIgfSBmcm9tICcuLi9zY3JvbGxlcic7XHJcbmltcG9ydCBMYXp5TG9hZCBmcm9tIFwidmFuaWxsYS1sYXp5bG9hZFwiO1xyXG5jb25zdCBoZWFkZXJIZWlnaHQgPSA0MDtcclxuaW1wb3J0IHN0aWNreUJpdHMgZnJvbSAnc3RpY2t5Yml0cydcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0U2Nyb2xsZXIoY29udGVudERhdGEsIHBhcmFtc0RhdGEpe1xyXG5cclxuICAgIGxldCBlbGVtZW50cyA9IFtdO1xyXG4gICAgWycudml6JywgJy5mdWxsLXBhZ2Utc2VjdGlvbiA+IGltZycsICcuZnVsbC1wYWdlLXNlY3Rpb24gPiB2aWRlbyddLmZvckVhY2goc2VsZWN0b3IgPT4ge1xyXG4gICAgICBlbGVtZW50cyA9IGVsZW1lbnRzLmNvbmNhdChBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSk7XHJcbiAgICB9KTtcclxuICAgIHN0aWNreUJpdHMoZWxlbWVudHMsIHsgc3RpY2t5Qml0U3RpY2t5T2Zmc2V0OiBoZWFkZXJIZWlnaHQgfSk7XHJcbiAgXHJcbiAgICBjb25zdCBsbCA9IG5ldyBMYXp5TG9hZCh7XHJcbiAgICAgIGVsZW1lbnRzX3NlbGVjdG9yOiBcIi5sYXp5XCIsXHJcbiAgICAgIHRocmVzaG9sZDogNTAwXHJcbiAgICB9KTtcclxuICBcclxuICAgIFByb21pc2UuYWxsKFt2MShjb250ZW50RGF0YSwgcGFyYW1zRGF0YSldKS50aGVuKChbY2FsbGJhY2tzVjFdKSA9PiAge1xyXG4gICAgICBzY3JvbGxlcihjYWxsYmFja3NWMSlcclxuICAgICAgICAub2Zmc2V0VG9wKGhlYWRlckhlaWdodClcclxuICAgICAgICAub2Zmc2V0Qm90dG9tKDApXHJcbiAgICAgICAgLmluaXRpYWxpemUoKTtcclxuICAgIH0pO1xyXG4gIH0iLCJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbnRyb1NlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9JbnRyb1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IFRleHRTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVGV4dFNlY3Rpb24uanNcIjtcbmltcG9ydCB7IFZpelNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9WaXpTZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBGdWxsUGFnZVNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9GdWxsUGFnZVNlY3Rpb24uanNcIjtcbmltcG9ydCB7IG9wdGlvbnNEcm9wZG93bkNvbnN0YW50cyB9IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHBhcnNlIGZyb20gXCJodG1sLXJlYWN0LXBhcnNlclwiO1xuaW1wb3J0IHsgZ2V0U3RydWN0dXJlIH0gZnJvbSBcIi4vc3RydWN0dXJlR2VuZXJhdG9yLmpzXCI7XG5pbXBvcnQgeyBpbml0U2Nyb2xsZXIgfSBmcm9tIFwiLi9pbml0U2Nyb2xsZXIuanNcIjtcblxuXG4vKipcbiAqIFRha2UgcHJvcHMgKGFydGljbGUgc3RydWN0dXJlIGFzIENTViBhbmQgcGFyYW1zKSBhbmQgdHJhbnNmb3JtIGl0IGFzIEhUTUwgYXJjaGl0ZWN0dXJlXG4gKiBAcGFyYW0gIHtPYmplY3R9IGNvbnRlbnREYXRhIEFydGljbGUncyBDU1Ygc3RydWN0dXJlXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zRGF0YSBBcnRpY2xlIHBhcmFtZXRlcnNcbiAqIEByZXR1cm4ge09iamVjdH0gT2JqIEhUTUwgY29kZVxuICovXG5leHBvcnQgZnVuY3Rpb24gUmVuZGVyU3RydWN0dXJlKHByb3BzKXtcbiAgICBpZihwcm9wcy5yZW5kZXJlZCl7XG4gICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG5cbiAgICAgICAgICAgIGluaXRTY3JvbGxlcihwcm9wcy5jb250ZW50RGF0YSwgcHJvcHMucGFyYW1zRGF0YSk7XG5cbiAgICAgICAgfSwgW10pO1xuICAgIH1cblxuICAgIHJldHVybiByZW5kZXJEYXRhKGdldFN0cnVjdHVyZShwcm9wcy5jb250ZW50RGF0YSwgcHJvcHMucGFyYW1zRGF0YSkpO1xuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJEYXRhKHN0cnVjdHVyZURhdGEpe1xuXG4gICAgbGV0IHJlbmRlcmVkRGF0YSA9IHt9O1xuXG4gICAgT2JqZWN0LmtleXMoc3RydWN0dXJlRGF0YSkubWFwKChzZWN0aW9uS2V5LGluZGV4KSA9PiB7XG4gICAgICAgIGxldCBjdXJTZWN0aW9uID0gc3RydWN0dXJlRGF0YVtzZWN0aW9uS2V5XTtcbiAgICAgICAgaWYoY3VyU2VjdGlvbi5zZWN0aW9uVHlwZSA9PT0gb3B0aW9uc0Ryb3Bkb3duQ29uc3RhbnRzLnNlY3Rpb250eXBlcy5pbnRyb3RpdHJlKXtcbiAgICAgICAgICAgIHJlbmRlcmVkRGF0YVtzZWN0aW9uS2V5XSA9ICgoPEludHJvU2VjdGlvbiBrZXk9e2N1clNlY3Rpb24ua2V5fSBzZWN0aW9uVHlwZT17Y3VyU2VjdGlvbi5zZWN0aW9uVHlwZX0gb3B0aW9uRGF0YT17Y3VyU2VjdGlvbi5vcHRpb25EYXRhfSBhbW9yY2U9e3BhcnNlKGN1clNlY3Rpb24uYW1vcmNlKX0gYmFja2dyb3VuZD17Y3VyU2VjdGlvbi5iYWNrZ3JvdW5kfSBjbGFzc2VzPXtjdXJTZWN0aW9uLmNsYXNzZXN9IC8+KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihjdXJTZWN0aW9uLnNlY3Rpb25UeXBlID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnRleHRlY2xhc3NpcXVlKXtcblxuICAgICAgICAgICAgcmVuZGVyZWREYXRhW3NlY3Rpb25LZXldID0gKCg8VGV4dFNlY3Rpb24ga2V5PXtjdXJTZWN0aW9uLmtleX0gaWQ9e2N1clNlY3Rpb24ua2V5fSBzZWN0aW9uVHlwZT17Y3VyU2VjdGlvbi5zZWN0aW9uVHlwZX0gdGV4dHM9e2N1clNlY3Rpb24udGV4dHN9IGJhY2tncm91bmQ9e2N1clNlY3Rpb24uYmFja2dyb3VuZH0gY2xhc3Nlcz17Y3VyU2VjdGlvbi5jbGFzc2VzfSB2aXN1ZWxjbGFzc2VzPXtjdXJTZWN0aW9uLnZpc3VlbGNsYXNzZXN9IHZpc3VhbD17Y3VyU2VjdGlvbi52aXN1YWx9IGZpbGVuYW1lPXtjdXJTZWN0aW9uLmZpbGVuYW1lfS8+KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihjdXJTZWN0aW9uLnNlY3Rpb25UeXBlID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnBsZWluZXBhZ2V0aXRyZSl7XG4gICAgICAgICAgICByZW5kZXJlZERhdGFbc2VjdGlvbktleV0gPSAoKDxGdWxsUGFnZVNlY3Rpb24ga2V5PXtjdXJTZWN0aW9uLmtleX0gaWQ9e2N1clNlY3Rpb24ua2V5fSBzZWN0aW9uVHlwZT17Y3VyU2VjdGlvbi5zZWN0aW9uVHlwZX0gYmFja2dyb3VuZD17Y3VyU2VjdGlvbi5iYWNrZ3JvdW5kfSBjbGFzc2VzPXtjdXJTZWN0aW9uLmNsYXNzZXN9IHZpc3VlbGNsYXNzZXM9e2N1clNlY3Rpb24udmlzdWVsY2xhc3Nlc30gdmlzdWFsPXtjdXJTZWN0aW9uLnZpc3VhbH0gbWFpblRpdGxlPXtjdXJTZWN0aW9uLnRleHRzLm1haW5UaXRsZX0gc3ViVGl0bGU9e2N1clNlY3Rpb24udGV4dHMuc3ViVGl0bGV9IGZpbGVuYW1lPXtjdXJTZWN0aW9uLmZpbGVuYW1lfSAvPikpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihjdXJTZWN0aW9uLnNlY3Rpb25UeXBlID09PSBvcHRpb25zRHJvcGRvd25Db25zdGFudHMuc2VjdGlvbnR5cGVzLnZpenNlY3Rpb24pe1xuICAgICAgICAgICAgcmVuZGVyZWREYXRhW3NlY3Rpb25LZXldID0gKDxWaXpTZWN0aW9uIGtleT17Y3VyU2VjdGlvbi5rZXl9IGxpc3RJRD17Y3VyU2VjdGlvbi5saXN0SUR9IHN0ZXBzPXtjdXJTZWN0aW9uLnN0ZXBzfSBjbGFzc2VkPXtjdXJTZWN0aW9uLmNsYXNzZWR9IG1lZGlhSW5mbz17Y3VyU2VjdGlvbi5tZWRpYUluZm99IGJhY2tncm91bmQ9e2N1clNlY3Rpb24uYmFja2dyb3VuZH0vPik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhyZW5kZXJlZERhdGEpO1xufVxuIiwiLyoqXG4gKiBhcHAuanNcbiAqID09PT09PVxuICogTWFpbiBmaWxlIG9mIHRoZSBhcHBsaWNhdGlvbi4gVGhpcyBmaWxlIGlzIHVzZWQgdG8gaW5pdGlhbGl6ZSB0aGUgc2Nyb2xsZXIgYW5kIGltcG9ydHMgdGhlIHZpc3VhbGl6YXRpb25zIHVzZWQuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHN0cnVjdHVyZSBmcm9tICcuLi9kYXRhL3N0cnVjdHVyZS9zdHJ1Y3R1cmUuanNvbic7XG5cbmlmKCFFTlZfQ09ORklHLmRvd25sb2FkU3RydWMpe1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcm9vdCcpLmlubmVySFRNTCA9IChzdHJ1Y3R1cmUuaHRtbHN0cnVjKTtcbn1cblxuaW1wb3J0ICcuLi9hc3NldHMvc3R5bGVzL3N0eWxlLnNjc3MnO1xuaW1wb3J0IHtnb29nbGVfY29uZmlnfSBmcm9tIFwiLi4vZGF0YS9nb29nbGVfY29uZmlnXCI7XG5pbXBvcnQgeyBSZW5kZXJTdHJ1Y3R1cmUgfSBmcm9tICcuL2dlbmVyYXRvci9SZW5kZXJTdHJ1Y3R1cmUnO1xuaW1wb3J0IHsgaW5pdFNjcm9sbGVyIH0gZnJvbSAnLi9nZW5lcmF0b3IvaW5pdFNjcm9sbGVyJztcbmltcG9ydCB7IGdlbmVyYXRlQ2FsbGJhY2tzIH0gZnJvbSAnLi9nZW5lcmF0b3Ivc3RydWN0dXJlR2VuZXJhdG9yJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xuXG5pZihFTlZfQ09ORklHLmRvd25sb2FkU3RydWMpe1xuICBQcm9taXNlLmFsbChbaW1wb3J0KFwicmVhY3QtZG9tL2NsaWVudFwiKSwgaW1wb3J0KFwicmVhY3QtZG9tL3NlcnZlclwiKSwgaW1wb3J0KFwicmVhY3RcIildKVxuICAgIC50aGVuKHBhY2thZ2VzID0+IHtcbiAgICAgIGNvbnN0IFJlYWN0RE9NID0gcGFja2FnZXNbMF07XG4gICAgICBjb25zdCBSZWFjdERPTVNlcnZlciA9IHBhY2thZ2VzWzFdO1xuICAgICAgY29uc3QgUmVhY3QgPSBwYWNrYWdlc1syXTtcbiAgICAgIGFkZE5vdFB1Ymxpc2hlZCgpO1xuICAgICAgaWYoRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcuY29udGVudFVSTCkudGhlbiggY29udGVudERhdGEgPT4ge1xuICAgICAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLnBhcmFtc1VSTCkudGhlbiggcGFyYW1zRGF0YSA9PiB7XG4gICAgICAgICAgICBjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJvb3RcIikpO1xuICAgICAgICAgICAgcm9vdC5yZW5kZXIoXG4gICAgICAgICAgICAgIDxSZW5kZXJTdHJ1Y3R1cmUgY29udGVudERhdGE9e2NvbnRlbnREYXRhfSBwYXJhbXNEYXRhPXtwYXJhbXNEYXRhfSByZW5kZXJlZD17dHJ1ZX0vPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGFkZEZvb3RlcigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIGQzLmNzdihnb29nbGVfY29uZmlnLmNvbnRlbnRVUkwpLnRoZW4oIGNvbnRlbnREYXRhID0+IHtcbiAgICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5wYXJhbXNVUkwpLnRoZW4oIHBhcmFtc0RhdGEgPT4ge1xuICAgICAgICAgICAgZDMuYmxvYihnb29nbGVfY29uZmlnLmNvbnRlbnRVUkwpLnRoZW4oY29udGVudEJsb2IgPT4ge1xuICAgICAgICAgICAgICBkMy5ibG9iKGdvb2dsZV9jb25maWcucGFyYW1zVVJMKS50aGVuKHBhcmFtc0Jsb2IgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlZFN0cnVjID0gUmVuZGVyU3RydWN0dXJlKHtjb250ZW50RGF0YTogY29udGVudERhdGEsIHBhcmFtc0RhdGE6IHBhcmFtc0RhdGEsIHJlbmRlcjogZmFsc2V9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBodG1sU3RydWMgPSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cChnZW5lcmF0ZWRTdHJ1Yyk7XG4gICAgICAgICAgICAgICAgd3JpdGVIVE1MZmlsZShodG1sU3RydWMsIGNvbnRlbnRCbG9iLCBwYXJhbXNCbG9iKTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZUNhbGxiYWNrcyhjb250ZW50RGF0YSxwYXJhbXNEYXRhKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KVxufVxuZWxzZXtcbiAgaWYoRU5WX0NPTkZJRy5hdXRvcmVuZGVyKXtcbiAgICBQcm9taXNlLmFsbChbaW1wb3J0KFwicmVhY3QtZG9tL2NsaWVudFwiKSwgaW1wb3J0KFwicmVhY3RcIildKVxuICAgIC50aGVuKHBhY2thZ2VzID0+IHtcbiAgICAgIGNvbnN0IFJlYWN0RE9NID0gcGFja2FnZXNbMF07XG4gICAgICBjb25zdCBSZWFjdCA9IHBhY2thZ2VzWzFdO1xuICAgICAgZDMuY3N2KGdvb2dsZV9jb25maWcuY29udGVudFVSTCkudGhlbiggY29udGVudERhdGEgPT4ge1xuICAgICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5wYXJhbXNVUkwpLnRoZW4oIHBhcmFtc0RhdGEgPT4ge1xuICAgICAgICAgIGNvbnN0IHJvb3QgPSBSZWFjdERPTS5jcmVhdGVSb290KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKSk7XG4gICAgICAgICAgcm9vdC5yZW5kZXIoXG4gICAgICAgICAgICA8UmVuZGVyU3RydWN0dXJlIGNvbnRlbnREYXRhPXtjb250ZW50RGF0YX0gcGFyYW1zRGF0YT17cGFyYW1zRGF0YX0gcmVuZGVyZWQ9e3RydWV9Lz5cbiAgICAgICAgICApO1xuICAgICAgICAgIGFkZEZvb3RlcigpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIGVsc2V7XG4gICAgZDMuY3N2KGdvb2dsZV9jb25maWcubG9jYWxDb250ZW50VVJMKS50aGVuKCBjb250ZW50RGF0YSA9PiB7XG4gICAgICBkMy5jc3YoZ29vZ2xlX2NvbmZpZy5sb2NhbFBhcmFtc1VSTCkudGhlbiggcGFyYW1zRGF0YSA9PiB7XG4gICAgICAgIGluaXRTY3JvbGxlcihjb250ZW50RGF0YSwgcGFyYW1zRGF0YSk7XG4gICAgICAgIGFkZEZvb3RlcigpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gd3JpdGVIVE1MZmlsZShIVE1MU3RydWN0LCBjb250ZW50RGF0YSwgcGFyYW1zRGF0YSl7XG4gIGxldCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHtodG1sc3RydWM6IGAke0hUTUxTdHJ1Y3R9YH0sIG51bGwsIDIpXSwge3R5cGU6IFwidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04XCJ9KTtcbiAgbGV0IGNvbnRlbnRDU1YgPSBuZXcgQmxvYihbY29udGVudERhdGFdLCB7dHlwZTogXCJ0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04XCJ9KTtcbiAgbGV0IHBhcmFtc0NTViA9IG5ldyBCbG9iKFtwYXJhbXNEYXRhXSwge3R5cGU6IFwidGV4dC9jc3Y7Y2hhcnNldD11dGYtOFwifSk7XG5cbiAgc2F2ZUFzKGNvbnRlbnRDU1YsIFwiY29udGVudERhdGEuY3N2XCIpO1xuICBzYXZlQXMocGFyYW1zQ1NWLCBcInBhcmFtc0RhdGEuY3N2XCIpO1xuICBzYXZlQXMoYmxvYiwgXCJzdHJ1Y3R1cmUuanNvblwiKTtcbn1cblxuZnVuY3Rpb24gYWRkTm90UHVibGlzaGVkKCl7XG4gIGNvbnN0IGRpdiA9IGQzLnNlbGVjdCgnLnB1bGwtcmlnaHQnKS5pbnNlcnQoXCJsaVwiLCdsaScpO1xuICBkaXYuaHRtbChgPHAgY2xhc3M9J25vdC1wdWJsaXNoZWQnPk5lIHBhcyBwdWJsaWVyPC9wPmApO1xufVxuXG5mdW5jdGlvbiBhZGRGb290ZXIoKXtcbiAgLy9kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9vdGVyQ29udGFpbmVyJykucmVtb3ZlKCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb290ZXJDb250YWluZXInKS5pbm5lckhUTUwgPSBkMy5zZWxlY3QoYCNmb290ZXJDb250ZW50YCkubm9kZSgpLmlubmVySFRNTDtcbn1cbiIsImNvbnN0IGdvb2dsZV9jb25maWcgPSB7XG4gICAgXCJjb250ZW50VVJMXCI6IFwiaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvZS8yUEFDWC0xdlNFeXdKRTBWVWd5M05zcTNUZ19vaC1WczYzM1RTaW1kSUhma1hUeXo5QmJFdFdOVmd1cmQxVG91LVE1YW52ZE9pdzNjb0NGa0RDaVNZcS9wdWI/Z2lkPTAmc2luZ2xlPXRydWUmb3V0cHV0PWNzdlwiLFxuICAgIFwicGFyYW1zVVJMXCI6IFwiaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvZS8yUEFDWC0xdlNFeXdKRTBWVWd5M05zcTNUZ19vaC1WczYzM1RTaW1kSUhma1hUeXo5QmJFdFdOVmd1cmQxVG91LVE1YW52ZE9pdzNjb0NGa0RDaVNZcS9wdWI/Z2lkPTQwOTk1MDIzNyZzaW5nbGU9dHJ1ZSZvdXRwdXQ9Y3N2XCIsXG4gICAgXCJsb2NhbENvbnRlbnRVUkxcIjogXCIuL2RhdGEvc3RydWN0dXJlL2NvbnRlbnREYXRhLmNzdlwiLFxuICAgIFwibG9jYWxQYXJhbXNVUkxcIjogXCIuL2RhdGEvc3RydWN0dXJlL3BhcmFtc0RhdGEuY3N2XCJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge2dvb2dsZV9jb25maWd9O1xuIl0sIm5hbWVzIjpbIkludHJvU2VjdGlvbiIsInByb3BzIiwiaW50cm9TZWN0aW9uT2JqIiwiY2xhc3NOYW1lIiwiY2xhc3NlcyIsImFtb3JjZSIsIm9wdGlvbkRhdGEiLCJ0aXRsZSIsImJhY2tncm91bmQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsIlRleHRTZWN0aW9uIiwicXVvdGVPYmoiLCJpc1F1b3RlIiwiU3RyaW5nIiwiaW5jbHVkZXMiLCJ0ZXh0IiwidGV4dHMiLCJzcGxpdCIsImF1dGhvciIsImJpZ051bWJlck9iaiIsImlzQmlnTnVtYmVyIiwibnVtYmVyIiwidW5kZXJUZXh0IiwiaXNWaXN1YWwiLCJ2aXN1YWwiLCJ2aXN1YWxPYmoiLCJrZXkiLCJpZCIsInNyYyIsImZpbGVuYW1lIiwidmlzdWVsY2xhc3NlcyIsInBhZGRpbmdCb3R0b20iLCJhdXRvUGxheSIsImxvb3AiLCJtdXRlZCIsInBsYXlzSW5saW5lIiwicHJlbG9hZCIsInRleHRTZWN0aW9uT2JqIiwicGFyc2UiLCJzdGFydHNXaXRoIiwiRFdDaGFydCIsImlmcmFtZVJlZiIsInVzZVJlZiIsInVzZVN0YXRlIiwiaGVpZ2h0Iiwic2V0U3RhdGUiLCJvbk1lc3NhZ2UiLCJ1c2VDYWxsYmFjayIsImRhdGEiLCJzb3VyY2UiLCJjdXJyZW50IiwiY29udGVudFdpbmRvdyIsInVzZUVmZmVjdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVmIiwic2Nyb2xsaW5nIiwiZnJhbWVCb3JkZXIiLCJ3aWR0aCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImxvYWRpbmciLCJvcHRpb25zRHJvcGRvd25Db25zdGFudHMiLCJwYXJhbWV0ZXJzSGVhZGVyQ29uc3RhbnRzIiwidGl0cmUiLCJhdXRldXJzIiwiZGF0ZSIsIlZpelNlY3Rpb24iLCJzdGVwcyIsImN1clN0ZXBDbGFzc2VzIiwiY3VyQ29tbW9uQ2xhc3MiLCJ2aXpTZWN0aW9uT2JqIiwibGlzdElEIiwiY2xhc3NlZCIsIm1hcCIsInN0ZXAiLCJpbmRleCIsInN0ZXBjbGFzc2VzIiwiQXJyYXkiLCJsZW5ndGgiLCJmb3JFYWNoIiwic3RlcEVsZW0iLCJpZHgiLCJpc0FycmF5IiwiZWxlbSIsImkiLCJyZWR1Y2UiLCJhIiwiYiIsIkZ1bGxQYWdlU2VjdGlvbiIsImZ1bGxwYWdlU2VjdGlvbk9iaiIsIm1haW5UaXRsZSIsImNsYXNzIiwic3ViVGl0bGUiLCJnZXRTdHJ1Y3R1cmUiLCJjb250ZW50RGF0YSIsInBhcmFtc0RhdGEiLCJzdHJ1Y3R1cmVEYXRhIiwidml6U2VjdGlvbklEcyIsIm9wdGlvbnMiLCJnZXRPcHRpb25zIiwiY29uc29sZSIsImxvZyIsInJvd0RhdGEiLCJjdXJBbW9yY2UiLCJzZWN0aW9uQmFja2dyb3VuZCIsInNlY3Rpb25UeXBlIiwicGFyc2VDbGFzc2VzIiwiZ2FtZWlkIiwidGl0bGVPYmoiLCJpc0pzb24iLCJKU09OIiwiY3VyRGF0YSIsImF0dHJpYnV0cyIsInNjcm9sbFR5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImN1clZpelNlY3Rpb24iLCJwdXNoIiwiY3VyU2VjdGlvbiIsInNlY3Rpb25BdHRyIiwibWVkaWFJbmZvIiwiT2JqZWN0IiwidmFsdWVzIiwic3RyIiwiZSIsImZyb20iLCJqb2luIiwiYXV0aG9ycyIsInVybHMiLCJtYXBib3hnbCIsIkdhdWdlcyIsImQzIiwic2VsZWN0QWxsIiwibm9kZXMiLCJub2RlIiwiY3VyV2lkdGgiLCJhdHRyIiwiZG9sbGFycyIsInNlbGVjdCIsIk1hdGgiLCJyb3VuZCIsImNvbW1pdHRlZCIsIkludHJvQm94Iiwic3RhcnRHYW1lIiwiZ2FtZVN0YXJ0IiwiaW50cm9FbGVtIiwib25DbGljayIsIk1vbml0b3JpbmciLCJwZXJmb3JtYW5jZSIsInRlcmF3YXR0cyIsIkNob2ljZSIsInNlbGVjdGlvbiIsInNldFNlbGVjdGlvbiIsIm9iaiIsIm5leHRQcm9tcHQiLCJjb3N0IiwidXNlIiwidHJpZ2dlck5leHQiLCJjdXJQcm9tcHQiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJwYXJzZUludCIsImNoYW5nZVByb21wdCIsInVwZGF0ZURvbGxhcnMiLCJ1cGRhdGVQZXJmb3JtYW5jZSIsInByZXZpb3VzUHJvbXB0IiwiY3VySW5kZXgiLCJjaG9pY2VzIiwiY2hvaWNlIiwiY2hvaWNlc192YWx1ZXMiLCJldmVudCIsInRhcmdldCIsInVwZGF0ZVNlbGVjdGVkIiwic2hvd1RXaCIsImdhdWdlcyIsIk11bHRpU2VsZWN0aW9uIiwicmVzZXRTZWxlY3Rpb24iLCJjYWxjdWxhdGVUb3RhbFNlbGVjdGlvbiIsImFjYyIsImN1ciIsImFjY0Nvc3QiLCJhY2NQZXJmb3JtYW5jZSIsIm5ld0FycmF5IiwiUHJpbnRQcm9tcHQiLCJtZXNzYWdlIiwiUmVwYXJ0aXRpb24iLCJqZXRvbnMiLCJzZXRKZXRvbnMiLCJzZXRUZXJhd2F0dHMiLCJ1bml0cyIsInNldFVuaXRzIiwidG9rZW5zUGVyVW5pdCIsInNldFRva2Vuc1BlclVuaXQiLCJnZXRPcHRpb25QYXJhbXMiLCJuZXdVbml0cyIsInVuaXRWYWx1ZSIsIm5ld0pldG9ucyIsImN1clZhbCIsIm5ld01XIiwiY3VyT3B0aW9uUGFyYW1zIiwic3BsaXR0ZWRUcmlnZ2VyTmV4dCIsImV2ZXJ5IiwidmFsIiwiZGVmYXVsdE5leHQiLCJpbmRleE9mTWF4VmFsdWUiLCJpTWF4IiwieCIsImFyciIsInByb2Nlc3NDaG9pY2VzIiwic3BsaXR0ZWRDaG9pY2VzIiwibmFtZSIsInVuaXRUV2h2YWx1ZSIsIm1vZGlmeU9uQ2xpY2siLCJkaWZmIiwibmV3QWRkaXRpb24iLCJ0b3RhbCIsInZhbHVlIiwiUHJvbXB0Qm94IiwibmV3VmFsdWUiLCJkaWZmVmFsdWUiLCJwYXJhbSIsInJlbmRlclN3aXRjaCIsIk1haW5GcmFtZSIsImdhbWVTdGF0dXMiLCJzZXRTdGF0dXMiLCJnYW1lSW5kZXgiLCJzZXRHYW1lSW5kZXgiLCJzZXREb2xsYXJzIiwic2V0UGVyZm9ybWFuY2UiLCJtYXBPYmoiLCJnZXRHYW1lUHJvbXB0IiwiZ2FtZUVuZCIsImdhbWVEYXRhIiwiZmlsdGVyIiwiRW5naW5lIiwiY29udGFpbmVyIiwiaW50cm9PYmoiLCJ0aGlzIiwicm9vdEVsZW0iLCJhcHBlbmQiLCJlbmdpbmVSb290IiwiUmVhY3RET00iLCJpbml0RW5naW5lIiwicmVuZGVyIiwiaW5pdGlhbGl6ZSIsInRoZW4iLCJtYXBDb250YWluZXIiLCJzZXR1cFZpeiIsImZ1bGxTdHJ1Y3R1cmUiLCJzZWN0aW9uT2JqIiwiU2Nyb2xsZXJTdGVwIiwiZWwiLCJjYWxsYmFjayIsIl9pc0FjdGl2YXRlIiwic2Nyb2xsRGlyZWN0aW9uIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaW5pdFNjcm9sbGVyIiwiZWxlbWVudHMiLCJzZWxlY3RvciIsImNvbmNhdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInN0aWNreUJpdHMiLCJzdGlja3lCaXRTdGlja3lPZmZzZXQiLCJMYXp5TG9hZCIsImVsZW1lbnRzX3NlbGVjdG9yIiwidGhyZXNob2xkIiwiUHJvbWlzZSIsImFsbCIsInYxIiwiY2FsbGJhY2tzIiwiX29mZnNldFRvcCIsIl9vZmZzZXRCb3R0b20iLCJpbm5lckhlaWdodCIsImlzSW5pdGlhbGl6ZWQiLCJsYXN0U2Nyb2xsIiwidml6IiwidmlzaWJsZVN0ZXBzIiwiYXJ0aWNsZVJlbWluZGVyIiwicXVlcnlTZWxlY3RvciIsInNjcm9sbFByb2dyZXNzIiwidml6U2VjdGlvbnMiLCJFcnJvciIsInZpelNlY3Rpb24iLCJzZWN0aW9ucyIsImoiLCJfdXBkYXRlIiwiY3VycmVudFNjcm9sbCIsInBhZ2VZT2Zmc2V0IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsVG9wIiwiYm91bmRpbmdSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiZGVhY3RpdmF0ZSIsImlzQXJ0aWNsZVJlbWluZGVyRGlzcGxheWVkIiwiYm90dG9tIiwiaXNBcnRpY2xlUmVtaW5kZXJJc1Zpc2libGUiLCJjb250YWlucyIsInNlY3Rpb24iLCJhY3RpdmF0ZSIsIl91cGRhdGVTY3JvbGxQcm9ncmVzcyIsInNjcm9sbGVkIiwiYm9keSIsInNjcm9sbEhlaWdodCIsImNsaWVudEhlaWdodCIsInB1YmxpY0ludGVyZmFjZSIsIm9mZnNldFRvcCIsInVuZGVmaW5lZCIsIm9mZnNldEJvdHRvbSIsInNjcm9sbGVyIiwiUmVuZGVyU3RydWN0dXJlIiwicmVuZGVyZWQiLCJyZW5kZXJlZERhdGEiLCJrZXlzIiwic2VjdGlvbktleSIsImlubmVySFRNTCIsInN0cnVjdHVyZSIsInBhY2thZ2VzIiwiUmVhY3QiLCJnb29nbGVfY29uZmlnIiwiY3JlYXRlUm9vdCIsImdldEVsZW1lbnRCeUlkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=